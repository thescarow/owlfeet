(()=>{"use strict";var e,t,a,n,i={1975:(e,t,a)=>{a.r(t),a.d(t,{adjustMessageContainerBottomPadding:()=>u,openActiveChatInputBox:()=>h,openActivechatInputAttachmentBox:()=>r});const n=document.getElementById("allChatSection"),i=document.getElementById("activeChatSection"),o=document.getElementById("activeChatMessageContainer");let c=document.getElementById("activeChatInputTextContent"),s=document.getElementById("allChatChatBoxContainer"),d=!1,l=i.dataset.chatId.toString();function r(){document.getElementById("activeChatInputAttachmentBoxBtn").classList.add("active-chat-input-attachment-box__btn--selected");const e=document.getElementById("activeChatInputAttachmentBox");e.classList.add("active-chat-input-attachment-box--selected"),e.classList.remove("active-chat-input-attachment-box--hide"),document.getElementById("activeChatInputAttachmentBtnContainer").classList.remove("input-attachment-btn-container--hide"),document.getElementById("activeChatInputBox").classList.add("active-chat-input-box--hide"),document.getElementById("activeChatInputSendBox").classList.add("active-chat-input-send-box--hide"),document.getElementById("activeChatInputAttachmentYoutubeBtnInputBox").classList.add("input-attachment-btn-box__input-box--hide"),u()}function h(){document.getElementById("activeChatInputAttachmentBoxBtn").classList.remove("active-chat-input-attachment-box__btn--selected"),document.getElementById("activeChatInputAttachmentBox").classList.remove("active-chat-input-attachment-box--selected"),document.getElementById("activeChatInputAttachmentBtnContainer").classList.add("input-attachment-btn-container--hide"),document.getElementById("activeChatInputBox").classList.remove("active-chat-input-box--hide"),document.getElementById("activeChatInputSendBox").classList.remove("active-chat-input-send-box--hide"),u()}function u(){o.style.paddingBottom=activeChatInputContainer.clientHeight+5+"px",o.scrollTop=o.scrollHeight}function m(){document.getElementById("ActiveChatToAllChatBtn").addEventListener("click",(async()=>{if(location.hash="",""!==i.dataset.chatId){let{sendChatMessageStopTypingSocket:e}=await a.e(9033).then(a.bind(a,9033));e(i.dataset.chatId),d=!1}})),document.getElementById("activeChatHeaderPic").addEventListener("click",(async()=>{let e=i.dataset.chatId;if(""!=e){let{createActiveChatInfoModal:t}=await Promise.all([a.e(8790),a.e(3958)]).then(a.bind(a,8790));t(e)}})),document.getElementById("activeChatHeaderName").addEventListener("click",(async()=>{let e=i.dataset.chatId;if(""!=e){let{createActiveChatInfoModal:t}=await Promise.all([a.e(8790),a.e(3958)]).then(a.bind(a,8790));t(e)}}));let e=document.getElementById("activeChatCallBtn");e&&e.addEventListener("click",(async()=>{let e=i.dataset.chatId;""!==e.toString()&&p(`/call/?chat=${e}`)}));let t=document.getElementById("activeChatCallRoomBox");t&&t.addEventListener("click",(async()=>{let e=t.dataset.callRoomId;""!==e.toString()&&p(`/call/?room=${e}`)})),document.getElementById("createNewGroupChatBtn").addEventListener("click",(async()=>{let{createGroupChatFormModal:e}=await Promise.all([a.e(3455),a.e(6720),a.e(8455),a.e(1154),a.e(8984),a.e(2021),a.e(8374),a.e(29),a.e(7042),a.e(5488)]).then(a.bind(a,2814));e()})),document.getElementById("activeChatInputReplyBoxCloseBtn").addEventListener("click",(async()=>{let{closeReplyMessageBox:e}=await a.e(6025).then(a.bind(a,6025));e()})),c.addEventListener("input",(async e=>{if(""!==i.dataset.chatId){if(""!==l&&l!==i.dataset.chatId){let{sendChatMessageStopTypingSocket:e}=await a.e(9033).then(a.bind(a,9033));e(l),d=!1,l=i.dataset.chatId.toString()}l=i.dataset.chatId.toString();let e=i.dataset.chatId.toString();const t=c.value.trim();if(t&&!d){d=!0;let{sendChatMessageStartTypingSocket:t}=await a.e(9033).then(a.bind(a,9033));t(e)}else if(!t&&d){d=!1;let{sendChatMessageStopTypingSocket:t}=await a.e(9033).then(a.bind(a,9033));t(e)}}})),s.addEventListener("click",(async e=>{let t=e.target.closest(".chat-box");if(t&&s.contains(t)){let e=t.dataset.chatId;if(e){let{fetchActiveChat:t}=await a.e(7524).then(a.bind(a,7524));t(e)}}}));let n=document.getElementById("activeChatMessageContainer");n.addEventListener("click",(async e=>{console.log("activeChatMessageContainer click");let t=e.target.closest(".active-chat-user-message-box"),i=e.target.closest('.active-chat-user-message-box__btn[data-message-box-btn ="user"]'),o=e.target.closest(".active-chat-user-message-box__content-box");if(i&&n.contains(i)){t.classList.add("active-chat-user-message-box--selected");let{createUserMessageOptionModal:e}=await Promise.all([a.e(1443),a.e(2064),a.e(2449)]).then(a.bind(a,982));e(t)}else{if(!o||!n.contains(o))return;if(t.classList.contains("active-chat-user-message-box--replied-message")){let e=t.dataset.repliedMessageId,a=document.querySelector(`.active-chat-user-message-box[data-message-id="${e}"]`);a&&(a.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),a.classList.add("active-chat-user-message-box--highlight"),setTimeout((function(){a.classList.remove("active-chat-user-message-box--highlight")}),1e3))}}})),n.addEventListener("dblclick",(async e=>{let t=e.target.closest(".active-chat-user-message-box");if(t&&n.contains(t)){let e=t.dataset.messageId,{openReplyMessageBox:n}=await a.e(6025).then(a.bind(a,6025));n(e)}}))}function p(e){const t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"),t.click()}!async function(){if(!IS_INIT_CHAT_MODULE){async function e(){if(location.hash){let e=location.hash.replace("#",""),{fetchActiveChat:t}=await a.e(7524).then(a.bind(a,7524));t(e)}else document.title="Chats",n.classList.remove("all-chat-section--hide"),i.classList.add("active-chat-section--hide")}document.addEventListener("DOMContentLoaded",e),window.addEventListener("popstate",e);const t=document.getElementById("activeChatInputContainer"),c=document.getElementById("activeChatInputTextContent"),s=document.getElementById("activeChatInputAttachmentBox");c.addEventListener("input",(()=>{""===c.value?s.classList.remove("active-chat-input-attachment-box--hide"):s.classList.contains("active-chat-input-attachment-box--hide")||s.classList.add("active-chat-input-attachment-box--hide"),c.style.height="auto",c.style.height=c.scrollHeight+"px",u()}),!1);const{default:l}=await a.e(3691).then(a.bind(a,3691)),{Picker:p}=await a.e(6431).then(a.bind(a,6431));function g(e){l(c,e.native)}const v=document.getElementById("activeChatInputEmojiBtn"),b=document.getElementById("activeChatInputEmojiContainer");new p({parent:b,data:async()=>await a.e(6638).then(a.t.bind(a,6638,19)),onEmojiSelect:g,autoFocus:!1,emojiButtonColors:["rgba(155, 223, 88, 0.7)","rgba(155, 40, 88, 0.7)","rgba(40, 223, 88, 0.7)","rgba(155, 223, 88, 0.7)","rgba(40, 223, 223, 0.7)","rgba(20, 150, 150, 0.7)","rgba(150, 150, 20, 0.7)","rgba(150, 20, 150, 0.7)"],emojiButtonSize:40,emojiVersion:14,icons:"auto",maxFrequentRows:2,navPosition:"bottom",previewPosition:"none",set:"native",dynamicWidth:!0}),v.addEventListener("click",(()=>{b.classList.toggle("active-chat-input-box__emoji-container--hide")}));let{closeReplyMessageBox:y}=await a.e(6025).then(a.bind(a,6025));const{checkTimeAndCreateNewMessage:f}=await Promise.all([a.e(1443),a.e(2064),a.e(7308)]).then(a.bind(a,2064)),{updateAllChatSection:I}=await a.e(226).then(a.bind(a,226)),{default:C}=await Promise.all([a.e(3455),a.e(6720),a.e(5766)]).then(a.t.bind(a,7841,23)),{default:B}=await Promise.all([a.e(3455),a.e(6720),a.e(8455),a.e(602)]).then(a.t.bind(a,8455,23)),{default:x}=await Promise.all([a.e(3455),a.e(6720),a.e(8374),a.e(8676)]).then(a.t.bind(a,8374,23)),{default:E}=await Promise.all([a.e(3455),a.e(6720),a.e(1154),a.e(2859)]).then(a.t.bind(a,1154,23)),{default:w}=await Promise.all([a.e(3455),a.e(6720),a.e(8010)]).then(a.bind(a,8010));await a.e(3095).then(a.bind(a,3095)),await Promise.all([a.e(8984),a.e(4318)]).then(a.bind(a,7471)),await a.e(1106).then(a.bind(a,1106)),await a.e(8302).then(a.bind(a,8302)),await a.e(6514).then(a.bind(a,6514));const{default:S}=await Promise.all([a.e(3455),a.e(2021),a.e(29)]).then(a.bind(a,29)),L=new C({id:"chatMedia",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,onBeforeFileAdded:(e,t)=>(console.log(e),e.type?(e.name="",e):(L.log("Skipping file because it has no type"),L.info("Skipping file because it has no type","error",500),!1)),onBeforeUpload:e=>{},restrictions:{maxFileSize:104857600,minFileSize:null,maxTotalFileSize:1048576e3,maxNumberOfFiles:10,minNumberOfFiles:1,allowedFileTypes:["image/jpeg","image/png","image/gif","image/svg+xml","image/x-png","audio/mpeg","audio/wav","audio/x-wav","audio/ogg","audio/webm","video/mp4","video/webm","video/ogg","video/quicktime","video/x-matroska"]},meta:{mediaType:"chat-media"},infoTimeout:5e3}).use(B,{trigger:"#activeChatInputAttachmentFileBtn",target:"body",inline:!1,plugins:["Webcam","ImageEditor","Audio"],thumbnailWidth:300,showRemoveButtonAfterComplete:!1,disablePageScrollWhenModalOpen:!0,closeModalOnClickOutside:!0,theme:"light",locale:{strings:{}},note:"Images, Audios and videos only, up to 10 files, 1 file up to 100 MB",proudlyDisplayPoweredByUppy:!1}).use(x,{target:B,title:"Camera",mirror:!0,modes:["video-audio","video-only","picture"],preferredVideoMimeType:"video/mp4",showRecordingLength:!0}).use(E,{target:B,quality:.8}).use(w,{id:"Audio",target:B,showAudioSourceDropdown:!1}).use(S,{limit:4,companionUrl:"http://localhost:5000/companion"});L.on("upload-success",((e,n)=>{let c={};c.chat=i.dataset.chatId,c.hasMediaContent=!0,c.mediaContentType=e.type.split("/")[0],c.mediaContentMimeType=e.type,c.mediaContentPath=e.s3Multipart.key,c.repliedTo=t.dataset.repliedTo,fetch("/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((e=>e.ok?e.json():Promise.reject(e))).then((async e=>{if(e.isSuccess)f(e.message,o,!0),y(),I(e.message);else{let{createMainNotification:t}=await a.e(4932).then(a.bind(a,5967));t(e.error,"error")}})).catch((async e=>{console.log(e);let{createMainNotification:t}=await a.e(4932).then(a.bind(a,5967));t("Server Error In Sending Message, Please Try Again","error")}))}));const T=document.getElementById("activeChatInputAttachmentYoutubeContentSendBtn"),k=document.getElementById("activeChatInputAttachmentYoutubeContent");T.addEventListener("click",(()=>{let e={};""!==k.value&&(e.chat=i.dataset.chatId,e.hasMediaContent=!0,e.mediaContentType="youtube",e.mediaContentMimeType="video/mp4",e.mediaContentPath=k.value,e.repliedTo=t.dataset.repliedTo,k.value="",fetch("/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject(e))).then((async e=>{if(e.isSuccess)f(e.message,o,!0),y(),document.getElementById("activeChatInputAttachmentYoutubeBtnInputBox").classList.add("input-attachment-btn-box__input-box--hide"),I(e.message),P.classList.add("attachment-btn-box__input-box--hide");else{let{createMainNotification:t}=await a.e(4932).then(a.bind(a,5967));t(e.error,"error")}})).catch((async e=>{console.log(e);let{createMainNotification:t}=await a.e(4932).then(a.bind(a,5967));t("Server Error In Sending Message, Please Try Again","error")})))})),document.getElementById("activeChatInputSendBtn").addEventListener("click",(async()=>{let e={};if(""!==c.value.trim()&&""!==i.dataset.chatId){if(e.chat=i.dataset.chatId,e.hasMediaContent=!1,e.textContent=c.value.trim(),e.repliedTo=t.dataset.repliedTo,c.value="",""!==i.dataset.chatId){let{sendChatMessageStopTypingSocket:e}=await a.e(9033).then(a.bind(a,9033));e(i.dataset.chatId),d=!1}fetch("/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject(e))).then((async e=>{if(e.isSuccess)s.classList.remove("active-chat-input-attachment-box--hide"),c.style.height="auto",c.style.height=c.scrollHeight+"px",parseInt(c.style.height.slice(0,-2))<=40?o.style.paddingBottom="60px":o.style.paddingBottom=c.style.height,f(e.message,o,!0),y(),I(e.message),o.scrollTop=o.scrollHeight;else{let{createMainNotification:t}=await a.e(4932).then(a.bind(a,5967));t(e.error,"error")}})).catch((async e=>{console.log(e);let{createMainNotification:t}=await a.e(4932).then(a.bind(a,5967));t("Server Error In Sending Message, Please Try Again","error")}))}}));const M=document.getElementById("activeChatInputAttachmentBoxBtn");M.addEventListener("click",(()=>{M.classList.contains("active-chat-input-attachment-box__btn--selected")?h():r()}));const A=document.getElementById("activeChatInputAttachmentYoutubeBtn"),P=document.getElementById("activeChatInputAttachmentYoutubeBtnInputBox");A.addEventListener("click",(()=>{P.classList.toggle("input-attachment-btn-box__input-box--hide")})),m(),IS_INIT_CHAT_MODULE=!0}}()}},o={};function c(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={id:e,exports:{}};return i[e].call(a.exports,a,a.exports,c),a.exports}c.m=i,c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"==typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"==typeof a.then)return a}var i=Object.create(null);c.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&a;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>a[e]));return o.default=()=>a,c.d(i,o),i},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,a)=>(c.f[a](e,t),t)),[])),c.u=e=>"non-initial-chunk/"+e+".js",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},n="frontend:",c.l=(e,t,i,o)=>{if(a[e])a[e].push(t);else{var s,d;if(void 0!==i)for(var l=document.getElementsByTagName("script"),r=0;r<l.length;r++){var h=l[r];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==n+i){s=h;break}}s||(d=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.setAttribute("data-webpack",n+i),s.src=e),a[e]=[t];var u=(t,n)=>{s.onerror=s.onload=null,clearTimeout(m);var i=a[e];if(delete a[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),d&&document.head.appendChild(s)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;c.g.importScripts&&(e=c.g.location+"");var t=c.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),c.p=e})(),(()=>{c.b=document.baseURI||self.location.href;var e={2348:0,1975:0};c.f.j=(t,a)=>{var n=c.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var i=new Promise(((a,i)=>n=e[t]=[a,i]));a.push(n[2]=i);var o=c.p+c.u(t),s=new Error;c.l(o,(a=>{if(c.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,n[1](s)}}),"chunk-"+t,t)}};var t=(t,a)=>{var n,i,[o,s,d]=a,l=0;if(o.some((t=>0!==e[t]))){for(n in s)c.o(s,n)&&(c.m[n]=s[n]);d&&d(c)}for(t&&t(a);l<o.length;l++)i=o[l],c.o(e,i)&&e[i]&&e[i][0](),e[i]=0},a=self.webpackChunkfrontend=self.webpackChunkfrontend||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),c.nc=void 0,c(1975)})();