"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1108],{1108:(e,t,a)=>{async function s(e){try{console.log("insideChatSocket");let t=document.getElementById("activeChatSection"),s=document.getElementById("activeChatMessageContainer"),n=document.getElementById("activeChatHeaderStatus");e.on("chat:message-start-typing",(async e=>{t.dataset.chatId.toString()===e.chatId.toString()&&(n.innerHTML=`${e.isGroupChat?e.user.firstName:""} typing<span class="active-chat-header__typing-effect">.</span><span class="active-chat-header__typing-effect">.</span><span class="active-chat-header__typing-effect">.</span>`,n.classList.remove("active-chat-header__chat-status--hide"))})),e.on("chat:message-stop-typing",(async e=>{t.dataset.chatId.toString()===e.chatId.toString()&&(e.isGroupChat?n.textContent="":n.textContent="Active",n.classList.remove("active-chat-header__chat-status--hide"))})),e.on("chat:new-message",(async e=>{console.log("new-message data:",e);let n=e.message,i=t.dataset.chatId,{updateAllChatSection:o}=await a.e(226).then(a.bind(a,226));o(n);let{increaseUnseenMessagesCountInChatBox:c}=await a.e(226).then(a.bind(a,226));if(c(n.chat._id),""!==i.toString()&&i.toString()===n.chat._id.toString()){let{checkTimeAndCreateNewMessage:e}=await Promise.all([a.e(1443),a.e(2064),a.e(7308)]).then(a.bind(a,2064));e(n,s,!0)}})),e.on("chat:new-info-message",(async e=>{let n=e.message,i=t.dataset.chatId,{updateAllChatSection:o}=await a.e(226).then(a.bind(a,226));o(n);let{increaseUnseenMessagesCountInChatBox:c}=await a.e(226).then(a.bind(a,226));if(c(n.chat._id),""!==i&&i===n.chat._id){let{createInfoMessage:e}=await Promise.all([a.e(1443),a.e(2064),a.e(7308)]).then(a.bind(a,2064)),t=e(n);s.insertAdjacentElement("beforeend",t),s.scrollTop=s.scrollHeight+1e3}})),e.on("chat:create-new-group-chat",(async e=>{console.log("created-new-group-chat");let{createChatBox:t}=await a.e(226).then(a.bind(a,226));t(e)})),e.on("chat:edit-group-chat",(async e=>{console.log("edit-group-chat"),activeChatData={...e};let{updateActiveChatInfoModal:t}=await Promise.all([a.e(8790),a.e(3958)]).then(a.bind(a,8790)),{updateActiveChatSection:s}=await a.e(9248).then(a.bind(a,7308)),{updateChatBox:n}=await a.e(226).then(a.bind(a,226));t(),s(activeChatData),n(activeChatData)})),e.on("chat:clear-chat-all-messages",(async e=>{let{clearActiveChatMessageContainer:t}=await a.e(9248).then(a.bind(a,7308)),{clearChatBoxLatestMessage:s}=await a.e(226).then(a.bind(a,226));t(),s(e)})),e.on("chat:delete-chat",(async e=>{let{clearActiveChatMessageContainer:t}=await a.e(9248).then(a.bind(a,7308)),{showAllChatSection:s,deleteChatBox:n}=await a.e(226).then(a.bind(a,226));s(),n(e),t()})),e.on("chat:user-left-group-chat",(async(e,t)=>{let{removeChatInfoMember:s}=await Promise.all([a.e(8790),a.e(3958)]).then(a.bind(a,8790));s(e,t)})),e.on("chat:delete-message-for-all",(async e=>{let{convertUserMessageToDeletedForAllMessage:t}=await Promise.all([a.e(1443),a.e(2064),a.e(7308)]).then(a.bind(a,2064));if(t(e.deletedForAllMessage),e.isLatestMessageChanged){let{updateChatBoxLatestMessage:t}=await a.e(226).then(a.bind(a,226));t(e.latestMessage)}})),e.on("chat:message-delivered",(async e=>{if(e.chatId.toString()===t.dataset.chatId.toString()){let{changeUserMessageStatusToDelivered:t}=await Promise.all([a.e(1443),a.e(2064),a.e(7308)]).then(a.bind(a,2064));t(e.messageId);let{updateMessageInfoDeliveryStatus:s}=await Promise.all([a.e(1443),a.e(2064),a.e(2449)]).then(a.bind(a,982));s(e.messageId,e.deliveredTime)}})),e.on("chat:update-message-seen-status",(async e=>{if(e.chatId.toString()===t.dataset.chatId.toString()){let{changeUserMessageStatusWithMessageSeenStatusCount:t}=await Promise.all([a.e(1443),a.e(2064),a.e(7308)]).then(a.bind(a,2064));t(e.messageId,e.messageSeenStatusCount,e.messageReaderCount);let{addUserToMessageInfoSeenStatus:s}=await Promise.all([a.e(1443),a.e(2064),a.e(2449)]).then(a.bind(a,982));s(e.messageId,e.pushedUser,e.pushedUserTime)}})),e.on("chat:message-seen-by-self",(async e=>{let{decreaseUnseenMessagesCountInChatBox:t}=await a.e(226).then(a.bind(a,226));t(e.chatId)})),e.on("chat:created-chat-call-room",(async e=>{let{showChatBoxCallRoomBox:s}=await a.e(226).then(a.bind(a,226));if(s(e.chatId,e.callRoom._id),t.dataset.chatId.toString()===e.chatId.toString()){let{openActiveChatCallRoomBox:t}=await a.e(9248).then(a.bind(a,7308));t(e.callRoom._id)}})),e.on("chat:end-chat-call-room",(async e=>{let{hideChatBoxCallRoomBox:s}=await a.e(226).then(a.bind(a,226));if(s(e.chatId),t.dataset.chatId.toString()===e.chatId.toString()){let{closeActiveChatCallRoomBox:e}=await a.e(9248).then(a.bind(a,7308));e()}}))}catch(e){console.log("socket problem",e.message)}}a.r(t),a.d(t,{createChatSocket:()=>s})}}]);