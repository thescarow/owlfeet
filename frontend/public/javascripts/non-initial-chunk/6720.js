(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6720],{1512:e=>{e.exports=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var i=Math.min(Math.floor(Math.log(e)/Math.log(1024)),s.length-1);e=Number(e/Math.pow(1024,i));var o=s[i];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+o:(t?"-":"")+e.toFixed(1)+" "+o}},4193:(e,t,s)=>{var i=s(1196),o=/[\/\+\.]/;e.exports=function(e,t){function s(t){var s=i(t,e,o);return s&&s.length>=2}return t?s(t.split(";")[0]):s}},1196:e=>{"use strict";function t(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}t.prototype.match=function(e){var t,s,i=!0,o=this.parts,r=o.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(s=(e||"").split(this.separator),t=0;i&&t<r;t++)"*"!==o[t]&&(i=t<s.length&&o[t]===s[t]);i=i&&s}else i=!1;else if("function"==typeof e.splice)for(i=[],t=e.length;t--;)this.match(e[t])&&(i[i.length]=e[t]);else if("object"==typeof e)for(var n in i={},e)this.match(n)&&(i[n]=e[n]);return i},e.exports=function(e,s,i){var o=new t(e,i||/[\/\.]/);return void 0!==s?o.match(s):o}},9001:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=t.RestrictionError=t.Restricter=void 0;const i=s(1512),o=s(4193);t.defaultOptions={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class r extends Error{constructor(){super(...arguments),this.isRestriction=!0}}t.RestrictionError=r,"undefined"==typeof AggregateError&&(globalThis.AggregateError=class extends Error{constructor(e,t){super(t),this.errors=e}}),t.Restricter=class{constructor(e,t){this.i18n=t,this.getOpts=()=>{const t=e();if(null!=t.restrictions.allowedFileTypes&&!Array.isArray(t.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return t}}validate(e,t){const{maxFileSize:s,minFileSize:n,maxTotalFileSize:l,maxNumberOfFiles:a,allowedFileTypes:d}=this.getOpts().restrictions;if(a&&t.filter((e=>!e.isGhost)).length+1>a)throw new r(`${this.i18n("youCanOnlyUploadX",{smart_count:a})}`);if(d&&!d.some((t=>t.includes("/")?!!e.type&&o(e.type.replace(/;.*?$/,""),t):!("."!==t[0]||!e.extension)&&e.extension.toLowerCase()===t.slice(1).toLowerCase()))){const e=d.join(", ");throw new r(this.i18n("youCanOnlyUploadFileTypes",{types:e}))}if(l&&null!=e.size&&t.reduce(((e,t)=>e+t.size),e.size)>l)throw new r(this.i18n("exceedsSize",{size:i(l),file:e.name}));if(s&&null!=e.size&&e.size>s)throw new r(this.i18n("exceedsSize",{size:i(s),file:e.name}));if(n&&null!=e.size&&e.size<n)throw new r(this.i18n("inferiorSize",{size:i(n)}))}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(Object.keys(e).length<t)throw new r(this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new r(this.i18n("missingRequiredMetaFieldOnFile",{fileName:e.name})),{requiredMetaFields:s}=this.getOpts().restrictions,i=Object.prototype.hasOwnProperty,o=[];for(const t of s)i.call(e.meta,t)&&""!==e.meta[t]||o.push(t);return{missingFields:o,error:t}}}},2693:(e,t,s)=>{"use strict";var i=s(6400);function o(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var r=0;function n(e){return"__private_"+r+++"_"+e}const l=s(9742),a=s(8754),d=s(3521);var c=n("updateUI");class u extends d{constructor(){super(...arguments),Object.defineProperty(this,c,{writable:!0,value:void 0})}mount(e,t){const s=t.id,r=l(e);if(r){this.isTargetDOMEl=!0;const t=document.createElement("div");return t.classList.add("uppy-Root"),o(this,c)[c]=function(e){let t=null,s=null;return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return s=o,t||(t=Promise.resolve().then((()=>(t=null,e(...s))))),t}}((e=>{this.uppy.getPlugin(this.id)&&((0,i.render)(this.render(e),t),this.afterUpdate())})),this.uppy.log(`Installing ${s} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),(0,i.render)(this.render(this.uppy.getState()),t),this.el=t,r.appendChild(t),t.dir=this.opts.direction||a(t)||"ltr",this.onMount(),this.el}let n;if("object"==typeof e&&e instanceof u)n=e;else if("function"==typeof e){const t=e;this.uppy.iteratePlugins((e=>{e instanceof t&&(n=e)}))}if(n)return this.uppy.log(`Installing ${s} to ${n.id}`),this.parent=n,this.el=n.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${s}`);let d=`Invalid target option given to ${s}.`;throw d+="function"==typeof e?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(d)}update(e){var t,s;null!=this.el&&(null==(t=(s=o(this,c))[c])||t.call(s,e))}unmount(){var e;this.isTargetDOMEl&&(null==(e=this.el)||e.remove()),this.onUnmount()}onMount(){}onUnmount(){}}e.exports=u},9069:(e,t,s)=>{"use strict";var i=s(2961),o=s(9721),r=s(9001);let n,l;function a(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var d=0;function c(e){return"__private_"+d+++"_"+e}const u=s(3150),h=s(4800),p=s(3096),f=s(4284),g=s(3968),m=s(7031),v=s(4260),y=s(9109),w=s(5850),b=s(2187);var S=c("plugins"),x=c("restricter"),F=c("storeUnsubscribe"),P=c("emitter"),O=c("preProcessors"),E=c("uploaders"),U=c("postProcessors"),j=c("informAndEmit"),A=c("checkRequiredMetaFieldsOnFile"),T=c("checkRequiredMetaFields"),$=c("assertNewUploadAllowed"),M=c("checkAndCreateFileStateObject"),N=c("startIfAutoProceed"),k=c("addListeners"),C=c("updateOnlineStatus"),I=c("createUpload"),z=c("getUpload"),R=c("removeUpload"),L=c("runUpload");n=Symbol.for("uppy test: getPlugins"),l=Symbol.for("uppy test: createUpload");class _{constructor(e){Object.defineProperty(this,L,{value:K}),Object.defineProperty(this,R,{value:Z}),Object.defineProperty(this,z,{value:X}),Object.defineProperty(this,I,{value:V}),Object.defineProperty(this,k,{value:W}),Object.defineProperty(this,N,{value:H}),Object.defineProperty(this,M,{value:Y}),Object.defineProperty(this,$,{value:G}),Object.defineProperty(this,T,{value:q}),Object.defineProperty(this,A,{value:D}),Object.defineProperty(this,j,{value:B}),Object.defineProperty(this,S,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,F,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:h()}),Object.defineProperty(this,O,{writable:!0,value:new Set}),Object.defineProperty(this,E,{writable:!0,value:new Set}),Object.defineProperty(this,U,{writable:!0,value:new Set}),Object.defineProperty(this,C,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=b;const t={id:"uppy",autoProceed:!1,allowMultipleUploads:!0,allowMultipleUploadBatches:!0,debug:!1,restrictions:r.defaultOptions,meta:{},onBeforeFileAdded:e=>e,onBeforeUpload:e=>e,store:f(),logger:o.justErrorsLogger,infoTimeout:5e3};this.opts={...t,...e,restrictions:{...t.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=o.debugLogger),this.log(`Using Core v${this.constructor.VERSION}`),this.i18nInit(),this.calculateProgress=p(this.calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:y(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:{...this.opts.meta},info:[],recoveredState:null}),a(this,x)[x]=new r.Restricter((()=>this.opts),this.i18n),a(this,F)[F]=this.store.subscribe(((e,t,s)=>{this.emit("state-update",e,t,s),this.updateAll(t)})),this.opts.debug&&"undefined"!=typeof window&&(window[this.opts.id]=this),a(this,k)[k]()}emit(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];a(this,P)[P].emit(e,...s)}on(e,t){return a(this,P)[P].on(e,t),this}once(e,t){return a(this,P)[P].once(e,t),this}off(e,t){return a(this,P)[P].off(e,t),this}updateAll(e){this.iteratePlugins((t=>{t.update(e)}))}setState(e){this.store.setState(e)}getState(){return this.store.getState()}get state(){return this.getState()}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Canâ€™t set state for ${e} (the file could have been removed)`);this.setState({files:{...this.getState().files,[e]:{...this.getState().files[e],...t}}})}i18nInit(){const e=new u([this.defaultLocale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e&&e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins((e=>{e.setOptions()})),this.setState()}resetProgress(){const e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},s={};Object.keys(t).forEach((i=>{const o={...t[i]};o.progress={...o.progress,...e},s[i]=o})),this.setState({files:s,totalProgress:0}),this.emit("reset-progress")}addPreProcessor(e){a(this,O)[O].add(e)}removePreProcessor(e){return a(this,O)[O].delete(e)}addPostProcessor(e){a(this,U)[U].add(e)}removePostProcessor(e){return a(this,U)[U].delete(e)}addUploader(e){a(this,E)[E].add(e)}removeUploader(e){return a(this,E)[E].delete(e)}setMeta(e){const t={...this.getState().meta,...e},s={...this.getState().files};Object.keys(s).forEach((t=>{s[t]={...s[t],meta:{...s[t].meta,...e}}})),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:s})}setFileMeta(e,t){const s={...this.getState().files};if(!s[e])return void this.log("Was trying to set metadata for a file that has been removed: ",e);const i={...s[e].meta,...t};s[e]={...s[e],meta:i},this.setState({files:s})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:s}=this.getState(),i=Object.values(e),o=i.filter((e=>{let{progress:t}=e;return!t.uploadComplete&&t.uploadStarted})),r=i.filter((e=>!e.progress.uploadStarted)),n=i.filter((e=>e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess)),l=i.filter((e=>e.progress.uploadStarted)),a=i.filter((e=>e.isPaused)),d=i.filter((e=>e.progress.uploadComplete)),c=i.filter((e=>e.error)),u=o.filter((e=>!e.isPaused)),h=i.filter((e=>e.progress.preprocess||e.progress.postprocess));return{newFiles:r,startedFiles:n,uploadStartedFiles:l,pausedFiles:a,completeFiles:d,erroredFiles:c,inProgressFiles:o,inProgressNotPausedFiles:u,processingFiles:h,isUploadStarted:l.length>0,isAllComplete:100===t&&d.length===i.length&&0===h.length,isAllErrored:!!s&&c.length===i.length,isAllPaused:0!==o.length&&a.length===o.length,isUploadInProgress:o.length>0,isSomeGhost:i.some((e=>e.isGhost))}}validateRestrictions(e,t){void 0===t&&(t=this.getFiles());try{return a(this,x)[x].validate(e,t),{result:!0}}catch(e){return{result:!1,reason:e.message}}}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!(!t[e]||t[e].isGhost)}addFile(e){a(this,$)[$](e);const{files:t}=this.getState();let s=a(this,M)[M](t,e);return t[s.id]&&t[s.id].isGhost&&(s={...t[s.id],data:e.data,isGhost:!1},this.log(`Replaced the blob in the restored ghost file: ${s.name}, ${s.id}`)),this.setState({files:{...t,[s.id]:s}}),this.emit("file-added",s),this.emit("files-added",[s]),this.log(`Added file: ${s.name}, ${s.id}, mime type: ${s.type}`),a(this,N)[N](),s.id}addFiles(e){a(this,$)[$]();const t={...this.getState().files},s=[],i=[];for(let o=0;o<e.length;o++)try{let i=a(this,M)[M](t,e[o]);t[i.id]&&t[i.id].isGhost&&(i={...t[i.id],data:e[o].data,isGhost:!1},this.log(`Replaced blob in a ghost file: ${i.name}, ${i.id}`)),t[i.id]=i,s.push(i)}catch(e){e.isRestriction||i.push(e)}if(this.setState({files:t}),s.forEach((e=>{this.emit("file-added",e)})),this.emit("files-added",s),s.length>5?this.log(`Added batch of ${s.length} files`):Object.keys(s).forEach((e=>{this.log(`Added file: ${s[e].name}\n id: ${s[e].id}\n type: ${s[e].type}`)})),s.length>0&&a(this,N)[N](),i.length>0){let e="Multiple errors occurred while adding files:\n";if(i.forEach((t=>{e+=`\n * ${t.message}`})),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:i.length}),details:e},"error",this.opts.infoTimeout),"function"==typeof AggregateError)throw new AggregateError(i,e);{const t=new Error(e);throw t.errors=i,t}}}removeFiles(e,t){const{files:s,currentUploads:i}=this.getState(),o={...s},r={...i},n=Object.create(null);function l(e){return void 0===n[e]}e.forEach((e=>{s[e]&&(n[e]=s[e],delete o[e])})),Object.keys(r).forEach((e=>{const t=i[e].fileIDs.filter(l);if(0===t.length)return void delete r[e];const{capabilities:s}=this.getState();if(t.length!==i[e].fileIDs.length&&!s.individualCancellation)throw new Error("individualCancellation is disabled");r[e]={...i[e],fileIDs:t}}));const a={currentUploads:r,files:o};0===Object.keys(o).length&&(a.allowNewUpload=!0,a.error=null,a.recoveredState=null),this.setState(a),this.calculateTotalProgress();const d=Object.keys(n);d.forEach((e=>{this.emit("file-removed",n[e],t)})),d.length>5?this.log(`Removed ${d.length} files`):this.log(`Removed files: ${d.join(", ")}`)}removeFile(e,t){void 0===t&&(t=null),this.removeFiles([e],t)}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).uploadComplete)return;const t=!this.getFile(e).isPaused;return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}pauseAll(){const e={...this.getState().files};Object.keys(e).filter((t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted)).forEach((t=>{const s={...e[t],isPaused:!0};e[t]=s})),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter((t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted)).forEach((t=>{const s={...e[t],isPaused:!1,error:null};e[t]=s})),this.setState({files:e}),this.emit("resume-all")}retryAll(){const e={...this.getState().files},t=Object.keys(e).filter((t=>e[t].error));if(t.forEach((t=>{const s={...e[t],isPaused:!1,error:null};e[t]=s})),this.setState({files:e,error:null}),this.emit("retry-all",t),0===t.length)return Promise.resolve({successful:[],failed:[]});const s=a(this,I)[I](t,{forceAllowNewUpload:!0});return a(this,L)[L](s)}cancelAll(e){let{reason:t="user"}=void 0===e?{}:e;if(this.emit("cancel-all",{reason:t}),"user"===t){const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);const t=a(this,I)[I]([e],{forceAllowNewUpload:!0});return a(this,L)[L](t)}reset(){this.cancelAll(...arguments)}logout(){this.iteratePlugins((e=>{e.provider&&e.provider.logout&&e.provider.logout()}))}calculateProgress(e,t){if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const s=Number.isFinite(t.bytesTotal)&&t.bytesTotal>0;this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:s?Math.round(t.bytesUploaded/t.bytesTotal*100):0}}),this.calculateTotalProgress()}calculateTotalProgress(){const e=this.getFiles().filter((e=>e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess));if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});const t=e.filter((e=>null!=e.progress.bytesTotal)),s=e.filter((e=>null==e.progress.bytesTotal));if(0===t.length){const t=100*e.length,i=s.reduce(((e,t)=>e+t.progress.percentage),0),o=Math.round(i/t*100);return void this.setState({totalProgress:o})}let i=t.reduce(((e,t)=>e+t.progress.bytesTotal),0);const o=i/t.length;i+=o*s.length;let r=0;t.forEach((e=>{r+=e.progress.bytesUploaded})),s.forEach((e=>{r+=o*(e.progress.percentage||0)/100}));let n=0===i?0:Math.round(r/i*100);n>100&&(n=100),this.setState({totalProgress:n}),this.emit("progress",n)}updateOnlineStatus(){void 0===window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,t){if("function"!=typeof e)throw new TypeError(`Expected a plugin class, but got ${null===e?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`);const s=new e(this,t),i=s.id;if(!i)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");const o=this.getPlugin(i);if(o){const e=`Already found a plugin named '${o.id}'. Tried to use: '${i}'.\nUppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(e)}return e.VERSION&&this.log(`Using ${i} v${e.VERSION}`),s.type in a(this,S)[S]?a(this,S)[S][s.type].push(s):a(this,S)[S][s.type]=[s],s.install(),this}getPlugin(e){for(const t of Object.values(a(this,S)[S])){const s=t.find((t=>t.id===e));if(null!=s)return s}}[n](e){return a(this,S)[S][e]}iteratePlugins(e){Object.values(a(this,S)[S]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=a(this,S)[S][e.type],s=t.findIndex((t=>t.id===e.id));-1!==s&&t.splice(s,1);const i={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(i)}close(e){let{reason:t}=void 0===e?{}:e;this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll({reason:t}),a(this,F)[F](),this.iteratePlugins((e=>{this.removePlugin(e)})),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("online",a(this,C)[C]),window.removeEventListener("offline",a(this,C)[C]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,s){void 0===t&&(t="info"),void 0===s&&(s=3e3);const i="object"==typeof e;this.setState({info:[...this.getState().info,{type:t,message:i?e.message:e,details:i?e.details:null}]}),setTimeout((()=>this.hideInfo()),s),this.emit("info-visible")}log(e,t){const{logger:s}=this.opts;switch(t){case"error":s.error(e);break;case"warning":s.warn(e);break;default:s.debug(e)}}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?a(this,L)[L](e):(a(this,R)[R](e),Promise.reject(new Error("Nonexistent upload")))}[l](){return a(this,I)[I](...arguments)}addResultData(e,t){if(!a(this,z)[z](e))return void this.log(`Not setting result for an upload that has been removed: ${e}`);const{currentUploads:s}=this.getState(),i={...s[e],result:{...s[e].result,...t}};this.setState({currentUploads:{...s,[e]:i}})}upload(){var e;null!=(e=a(this,S)[S].uploader)&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();const s=this.opts.onBeforeUpload(t);return!1===s?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(s&&"object"==typeof s&&(t=s,this.setState({files:t})),Promise.resolve().then((()=>a(this,x)[x].validateMinNumberOfFiles(t))).catch((e=>{throw a(this,j)[j](e),e})).then((()=>{if(!a(this,T)[T](t))throw new r.RestrictionError(this.i18n("missingRequiredMetaField"))})).catch((e=>{throw e})).then((()=>{const{currentUploads:e}=this.getState(),s=Object.values(e).flatMap((e=>e.fileIDs)),i=[];Object.keys(t).forEach((e=>{const t=this.getFile(e);t.progress.uploadStarted||-1!==s.indexOf(e)||i.push(t.id)}));const o=a(this,I)[I](i);return a(this,L)[L](o)})).catch((e=>{throw this.emit("error",e),this.log(e,"error"),e})))}}function B(e,t){const{message:s,details:i=""}=e;e.isRestriction?this.emit("restriction-failed",t,e):this.emit("error",e),this.info({message:s,details:i},"error",this.opts.infoTimeout),this.log(`${s} ${i}`.trim(),"error")}function D(e){const{missingFields:t,error:s}=a(this,x)[x].getMissingRequiredMetaFields(e);return!(t.length>0&&(this.setFileState(e.id,{missingRequiredMetaFields:t}),this.log(s.message),this.emit("restriction-failed",e,s),1))}function q(e){let t=!0;for(const s of Object.values(e))a(this,A)[A](s)||(t=!1);return t}function G(e){const{allowNewUpload:t}=this.getState();if(!1===t){const t=new r.RestrictionError(this.i18n("noMoreFilesAllowed"));throw a(this,j)[j](t,e),t}}function Y(e,t){const s=g(t),i=w(s,t),o=m(i).extension,n=Boolean(t.isRemote),l=v({...t,type:s});if(this.checkIfFileAlreadyExists(l)){const e=new r.RestrictionError(this.i18n("noDuplicates",{fileName:i}));throw a(this,j)[j](e,t),e}const d=t.meta||{};d.name=i,d.type=s;const c=Number.isFinite(t.data.size)?t.data.size:null;let u={source:t.source||"",id:l,name:i,extension:o||"",meta:{...this.getState().meta,...d},type:s,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:c,uploadComplete:!1,uploadStarted:null},size:c,isRemote:n,remote:t.remote||"",preview:t.preview};const h=this.opts.onBeforeFileAdded(u,e);if(!1===h){const e=new r.RestrictionError("Cannot add the file because onBeforeFileAdded returned false.");throw this.emit("restriction-failed",t,e),e}"object"==typeof h&&null!==h&&(u=h);try{const t=Object.keys(e).map((t=>e[t]));a(this,x)[x].validate(u,t)}catch(e){throw a(this,j)[j](e,u),e}return u}function H(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout((()=>{this.scheduledAutoProceed=null,this.upload().catch((e=>{e.isRestriction||this.log(e.stack||e.message||e)}))}),4))}function W(){const e=(e,t,s)=>{let i=e.message||"Unknown error";e.details&&(i+=` ${e.details}`),this.setState({error:i}),null!=t&&t.id in this.getState().files&&this.setFileState(t.id,{error:i,response:s})};this.on("error",e),this.on("upload-error",((t,s,i)=>{if(e(s,t,i),"object"==typeof s&&s.message){const e=new Error(s.message);e.details=s.message,s.details&&(e.details+=` ${s.details}`),e.message=this.i18n("failedToUpload",{file:null==t?void 0:t.name}),a(this,j)[j](e)}else a(this,j)[j](s)})),this.on("upload",(()=>{this.setState({error:null})})),this.on("upload-started",(e=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:e.size}}):this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`)})),this.on("upload-progress",this.calculateProgress),this.on("upload-success",((e,t)=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const s=this.getFile(e.id).progress;this.setFileState(e.id,{progress:{...s,postprocess:a(this,U)[U].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:s.bytesTotal},response:t,uploadURL:t.uploadURL,isPaused:!1}),null==e.size&&this.setFileState(e.id,{size:t.bytesUploaded||s.bytesTotal}),this.calculateTotalProgress()})),this.on("preprocess-progress",((e,t)=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,preprocess:t}}):this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`)})),this.on("preprocess-complete",(e=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.preprocess,this.setState({files:t})})),this.on("postprocess-progress",((e,t)=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{...this.getState().files[e.id].progress,postprocess:t}}):this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`)})),this.on("postprocess-complete",(e=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.postprocess,this.setState({files:t})})),this.on("restored",(()=>{this.calculateTotalProgress()})),this.on("dashboard:file-edit-complete",(e=>{e&&a(this,A)[A](e)})),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",a(this,C)[C]),window.addEventListener("offline",a(this,C)[C]),setTimeout(a(this,C)[C],3e3))}function V(e,t){void 0===t&&(t={});const{forceAllowNewUpload:s=!1}=t,{allowNewUpload:o,currentUploads:r}=this.getState();if(!o&&!s)throw new Error("Cannot create a new upload: already uploading.");const n=(0,i.nanoid)();return this.emit("upload",{id:n,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploadBatches&&!1!==this.opts.allowMultipleUploads,currentUploads:{...r,[n]:{fileIDs:e,step:0,result:{}}}}),n}function X(e){const{currentUploads:t}=this.getState();return t[e]}function Z(e){const t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})}async function K(e){let{currentUploads:t}=this.getState(),s=t[e];const i=s.step||0,o=[...a(this,O)[O],...a(this,E)[E],...a(this,U)[U]];try{for(let r=i;r<o.length&&s;r++){const i=o[r],n={...s,step:r};this.setState({currentUploads:{...t,[e]:n}}),await i(n.fileIDs,e),t=this.getState().currentUploads,s=t[e]}}catch(t){throw a(this,R)[R](e),t}if(s){s.fileIDs.forEach((e=>{const t=this.getFile(e);t&&t.progress.postprocess&&this.emit("postprocess-complete",t)}));const i=s.fileIDs.map((e=>this.getFile(e))),o=i.filter((e=>!e.error)),r=i.filter((e=>e.error));await this.addResultData(e,{successful:o,failed:r,uploadID:e}),t=this.getState().currentUploads,s=t[e]}let r;return s&&(r=s.result,this.emit("complete",r),a(this,R)[R](e)),null==r&&this.log(`Not setting result for an upload that has been removed: ${e}`),r}_.VERSION="2.3.4",e.exports=_},5850:e=>{"use strict";e.exports=function(e,t){return t.name?t.name:"image"===e.split("/")[0]?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"}},2187:e=>{"use strict";e.exports={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",emptyFolderAdded:"No files were added from empty folder",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}}},9721:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.justErrorsLogger=t.debugLogger=void 0;const i=s(582),o={debug:()=>{},warn:()=>{},error:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return console.error(`[Uppy] [${i()}]`,...t)}};t.justErrorsLogger=o;const r={debug:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return console.debug(`[Uppy] [${i()}]`,...t)},warn:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return console.warn(`[Uppy] [${i()}]`,...t)},error:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return console.error(`[Uppy] [${i()}]`,...t)}};t.debugLogger=r},9109:e=>{"use strict";e.exports=function(e){if(null==e&&"undefined"!=typeof navigator&&(e=navigator.userAgent),!e)return!0;const t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;const s=t[1];let[i,o]=s.split(".");return i=parseInt(i,10),o=parseInt(o,10),i<15||15===i&&o<15063||i>18||18===i&&o>=18218}},9742:(e,t,s)=>{"use strict";const i=s(9794);e.exports=function(e,t){return void 0===t&&(t=document),"string"==typeof e?t.querySelector(e):i(e)?e:null}},4260:e=>{"use strict";function t(e){let t="";return e.replace(/[^A-Z0-9]/gi,(e=>(t+=`-${function(e){return e.charCodeAt(0).toString(32)}(e)}`,"/")))+t}e.exports=function(e){let s="uppy";return"string"==typeof e.name&&(s+=`-${t(e.name.toLowerCase())}`),void 0!==e.type&&(s+=`-${e.type}`),e.meta&&"string"==typeof e.meta.relativePath&&(s+=`-${t(e.meta.relativePath.toLowerCase())}`),void 0!==e.data.size&&(s+=`-${e.data.size}`),void 0!==e.data.lastModified&&(s+=`-${e.data.lastModified}`),s}},7031:e=>{"use strict";e.exports=function(e){const t=e.lastIndexOf(".");return-1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}},3968:(e,t,s)=>{"use strict";const i=s(7031),o=s(8327);e.exports=function(e){var t;if(e.type)return e.type;const s=e.name?null==(t=i(e.name).extension)?void 0:t.toLowerCase():null;return s&&s in o?o[s]:"application/octet-stream"}},8754:e=>{"use strict";e.exports=function(e){for(var t;e&&!e.dir;)e=e.parentNode;return null==(t=e)?void 0:t.dir}},582:e=>{"use strict";function t(e){return e<10?`0${e}`:e.toString()}e.exports=function(){const e=new Date;return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}},9794:e=>{"use strict";e.exports=function(e){return(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE}},8327:e=>{"use strict";e.exports={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"}},4284:e=>{"use strict";var t=0;function s(e){return"__private_"+t+++"_"+e}var i=s("publish");class o{constructor(){Object.defineProperty(this,i,{value:r}),this.state={},this.callbacks=[]}getState(){return this.state}setState(e){const t={...this.state},s={...this.state,...e};this.state=s,function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}(this,i)[i](t,s,e)}subscribe(e){return this.callbacks.push(e),()=>{this.callbacks.splice(this.callbacks.indexOf(e),1)}}}function r(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.callbacks.forEach((e=>{e(...t)}))}o.VERSION="2.1.1",e.exports=function(){return new o}},2961:e=>{e.exports={nanoid:(e=21)=>{let t="",s=e;for(;s--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(s=t)=>{let i="",o=s;for(;o--;)i+=e[Math.random()*e.length|0];return i}}}}]);