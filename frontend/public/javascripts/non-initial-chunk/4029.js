"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4029],{4029:(e,t,a)=>{a.r(t),a.d(t,{createCalltypeInfoContainer:()=>r,showCalltypeMessage:()=>f}),document.getElementById("calltypeInfoContainer");let s,i,n=document.getElementById("calltypeInfo"),o=document.getElementById("calltypeInfoPreview"),l=document.getElementById("calltypeInfoBtnContainer"),c=document.getElementById("calltypeMessage"),d=document.getElementById("calltypeMessageReloadBtn");function r(e,t){s=e,i=t;let n=document.createElement("video");n.muted=!0,n.srcObject=s,n.addEventListener("loadedmetadata",(()=>{n.play()})),o.insertAdjacentElement("beforeend",n),l.addEventListener("click",(async e=>{let t=e.target.closest(".calltype-info-btn");if(t&&l.contains(t)){if("video"===t.dataset.btnType&&!1===i.isScreenShareOn)if("video-on"===t.dataset.btnWorkingState){let{getCameraVideoTrack:e}=await Promise.resolve().then(a.bind(a,8786)),n=await e();n&&(s.getVideoTracks().forEach((e=>{e.stop(),s.removeTrack(e)})),s.addTrack(n),t.classList.remove("calltype-info-btn--selected"),t.classList.add("calltype-info-btn--unselected"),o.classList.remove("calltype-info__preview--video-off"),o.classList.add("calltype-info__preview--camera"),t.dataset.btnWorkingState="video-off",i.isCameraOn=!0)}else"video-off"===t.dataset.btnWorkingState&&(s.getVideoTracks().forEach((e=>{e.stop()})),t.classList.add("calltype-info-btn--selected"),t.classList.remove("calltype-info-btn--unselected"),o.classList.add("calltype-info__preview--video-off"),o.classList.remove("calltype-info__preview--camera"),t.dataset.btnWorkingState="video-on",i.isCameraOn=!1);if("audio"===t.dataset.btnType)if("audio-on"===t.dataset.btnWorkingState){let{getCallAudioTrack:e}=await Promise.resolve().then(a.bind(a,8786)),n=await e();n&&(s.getAudioTracks().forEach((e=>{e.stop(),s.removeTrack(e)})),s.addTrack(n),t.classList.remove("calltype-info-btn--selected"),t.classList.add("calltype-info-btn--unselected"),o.classList.remove("calltype-info__preview--audio-off"),t.dataset.btnWorkingState="audio-off",i.isAudioOn=!0)}else"audio-off"===t.dataset.btnWorkingState&&(s.getAudioTracks().forEach((e=>{e.stop()})),t.classList.add("calltype-info-btn--selected"),t.classList.remove("calltype-info-btn--unselected"),o.classList.add("calltype-info__preview--audio-off"),t.dataset.btnWorkingState="audio-on",i.isAudioOn=!1);if("share-screen"===t.dataset.btnType)if("share-screen-on"===t.dataset.btnWorkingState){let{getScreenShareVideoTrack:e}=await Promise.resolve().then(a.bind(a,8786)),n=await e();n&&(s.getVideoTracks().forEach((e=>{e.stop(),s.removeTrack(e)})),s.addTrack(n),t.classList.add("calltype-info-btn--selected"),t.classList.remove("calltype-info-btn--unselected"),o.classList.contains("calltype-info__preview--video-off")&&o.classList.remove("calltype-info__preview--video-off"),o.classList.contains("calltype-info__preview--camera")&&o.classList.remove("calltype-info__preview--camera"),t.dataset.btnWorkingState="share-screen-off",i.isScreenShareOn=!0,n.onended=async()=>{if(s.getVideoTracks().forEach((e=>{e.stop(),s.removeTrack(e)})),o.classList.contains("calltype-info__preview--camera")||o.classList.add("calltype-info__preview--camera"),i.isCameraOn){let{getCameraVideoTrack:e}=await Promise.resolve().then(a.bind(a,8786)),t=await e();t&&s.addTrack(t)}else o.classList.contains("calltype-info__preview--video-off")||o.classList.add("calltype-info__preview--video-off");"share-screen-off"===t.dataset.btnWorkingState&&(t.classList.remove("calltype-info-btn--selected"),t.classList.add("calltype-info-btn--unselected"),t.dataset.btnWorkingState="share-screen-on",i.isScreenShareOn=!1)})}else if("share-screen-off"===t.dataset.btnWorkingState){if(s.getVideoTracks().forEach((e=>{e.stop(),s.removeTrack(e)})),o.classList.contains("calltype-info__preview--camera")||o.classList.add("calltype-info__preview--camera"),i.isCameraOn){let{getCameraVideoTrack:e}=await Promise.resolve().then(a.bind(a,8786)),t=await e();t&&s.addTrack(t)}else o.classList.contains("calltype-info__preview--video-off")||o.classList.add("calltype-info__preview--video-off");t.classList.remove("calltype-info-btn--selected"),t.classList.add("calltype-info-btn--unselected"),t.dataset.btnWorkingState="share-screen-on",i.isScreenShareOn=!1}}}))}function f(e,t){n.classList.add("calltype-info--hide"),c.classList.remove("calltype-message--hide"),document.getElementById("calltypeMessageTitle").textContent=e,document.getElementById("calltypeMessageDesc").innerHTML=t,d&&d.addEventListener("click",(()=>{location.reload()}))}}}]);