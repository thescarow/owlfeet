"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkfrontend"] = self["webpackChunkfrontend"] || []).push([["dev-javascripts_chat_js_showActiveChatSection_dev_js-_2dc91"],{

/***/ "./dev-javascripts/chat/js/showActiveChatSection.dev.js":
/*!**************************************************************!*\
  !*** ./dev-javascripts/chat/js/showActiveChatSection.dev.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clearActiveChatMessageContainer\": () => (/* binding */ clearActiveChatMessageContainer),\n/* harmony export */   \"increaseTotalReceivedMessagesCount\": () => (/* binding */ increaseTotalReceivedMessagesCount),\n/* harmony export */   \"onOffActiveChatInputContainer\": () => (/* binding */ onOffActiveChatInputContainer),\n/* harmony export */   \"showActiveChatSection\": () => (/* binding */ showActiveChatSection),\n/* harmony export */   \"updateActiveChatSection\": () => (/* binding */ updateActiveChatSection)\n/* harmony export */ });\nlet allChatSection = document.getElementById(\"allChatSection\");\nlet activeChatSection = document.getElementById(\"activeChatSection\");\nconst activeChatMessageContainer = document.getElementById(\"activeChatMessageContainer\");\nlet totalReceivedMessagesCount;\nlet totalUnseenMessagesCount;\nasync function showActiveChatSection(chat) {\n  let activeChatInputTextContent = document.getElementById(\"activeChatInputTextContent\");\n  activeChatInputTextContent.value = \"\";\n  activeChatMessageContainer.innerHTML = \"\";\n  updateActiveChatSection(chat);\n  totalReceivedMessagesCount = 0;\n  let unseenMessagesCountResponse = await fetch(`/message/data/unseen-messages-count/${chat._id}`);\n  let unseenMessagesCountData = await unseenMessagesCountResponse.json();\n  totalUnseenMessagesCount = unseenMessagesCountData.unseenMessagesCount;\n  let {\n    openActiveChatInputBox\n  } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_chat_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../chat.dev.js */ \"./dev-javascripts/chat/chat.dev.js\"));\n  openActiveChatInputBox();\n\n  if (USER_MESSAGE_BOX_OBSERVER !== undefined) {\n    USER_MESSAGE_BOX_OBSERVER.disconnect();\n  }\n\n  initializeUserMessageBoxObserver();\n\n  if (TOP_MESSAGE_BOX_OBSERVER !== undefined) {\n    TOP_MESSAGE_BOX_OBSERVER.disconnect();\n  }\n\n  initializeTopMessageBoxObserver(); ///////////////////\n\n  const {\n    checkTimeAndCreateOldMessages\n  } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n  fetch(`/message/fetch-messages/${chat._id}?totalReceivedMessagesCount=0`).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(response);\n  }).then(async data => {\n    if (data.isSuccess) {\n      activeChatMessageContainer.innerHTML = \"\";\n      console.log(data);\n\n      if (data.allMessages.length > 0) {\n        totalReceivedMessagesCount += data.allMessages.length;\n        checkTimeAndCreateOldMessages(data.allMessages, activeChatMessageContainer, false, true);\n        setTimeout(() => {\n          if (activeChatMessageContainer.firstElementChild) TOP_MESSAGE_BOX_OBSERVER.observe(activeChatMessageContainer.firstElementChild);\n        }, 2000);\n      }\n\n      let {\n        adjustMessageContainerBottomPadding\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_chat_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../chat.dev */ \"./dev-javascripts/chat/chat.dev.js\"));\n      adjustMessageContainerBottomPadding();\n    } else {\n      let {\n        createMainNotification\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n      createMainNotification(data.error, \"error\");\n    }\n  }).catch(async err => {\n    console.log(err);\n    let {\n      createMainNotification\n    } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n    createMainNotification(\"Server Error In Accessing Messages, Please Refresh Your Page\", \"error\");\n  });\n  allChatSection.classList.add(\"all-chat-section--hide\");\n  activeChatSection.classList.remove(\"active-chat-section--hide\");\n}\n\nfunction initializeUserMessageBoxObserver() {\n  USER_MESSAGE_BOX_OBSERVER = new IntersectionObserver(async (entries, observer) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting === true) {\n        let messageId = entry.target.dataset.messageId;\n        socket.emit(\"chat:update-message-seen-status\", {\n          messageId: messageId\n        });\n        observer.unobserve(entry.target);\n      }\n    });\n  }, {\n    threshold: 0.5,\n    root: activeChatMessageContainer\n  });\n}\n\nfunction initializeTopMessageBoxObserver() {\n  TOP_MESSAGE_BOX_OBSERVER = new IntersectionObserver(async (entries, observer) => {\n    entries.forEach(async entry => {\n      if (entry.isIntersecting === true) {\n        observer.unobserve(entry.target);\n        let chatId = activeChatSection.dataset.chatId;\n        const {\n          createLoadingMessagesAnimation\n        } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n        let loadingMessageAnimationBox = createLoadingMessagesAnimation();\n        activeChatMessageContainer.insertAdjacentElement(\"afterbegin\", loadingMessageAnimationBox); // activeChatMessageContainer.scrollTop += 100\n\n        await fetchMessageAndCreateUserMessageBox(chatId);\n      }\n    });\n  }, {\n    threshold: 0.5,\n    root: activeChatMessageContainer,\n    rootMargin: \"100px\"\n  });\n}\n\nasync function fetchMessageAndCreateUserMessageBox(chatId) {\n  const {\n    checkTimeAndCreateOldMessages\n  } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n  fetch(`/message/fetch-messages/${chatId}?totalReceivedMessagesCount=${totalReceivedMessagesCount}`).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(response);\n  }).then(async data => {\n    if (data.isSuccess) {\n      console.log(data);\n\n      if (data.allMessages.length > 0) {\n        totalReceivedMessagesCount += data.allMessages.length;\n        checkTimeAndCreateOldMessages(data.allMessages, activeChatMessageContainer, false, false);\n        setTimeout(() => {\n          if (activeChatMessageContainer.firstElementChild) TOP_MESSAGE_BOX_OBSERVER.observe(activeChatMessageContainer.firstElementChild);\n        }, 2000);\n      } else {\n        let loadingMessageAnimationBox = [...activeChatMessageContainer.getElementsByClassName(\"loading-message-animation-box\")];\n        loadingMessageAnimationBox.forEach(box => {\n          box.parentNode.removeChild(box);\n        });\n      }\n    } else {\n      let {\n        createMainNotification\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n      createMainNotification(data.error, \"error\");\n    }\n  }).catch(async err => {\n    console.log(err);\n    let {\n      createMainNotification\n    } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n    createMainNotification(\"Server Error In Accessing Messages, Please Refresh Your Page\", \"error\");\n  });\n} //////////////////////////\n\n\nfunction increaseTotalReceivedMessagesCount() {\n  totalUnseenMessagesCount = 0;\n  totalReceivedMessagesCount++;\n} /////////////////\n\nasync function updateActiveChatSection(chat) {\n  let {\n    closeReplyMessageBox\n  } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_js_replyMessageBox_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./replyMessageBox.dev.js */ \"./dev-javascripts/chat/js/replyMessageBox.dev.js\"));\n  closeReplyMessageBox();\n  activeChatSection.dataset.chatId = chat._id;\n  const activeChatHeader = document.getElementById(\"activeChatHeader\");\n  const activeChatHeaderPic = document.getElementById(\"activeChatHeaderPic\");\n  const activeChatImg = document.getElementById(\"activeChatImg\");\n  const activeChatHeaderName = document.getElementById(\"activeChatHeaderName\");\n  const activeChatHeaderStatus = document.getElementById(\"activeChatHeaderStatus\");\n  const activeChatInputContainer = document.getElementById(\"activeChatInputContainer\");\n  activeChatHeader.dataset.chatId = chat._id;\n\n  if (chat.hasOwnProperty(\"chatPic\") && chat.chatPic !== \"\") {\n    activeChatImg.src = chat.chatPic;\n    activeChatHeaderPic.classList.add(\"active-chat-header__pic--hide-svg\");\n    activeChatHeaderPic.classList.remove(\"active-chat-header__pic--hide-img\");\n  } else {\n    activeChatHeaderPic.classList.add(\"active-chat-header__pic--hide-img\");\n    activeChatHeaderPic.classList.remove(\"active-chat-header__pic--hide-svg\");\n  }\n\n  activeChatHeaderName.textContent = chat.chatName;\n\n  if (!chat.isGroupChat) {\n    if (chat.isUserActive) {\n      activeChatHeaderStatus.classList.remove(\"active-chat-header__chat-status--hide\");\n      activeChatHeaderStatus.textContent = \"Active\";\n    } else {\n      let {\n        timeDifferenceFromNow\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_calculateTimeDifference_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/calculateTimeDifference.dev */ \"./dev-javascripts/common/calculateTimeDifference.dev.js\"));\n      activeChatHeaderStatus.classList.remove(\"active-chat-header__chat-status--hide\");\n\n      if (chat.hasOwnProperty(\"userLastActive\")) {\n        activeChatHeaderStatus.textContent = `last active ${timeDifferenceFromNow(chat.userLastActive)} ago`;\n      } else {\n        activeChatHeaderStatus.textContent = \"\";\n      }\n    }\n  } else {\n    activeChatHeaderStatus.classList.remove(\"active-chat-header__chat-status--hide\");\n    activeChatHeaderStatus.textContent = \"\";\n  }\n\n  onOffActiveChatInputContainer(chat);\n}\nasync function clearActiveChatMessageContainer() {\n  let activeChatMessageContainer = document.getElementById(\"activeChatMessageContainer\");\n  activeChatMessageContainer.innerHTML = \"\";\n}\nasync function onOffActiveChatInputContainer(chat) {\n  const activeChatInputContainer = document.getElementById(\"activeChatInputContainer\");\n\n  if (chat.hasOwnProperty(\"canSendMessageToThisChat\") && chat.canSendMessageToThisChat === false) {\n    activeChatInputContainer.classList.add(\"active-chat-input-container--disable\");\n    activeChatInputContainer.classList.remove(\"active-chat-input-container--enable\");\n  } else {\n    activeChatInputContainer.classList.add(\"active-chat-input-container--enable\");\n    activeChatInputContainer.classList.remove(\"active-chat-input-container--disable\");\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYtamF2YXNjcmlwdHMvY2hhdC9qcy9zaG93QWN0aXZlQ2hhdFNlY3Rpb24uZGV2LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBSUEsY0FBYyxHQUFHQyxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsZ0JBQXhCLENBQXJCO0FBQ0EsSUFBSUMsaUJBQWlCLEdBQUdGLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixtQkFBeEIsQ0FBeEI7QUFDQSxNQUFNRSwwQkFBMEIsR0FBR0gsUUFBUSxDQUFDQyxjQUFULENBQ2pDLDRCQURpQyxDQUFuQztBQUlBLElBQUlHLDBCQUFKO0FBQ0EsSUFBSUMsd0JBQUo7QUFDTyxlQUFlQyxxQkFBZixDQUFxQ0MsSUFBckMsRUFBMkM7RUFDaEQsSUFBSUMsMEJBQTBCLEdBQUdSLFFBQVEsQ0FBQ0MsY0FBVCxDQUMvQiw0QkFEK0IsQ0FBakM7RUFHQU8sMEJBQTBCLENBQUNDLEtBQTNCLEdBQW1DLEVBQW5DO0VBQ0FOLDBCQUEwQixDQUFDTyxTQUEzQixHQUF1QyxFQUF2QztFQUNBQyx1QkFBdUIsQ0FBQ0osSUFBRCxDQUF2QjtFQUVBSCwwQkFBMEIsR0FBRyxDQUE3QjtFQUNBLElBQUlRLDJCQUEyQixHQUFHLE1BQU1DLEtBQUssQ0FDMUMsdUNBQXNDTixJQUFJLENBQUNPLEdBQUksRUFETCxDQUE3QztFQUdBLElBQUlDLHVCQUF1QixHQUFHLE1BQU1ILDJCQUEyQixDQUFDSSxJQUE1QixFQUFwQztFQUNBWCx3QkFBd0IsR0FBR1UsdUJBQXVCLENBQUNFLG1CQUFuRDtFQUVBLElBQUk7SUFBRUM7RUFBRixJQUE2QixNQUFNLHlMQUF2QztFQUNBQSxzQkFBc0I7O0VBRXRCLElBQUlDLHlCQUF5QixLQUFLQyxTQUFsQyxFQUE2QztJQUMzQ0QseUJBQXlCLENBQUNFLFVBQTFCO0VBQ0Q7O0VBQ0RDLGdDQUFnQzs7RUFDaEMsSUFBSUMsd0JBQXdCLEtBQUtILFNBQWpDLEVBQTRDO0lBQzFDRyx3QkFBd0IsQ0FBQ0YsVUFBekI7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b0IsMEJBQXBCLEtBQ0F6RSxJQUFJLENBQUNvRix3QkFBTCxLQUFrQyxLQUZwQyxFQUdFO0lBQ0FaLHdCQUF3QixDQUFDbEMsU0FBekIsQ0FBbUNDLEdBQW5DLENBQ0Usc0NBREY7SUFHQWlDLHdCQUF3QixDQUFDbEMsU0FBekIsQ0FBbUNFLE1BQW5DLENBQ0UscUNBREY7RUFHRCxDQVZELE1BVU87SUFDTGdDLHdCQUF3QixDQUFDbEMsU0FBekIsQ0FBbUNDLEdBQW5DLENBQ0UscUNBREY7SUFHQWlDLHdCQUF3QixDQUFDbEMsU0FBekIsQ0FBbUNFLE1BQW5DLENBQ0Usc0NBREY7RUFHRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9kZXYtamF2YXNjcmlwdHMvY2hhdC9qcy9zaG93QWN0aXZlQ2hhdFNlY3Rpb24uZGV2LmpzP2JiNzEiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IGFsbENoYXRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGxDaGF0U2VjdGlvblwiKVxyXG5sZXQgYWN0aXZlQ2hhdFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRTZWN0aW9uXCIpXHJcbmNvbnN0IGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lclwiXHJcbilcclxuXHJcbmxldCB0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudFxyXG5sZXQgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93QWN0aXZlQ2hhdFNlY3Rpb24oY2hhdCkge1xyXG4gIGxldCBhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgXCJhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudFwiXHJcbiAgKVxyXG4gIGFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50LnZhbHVlID0gXCJcIlxyXG4gIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCJcclxuICB1cGRhdGVBY3RpdmVDaGF0U2VjdGlvbihjaGF0KVxyXG5cclxuICB0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCA9IDBcclxuICBsZXQgdW5zZWVuTWVzc2FnZXNDb3VudFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICBgL21lc3NhZ2UvZGF0YS91bnNlZW4tbWVzc2FnZXMtY291bnQvJHtjaGF0Ll9pZH1gXHJcbiAgKVxyXG4gIGxldCB1bnNlZW5NZXNzYWdlc0NvdW50RGF0YSA9IGF3YWl0IHVuc2Vlbk1lc3NhZ2VzQ291bnRSZXNwb25zZS5qc29uKClcclxuICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQgPSB1bnNlZW5NZXNzYWdlc0NvdW50RGF0YS51bnNlZW5NZXNzYWdlc0NvdW50XHJcblxyXG4gIGxldCB7IG9wZW5BY3RpdmVDaGF0SW5wdXRCb3ggfSA9IGF3YWl0IGltcG9ydChcIi4uL2NoYXQuZGV2LmpzXCIpXHJcbiAgb3BlbkFjdGl2ZUNoYXRJbnB1dEJveCgpXHJcblxyXG4gIGlmIChVU0VSX01FU1NBR0VfQk9YX09CU0VSVkVSICE9PSB1bmRlZmluZWQpIHtcclxuICAgIFVTRVJfTUVTU0FHRV9CT1hfT0JTRVJWRVIuZGlzY29ubmVjdCgpXHJcbiAgfVxyXG4gIGluaXRpYWxpemVVc2VyTWVzc2FnZUJveE9ic2VydmVyKClcclxuICBpZiAoVE9QX01FU1NBR0VfQk9YX09CU0VSVkVSICE9PSB1bmRlZmluZWQpIHtcclxuICAgIFRPUF9NRVNTQUdFX0JPWF9PQlNFUlZFUi5kaXNjb25uZWN0KClcclxuICB9XHJcbiAgaW5pdGlhbGl6ZVRvcE1lc3NhZ2VCb3hPYnNlcnZlcigpXHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICBjb25zdCB7IGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzIH0gPSBhd2FpdCBpbXBvcnQoXCIuL21lc3NhZ2UuZGV2XCIpXHJcblxyXG4gIGZldGNoKGAvbWVzc2FnZS9mZXRjaC1tZXNzYWdlcy8ke2NoYXQuX2lkfT90b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudD0wYClcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZSlcclxuICAgIH0pXHJcbiAgICAudGhlbihhc3luYyBkYXRhID0+IHtcclxuICAgICAgaWYgKGRhdGEuaXNTdWNjZXNzKSB7XHJcbiAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIlxyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgaWYgKGRhdGEuYWxsTWVzc2FnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQgKz0gZGF0YS5hbGxNZXNzYWdlcy5sZW5ndGhcclxuICAgICAgICAgIGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzKFxyXG4gICAgICAgICAgICBkYXRhLmFsbE1lc3NhZ2VzLFxyXG4gICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lcixcclxuICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgIClcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQpXHJcbiAgICAgICAgICAgICAgVE9QX01FU1NBR0VfQk9YX09CU0VSVkVSLm9ic2VydmUoXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZFxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgIH0sIDIwMDApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgeyBhZGp1c3RNZXNzYWdlQ29udGFpbmVyQm90dG9tUGFkZGluZyB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgICAgXCIuLi9jaGF0LmRldlwiXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGFkanVzdE1lc3NhZ2VDb250YWluZXJCb3R0b21QYWRkaW5nKClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgeyBjcmVhdGVNYWluTm90aWZpY2F0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgICAgICBcIi4uLy4uL2NvbW1vbi9tYWluTm90aWZpY2F0aW9uLmRldlwiXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGNyZWF0ZU1haW5Ob3RpZmljYXRpb24oZGF0YS5lcnJvciwgXCJlcnJvclwiKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGFzeW5jIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgbGV0IHsgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgIFwiLi4vLi4vY29tbW9uL21haW5Ob3RpZmljYXRpb24uZGV2XCJcclxuICAgICAgKVxyXG4gICAgICBjcmVhdGVNYWluTm90aWZpY2F0aW9uKFxyXG4gICAgICAgIFwiU2VydmVyIEVycm9yIEluIEFjY2Vzc2luZyBNZXNzYWdlcywgUGxlYXNlIFJlZnJlc2ggWW91ciBQYWdlXCIsXHJcbiAgICAgICAgXCJlcnJvclwiXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gIGFsbENoYXRTZWN0aW9uLmNsYXNzTGlzdC5hZGQoXCJhbGwtY2hhdC1zZWN0aW9uLS1oaWRlXCIpXHJcbiAgYWN0aXZlQ2hhdFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1jaGF0LXNlY3Rpb24tLWhpZGVcIilcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZVVzZXJNZXNzYWdlQm94T2JzZXJ2ZXIoKSB7XHJcbiAgVVNFUl9NRVNTQUdFX0JPWF9PQlNFUlZFUiA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcclxuICAgIGFzeW5jIChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xyXG4gICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xyXG4gICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgbGV0IG1lc3NhZ2VJZCA9IGVudHJ5LnRhcmdldC5kYXRhc2V0Lm1lc3NhZ2VJZFxyXG4gICAgICAgICAgc29ja2V0LmVtaXQoXCJjaGF0OnVwZGF0ZS1tZXNzYWdlLXNlZW4tc3RhdHVzXCIsIHtcclxuICAgICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlSWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICB7IHRocmVzaG9sZDogMC41LCByb290OiBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lciB9XHJcbiAgKVxyXG59XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVUb3BNZXNzYWdlQm94T2JzZXJ2ZXIoKSB7XHJcbiAgVE9QX01FU1NBR0VfQk9YX09CU0VSVkVSID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxyXG4gICAgYXN5bmMgKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XHJcbiAgICAgIGVudHJpZXMuZm9yRWFjaChhc3luYyBlbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KVxyXG4gICAgICAgICAgbGV0IGNoYXRJZCA9IGFjdGl2ZUNoYXRTZWN0aW9uLmRhdGFzZXQuY2hhdElkXHJcblxyXG4gICAgICAgICAgY29uc3QgeyBjcmVhdGVMb2FkaW5nTWVzc2FnZXNBbmltYXRpb24gfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICAgICAgXCIuL21lc3NhZ2UuZGV2XCJcclxuICAgICAgICAgIClcclxuICAgICAgICAgIGxldCBsb2FkaW5nTWVzc2FnZUFuaW1hdGlvbkJveCA9IGNyZWF0ZUxvYWRpbmdNZXNzYWdlc0FuaW1hdGlvbigpXHJcbiAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoXHJcbiAgICAgICAgICAgIFwiYWZ0ZXJiZWdpblwiLFxyXG4gICAgICAgICAgICBsb2FkaW5nTWVzc2FnZUFuaW1hdGlvbkJveFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgLy8gYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuc2Nyb2xsVG9wICs9IDEwMFxyXG4gICAgICAgICAgYXdhaXQgZmV0Y2hNZXNzYWdlQW5kQ3JlYXRlVXNlck1lc3NhZ2VCb3goY2hhdElkKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICB7IHRocmVzaG9sZDogMC41LCByb290OiBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lciwgcm9vdE1hcmdpbjogXCIxMDBweFwiIH1cclxuICApXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoTWVzc2FnZUFuZENyZWF0ZVVzZXJNZXNzYWdlQm94KGNoYXRJZCkge1xyXG4gIGNvbnN0IHsgY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMgfSA9IGF3YWl0IGltcG9ydChcIi4vbWVzc2FnZS5kZXZcIilcclxuXHJcbiAgZmV0Y2goXHJcbiAgICBgL21lc3NhZ2UvZmV0Y2gtbWVzc2FnZXMvJHtjaGF0SWR9P3RvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50PSR7dG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnR9YFxyXG4gIClcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZSlcclxuICAgIH0pXHJcbiAgICAudGhlbihhc3luYyBkYXRhID0+IHtcclxuICAgICAgaWYgKGRhdGEuaXNTdWNjZXNzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuXHJcbiAgICAgICAgaWYgKGRhdGEuYWxsTWVzc2FnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQgKz0gZGF0YS5hbGxNZXNzYWdlcy5sZW5ndGhcclxuICAgICAgICAgIGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzKFxyXG4gICAgICAgICAgICBkYXRhLmFsbE1lc3NhZ2VzLFxyXG4gICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lcixcclxuICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZClcclxuICAgICAgICAgICAgICBUT1BfTUVTU0FHRV9CT1hfT0JTRVJWRVIub2JzZXJ2ZShcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfSwgMjAwMClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbGV0IGxvYWRpbmdNZXNzYWdlQW5pbWF0aW9uQm94ID0gW1xyXG4gICAgICAgICAgICAuLi5hY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxyXG4gICAgICAgICAgICAgIFwibG9hZGluZy1tZXNzYWdlLWFuaW1hdGlvbi1ib3hcIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgICBsb2FkaW5nTWVzc2FnZUFuaW1hdGlvbkJveC5mb3JFYWNoKGJveCA9PiB7XHJcbiAgICAgICAgICAgIGJveC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJveClcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCB7IGNyZWF0ZU1haW5Ob3RpZmljYXRpb24gfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICAgIFwiLi4vLi4vY29tbW9uL21haW5Ob3RpZmljYXRpb24uZGV2XCJcclxuICAgICAgICApXHJcbiAgICAgICAgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbihkYXRhLmVycm9yLCBcImVycm9yXCIpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuY2F0Y2goYXN5bmMgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICBsZXQgeyBjcmVhdGVNYWluTm90aWZpY2F0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgICAgXCIuLi8uLi9jb21tb24vbWFpbk5vdGlmaWNhdGlvbi5kZXZcIlxyXG4gICAgICApXHJcbiAgICAgIGNyZWF0ZU1haW5Ob3RpZmljYXRpb24oXHJcbiAgICAgICAgXCJTZXJ2ZXIgRXJyb3IgSW4gQWNjZXNzaW5nIE1lc3NhZ2VzLCBQbGVhc2UgUmVmcmVzaCBZb3VyIFBhZ2VcIixcclxuICAgICAgICBcImVycm9yXCJcclxuICAgICAgKVxyXG4gICAgfSlcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbmNyZWFzZVRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50KCkge1xyXG4gIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCA9IDBcclxuICB0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCsrXHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVBY3RpdmVDaGF0U2VjdGlvbihjaGF0KSB7XHJcbiAgbGV0IHsgY2xvc2VSZXBseU1lc3NhZ2VCb3ggfSA9IGF3YWl0IGltcG9ydChcIi4vcmVwbHlNZXNzYWdlQm94LmRldi5qc1wiKVxyXG4gIGNsb3NlUmVwbHlNZXNzYWdlQm94KClcclxuICBhY3RpdmVDaGF0U2VjdGlvbi5kYXRhc2V0LmNoYXRJZCA9IGNoYXQuX2lkXHJcbiAgY29uc3QgYWN0aXZlQ2hhdEhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdEhlYWRlclwiKVxyXG4gIGNvbnN0IGFjdGl2ZUNoYXRIZWFkZXJQaWMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRIZWFkZXJQaWNcIilcclxuICBjb25zdCBhY3RpdmVDaGF0SW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0SW1nXCIpXHJcbiAgY29uc3QgYWN0aXZlQ2hhdEhlYWRlck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRIZWFkZXJOYW1lXCIpXHJcbiAgY29uc3QgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgXCJhY3RpdmVDaGF0SGVhZGVyU3RhdHVzXCJcclxuICApXHJcbiAgY29uc3QgYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICBcImFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lclwiXHJcbiAgKVxyXG5cclxuICBhY3RpdmVDaGF0SGVhZGVyLmRhdGFzZXQuY2hhdElkID0gY2hhdC5faWRcclxuXHJcbiAgaWYgKGNoYXQuaGFzT3duUHJvcGVydHkoXCJjaGF0UGljXCIpICYmIGNoYXQuY2hhdFBpYyAhPT0gXCJcIikge1xyXG4gICAgYWN0aXZlQ2hhdEltZy5zcmMgPSBjaGF0LmNoYXRQaWNcclxuXHJcbiAgICBhY3RpdmVDaGF0SGVhZGVyUGljLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtY2hhdC1oZWFkZXJfX3BpYy0taGlkZS1zdmdcIilcclxuICAgIGFjdGl2ZUNoYXRIZWFkZXJQaWMuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1jaGF0LWhlYWRlcl9fcGljLS1oaWRlLWltZ1wiKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBhY3RpdmVDaGF0SGVhZGVyUGljLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtY2hhdC1oZWFkZXJfX3BpYy0taGlkZS1pbWdcIilcclxuICAgIGFjdGl2ZUNoYXRIZWFkZXJQaWMuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1jaGF0LWhlYWRlcl9fcGljLS1oaWRlLXN2Z1wiKVxyXG4gIH1cclxuICBhY3RpdmVDaGF0SGVhZGVyTmFtZS50ZXh0Q29udGVudCA9IGNoYXQuY2hhdE5hbWVcclxuICBpZiAoIWNoYXQuaXNHcm91cENoYXQpIHtcclxuICAgIGlmIChjaGF0LmlzVXNlckFjdGl2ZSkge1xyXG4gICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgXCJhY3RpdmUtY2hhdC1oZWFkZXJfX2NoYXQtc3RhdHVzLS1oaWRlXCJcclxuICAgICAgKVxyXG4gICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLnRleHRDb250ZW50ID0gXCJBY3RpdmVcIlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHsgdGltZURpZmZlcmVuY2VGcm9tTm93IH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgICAgXCIuLi8uLi9jb21tb24vY2FsY3VsYXRlVGltZURpZmZlcmVuY2UuZGV2XCJcclxuICAgICAgKVxyXG4gICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgXCJhY3RpdmUtY2hhdC1oZWFkZXJfX2NoYXQtc3RhdHVzLS1oaWRlXCJcclxuICAgICAgKVxyXG4gICAgICBpZiAoY2hhdC5oYXNPd25Qcm9wZXJ0eShcInVzZXJMYXN0QWN0aXZlXCIpKSB7XHJcbiAgICAgICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy50ZXh0Q29udGVudCA9IGBsYXN0IGFjdGl2ZSAke3RpbWVEaWZmZXJlbmNlRnJvbU5vdyhcclxuICAgICAgICAgIGNoYXQudXNlckxhc3RBY3RpdmVcclxuICAgICAgICApfSBhZ29gXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy50ZXh0Q29udGVudCA9IFwiXCJcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgIFwiYWN0aXZlLWNoYXQtaGVhZGVyX19jaGF0LXN0YXR1cy0taGlkZVwiXHJcbiAgICApXHJcbiAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLnRleHRDb250ZW50ID0gXCJcIlxyXG4gIH1cclxuXHJcbiAgb25PZmZBY3RpdmVDaGF0SW5wdXRDb250YWluZXIoY2hhdClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyQWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIoKSB7XHJcbiAgbGV0IGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICBcImFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyXCJcclxuICApXHJcbiAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIlxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb25PZmZBY3RpdmVDaGF0SW5wdXRDb250YWluZXIoY2hhdCkge1xyXG4gIGNvbnN0IGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgXCJhY3RpdmVDaGF0SW5wdXRDb250YWluZXJcIlxyXG4gIClcclxuICBpZiAoXHJcbiAgICBjaGF0Lmhhc093blByb3BlcnR5KFwiY2FuU2VuZE1lc3NhZ2VUb1RoaXNDaGF0XCIpICYmXHJcbiAgICBjaGF0LmNhblNlbmRNZXNzYWdlVG9UaGlzQ2hhdCA9PT0gZmFsc2VcclxuICApIHtcclxuICAgIGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWNvbnRhaW5lci0tZGlzYWJsZVwiXHJcbiAgICApXHJcbiAgICBhY3RpdmVDaGF0SW5wdXRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgXCJhY3RpdmUtY2hhdC1pbnB1dC1jb250YWluZXItLWVuYWJsZVwiXHJcbiAgICApXHJcbiAgfSBlbHNlIHtcclxuICAgIGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWNvbnRhaW5lci0tZW5hYmxlXCJcclxuICAgIClcclxuICAgIGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWNvbnRhaW5lci0tZGlzYWJsZVwiXHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJhbGxDaGF0U2VjdGlvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhY3RpdmVDaGF0U2VjdGlvbiIsImFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyIiwidG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQiLCJ0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQiLCJzaG93QWN0aXZlQ2hhdFNlY3Rpb24iLCJjaGF0IiwiYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnQiLCJ2YWx1ZSIsImlubmVySFRNTCIsInVwZGF0ZUFjdGl2ZUNoYXRTZWN0aW9uIiwidW5zZWVuTWVzc2FnZXNDb3VudFJlc3BvbnNlIiwiZmV0Y2giLCJfaWQiLCJ1bnNlZW5NZXNzYWdlc0NvdW50RGF0YSIsImpzb24iLCJ1bnNlZW5NZXNzYWdlc0NvdW50Iiwib3BlbkFjdGl2ZUNoYXRJbnB1dEJveCIsIlVTRVJfTUVTU0FHRV9CT1hfT0JTRVJWRVIiLCJ1bmRlZmluZWQiLCJkaXNjb25uZWN0IiwiaW5pdGlhbGl6ZVVzZXJNZXNzYWdlQm94T2JzZXJ2ZXIiLCJUT1BfTUVTU0FHRV9CT1hfT0JTRVJWRVIiLCJpbml0aWFsaXplVG9wTWVzc2FnZUJveE9ic2VydmVyIiwiY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMiLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsIlByb21pc2UiLCJyZWplY3QiLCJkYXRhIiwiaXNTdWNjZXNzIiwiY29uc29sZSIsImxvZyIsImFsbE1lc3NhZ2VzIiwibGVuZ3RoIiwic2V0VGltZW91dCIsImZpcnN0RWxlbWVudENoaWxkIiwib2JzZXJ2ZSIsImFkanVzdE1lc3NhZ2VDb250YWluZXJCb3R0b21QYWRkaW5nIiwiY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiIsImVycm9yIiwiY2F0Y2giLCJlcnIiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJvYnNlcnZlciIsImZvckVhY2giLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwibWVzc2FnZUlkIiwidGFyZ2V0IiwiZGF0YXNldCIsInNvY2tldCIsImVtaXQiLCJ1bm9ic2VydmUiLCJ0aHJlc2hvbGQiLCJyb290IiwiY2hhdElkIiwiY3JlYXRlTG9hZGluZ01lc3NhZ2VzQW5pbWF0aW9uIiwibG9hZGluZ01lc3NhZ2VBbmltYXRpb25Cb3giLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJmZXRjaE1lc3NhZ2VBbmRDcmVhdGVVc2VyTWVzc2FnZUJveCIsInJvb3RNYXJnaW4iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiYm94IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaW5jcmVhc2VUb3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCIsImNsb3NlUmVwbHlNZXNzYWdlQm94IiwiYWN0aXZlQ2hhdEhlYWRlciIsImFjdGl2ZUNoYXRIZWFkZXJQaWMiLCJhY3RpdmVDaGF0SW1nIiwiYWN0aXZlQ2hhdEhlYWRlck5hbWUiLCJhY3RpdmVDaGF0SGVhZGVyU3RhdHVzIiwiYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyIiwiaGFzT3duUHJvcGVydHkiLCJjaGF0UGljIiwic3JjIiwidGV4dENvbnRlbnQiLCJjaGF0TmFtZSIsImlzR3JvdXBDaGF0IiwiaXNVc2VyQWN0aXZlIiwidGltZURpZmZlcmVuY2VGcm9tTm93IiwidXNlckxhc3RBY3RpdmUiLCJvbk9mZkFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lciIsImNsZWFyQWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIiLCJjYW5TZW5kTWVzc2FnZVRvVGhpc0NoYXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./dev-javascripts/chat/js/showActiveChatSection.dev.js\n");

/***/ })

}]);