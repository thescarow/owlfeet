"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkfrontend"] = self["webpackChunkfrontend"] || []).push([["dev-javascripts_chat_js_showActiveChatSection_dev_js"],{

/***/ "./dev-javascripts/chat/js/showActiveChatSection.dev.js":
/*!**************************************************************!*\
  !*** ./dev-javascripts/chat/js/showActiveChatSection.dev.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clearActiveChatMessageContainer\": () => (/* binding */ clearActiveChatMessageContainer),\n/* harmony export */   \"increaseTotalReceivedMessagesCount\": () => (/* binding */ increaseTotalReceivedMessagesCount),\n/* harmony export */   \"onOffActiveChatInputContainer\": () => (/* binding */ onOffActiveChatInputContainer),\n/* harmony export */   \"showActiveChatSection\": () => (/* binding */ showActiveChatSection),\n/* harmony export */   \"updateActiveChatSection\": () => (/* binding */ updateActiveChatSection)\n/* harmony export */ });\nlet allChatSection = document.getElementById(\"allChatSection\");\nlet activeChatSection = document.getElementById(\"activeChatSection\");\nconst activeChatMessageContainer = document.getElementById(\"activeChatMessageContainer\");\nlet totalReceivedMessagesCount;\nlet totalUnseenMessagesCount;\nasync function showActiveChatSection(chat) {\n  let activeChatInputTextContent = document.getElementById(\"activeChatInputTextContent\");\n  activeChatInputTextContent.value = \"\";\n  activeChatMessageContainer.innerHTML = \"\";\n  updateActiveChatSection(chat);\n  totalReceivedMessagesCount = 0;\n  let unseenMessagesCountResponse = await fetch(`/message/data/unseen-messages-count/${chat._id}`);\n  let unseenMessagesCountData = await unseenMessagesCountResponse.json();\n  totalUnseenMessagesCount = unseenMessagesCountData.unseenMessagesCount;\n  console.log(\"totalUnseenMessagesCount: \" + totalUnseenMessagesCount);\n  let {\n    openActiveChatInputBox\n  } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_chat_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../chat.dev.js */ \"./dev-javascripts/chat/chat.dev.js\"));\n  openActiveChatInputBox();\n\n  if (USER_MESSAGE_BOX_OBSERVER !== undefined) {\n    USER_MESSAGE_BOX_OBSERVER.disconnect();\n  }\n\n  initializeUserMessageBoxObserver();\n\n  if (TOP_MESSAGE_BOX_OBSERVER !== undefined) {\n    TOP_MESSAGE_BOX_OBSERVER.disconnect();\n  }\n\n  initializeTopMessageBoxObserver();\n\n  if (BOTTOM_MESSAGE_BOX_OBSERVER !== undefined) {\n    BOTTOM_MESSAGE_BOX_OBSERVER.disconnect();\n  }\n\n  initializeBottomMessageBoxObserver(); ///////////////////\n\n  const {\n    checkTimeAndCreateOldMessages\n  } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n  fetch(`/message/fetch-messages/${chat._id}?totalReceivedMessagesCount=0`).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(response);\n  }).then(async data => {\n    if (data.isSuccess) {\n      activeChatMessageContainer.innerHTML = \"\";\n      console.log(data);\n\n      if (data.allMessages.length > 0) {\n        totalReceivedMessagesCount += data.allMessages.length;\n\n        if (totalUnseenMessagesCount !== 0 && totalUnseenMessagesCount <= totalReceivedMessagesCount) {\n          let {\n            createUnseenMessageTagBox\n          } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n          let positionForUnseeenMessageTag = data.allMessages.length - (totalReceivedMessagesCount - totalUnseenMessagesCount);\n          checkTimeAndCreateOldMessages(data.allMessages.slice(0, positionForUnseeenMessageTag), activeChatMessageContainer, false, true);\n          createUnseenMessageTagBox(totalUnseenMessagesCount, activeChatMessageContainer, \"afterbegin\");\n          checkTimeAndCreateOldMessages(data.allMessages.slice(positionForUnseeenMessageTag), activeChatMessageContainer, false, true);\n          totalUnseenMessagesCount = 0;\n        } else {\n          checkTimeAndCreateOldMessages(data.allMessages, activeChatMessageContainer, false, true);\n        }\n\n        setTimeout(() => {\n          if (activeChatMessageContainer.firstElementChild) TOP_MESSAGE_BOX_OBSERVER.observe(activeChatMessageContainer.firstElementChild);\n        }, 2000);\n        setTimeout(() => {\n          if (activeChatMessageContainer.lastElementChild) BOTTOM_MESSAGE_BOX_OBSERVER.observe(activeChatMessageContainer.lastElementChild);\n        }, 2000);\n      }\n\n      let {\n        adjustMessageContainerBottomPadding\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_chat_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../chat.dev */ \"./dev-javascripts/chat/chat.dev.js\"));\n      adjustMessageContainerBottomPadding();\n    } else {\n      let {\n        createMainNotification\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n      createMainNotification(data.error, \"error\");\n    }\n  }).catch(async err => {\n    console.log(err);\n    let {\n      createMainNotification\n    } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n    createMainNotification(\"Server Error In Accessing Messages, Please Refresh Your Page\", \"error\");\n  });\n  allChatSection.classList.add(\"all-chat-section--hide\");\n  activeChatSection.classList.remove(\"active-chat-section--hide\");\n}\n\nfunction initializeUserMessageBoxObserver() {\n  USER_MESSAGE_BOX_OBSERVER = new IntersectionObserver(async (entries, observer) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting === true) {\n        let messageId = entry.target.dataset.messageId;\n        socket.emit(\"chat:update-message-seen-status\", {\n          messageId: messageId\n        });\n        observer.unobserve(entry.target);\n      }\n    });\n  }, {\n    threshold: 0.5,\n    root: activeChatMessageContainer\n  });\n}\n\nfunction initializeTopMessageBoxObserver() {\n  TOP_MESSAGE_BOX_OBSERVER = new IntersectionObserver(async (entries, observer) => {\n    entries.forEach(async entry => {\n      if (entry.isIntersecting === true) {\n        observer.unobserve(entry.target);\n        let chatId = activeChatSection.dataset.chatId;\n        const {\n          createLoadingMessagesAnimation\n        } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n        let loadingMessageAnimationBox = createLoadingMessagesAnimation();\n        activeChatMessageContainer.insertAdjacentElement(\"afterbegin\", loadingMessageAnimationBox); // activeChatMessageContainer.scrollTop += 100\n\n        await fetchMessageAndCreateUserMessageBox(chatId);\n      }\n    });\n  }, {\n    threshold: 0.5,\n    root: activeChatMessageContainer,\n    rootMargin: \"100px\"\n  });\n}\n\nfunction initializeBottomMessageBoxObserver() {\n  BOTTOM_MESSAGE_BOX_OBSERVER = new IntersectionObserver(async (entries, observer) => {\n    entries.forEach(async entry => {\n      if (entry.isIntersecting === true) {\n        observer.unobserve(entry.target);\n        let chatId = activeChatSection.dataset.chatId;\n        socket.emit(\"chat:update-chat-unseen-messages\", {\n          chatId: chatId\n        });\n      }\n    });\n  }, {\n    threshold: 0.5,\n    root: activeChatMessageContainer\n  });\n}\n\nasync function fetchMessageAndCreateUserMessageBox(chatId) {\n  const {\n    checkTimeAndCreateOldMessages\n  } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n  fetch(`/message/fetch-messages/${chatId}?totalReceivedMessagesCount=${totalReceivedMessagesCount}`).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(response);\n  }).then(async data => {\n    if (data.isSuccess) {\n      console.log(data);\n\n      if (data.allMessages.length > 0) {\n        totalReceivedMessagesCount += data.allMessages.length;\n\n        if (totalUnseenMessagesCount !== 0 && totalUnseenMessagesCount <= totalReceivedMessagesCount) {\n          let {\n            createUnseenMessageTagBox\n          } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n          let positionForUnseeenMessageTag = data.allMessages.length - (totalReceivedMessagesCount - totalUnseenMessagesCount);\n          checkTimeAndCreateOldMessages(data.allMessages.slice(0, positionForUnseeenMessageTag), activeChatMessageContainer, false, false);\n          createUnseenMessageTagBox(totalUnseenMessagesCount, activeChatMessageContainer, \"afterbegin\");\n          checkTimeAndCreateOldMessages(data.allMessages.slice(positionForUnseeenMessageTag), activeChatMessageContainer, false, false);\n          totalUnseenMessagesCount = 0;\n        } else {\n          checkTimeAndCreateOldMessages(data.allMessages, activeChatMessageContainer, false, false);\n        }\n\n        setTimeout(() => {\n          if (activeChatMessageContainer.firstElementChild) TOP_MESSAGE_BOX_OBSERVER.observe(activeChatMessageContainer.firstElementChild);\n        }, 2000);\n      } else {\n        let loadingMessageAnimationBox = [...activeChatMessageContainer.getElementsByClassName(\"loading-message-animation-box\")];\n        loadingMessageAnimationBox.forEach(box => {\n          box.parentNode.removeChild(box);\n        });\n      }\n    } else {\n      let {\n        createMainNotification\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n      createMainNotification(data.error, \"error\");\n    }\n  }).catch(async err => {\n    console.log(err);\n    let {\n      createMainNotification\n    } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n    createMainNotification(\"Server Error In Accessing Messages, Please Refresh Your Page\", \"error\");\n  });\n} //////////////////////////\n\n\nfunction increaseTotalReceivedMessagesCount() {\n  totalUnseenMessagesCount = 0;\n  totalReceivedMessagesCount++;\n} /////////////////\n\nasync function updateActiveChatSection(chat) {\n  let {\n    closeReplyMessageBox\n  } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_js_replyMessageBox_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./replyMessageBox.dev.js */ \"./dev-javascripts/chat/js/replyMessageBox.dev.js\"));\n  closeReplyMessageBox();\n  activeChatSection.dataset.chatId = chat._id;\n  const activeChatHeader = document.getElementById(\"activeChatHeader\");\n  const activeChatHeaderPic = document.getElementById(\"activeChatHeaderPic\");\n  const activeChatImg = document.getElementById(\"activeChatImg\");\n  const activeChatHeaderName = document.getElementById(\"activeChatHeaderName\");\n  const activeChatHeaderStatus = document.getElementById(\"activeChatHeaderStatus\");\n  const activeChatInputContainer = document.getElementById(\"activeChatInputContainer\");\n  activeChatHeader.dataset.chatId = chat._id;\n\n  if (chat.hasOwnProperty(\"chatPic\") && chat.chatPic !== \"\") {\n    activeChatImg.src = chat.chatPic;\n    activeChatHeaderPic.classList.add(\"active-chat-header__pic--hide-svg\");\n    activeChatHeaderPic.classList.remove(\"active-chat-header__pic--hide-img\");\n  } else {\n    activeChatHeaderPic.classList.add(\"active-chat-header__pic--hide-img\");\n    activeChatHeaderPic.classList.remove(\"active-chat-header__pic--hide-svg\");\n  }\n\n  activeChatHeaderName.textContent = chat.chatName;\n\n  if (!chat.isGroupChat) {\n    if (chat.isUserActive) {\n      activeChatHeaderStatus.classList.remove(\"active-chat-header__chat-status--hide\");\n      activeChatHeaderStatus.textContent = \"Active\";\n    } else {\n      let {\n        timeDifferenceFromNow\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_calculateTimeDifference_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/calculateTimeDifference.dev */ \"./dev-javascripts/common/calculateTimeDifference.dev.js\"));\n      activeChatHeaderStatus.classList.remove(\"active-chat-header__chat-status--hide\");\n\n      if (chat.hasOwnProperty(\"userLastActive\")) {\n        activeChatHeaderStatus.textContent = `last active ${timeDifferenceFromNow(chat.userLastActive)} ago`;\n      } else {\n        activeChatHeaderStatus.textContent = \"\";\n      }\n    }\n  } else {\n    activeChatHeaderStatus.classList.remove(\"active-chat-header__chat-status--hide\");\n    activeChatHeaderStatus.textContent = \"\";\n  }\n\n  onOffActiveChatInputContainer(chat);\n}\nasync function clearActiveChatMessageContainer() {\n  let activeChatMessageContainer = document.getElementById(\"activeChatMessageContainer\");\n  activeChatMessageContainer.innerHTML = \"\";\n}\nasync function onOffActiveChatInputContainer(chat) {\n  const activeChatInputContainer = document.getElementById(\"activeChatInputContainer\");\n\n  if (chat.hasOwnProperty(\"canSendMessageToThisChat\") && chat.canSendMessageToThisChat === false) {\n    activeChatInputContainer.classList.add(\"active-chat-input-container--disable\");\n    activeChatInputContainer.classList.remove(\"active-chat-input-container--enable\");\n  } else {\n    activeChatInputContainer.classList.add(\"active-chat-input-container--enable\");\n    activeChatInputContainer.classList.remove(\"active-chat-input-container--disable\");\n  }\n} ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYtamF2YXNjcmlwdHMvY2hhdC9qcy9zaG93QWN0aXZlQ2hhdFNlY3Rpb24uZGV2LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBSUEsY0FBYyxHQUFHQyxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsZ0JBQXhCLENBQXJCO0FBQ0EsSUFBSUMsaUJBQWlCLEdBQUdGLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixtQkFBeEIsQ0FBeEI7QUFDQSxNQUFNRSwwQkFBMEIsR0FBR0gsUUFBUSxDQUFDQyxjQUFULENBQ2pDLDRCQURpQyxDQUFuQztBQUlBLElBQUlHLDBCQUFKO0FBQ0EsSUFBSUMsd0JBQUo7QUFDTyxlQUFlQyxxQkFBZixDQUFxQ0MsSUFBckMsRUFBMkM7RUFDaEQsSUFBSUMsMEJBQTBCLEdBQUdSLFFBQVEsQ0FBQ0MsY0FBVCxDQUMvQiw0QkFEK0IsQ0FBakM7RUFHQU8sMEJBQTBCLENBQUNDLEtBQTNCLEdBQW1DLEVBQW5DO0VBQ0FOLDBCQUEwQixDQUFDTyxTQUEzQixHQUF1QyxFQUF2QztFQUNBQyx1QkFBdUIsQ0FBQ0osSUFBRCxDQUF2QjtFQUVBSCwwQkFBMEIsR0FBRyxDQUE3QjtFQUNBLElBQUlRLDJCQUEyQixHQUFHLE1BQU1DLEtBQUssQ0FDMUMsdUNBQXNDTixJQUFJLENBQUNPLEdBQUksRUFETCxDQUE3QztFQUdBLElBQUlDLHVCQUF1QixHQUFHLE1BQU1ILDJCQUEyQixDQUFDSSxJQUE1QixFQUFwQztFQUNBWCx3QkFBd0IsR0FBR1UsdUJBQXVCLENBQUNFLG1CQUFuRDtFQUNBQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSwrQkFBK0JkLHdCQUEzQztFQUNBLElBQUk7SUFBRWU7RUFBRixJQUE2QixNQUFNLHlMQUF2QztFQUNBQSxzQkFBc0I7O0VBRXRCLElBQUlDLHlCQUF5QixLQUFLQyxTQUFsQyxFQUE2QztJQUMzQ0QseUJBQXlCLENBQUNFLFVBQTFCO0VBQ0Q7O0VBQ0RDLGdDQUFnQzs7RUFDaEMsSUFBSUMsd0JBQXdCLEtB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Q0FBb0IsMEJBQXBCLEtBQ0EvRSxJQUFJLENBQUMwRix3QkFBTCxLQUFrQyxLQUZwQyxFQUdFO0lBQ0FaLHdCQUF3QixDQUFDbEMsU0FBekIsQ0FBbUNDLEdBQW5DLENBQ0Usc0NBREY7SUFHQWlDLHdCQUF3QixDQUFDbEMsU0FBekIsQ0FBbUNFLE1BQW5DLENBQ0UscUNBREY7RUFHRCxDQVZELE1BVU87SUFDTGdDLHdCQUF3QixDQUFDbEMsU0FBekIsQ0FBbUNDLEdBQW5DLENBQ0UscUNBREY7SUFHQWlDLHdCQUF3QixDQUFDbEMsU0FBekIsQ0FBbUNFLE1BQW5DLENBQ0Usc0NBREY7RUFHRDtBQUNGLEVBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL2Rldi1qYXZhc2NyaXB0cy9jaGF0L2pzL3Nob3dBY3RpdmVDaGF0U2VjdGlvbi5kZXYuanM/YmI3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgYWxsQ2hhdFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsbENoYXRTZWN0aW9uXCIpXHJcbmxldCBhY3RpdmVDaGF0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdFNlY3Rpb25cIilcclxuY29uc3QgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcImFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyXCJcclxuKVxyXG5cclxubGV0IHRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50XHJcbmxldCB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3dBY3RpdmVDaGF0U2VjdGlvbihjaGF0KSB7XHJcbiAgbGV0IGFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICBcImFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50XCJcclxuICApXHJcbiAgYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnQudmFsdWUgPSBcIlwiXHJcbiAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIlxyXG4gIHVwZGF0ZUFjdGl2ZUNoYXRTZWN0aW9uKGNoYXQpXHJcblxyXG4gIHRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50ID0gMFxyXG4gIGxldCB1bnNlZW5NZXNzYWdlc0NvdW50UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgIGAvbWVzc2FnZS9kYXRhL3Vuc2Vlbi1tZXNzYWdlcy1jb3VudC8ke2NoYXQuX2lkfWBcclxuICApXHJcbiAgbGV0IHVuc2Vlbk1lc3NhZ2VzQ291bnREYXRhID0gYXdhaXQgdW5zZWVuTWVzc2FnZXNDb3VudFJlc3BvbnNlLmpzb24oKVxyXG4gIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCA9IHVuc2Vlbk1lc3NhZ2VzQ291bnREYXRhLnVuc2Vlbk1lc3NhZ2VzQ291bnRcclxuICBjb25zb2xlLmxvZyhcInRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudDogXCIgKyB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQpXHJcbiAgbGV0IHsgb3BlbkFjdGl2ZUNoYXRJbnB1dEJveCB9ID0gYXdhaXQgaW1wb3J0KFwiLi4vY2hhdC5kZXYuanNcIilcclxuICBvcGVuQWN0aXZlQ2hhdElucHV0Qm94KClcclxuXHJcbiAgaWYgKFVTRVJfTUVTU0FHRV9CT1hfT0JTRVJWRVIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgVVNFUl9NRVNTQUdFX0JPWF9PQlNFUlZFUi5kaXNjb25uZWN0KClcclxuICB9XHJcbiAgaW5pdGlhbGl6ZVVzZXJNZXNzYWdlQm94T2JzZXJ2ZXIoKVxyXG4gIGlmIChUT1BfTUVTU0FHRV9CT1hfT0JTRVJWRVIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgVE9QX01FU1NBR0VfQk9YX09CU0VSVkVSLmRpc2Nvbm5lY3QoKVxyXG4gIH1cclxuICBpbml0aWFsaXplVG9wTWVzc2FnZUJveE9ic2VydmVyKClcclxuICBpZiAoQk9UVE9NX01FU1NBR0VfQk9YX09CU0VSVkVSICE9PSB1bmRlZmluZWQpIHtcclxuICAgIEJPVFRPTV9NRVNTQUdFX0JPWF9PQlNFUlZFUi5kaXNjb25uZWN0KClcclxuICB9XHJcbiAgaW5pdGlhbGl6ZUJvdHRvbU1lc3NhZ2VCb3hPYnNlcnZlcigpXHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICBjb25zdCB7IGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzIH0gPSBhd2FpdCBpbXBvcnQoXCIuL21lc3NhZ2UuZGV2XCIpXHJcblxyXG4gIGZldGNoKGAvbWVzc2FnZS9mZXRjaC1tZXNzYWdlcy8ke2NoYXQuX2lkfT90b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudD0wYClcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZSlcclxuICAgIH0pXHJcbiAgICAudGhlbihhc3luYyBkYXRhID0+IHtcclxuICAgICAgaWYgKGRhdGEuaXNTdWNjZXNzKSB7XHJcbiAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIlxyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcblxyXG4gICAgICAgIGlmIChkYXRhLmFsbE1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50ICs9IGRhdGEuYWxsTWVzc2FnZXMubGVuZ3RoXHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCAhPT0gMCAmJlxyXG4gICAgICAgICAgICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQgPD0gdG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnRcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBsZXQgeyBjcmVhdGVVbnNlZW5NZXNzYWdlVGFnQm94IH0gPSBhd2FpdCBpbXBvcnQoXCIuL21lc3NhZ2UuZGV2XCIpXHJcblxyXG4gICAgICAgICAgICBsZXQgcG9zaXRpb25Gb3JVbnNlZWVuTWVzc2FnZVRhZyA9XHJcbiAgICAgICAgICAgICAgZGF0YS5hbGxNZXNzYWdlcy5sZW5ndGggLVxyXG4gICAgICAgICAgICAgICh0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCAtIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudClcclxuICAgICAgICAgICAgY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMoXHJcbiAgICAgICAgICAgICAgZGF0YS5hbGxNZXNzYWdlcy5zbGljZSgwLCBwb3NpdGlvbkZvclVuc2VlZW5NZXNzYWdlVGFnKSxcclxuICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lcixcclxuICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgY3JlYXRlVW5zZWVuTWVzc2FnZVRhZ0JveChcclxuICAgICAgICAgICAgICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQsXHJcbiAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIsXHJcbiAgICAgICAgICAgICAgXCJhZnRlcmJlZ2luXCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBjaGVja1RpbWVBbmRDcmVhdGVPbGRNZXNzYWdlcyhcclxuICAgICAgICAgICAgICBkYXRhLmFsbE1lc3NhZ2VzLnNsaWNlKHBvc2l0aW9uRm9yVW5zZWVlbk1lc3NhZ2VUYWcpLFxyXG4gICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLFxyXG4gICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQgPSAwXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjaGVja1RpbWVBbmRDcmVhdGVPbGRNZXNzYWdlcyhcclxuICAgICAgICAgICAgICBkYXRhLmFsbE1lc3NhZ2VzLFxyXG4gICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLFxyXG4gICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQpXHJcbiAgICAgICAgICAgICAgVE9QX01FU1NBR0VfQk9YX09CU0VSVkVSLm9ic2VydmUoXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZFxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgIH0sIDIwMDApXHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmxhc3RFbGVtZW50Q2hpbGQpXHJcbiAgICAgICAgICAgICAgQk9UVE9NX01FU1NBR0VfQk9YX09CU0VSVkVSLm9ic2VydmUoXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfSwgMjAwMClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB7IGFkanVzdE1lc3NhZ2VDb250YWluZXJCb3R0b21QYWRkaW5nIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgICAgICBcIi4uL2NoYXQuZGV2XCJcclxuICAgICAgICApXHJcbiAgICAgICAgYWRqdXN0TWVzc2FnZUNvbnRhaW5lckJvdHRvbVBhZGRpbmcoKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCB7IGNyZWF0ZU1haW5Ob3RpZmljYXRpb24gfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICAgIFwiLi4vLi4vY29tbW9uL21haW5Ob3RpZmljYXRpb24uZGV2XCJcclxuICAgICAgICApXHJcbiAgICAgICAgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbihkYXRhLmVycm9yLCBcImVycm9yXCIpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuY2F0Y2goYXN5bmMgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICBsZXQgeyBjcmVhdGVNYWluTm90aWZpY2F0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgICAgXCIuLi8uLi9jb21tb24vbWFpbk5vdGlmaWNhdGlvbi5kZXZcIlxyXG4gICAgICApXHJcbiAgICAgIGNyZWF0ZU1haW5Ob3RpZmljYXRpb24oXHJcbiAgICAgICAgXCJTZXJ2ZXIgRXJyb3IgSW4gQWNjZXNzaW5nIE1lc3NhZ2VzLCBQbGVhc2UgUmVmcmVzaCBZb3VyIFBhZ2VcIixcclxuICAgICAgICBcImVycm9yXCJcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgYWxsQ2hhdFNlY3Rpb24uY2xhc3NMaXN0LmFkZChcImFsbC1jaGF0LXNlY3Rpb24tLWhpZGVcIilcclxuICBhY3RpdmVDaGF0U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLWNoYXQtc2VjdGlvbi0taGlkZVwiKVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplVXNlck1lc3NhZ2VCb3hPYnNlcnZlcigpIHtcclxuICBVU0VSX01FU1NBR0VfQk9YX09CU0VSVkVSID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxyXG4gICAgYXN5bmMgKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XHJcbiAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICBsZXQgbWVzc2FnZUlkID0gZW50cnkudGFyZ2V0LmRhdGFzZXQubWVzc2FnZUlkXHJcbiAgICAgICAgICBzb2NrZXQuZW1pdChcImNoYXQ6dXBkYXRlLW1lc3NhZ2Utc2Vlbi1zdGF0dXNcIiwge1xyXG4gICAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2VJZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuICAgIHsgdGhyZXNob2xkOiAwLjUsIHJvb3Q6IGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyIH1cclxuICApXHJcbn1cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZVRvcE1lc3NhZ2VCb3hPYnNlcnZlcigpIHtcclxuICBUT1BfTUVTU0FHRV9CT1hfT0JTRVJWRVIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXHJcbiAgICBhc3luYyAoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcclxuICAgICAgZW50cmllcy5mb3JFYWNoKGFzeW5jIGVudHJ5ID0+IHtcclxuICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpXHJcbiAgICAgICAgICBsZXQgY2hhdElkID0gYWN0aXZlQ2hhdFNlY3Rpb24uZGF0YXNldC5jaGF0SWRcclxuXHJcbiAgICAgICAgICBjb25zdCB7IGNyZWF0ZUxvYWRpbmdNZXNzYWdlc0FuaW1hdGlvbiB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgICAgICBcIi4vbWVzc2FnZS5kZXZcIlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgbGV0IGxvYWRpbmdNZXNzYWdlQW5pbWF0aW9uQm94ID0gY3JlYXRlTG9hZGluZ01lc3NhZ2VzQW5pbWF0aW9uKClcclxuICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudChcclxuICAgICAgICAgICAgXCJhZnRlcmJlZ2luXCIsXHJcbiAgICAgICAgICAgIGxvYWRpbmdNZXNzYWdlQW5pbWF0aW9uQm94XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAvLyBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5zY3JvbGxUb3AgKz0gMTAwXHJcbiAgICAgICAgICBhd2FpdCBmZXRjaE1lc3NhZ2VBbmRDcmVhdGVVc2VyTWVzc2FnZUJveChjaGF0SWQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuICAgIHsgdGhyZXNob2xkOiAwLjUsIHJvb3Q6IGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLCByb290TWFyZ2luOiBcIjEwMHB4XCIgfVxyXG4gIClcclxufVxyXG5mdW5jdGlvbiBpbml0aWFsaXplQm90dG9tTWVzc2FnZUJveE9ic2VydmVyKCkge1xyXG4gIEJPVFRPTV9NRVNTQUdFX0JPWF9PQlNFUlZFUiA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcclxuICAgIGFzeW5jIChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xyXG4gICAgICBlbnRyaWVzLmZvckVhY2goYXN5bmMgZW50cnkgPT4ge1xyXG4gICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGVudHJ5LnRhcmdldClcclxuICAgICAgICAgIGxldCBjaGF0SWQgPSBhY3RpdmVDaGF0U2VjdGlvbi5kYXRhc2V0LmNoYXRJZFxyXG4gICAgICAgICAgc29ja2V0LmVtaXQoXCJjaGF0OnVwZGF0ZS1jaGF0LXVuc2Vlbi1tZXNzYWdlc1wiLCB7XHJcbiAgICAgICAgICAgIGNoYXRJZDogY2hhdElkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICB7IHRocmVzaG9sZDogMC41LCByb290OiBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lciB9XHJcbiAgKVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaE1lc3NhZ2VBbmRDcmVhdGVVc2VyTWVzc2FnZUJveChjaGF0SWQpIHtcclxuICBjb25zdCB7IGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzIH0gPSBhd2FpdCBpbXBvcnQoXCIuL21lc3NhZ2UuZGV2XCIpXHJcblxyXG4gIGZldGNoKFxyXG4gICAgYC9tZXNzYWdlL2ZldGNoLW1lc3NhZ2VzLyR7Y2hhdElkfT90b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudD0ke3RvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50fWBcclxuICApXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzcG9uc2UpXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oYXN5bmMgZGF0YSA9PiB7XHJcbiAgICAgIGlmIChkYXRhLmlzU3VjY2Vzcykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcblxyXG4gICAgICAgIGlmIChkYXRhLmFsbE1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50ICs9IGRhdGEuYWxsTWVzc2FnZXMubGVuZ3RoXHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCAhPT0gMCAmJlxyXG4gICAgICAgICAgICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQgPD0gdG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnRcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBsZXQgeyBjcmVhdGVVbnNlZW5NZXNzYWdlVGFnQm94IH0gPSBhd2FpdCBpbXBvcnQoXCIuL21lc3NhZ2UuZGV2XCIpXHJcblxyXG4gICAgICAgICAgICBsZXQgcG9zaXRpb25Gb3JVbnNlZWVuTWVzc2FnZVRhZyA9XHJcbiAgICAgICAgICAgICAgZGF0YS5hbGxNZXNzYWdlcy5sZW5ndGggLVxyXG4gICAgICAgICAgICAgICh0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCAtIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudClcclxuICAgICAgICAgICAgY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMoXHJcbiAgICAgICAgICAgICAgZGF0YS5hbGxNZXNzYWdlcy5zbGljZSgwLCBwb3NpdGlvbkZvclVuc2VlZW5NZXNzYWdlVGFnKSxcclxuICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lcixcclxuICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGNyZWF0ZVVuc2Vlbk1lc3NhZ2VUYWdCb3goXHJcbiAgICAgICAgICAgICAgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50LFxyXG4gICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLFxyXG4gICAgICAgICAgICAgIFwiYWZ0ZXJiZWdpblwiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMoXHJcbiAgICAgICAgICAgICAgZGF0YS5hbGxNZXNzYWdlcy5zbGljZShwb3NpdGlvbkZvclVuc2VlZW5NZXNzYWdlVGFnKSxcclxuICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lcixcclxuICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCA9IDBcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzKFxyXG4gICAgICAgICAgICAgIGRhdGEuYWxsTWVzc2FnZXMsXHJcbiAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIsXHJcbiAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQpXHJcbiAgICAgICAgICAgICAgVE9QX01FU1NBR0VfQk9YX09CU0VSVkVSLm9ic2VydmUoXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZFxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgIH0sIDIwMDApXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxldCBsb2FkaW5nTWVzc2FnZUFuaW1hdGlvbkJveCA9IFtcclxuICAgICAgICAgICAgLi4uYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcclxuICAgICAgICAgICAgICBcImxvYWRpbmctbWVzc2FnZS1hbmltYXRpb24tYm94XCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgICAgbG9hZGluZ01lc3NhZ2VBbmltYXRpb25Cb3guZm9yRWFjaChib3ggPT4ge1xyXG4gICAgICAgICAgICBib3gucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChib3gpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgeyBjcmVhdGVNYWluTm90aWZpY2F0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgICAgICBcIi4uLy4uL2NvbW1vbi9tYWluTm90aWZpY2F0aW9uLmRldlwiXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGNyZWF0ZU1haW5Ob3RpZmljYXRpb24oZGF0YS5lcnJvciwgXCJlcnJvclwiKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGFzeW5jIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgbGV0IHsgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgIFwiLi4vLi4vY29tbW9uL21haW5Ob3RpZmljYXRpb24uZGV2XCJcclxuICAgICAgKVxyXG4gICAgICBjcmVhdGVNYWluTm90aWZpY2F0aW9uKFxyXG4gICAgICAgIFwiU2VydmVyIEVycm9yIEluIEFjY2Vzc2luZyBNZXNzYWdlcywgUGxlYXNlIFJlZnJlc2ggWW91ciBQYWdlXCIsXHJcbiAgICAgICAgXCJlcnJvclwiXHJcbiAgICAgIClcclxuICAgIH0pXHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5jcmVhc2VUb3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCgpIHtcclxuICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQgPSAwXHJcbiAgdG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQrK1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWN0aXZlQ2hhdFNlY3Rpb24oY2hhdCkge1xyXG4gIGxldCB7IGNsb3NlUmVwbHlNZXNzYWdlQm94IH0gPSBhd2FpdCBpbXBvcnQoXCIuL3JlcGx5TWVzc2FnZUJveC5kZXYuanNcIilcclxuICBjbG9zZVJlcGx5TWVzc2FnZUJveCgpXHJcbiAgYWN0aXZlQ2hhdFNlY3Rpb24uZGF0YXNldC5jaGF0SWQgPSBjaGF0Ll9pZFxyXG4gIGNvbnN0IGFjdGl2ZUNoYXRIZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRIZWFkZXJcIilcclxuICBjb25zdCBhY3RpdmVDaGF0SGVhZGVyUGljID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0SGVhZGVyUGljXCIpXHJcbiAgY29uc3QgYWN0aXZlQ2hhdEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdEltZ1wiKVxyXG4gIGNvbnN0IGFjdGl2ZUNoYXRIZWFkZXJOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0SGVhZGVyTmFtZVwiKVxyXG4gIGNvbnN0IGFjdGl2ZUNoYXRIZWFkZXJTdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgIFwiYWN0aXZlQ2hhdEhlYWRlclN0YXR1c1wiXHJcbiAgKVxyXG4gIGNvbnN0IGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgXCJhY3RpdmVDaGF0SW5wdXRDb250YWluZXJcIlxyXG4gIClcclxuXHJcbiAgYWN0aXZlQ2hhdEhlYWRlci5kYXRhc2V0LmNoYXRJZCA9IGNoYXQuX2lkXHJcblxyXG4gIGlmIChjaGF0Lmhhc093blByb3BlcnR5KFwiY2hhdFBpY1wiKSAmJiBjaGF0LmNoYXRQaWMgIT09IFwiXCIpIHtcclxuICAgIGFjdGl2ZUNoYXRJbWcuc3JjID0gY2hhdC5jaGF0UGljXHJcblxyXG4gICAgYWN0aXZlQ2hhdEhlYWRlclBpYy5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLWNoYXQtaGVhZGVyX19waWMtLWhpZGUtc3ZnXCIpXHJcbiAgICBhY3RpdmVDaGF0SGVhZGVyUGljLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtY2hhdC1oZWFkZXJfX3BpYy0taGlkZS1pbWdcIilcclxuICB9IGVsc2Uge1xyXG4gICAgYWN0aXZlQ2hhdEhlYWRlclBpYy5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLWNoYXQtaGVhZGVyX19waWMtLWhpZGUtaW1nXCIpXHJcbiAgICBhY3RpdmVDaGF0SGVhZGVyUGljLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtY2hhdC1oZWFkZXJfX3BpYy0taGlkZS1zdmdcIilcclxuICB9XHJcbiAgYWN0aXZlQ2hhdEhlYWRlck5hbWUudGV4dENvbnRlbnQgPSBjaGF0LmNoYXROYW1lXHJcbiAgaWYgKCFjaGF0LmlzR3JvdXBDaGF0KSB7XHJcbiAgICBpZiAoY2hhdC5pc1VzZXJBY3RpdmUpIHtcclxuICAgICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICAgIFwiYWN0aXZlLWNoYXQtaGVhZGVyX19jaGF0LXN0YXR1cy0taGlkZVwiXHJcbiAgICAgIClcclxuICAgICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy50ZXh0Q29udGVudCA9IFwiQWN0aXZlXCJcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCB7IHRpbWVEaWZmZXJlbmNlRnJvbU5vdyB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgIFwiLi4vLi4vY29tbW9uL2NhbGN1bGF0ZVRpbWVEaWZmZXJlbmNlLmRldlwiXHJcbiAgICAgIClcclxuICAgICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICAgIFwiYWN0aXZlLWNoYXQtaGVhZGVyX19jaGF0LXN0YXR1cy0taGlkZVwiXHJcbiAgICAgIClcclxuICAgICAgaWYgKGNoYXQuaGFzT3duUHJvcGVydHkoXCJ1c2VyTGFzdEFjdGl2ZVwiKSkge1xyXG4gICAgICAgIGFjdGl2ZUNoYXRIZWFkZXJTdGF0dXMudGV4dENvbnRlbnQgPSBgbGFzdCBhY3RpdmUgJHt0aW1lRGlmZmVyZW5jZUZyb21Ob3coXHJcbiAgICAgICAgICBjaGF0LnVzZXJMYXN0QWN0aXZlXHJcbiAgICAgICAgKX0gYWdvYFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFjdGl2ZUNoYXRIZWFkZXJTdGF0dXMudGV4dENvbnRlbnQgPSBcIlwiXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICBcImFjdGl2ZS1jaGF0LWhlYWRlcl9fY2hhdC1zdGF0dXMtLWhpZGVcIlxyXG4gICAgKVxyXG4gICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy50ZXh0Q29udGVudCA9IFwiXCJcclxuICB9XHJcblxyXG4gIG9uT2ZmQWN0aXZlQ2hhdElucHV0Q29udGFpbmVyKGNoYXQpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhckFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyKCkge1xyXG4gIGxldCBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgXCJhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lclwiXHJcbiAgKVxyXG4gIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCJcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG9uT2ZmQWN0aXZlQ2hhdElucHV0Q29udGFpbmVyKGNoYXQpIHtcclxuICBjb25zdCBhY3RpdmVDaGF0SW5wdXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgIFwiYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyXCJcclxuICApXHJcbiAgaWYgKFxyXG4gICAgY2hhdC5oYXNPd25Qcm9wZXJ0eShcImNhblNlbmRNZXNzYWdlVG9UaGlzQ2hhdFwiKSAmJlxyXG4gICAgY2hhdC5jYW5TZW5kTWVzc2FnZVRvVGhpc0NoYXQgPT09IGZhbHNlXHJcbiAgKSB7XHJcbiAgICBhY3RpdmVDaGF0SW5wdXRDb250YWluZXIuY2xhc3NMaXN0LmFkZChcclxuICAgICAgXCJhY3RpdmUtY2hhdC1pbnB1dC1jb250YWluZXItLWRpc2FibGVcIlxyXG4gICAgKVxyXG4gICAgYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgIFwiYWN0aXZlLWNoYXQtaW5wdXQtY29udGFpbmVyLS1lbmFibGVcIlxyXG4gICAgKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBhY3RpdmVDaGF0SW5wdXRDb250YWluZXIuY2xhc3NMaXN0LmFkZChcclxuICAgICAgXCJhY3RpdmUtY2hhdC1pbnB1dC1jb250YWluZXItLWVuYWJsZVwiXHJcbiAgICApXHJcbiAgICBhY3RpdmVDaGF0SW5wdXRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgXCJhY3RpdmUtY2hhdC1pbnB1dC1jb250YWluZXItLWRpc2FibGVcIlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4iXSwibmFtZXMiOlsiYWxsQ2hhdFNlY3Rpb24iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWN0aXZlQ2hhdFNlY3Rpb24iLCJhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lciIsInRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50IiwidG90YWxVbnNlZW5NZXNzYWdlc0NvdW50Iiwic2hvd0FjdGl2ZUNoYXRTZWN0aW9uIiwiY2hhdCIsImFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50IiwidmFsdWUiLCJpbm5lckhUTUwiLCJ1cGRhdGVBY3RpdmVDaGF0U2VjdGlvbiIsInVuc2Vlbk1lc3NhZ2VzQ291bnRSZXNwb25zZSIsImZldGNoIiwiX2lkIiwidW5zZWVuTWVzc2FnZXNDb3VudERhdGEiLCJqc29uIiwidW5zZWVuTWVzc2FnZXNDb3VudCIsImNvbnNvbGUiLCJsb2ciLCJvcGVuQWN0aXZlQ2hhdElucHV0Qm94IiwiVVNFUl9NRVNTQUdFX0JPWF9PQlNFUlZFUiIsInVuZGVmaW5lZCIsImRpc2Nvbm5lY3QiLCJpbml0aWFsaXplVXNlck1lc3NhZ2VCb3hPYnNlcnZlciIsIlRPUF9NRVNTQUdFX0JPWF9PQlNFUlZFUiIsImluaXRpYWxpemVUb3BNZXNzYWdlQm94T2JzZXJ2ZXIiLCJCT1RUT01fTUVTU0FHRV9CT1hfT0JTRVJWRVIiLCJpbml0aWFsaXplQm90dG9tTWVzc2FnZUJveE9ic2VydmVyIiwiY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMiLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsIlByb21pc2UiLCJyZWplY3QiLCJkYXRhIiwiaXNTdWNjZXNzIiwiYWxsTWVzc2FnZXMiLCJsZW5ndGgiLCJjcmVhdGVVbnNlZW5NZXNzYWdlVGFnQm94IiwicG9zaXRpb25Gb3JVbnNlZWVuTWVzc2FnZVRhZyIsInNsaWNlIiwic2V0VGltZW91dCIsImZpcnN0RWxlbWVudENoaWxkIiwib2JzZXJ2ZSIsImxhc3RFbGVtZW50Q2hpbGQiLCJhZGp1c3RNZXNzYWdlQ29udGFpbmVyQm90dG9tUGFkZGluZyIsImNyZWF0ZU1haW5Ob3RpZmljYXRpb24iLCJlcnJvciIsImNhdGNoIiwiZXJyIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwib2JzZXJ2ZXIiLCJmb3JFYWNoIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsIm1lc3NhZ2VJZCIsInRhcmdldCIsImRhdGFzZXQiLCJzb2NrZXQiLCJlbWl0IiwidW5vYnNlcnZlIiwidGhyZXNob2xkIiwicm9vdCIsImNoYXRJZCIsImNyZWF0ZUxvYWRpbmdNZXNzYWdlc0FuaW1hdGlvbiIsImxvYWRpbmdNZXNzYWdlQW5pbWF0aW9uQm94IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiZmV0Y2hNZXNzYWdlQW5kQ3JlYXRlVXNlck1lc3NhZ2VCb3giLCJyb290TWFyZ2luIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImJveCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImluY3JlYXNlVG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQiLCJjbG9zZVJlcGx5TWVzc2FnZUJveCIsImFjdGl2ZUNoYXRIZWFkZXIiLCJhY3RpdmVDaGF0SGVhZGVyUGljIiwiYWN0aXZlQ2hhdEltZyIsImFjdGl2ZUNoYXRIZWFkZXJOYW1lIiwiYWN0aXZlQ2hhdEhlYWRlclN0YXR1cyIsImFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lciIsImhhc093blByb3BlcnR5IiwiY2hhdFBpYyIsInNyYyIsInRleHRDb250ZW50IiwiY2hhdE5hbWUiLCJpc0dyb3VwQ2hhdCIsImlzVXNlckFjdGl2ZSIsInRpbWVEaWZmZXJlbmNlRnJvbU5vdyIsInVzZXJMYXN0QWN0aXZlIiwib25PZmZBY3RpdmVDaGF0SW5wdXRDb250YWluZXIiLCJjbGVhckFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyIiwiY2FuU2VuZE1lc3NhZ2VUb1RoaXNDaGF0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./dev-javascripts/chat/js/showActiveChatSection.dev.js\n");

/***/ })

}]);