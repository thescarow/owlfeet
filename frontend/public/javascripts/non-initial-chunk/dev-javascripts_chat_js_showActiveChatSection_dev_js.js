"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkfrontend"] = self["webpackChunkfrontend"] || []).push([["dev-javascripts_chat_js_showActiveChatSection_dev_js"],{

/***/ "./dev-javascripts/chat/js/showActiveChatSection.dev.js":
/*!**************************************************************!*\
  !*** ./dev-javascripts/chat/js/showActiveChatSection.dev.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clearActiveChatMessageContainer\": () => (/* binding */ clearActiveChatMessageContainer),\n/* harmony export */   \"increaseTotalReceivedMessagesCount\": () => (/* binding */ increaseTotalReceivedMessagesCount),\n/* harmony export */   \"onOffActiveChatInputContainer\": () => (/* binding */ onOffActiveChatInputContainer),\n/* harmony export */   \"showActiveChatSection\": () => (/* binding */ showActiveChatSection),\n/* harmony export */   \"updateActiveChatSection\": () => (/* binding */ updateActiveChatSection)\n/* harmony export */ });\n// let allChatSection = document.getElementById(\"allChatSection\")\n// let activeChatSection = document.getElementById(\"activeChatSection\")\n// const activeChatMessageContainer = document.getElementById(\n//   \"activeChatMessageContainer\"\n// )\n// let totalReceivedMessagesCount\n// let totalUnseenMessagesCount\n// export async function showActiveChatSection(chat) {\n//   let activeChatInputTextContent = document.getElementById(\n//     \"activeChatInputTextContent\"\n//   )\n//   activeChatInputTextContent.value = \"\"\n//   activeChatMessageContainer.innerHTML = \"\"\n//   updateActiveChatSection(chat)\n//   totalReceivedMessagesCount = 0\n//   let unseenMessagesCountResponse = await fetch(\n//     `/message/data/unseen-messages-count/${chat._id}`\n//   )\n//   let unseenMessagesCountData = await unseenMessagesCountResponse.json()\n//   totalUnseenMessagesCount = unseenMessagesCountData.unseenMessagesCount\n//   console.log(\"totalUnseenMessagesCount: \" + totalUnseenMessagesCount)\n//   let { openActiveChatInputBox } = await import(\"../chat.dev.js\")\n//   openActiveChatInputBox()\n//   if (USER_MESSAGE_BOX_OBSERVER !== undefined) {\n//     USER_MESSAGE_BOX_OBSERVER.disconnect()\n//   }\n//   initializeUserMessageBoxObserver()\n//   if (TOP_MESSAGE_BOX_OBSERVER !== undefined) {\n//     TOP_MESSAGE_BOX_OBSERVER.disconnect()\n//   }\n//   initializeTopMessageBoxObserver()\n//   if (BOTTOM_MESSAGE_BOX_OBSERVER !== undefined) {\n//     BOTTOM_MESSAGE_BOX_OBSERVER.disconnect()\n//   }\n//   initializeBottomMessageBoxObserver()\n//   ///////////////////\n//   const { checkTimeAndCreateOldMessages } = await import(\"./message.dev\")\n//   fetch(`/message/fetch-messages/${chat._id}?totalReceivedMessagesCount=0`)\n//     .then(response => {\n//       if (response.ok) {\n//         return response.json()\n//       }\n//       return Promise.reject(response)\n//     })\n//     .then(async data => {\n//       if (data.isSuccess) {\n//         activeChatMessageContainer.innerHTML = \"\"\n//         console.log(data)\n//         if (data.allMessages.length > 0) {\n//           totalReceivedMessagesCount += data.allMessages.length\n//           if (\n//             totalUnseenMessagesCount !== 0 &&\n//             totalUnseenMessagesCount <= totalReceivedMessagesCount\n//           ) {\n//             let { createUnseenMessageTagBox } = await import(\"./message.dev\")\n//             let positionForUnseeenMessageTag =\n//               data.allMessages.length -\n//               (totalReceivedMessagesCount - totalUnseenMessagesCount)\n//             checkTimeAndCreateOldMessages(\n//               data.allMessages.slice(0, positionForUnseeenMessageTag),\n//               activeChatMessageContainer,\n//               false,\n//               true\n//             )\n//             createUnseenMessageTagBox(\n//               totalUnseenMessagesCount,\n//               activeChatMessageContainer,\n//               \"afterbegin\"\n//             )\n//             checkTimeAndCreateOldMessages(\n//               data.allMessages.slice(positionForUnseeenMessageTag),\n//               activeChatMessageContainer,\n//               false,\n//               true\n//             )\n//             totalUnseenMessagesCount = 0\n//           } else {\n//             checkTimeAndCreateOldMessages(\n//               data.allMessages,\n//               activeChatMessageContainer,\n//               false,\n//               true\n//             )\n//           }\n//           setTimeout(() => {\n//             if (activeChatMessageContainer.firstElementChild)\n//               TOP_MESSAGE_BOX_OBSERVER.observe(\n//                 activeChatMessageContainer.firstElementChild\n//               )\n//           }, 2500)\n//           setTimeout(() => {\n//             if (activeChatMessageContainer.lastElementChild)\n//               BOTTOM_MESSAGE_BOX_OBSERVER.observe(\n//                 activeChatMessageContainer.lastElementChild\n//               )\n//           }, 2000)\n//         }\n//         let { adjustMessageContainerBottomPadding } = await import(\n//           \"../chat.dev\"\n//         )\n//         adjustMessageContainerBottomPadding()\n//       } else {\n//         let { createMainNotification } = await import(\n//           \"../../common/mainNotification.dev\"\n//         )\n//         createMainNotification(data.error, \"error\")\n//       }\n//     })\n//     .catch(async err => {\n//       console.log(err)\n//       let { createMainNotification } = await import(\n//         \"../../common/mainNotification.dev\"\n//       )\n//       createMainNotification(\n//         \"Server Error In Accessing Messages, Please Refresh Your Page\",\n//         \"error\"\n//       )\n//     })\n//   allChatSection.classList.add(\"all-chat-section--hide\")\n//   activeChatSection.classList.remove(\"active-chat-section--hide\")\n// }\n// function initializeUserMessageBoxObserver() {\n//   USER_MESSAGE_BOX_OBSERVER = new IntersectionObserver(\n//     async (entries, observer) => {\n//       entries.forEach(entry => {\n//         if (entry.isIntersecting === true) {\n//           let messageId = entry.target.dataset.messageId\n//           socket.emit(\"chat:update-message-seen-status\", {\n//             messageId: messageId\n//           })\n//           observer.unobserve(entry.target)\n//         }\n//       })\n//     },\n//     { threshold: 0.5, root: activeChatMessageContainer }\n//   )\n// }\n// function initializeTopMessageBoxObserver() {\n//   TOP_MESSAGE_BOX_OBSERVER = new IntersectionObserver(\n//     async (entries, observer) => {\n//       entries.forEach(async entry => {\n//         if (entry.isIntersecting === true) {\n//           observer.unobserve(entry.target)\n//           let chatId = activeChatSection.dataset.chatId\n//           const { createLoadingMessagesAnimation } = await import(\n//             \"./message.dev\"\n//           )\n//           let loadingMessageAnimationBox = createLoadingMessagesAnimation()\n//           activeChatMessageContainer.insertAdjacentElement(\n//             \"afterbegin\",\n//             loadingMessageAnimationBox\n//           )\n//           activeChatMessageContainer.scrollTop += 150\n//           await fetchMessageAndCreateUserMessageBox(chatId)\n//         }\n//       })\n//     },\n//     { threshold: 0.5, root: activeChatMessageContainer, rootMargin: \"100px\" }\n//   )\n// }\n// function initializeBottomMessageBoxObserver() {\n//   BOTTOM_MESSAGE_BOX_OBSERVER = new IntersectionObserver(\n//     async (entries, observer) => {\n//       entries.forEach(async entry => {\n//         if (entry.isIntersecting === true) {\n//           observer.unobserve(entry.target)\n//           let chatId = activeChatSection.dataset.chatId\n//           socket.emit(\"chat:update-chat-unseen-messages\", {\n//             chatId: chatId\n//           })\n//         }\n//       })\n//     },\n//     { threshold: 0.5, root: activeChatMessageContainer }\n//   )\n// }\n// async function fetchMessageAndCreateUserMessageBox(chatId) {\n//   const { checkTimeAndCreateOldMessages } = await import(\"./message.dev\")\n//   fetch(\n//     `/message/fetch-messages/${chatId}?totalReceivedMessagesCount=${totalReceivedMessagesCount}`\n//   )\n//     .then(response => {\n//       if (response.ok) {\n//         return response.json()\n//       }\n//       return Promise.reject(response)\n//     })\n//     .then(async data => {\n//       if (data.isSuccess) {\n//         console.log(data)\n//         if (data.allMessages.length > 0) {\n//           totalReceivedMessagesCount += data.allMessages.length\n//           if (\n//             totalUnseenMessagesCount !== 0 &&\n//             totalUnseenMessagesCount <= totalReceivedMessagesCount\n//           ) {\n//             let { createUnseenMessageTagBox } = await import(\"./message.dev\")\n//             let positionForUnseeenMessageTag =\n//               data.allMessages.length -\n//               (totalReceivedMessagesCount - totalUnseenMessagesCount)\n//             checkTimeAndCreateOldMessages(\n//               data.allMessages.slice(0, positionForUnseeenMessageTag),\n//               activeChatMessageContainer,\n//               false,\n//               false\n//             )\n//             createUnseenMessageTagBox(\n//               totalUnseenMessagesCount,\n//               activeChatMessageContainer,\n//               \"afterbegin\"\n//             )\n//             checkTimeAndCreateOldMessages(\n//               data.allMessages.slice(positionForUnseeenMessageTag),\n//               activeChatMessageContainer,\n//               false,\n//               false\n//             )\n//             totalUnseenMessagesCount = 0\n//           } else {\n//             checkTimeAndCreateOldMessages(\n//               data.allMessages,\n//               activeChatMessageContainer,\n//               false,\n//               false\n//             )\n//           }\n//           setTimeout(() => {\n//             if (activeChatMessageContainer.firstElementChild)\n//               TOP_MESSAGE_BOX_OBSERVER.observe(\n//                 activeChatMessageContainer.firstElementChild\n//               )\n//           }, 4000)\n//         } else {\n//           let loadingMessageAnimationBox = [\n//             ...activeChatMessageContainer.getElementsByClassName(\n//               \"loading-message-animation-box\"\n//             )\n//           ]\n//           loadingMessageAnimationBox.forEach(box => {\n//             box.parentNode.removeChild(box)\n//           })\n//         }\n//       } else {\n//         let { createMainNotification } = await import(\n//           \"../../common/mainNotification.dev\"\n//         )\n//         createMainNotification(data.error, \"error\")\n//       }\n//     })\n//     .catch(async err => {\n//       console.log(err)\n//       let { createMainNotification } = await import(\n//         \"../../common/mainNotification.dev\"\n//       )\n//       createMainNotification(\n//         \"Server Error In Accessing Messages, Please Refresh Your Page\",\n//         \"error\"\n//       )\n//     })\n// }\n// //////////////////////////\n// export function increaseTotalReceivedMessagesCount() {\n//   totalUnseenMessagesCount = 0\n//   totalReceivedMessagesCount++\n// }\n// /////////////////\n// export async function updateActiveChatSection(chat) {\n//   let { closeReplyMessageBox } = await import(\"./replyMessageBox.dev.js\")\n//   closeReplyMessageBox()\n//   activeChatSection.dataset.chatId = chat._id\n//   const activeChatHeader = document.getElementById(\"activeChatHeader\")\n//   const activeChatHeaderPic = document.getElementById(\"activeChatHeaderPic\")\n//   const activeChatImg = document.getElementById(\"activeChatImg\")\n//   const activeChatHeaderName = document.getElementById(\"activeChatHeaderName\")\n//   const activeChatHeaderStatus = document.getElementById(\n//     \"activeChatHeaderStatus\"\n//   )\n//   const activeChatInputContainer = document.getElementById(\n//     \"activeChatInputContainer\"\n//   )\n//   activeChatHeader.dataset.chatId = chat._id\n//   if (chat.hasOwnProperty(\"chatPic\") && chat.chatPic !== \"\") {\n//     activeChatImg.src = chat.chatPic\n//     activeChatHeaderPic.classList.add(\"active-chat-header__pic--hide-svg\")\n//     activeChatHeaderPic.classList.remove(\"active-chat-header__pic--hide-img\")\n//   } else {\n//     activeChatHeaderPic.classList.add(\"active-chat-header__pic--hide-img\")\n//     activeChatHeaderPic.classList.remove(\"active-chat-header__pic--hide-svg\")\n//   }\n//   activeChatHeaderName.textContent = chat.chatName\n//   if (!chat.isGroupChat) {\n//     if (chat.isUserActive) {\n//       activeChatHeaderStatus.classList.remove(\n//         \"active-chat-header__chat-status--hide\"\n//       )\n//       activeChatHeaderStatus.textContent = \"Active\"\n//     } else {\n//       let { timeDifferenceFromNow } = await import(\n//         \"../../common/calculateTimeDifference.dev\"\n//       )\n//       activeChatHeaderStatus.classList.remove(\n//         \"active-chat-header__chat-status--hide\"\n//       )\n//       if (chat.hasOwnProperty(\"userLastActive\")) {\n//         activeChatHeaderStatus.textContent = `last active ${timeDifferenceFromNow(\n//           chat.userLastActive\n//         )} ago`\n//       } else {\n//         activeChatHeaderStatus.textContent = \"\"\n//       }\n//     }\n//   } else {\n//     activeChatHeaderStatus.classList.remove(\n//       \"active-chat-header__chat-status--hide\"\n//     )\n//     activeChatHeaderStatus.textContent = \"\"\n//   }\n//   if (chat.hasOwnProperty(\"isOnCall\") && chat.isOnCall === true) {\n//     openActiveChatCallRoomBox(chat.callRoomId)\n//   } else {\n//     closeActiveChatCallRoomBox()\n//   }\n//   onOffActiveChatInputContainer(chat)\n// }\n// export function openActiveChatCallRoomBox(callRoomId) {\n//   let activeChatCallBtn = document.getElementById(\"activeChatAudioCallBtn\")\n//   let activeChatCallRoomBox = document.getElementById(\"activeChatCallRoomBox\")\n//   while (activeChatCallRoomBox.classList.contains(\"chat-call-room-box--hide\"))\n//     chatCallRoomBox.classList.remove(\"chat-call-room-box--hide\")\n//   activeChatCallBtn.classList.add(\"active-chat-header__btn---hide\")\n//   activeChatCallRoomBox.dataset.callRoomId = callRoomId\n// }\n// export function closeActiveChatCallRoomBox() {\n//   let activeChatCallBtn = document.getElementById(\"activeChatAudioCallBtn\")\n//   let activeChatCallRoomBox = document.getElementById(\"activeChatCallRoomBox\")\n//   while (activeChatCallBtn.classList.contains(\"active-chat-header__btn---hide\"))\n//     activeChatCallBtn.classList.remove(\"active-chat-header__btn---hide\")\n//   chatCallRoomBox.classList.add(\"chat-call-room-box--hide\")\n//   activeChatCallRoomBox.dataset.callRoomId = \"\"\n// }\n// export async function clearActiveChatMessageContainer() {\n//   let activeChatMessageContainer = document.getElementById(\n//     \"activeChatMessageContainer\"\n//   )\n//   activeChatMessageContainer.innerHTML = \"\"\n// }\n// export async function onOffActiveChatInputContainer(chat) {\n//   const activeChatInputContainer = document.getElementById(\n//     \"activeChatInputContainer\"\n//   )\n//   if (\n//     chat.hasOwnProperty(\"canSendMessageToThisChat\") &&\n//     chat.canSendMessageToThisChat === false\n//   ) {\n//     activeChatInputContainer.classList.add(\n//       \"active-chat-input-container--disable\"\n//     )\n//     activeChatInputContainer.classList.remove(\n//       \"active-chat-input-container--enable\"\n//     )\n//   } else {\n//     activeChatInputContainer.classList.add(\n//       \"active-chat-input-container--enable\"\n//     )\n//     activeChatInputContainer.classList.remove(\n//       \"active-chat-input-container--disable\"\n//     )\n//   }\n// }\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\nlet allChatSection = document.getElementById(\"allChatSection\");\nlet activeChatSection = document.getElementById(\"activeChatSection\");\nconst activeChatMessageContainer = document.getElementById(\"activeChatMessageContainer\");\nlet totalReceivedMessagesCount;\nlet totalUnseenMessagesCount;\nasync function showActiveChatSection(chat) {\n  let activeChatInputTextContent = document.getElementById(\"activeChatInputTextContent\");\n  activeChatInputTextContent.value = \"\";\n  activeChatMessageContainer.innerHTML = \"\";\n  updateActiveChatSection(chat);\n  totalReceivedMessagesCount = 0;\n  let unseenMessagesCountResponse = await fetch(`/message/data/unseen-messages-count/${chat._id}`);\n  let unseenMessagesCountData = await unseenMessagesCountResponse.json();\n  totalUnseenMessagesCount = unseenMessagesCountData.unseenMessagesCount;\n  console.log(\"totalUnseenMessagesCount: \" + totalUnseenMessagesCount);\n  let {\n    openActiveChatInputBox\n  } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_chat_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../chat.dev.js */ \"./dev-javascripts/chat/chat.dev.js\"));\n  openActiveChatInputBox();\n\n  if (USER_MESSAGE_BOX_OBSERVER !== undefined) {\n    USER_MESSAGE_BOX_OBSERVER.disconnect();\n  }\n\n  initializeUserMessageBoxObserver();\n\n  if (TOP_MESSAGE_BOX_OBSERVER !== undefined) {\n    TOP_MESSAGE_BOX_OBSERVER.disconnect();\n  }\n\n  initializeTopMessageBoxObserver();\n\n  if (BOTTOM_MESSAGE_BOX_OBSERVER !== undefined) {\n    BOTTOM_MESSAGE_BOX_OBSERVER.disconnect();\n  }\n\n  initializeBottomMessageBoxObserver(); ///////////////////\n\n  const {\n    checkTimeAndCreateOldMessages\n  } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n  fetch(`/message/fetch-messages/${chat._id}?totalReceivedMessagesCount=0`).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(response);\n  }).then(async data => {\n    if (data.isSuccess) {\n      activeChatMessageContainer.innerHTML = \"\";\n      console.log(data);\n\n      if (data.allMessages.length > 0) {\n        totalReceivedMessagesCount += data.allMessages.length;\n\n        if (totalUnseenMessagesCount !== 0 && totalUnseenMessagesCount <= totalReceivedMessagesCount) {\n          let {\n            createUnseenMessageTagBox\n          } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n          let positionForUnseeenMessageTag = data.allMessages.length - (totalReceivedMessagesCount - totalUnseenMessagesCount);\n          checkTimeAndCreateOldMessages(data.allMessages.slice(0, positionForUnseeenMessageTag), activeChatMessageContainer, false, true);\n          createUnseenMessageTagBox(totalUnseenMessagesCount, activeChatMessageContainer, \"afterbegin\");\n          checkTimeAndCreateOldMessages(data.allMessages.slice(positionForUnseeenMessageTag), activeChatMessageContainer, false, true);\n          totalUnseenMessagesCount = 0;\n        } else {\n          checkTimeAndCreateOldMessages(data.allMessages, activeChatMessageContainer, false, true);\n        }\n\n        setTimeout(() => {\n          if (activeChatMessageContainer.firstElementChild) TOP_MESSAGE_BOX_OBSERVER.observe(activeChatMessageContainer.firstElementChild);\n        }, 2500);\n        setTimeout(() => {\n          if (activeChatMessageContainer.lastElementChild) BOTTOM_MESSAGE_BOX_OBSERVER.observe(activeChatMessageContainer.lastElementChild);\n        }, 2000);\n      }\n\n      let {\n        adjustMessageContainerBottomPadding\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_chat_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../chat.dev */ \"./dev-javascripts/chat/chat.dev.js\"));\n      adjustMessageContainerBottomPadding();\n    } else {\n      let {\n        createMainNotification\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n      createMainNotification(data.error, \"error\");\n    }\n  }).catch(async err => {\n    console.log(err);\n    let {\n      createMainNotification\n    } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n    createMainNotification(\"Server Error In Accessing Messages, Please Refresh Your Page\", \"error\");\n  });\n  allChatSection.classList.add(\"all-chat-section--hide\");\n  activeChatSection.classList.remove(\"active-chat-section--hide\");\n}\n\nfunction initializeUserMessageBoxObserver() {\n  USER_MESSAGE_BOX_OBSERVER = new IntersectionObserver(async (entries, observer) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting === true) {\n        let messageId = entry.target.dataset.messageId;\n        socket.emit(\"chat:update-message-seen-status\", {\n          messageId: messageId\n        });\n        observer.unobserve(entry.target);\n      }\n    });\n  }, {\n    threshold: 0.5,\n    root: activeChatMessageContainer\n  });\n}\n\nfunction initializeTopMessageBoxObserver() {\n  TOP_MESSAGE_BOX_OBSERVER = new IntersectionObserver(async (entries, observer) => {\n    entries.forEach(async entry => {\n      if (entry.isIntersecting === true) {\n        observer.unobserve(entry.target);\n        let chatId = activeChatSection.dataset.chatId;\n        const {\n          createLoadingMessagesAnimation\n        } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n        let loadingMessageAnimationBox = createLoadingMessagesAnimation();\n        activeChatMessageContainer.insertAdjacentElement(\"afterbegin\", loadingMessageAnimationBox);\n        activeChatMessageContainer.scrollTop += 150;\n        await fetchMessageAndCreateUserMessageBox(chatId);\n      }\n    });\n  }, {\n    threshold: 0.5,\n    root: activeChatMessageContainer,\n    rootMargin: \"100px\"\n  });\n}\n\nfunction initializeBottomMessageBoxObserver() {\n  BOTTOM_MESSAGE_BOX_OBSERVER = new IntersectionObserver(async (entries, observer) => {\n    entries.forEach(async entry => {\n      if (entry.isIntersecting === true) {\n        observer.unobserve(entry.target);\n        let chatId = activeChatSection.dataset.chatId;\n        socket.emit(\"chat:update-chat-unseen-messages\", {\n          chatId: chatId\n        });\n      }\n    });\n  }, {\n    threshold: 0.5,\n    root: activeChatMessageContainer\n  });\n}\n\nasync function fetchMessageAndCreateUserMessageBox(chatId) {\n  const {\n    checkTimeAndCreateOldMessages\n  } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n  fetch(`/message/fetch-messages/${chatId}?totalReceivedMessagesCount=${totalReceivedMessagesCount}`).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(response);\n  }).then(async data => {\n    if (data.isSuccess) {\n      console.log(data);\n\n      if (data.allMessages.length > 0) {\n        totalReceivedMessagesCount += data.allMessages.length;\n\n        if (totalUnseenMessagesCount !== 0 && totalUnseenMessagesCount <= totalReceivedMessagesCount) {\n          let {\n            createUnseenMessageTagBox\n          } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n          let positionForUnseeenMessageTag = data.allMessages.length - (totalReceivedMessagesCount - totalUnseenMessagesCount);\n          checkTimeAndCreateOldMessages(data.allMessages.slice(0, positionForUnseeenMessageTag), activeChatMessageContainer, false, false);\n          createUnseenMessageTagBox(totalUnseenMessagesCount, activeChatMessageContainer, \"afterbegin\");\n          checkTimeAndCreateOldMessages(data.allMessages.slice(positionForUnseeenMessageTag), activeChatMessageContainer, false, false);\n          totalUnseenMessagesCount = 0;\n        } else {\n          checkTimeAndCreateOldMessages(data.allMessages, activeChatMessageContainer, false, false);\n        }\n\n        setTimeout(() => {\n          if (activeChatMessageContainer.firstElementChild) TOP_MESSAGE_BOX_OBSERVER.observe(activeChatMessageContainer.firstElementChild);\n        }, 4000);\n      } else {\n        let loadingMessageAnimationBox = [...activeChatMessageContainer.getElementsByClassName(\"loading-message-animation-box\")];\n        loadingMessageAnimationBox.forEach(box => {\n          box.parentNode.removeChild(box);\n        });\n      }\n    } else {\n      let {\n        createMainNotification\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n      createMainNotification(data.error, \"error\");\n    }\n  }).catch(async err => {\n    console.log(err);\n    let {\n      createMainNotification\n    } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_mainNotification_dev_js-_81c90\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n    createMainNotification(\"Server Error In Accessing Messages, Please Refresh Your Page\", \"error\");\n  });\n} //////////////////////////\n\n\nfunction increaseTotalReceivedMessagesCount() {\n  totalUnseenMessagesCount = 0;\n  totalReceivedMessagesCount++;\n} /////////////////\n\nasync function updateActiveChatSection(chat) {\n  let {\n    closeReplyMessageBox\n  } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_js_replyMessageBox_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./replyMessageBox.dev.js */ \"./dev-javascripts/chat/js/replyMessageBox.dev.js\"));\n  closeReplyMessageBox();\n  activeChatSection.dataset.chatId = chat._id;\n  const activeChatHeader = document.getElementById(\"activeChatHeader\");\n  const activeChatHeaderPic = document.getElementById(\"activeChatHeaderPic\");\n  const activeChatImg = document.getElementById(\"activeChatImg\");\n  const activeChatHeaderName = document.getElementById(\"activeChatHeaderName\");\n  const activeChatHeaderStatus = document.getElementById(\"activeChatHeaderStatus\");\n  const activeChatInputContainer = document.getElementById(\"activeChatInputContainer\");\n  activeChatHeader.dataset.chatId = chat._id;\n\n  if (chat.hasOwnProperty(\"chatPic\") && chat.chatPic !== \"\") {\n    activeChatImg.src = chat.chatPic;\n    activeChatHeaderPic.classList.add(\"active-chat-header__pic--hide-svg\");\n    activeChatHeaderPic.classList.remove(\"active-chat-header__pic--hide-img\");\n  } else {\n    activeChatHeaderPic.classList.add(\"active-chat-header__pic--hide-img\");\n    activeChatHeaderPic.classList.remove(\"active-chat-header__pic--hide-svg\");\n  }\n\n  activeChatHeaderName.textContent = chat.chatName;\n\n  if (!chat.isGroupChat) {\n    if (chat.isUserActive) {\n      activeChatHeaderStatus.classList.remove(\"active-chat-header__chat-status--hide\");\n      activeChatHeaderStatus.textContent = \"Active\";\n    } else {\n      let {\n        timeDifferenceFromNow\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_common_calculateTimeDifference_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../../common/calculateTimeDifference.dev */ \"./dev-javascripts/common/calculateTimeDifference.dev.js\"));\n      activeChatHeaderStatus.classList.remove(\"active-chat-header__chat-status--hide\");\n\n      if (chat.hasOwnProperty(\"userLastActive\")) {\n        activeChatHeaderStatus.textContent = `last active ${timeDifferenceFromNow(chat.userLastActive)} ago`;\n      } else {\n        activeChatHeaderStatus.textContent = \"\";\n      }\n    }\n  } else {\n    activeChatHeaderStatus.classList.remove(\"active-chat-header__chat-status--hide\");\n    activeChatHeaderStatus.textContent = \"\";\n  }\n\n  onOffActiveChatInputContainer(chat);\n}\nasync function clearActiveChatMessageContainer() {\n  let activeChatMessageContainer = document.getElementById(\"activeChatMessageContainer\");\n  activeChatMessageContainer.innerHTML = \"\";\n}\nasync function onOffActiveChatInputContainer(chat) {\n  const activeChatInputContainer = document.getElementById(\"activeChatInputContainer\");\n\n  if (chat.hasOwnProperty(\"canSendMessageToThisChat\") && chat.canSendMessageToThisChat === false) {\n    activeChatInputContainer.classList.add(\"active-chat-input-container--disable\");\n    activeChatInputContainer.classList.remove(\"active-chat-input-container--enable\");\n  } else {\n    activeChatInputContainer.classList.add(\"active-chat-input-container--enable\");\n    activeChatInputContainer.classList.remove(\"active-chat-input-container--disable\");\n  }\n} ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYtamF2YXNjcmlwdHMvY2hhdC9qcy9zaG93QWN0aXZlQ2hhdFNlY3Rpb24uZGV2LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJQSxjQUFjLEdBQUdDLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixnQkFBeEIsQ0FBckI7QUFDQSxJQUFJQyxpQkFBaUIsR0FBR0YsUUFBUSxDQUFDQyxjQUFULENBQXdCLG1CQUF4QixDQUF4QjtBQUNBLE1BQU1FLDBCQUEwQixHQUFHSCxRQUFRLENBQUNDLGNBQVQsQ0FDakMsNEJBRGlDLENBQW5DO0FBSUEsSUFBSUcsMEJBQUo7QUFDQSxJQUFJQyx3QkFBSjtBQUNPLGVBQWVDLHFCQUFmLENBQXFDQyxJQUFyQyxFQUEyQztFQUNoRCxJQUFJQywwQkFBMEIsR0FBR1IsUUFBUSxDQUFDQyxjQUFULENBQy9CLDRCQUQrQixDQUFqQztFQUdBTywwQkFBMEIsQ0FBQ0MsS0FBM0IsR0FBbUMsRUFBbkM7RUFDQU4sMEJBQTBCLENBQUNPLFNBQTNCLEdBQXVDLEVBQXZDO0VBQ0FDLHVCQUF1QixDQUFDSixJQUFELENBQXZCO0VBRUFILDBCQUEwQixHQUFHLENBQTdCO0VBQ0EsSUFBSVEsMkJBQTJCLEdBQUcsTUFBTUMsS0FBSyxDQUMxQyx1Q0FBc0NOLElBQUksQ0FBQ08sR0FBSSxFQURMLENBQTdDO0VBR0EsSUFBSUMsdUJBQXVCLEdBQUcsTUFBTUgsMkJBQTJCLENBQUNJLElBQTVCLEVBQXBDO0VBQ0FYLHdCQUF3QixHQUFHVSx1QkFBdUIsQ0FBQ0UsbUJBQW5EO0VBQ0FDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLCtCQUErQmQsd0JBQTNDO0VBQ0EsSUFBSTtJQUFFZTtFQUFGLElBQTZCLE1BQU0seUxBQXZDO0VBQ0FBLHNCQUFzQjs7RUFFdEIsSUFBSUMseUJBQXlCLEtBQUtDLFNBQWxDLEVBQTZDO0lBQzNDRCx5QkFBeUIsQ0FBQ0UsVUFBMUI7RUFDRDs7RUFDREMsZ0NBQWdDOztFQUNoQyxJQUFJQyx3QkFBd0IsS0FBS0gsU0FBakMsRUFBNEM7SUFDMUNHLHdCQUF3QixDQUFDRixVQUF6QjtFQUNEOztFQUNERywrQkFBK0I7O0VBQy9CLElBQUlDLDJCQUEyQixLQUFLTCxTQUFwQyxFQUErQztJQUM3Q0ssMkJBQTJCLENBQUNKLFVBQTVCO0VBQ0Q7O0VBQ0RLLGtDQUFrQyxHQTdCYyxDQStCaEQ7O0VBQ0EsTUFBTTtJQUFFQztFQUFGLElBQW9DLE1BQU0sdVJBQWhEO0VBRUFoQixLQUFLLENBQUUsMkJBQTBCTixJQUFJLENBQUNPLEdBQUksK0JBQXJDLENBQUwsQ0FDR2dCLElBREgsQ0FDUUMsUUFBUSxJQUFJO0lBQ2hCLElBQUlBLFFBQVEsQ0FBQ0MsRUFBYixFQUFpQjtNQUNmLE9BQU9ELFFBQVEsQ0FBQ2YsSUFBVCxFQUFQO0lBQ0Q7O0lBQ0QsT0FBT2lCLE9BQU8sQ0FBQ0MsTUFBUixDQUFlSCxRQUFmLENBQVA7RUFDRCxDQU5ILEVBT0dELElBUEgsQ0FPUSxNQUFNSyxJQUFOLElBQWM7SUFDbEIsSUFBSUEsSUFBSSxDQUFDQyxTQUFULEVBQW9CO01BQ2xCakMsMEJBQTBCLENBQUNPLFNBQTNCLEdBQXVDLEVBQXZDO01BQ0FRLE9BQU8sQ0FBQ0MsR0FBUixDQUFZZ0IsSUFBWjs7TUFFQSxJQUFJQSxJQUFJLENBQUNFLFdBQUwsQ0FBaUJDLE1BQWpCLEdBQTBCLENBQTlCLEVBQWlDO1FBQy9CbEMsMEJBQTBCLElBQUkrQixJQUFJLENBQUNFLFdBQUwsQ0FBaUJDLE1BQS9DOztRQUNBLElBQ0VqQyx3QkFBd0IsS0FBSyxDQUE3QixJQUNBQSx3QkFBd0IsSUFBSUQsMEJBRjlCLEVBR0U7VUFDQSxJQUFJO1lBQUVtQztVQUFGLElBQWdDLE1BQU0sdVJBQTFDO1VBRUEsSUFBSUMsNEJBQTRCLEdBQzlCTCxJQUFJLENBQUNFLFdBQUwsQ0FBaUJDLE1BQWpCLElBQ0NsQywwQkFBMEIsR0FBR0Msd0JBRDlCLENBREY7VUFHQXdCLDZCQUE2QixDQUMzQk0sSUFBSSxDQUFDRSxXQUFMLENBQWlCSSxLQUFqQixDQUF1QixDQUF2QixFQUEwQkQsNEJBQTFCLENBRDJCLEVBRTNCckMsMEJBRjJCLEVBRzNCLEtBSDJCLEVBSTNCLElBSjJCLENBQTdCO1VBTUFvQyx5QkFBeUIsQ0FDdkJsQyx3QkFEdUIsRUFFdkJGLDBCQUZ1QixFQUd2QixZQUh1QixDQUF6QjtVQUtBMEIsNkJBQTZCLENBQzNCTSxJQUFJLENBQUNFLFdBQUwsQ0FBaUJJLEtBQWpCLENBQXVCRCw0QkFBdkIsQ0FEMkIsRUFFM0JyQywwQkFGMkIsRUFHM0IsS0FIMkIsRUFJM0IsSUFKMkIsQ0FBN0I7VUFNQUUsd0JBQXdCLEdBQUcsQ0FBM0I7UUFDRCxDQTNCRCxNQTJCTztVQUNMd0IsNkJBQTZCLENBQzNCTSxJQUFJLENBQUNFLFdBRHNCLEVBRTNCbEMsMEJBRjJCLEVBRzNCLEtBSDJCLEVBSTNCLElBSjJCLENBQTdCO1FBTUQ7O1FBRUR1QyxVQUFVLENBQUMsTUFBTTtVQUNmLElBQUl2QywwQkFBMEIsQ0FBQ3dDLGlCQUEvQixFQUNFbEIsd0JBQXdCLENBQUNtQixPQUF6QixDQUNFekMsMEJBQTBCLENBQUN3QyxpQkFEN0I7UUFHSCxDQUxTLEVBS1AsSUFMTyxDQUFWO1FBTUFELFVBQVUsQ0FBQyxNQUFNO1VBQ2YsSUFBSXZDLDBCQUEwQixDQUFDMEMsZ0JBQS9CLEVBQ0VsQiwyQkFBMkIsQ0FBQ2lCLE9BQTVCLENBQ0V6QywwQkFBMEIsQ0FBQzBDLGdCQUQ3QjtRQUdILENBTFMsRUFLUCxJQUxPLENBQVY7TUFNRDs7TUFFRCxJQUFJO1FBQUVDO01BQUYsSUFBMEMsTUFBTSxzTEFBcEQ7TUFHQUEsbUNBQW1DO0lBQ3BDLENBNURELE1BNERPO01BQ0wsSUFBSTtRQUFFQztNQUFGLElBQTZCLE1BQU0sK09BQXZDO01BR0FBLHNCQUFzQixDQUFDWixJQUFJLENBQUNhLEtBQU4sRUFBYSxPQUFiLENBQXRCO0lBQ0Q7RUFDRixDQTFFSCxFQTJFR0MsS0EzRUgsQ0EyRVMsTUFBTUMsR0FBTixJQUFhO0lBQ2xCaEMsT0FBTyxDQUFDQyxHQUFSLENBQVkrQixHQUFaO0lBQ0EsSUFBSTtNQUFFSDtJQUFGLElBQTZCLE1BQU0sK09BQXZDO0lBR0FBLHNCQUFzQixDQUNwQiw4REFEb0IsRUFFcEIsT0FGb0IsQ0FBdEI7RUFJRCxDQXBGSDtFQXNGQWhELGNBQWMsQ0FBQ29ELFNBQWYsQ0FBeUJDLEdBQXpCLENBQTZCLHdCQUE3QjtFQUNBbEQsaUJBQWlCLENBQUNpRCxTQUFsQixDQUE0QkUsTUFBNUIsQ0FBbUMsMkJBQW5DO0FBQ0Q7O0FBRUQsU0FBUzdCLGdDQUFULEdBQTRDO0VBQzFDSCx5QkFBeUIsR0FBRyxJQUFJaUMsb0JBQUosQ0FDMUIsT0FBT0MsT0FBUCxFQUFnQkMsUUFBaEIsS0FBNkI7SUFDM0JELE9BQU8sQ0FBQ0UsT0FBUixDQUFnQkMsS0FBSyxJQUFJO01BQ3ZCLElBQUlBLEtBQUssQ0FBQ0MsY0FBTixLQUF5QixJQUE3QixFQUFtQztRQUNqQyxJQUFJQyxTQUFTLEdBQUdGLEtBQUssQ0FBQ0csTUFBTixDQUFhQyxPQUFiLENBQXFCRixTQUFyQztRQUNBRyxNQUFNLENBQUNDLElBQVAsQ0FBWSxpQ0FBWixFQUErQztVQUM3Q0osU0FBUyxFQUFFQTtRQURrQyxDQUEvQztRQUdBSixRQUFRLENBQUNTLFNBQVQsQ0FBbUJQLEtBQUssQ0FBQ0csTUFBekI7TUFDRDtJQUNGLENBUkQ7RUFTRCxDQVh5QixFQVkxQjtJQUFFSyxTQUFTLEVBQUUsR0FBYjtJQUFrQkMsSUFBSSxFQUFFaEU7RUFBeEIsQ0FaMEIsQ0FBNUI7QUFjRDs7QUFDRCxTQUFTdUIsK0JBQVQsR0FBMkM7RUFDekNELHdCQUF3QixHQUFHLElBQUk2QixvQkFBSixDQUN6QixPQUFPQyxPQUFQLEVBQWdCQyxRQUFoQixLQUE2QjtJQUMzQkQsT0FBTyxDQUFDRSxPQUFSLENBQWdCLE1BQU1DLEtBQU4sSUFBZTtNQUM3QixJQUFJQSxLQUFLLENBQUNDLGNBQU4sS0FBeUIsSUFBN0IsRUFBbUM7UUFDakNILFFBQVEsQ0FBQ1MsU0FBVCxDQUFtQlAsS0FBSyxDQUFDRyxNQUF6QjtRQUNBLElBQUlPLE1BQU0sR0FBR2xFLGlCQUFpQixDQUFDNEQsT0FBbEIsQ0FBMEJNLE1BQXZDO1FBRUEsTUFBTTtVQUFFQztRQUFGLElBQXFDLE1BQU0sdVJBQWpEO1FBR0EsSUFBSUMsMEJBQTBCLEdBQUdELDhCQUE4QixFQUEvRDtRQUNBbEUsMEJBQTBCLENBQUNvRSxxQkFBM0IsQ0FDRSxZQURGLEVBRUVELDBCQUZGO1FBSUFuRSwwQkFBMEIsQ0FBQ3FFLFNBQTNCLElBQXdDLEdBQXhDO1FBQ0EsTUFBTUMsbUNBQW1DLENBQUNMLE1BQUQsQ0FBekM7TUFDRDtJQUNGLENBaEJEO0VBaUJELENBbkJ3QixFQW9CekI7SUFBRUYsU0FBUyxFQUFFLEdBQWI7SUFBa0JDLElBQUksRUFBRWhFLDBCQUF4QjtJQUFvRHVFLFVBQVUsRUFBRTtFQUFoRSxDQXBCeUIsQ0FBM0I7QUFzQkQ7O0FBQ0QsU0FBUzlDLGtDQUFULEdBQThDO0VBQzVDRCwyQkFBMkIsR0FBRyxJQUFJMkIsb0JBQUosQ0FDNUIsT0FBT0MsT0FBUCxFQUFnQkMsUUFBaEIsS0FBNkI7SUFDM0JELE9BQU8sQ0FBQ0UsT0FBUixDQUFnQixNQUFNQyxLQUFOLElBQWU7TUFDN0IsSUFBSUEsS0FBSyxDQUFDQyxjQUFOLEtBQXlCLElBQTdCLEVBQW1DO1FBQ2pDSCxRQUFRLENBQUNTLFNBQVQsQ0FBbUJQLEtBQUssQ0FBQ0csTUFBekI7UUFDQSxJQUFJTyxNQUFNLEdBQUdsRSxpQkFBaUIsQ0FBQzRELE9BQWxCLENBQTBCTSxNQUF2QztRQUNBTCxNQUFNLENBQUNDLElBQVAsQ0FBWSxrQ0FBWixFQUFnRDtVQUM5Q0ksTUFBTSxFQUFFQTtRQURzQyxDQUFoRDtNQUdEO0lBQ0YsQ0FSRDtFQVNELENBWDJCLEVBWTVCO0lBQUVGLFNBQVMsRUFBRSxHQUFiO0lBQWtCQyxJQUFJLEVBQUVoRTtFQUF4QixDQVo0QixDQUE5QjtBQWNEOztBQUVELGVBQWVzRSxtQ0FBZixDQUFtREwsTUFBbkQsRUFBMkQ7RUFDekQsTUFBTTtJQUFFdkM7RUFBRixJQUFvQyxNQUFNLHVSQUFoRDtFQUVBaEIsS0FBSyxDQUNGLDJCQUEwQnVELE1BQU8sK0JBQThCaEUsMEJBQTJCLEVBRHhGLENBQUwsQ0FHRzBCLElBSEgsQ0FHUUMsUUFBUSxJQUFJO0lBQ2hCLElBQUlBLFFBQVEsQ0FBQ0MsRUFBYixFQUFpQjtNQUNmLE9BQU9ELFFBQVEsQ0FBQ2YsSUFBVCxFQUFQO0lBQ0Q7O0lBQ0QsT0FBT2lCLE9BQU8sQ0FBQ0MsTUFBUixDQUFlSCxRQUFmLENBQVA7RUFDRCxDQVJILEVBU0dELElBVEgsQ0FTUSxNQUFNSyxJQUFOLElBQWM7SUFDbEIsSUFBSUEsSUFBSSxDQUFDQyxTQUFULEVBQW9CO01BQ2xCbEIsT0FBTyxDQUFDQyxHQUFSLENBQVlnQixJQUFaOztNQUVBLElBQUlBLElBQUksQ0FBQ0UsV0FBTCxDQUFpQkMsTUFBakIsR0FBMEIsQ0FBOUIsRUFBaUM7UUFDL0JsQywwQkFBMEIsSUFBSStCLElBQUksQ0FBQ0UsV0FBTCxDQUFpQkMsTUFBL0M7O1FBQ0EsSUFDRWpDLHdCQUF3QixLQUFLLENBQTdCLElBQ0FBLHdCQUF3QixJQUFJRCwwQkFGOUIsRUFHRTtVQUNBLElBQUk7WUFBRW1DO1VBQUYsSUFBZ0MsTUFBTSx1UkFBMUM7VUFFQSxJQUFJQyw0QkFBNEIsR0FDOUJMLElBQUksQ0FBQ0UsV0FBTCxDQUFpQkMsTUFBakIsSUFDQ2xDLDBCQUEwQixHQUFHQyx3QkFEOUIsQ0FERjtVQUdBd0IsNkJBQTZCLENBQzNCTSxJQUFJLENBQUNFLFdBQUwsQ0FBaUJJLEtBQWpCLENBQXVCLENBQXZCLEVBQTBCRCw0QkFBMUIsQ0FEMkIsRUFFM0JyQywwQkFGMkIsRUFHM0IsS0FIMkIsRUFJM0IsS0FKMkIsQ0FBN0I7VUFNQW9DLHlCQUF5QixDQUN2QmxDLHdCQUR1QixFQUV2QkYsMEJBRnVCLEVBR3ZCLFlBSHVCLENBQXpCO1VBS0EwQiw2QkFBNkIsQ0FDM0JNLElBQUksQ0FBQ0UsV0FBTCxDQUFpQkksS0FBakIsQ0FBdUJELDRCQUF2QixDQUQyQixFQUUzQnJDLDBCQUYyQixFQUczQixLQUgyQixFQUkzQixLQUoyQixDQUE3QjtVQU1BRSx3QkFBd0IsR0FBRyxDQUEzQjtRQUNELENBM0JELE1BMkJPO1VBQ0x3Qiw2QkFBNkIsQ0FDM0JNLElBQUksQ0FBQ0UsV0FEc0IsRUFFM0JsQywwQkFGMkIsRUFHM0IsS0FIMkIsRUFJM0IsS0FKMkIsQ0FBN0I7UUFNRDs7UUFFRHVDLFVBQVUsQ0FBQyxNQUFNO1VBQ2YsSUFBSXZDLDBCQUEwQixDQUFDd0MsaUJBQS9CLEVBQ0VsQix3QkFBd0IsQ0FBQ21CLE9BQXpCLENBQ0V6QywwQkFBMEIsQ0FBQ3dDLGlCQUQ3QjtRQUdILENBTFMsRUFLUCxJQUxPLENBQVY7TUFNRCxDQTVDRCxNQTRDTztRQUNMLElBQUkyQiwwQkFBMEIsR0FBRyxDQUMvQixHQUFHbkUsMEJBQTBCLENBQUN3RSxzQkFBM0IsQ0FDRCwrQkFEQyxDQUQ0QixDQUFqQztRQUtBTCwwQkFBMEIsQ0FBQ2IsT0FBM0IsQ0FBbUNtQixHQUFHLElBQUk7VUFDeENBLEdBQUcsQ0FBQ0MsVUFBSixDQUFlQyxXQUFmLENBQTJCRixHQUEzQjtRQUNELENBRkQ7TUFHRDtJQUNGLENBekRELE1BeURPO01BQ0wsSUFBSTtRQUFFN0I7TUFBRixJQUE2QixNQUFNLCtPQUF2QztNQUdBQSxzQkFBc0IsQ0FBQ1osSUFBSSxDQUFDYSxLQUFOLEVBQWEsT0FBYixDQUF0QjtJQUNEO0VBQ0YsQ0F6RUgsRUEwRUdDLEtBMUVILENBMEVTLE1BQU1DLEdBQU4sSUFBYTtJQUNsQmhDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZK0IsR0FBWjtJQUNBLElBQUk7TUFBRUg7SUFBRixJQUE2QixNQUFNLCtPQUF2QztJQUdBQSxzQkFBc0IsQ0FDcEIsOERBRG9CLEVBRXBCLE9BRm9CLENBQXRCO0VBSUQsQ0FuRkg7QUFvRkQsRUFFRDs7O0FBRU8sU0FBU2dDLGtDQUFULEdBQThDO0VBQ25EMUUsd0JBQXdCLEdBQUcsQ0FBM0I7RUFDQUQsMEJBQTBCO0FBQzNCLEVBRUQ7O0FBQ08sZUFBZU8sdUJBQWYsQ0FBdUNKLElBQXZDLEVBQTZDO0VBQ2xELElBQUk7SUFBRXlFO0VBQUYsSUFBMkIsTUFBTSwrTkFBckM7RUFDQUEsb0JBQW9CO0VBQ3BCOUUsaUJBQWlCLENBQUM0RCxPQUFsQixDQUEwQk0sTUFBMUIsR0FBbUM3RCxJQUFJLENBQUNPLEdBQXhDO0VBQ0EsTUFBTW1FLGdCQUFnQixHQUFHakYsUUFBUSxDQUFDQyxjQUFULENBQXdCLGtCQUF4QixDQUF6QjtFQUNBLE1BQU1pRixtQkFBbUIsR0FBR2xGLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixxQkFBeEIsQ0FBNUI7RUFDQSxNQUFNa0YsYUFBYSxHQUFHbkYsUUFBUSxDQUFDQyxjQUFULENBQXdCLGVBQXhCLENBQXRCO0VBQ0EsTUFBTW1GLG9CQUFvQixHQUFHcEYsUUFBUSxDQUFDQyxjQUFULENBQXdCLHNCQUF4QixDQUE3QjtFQUNBLE1BQU1vRixzQkFBc0IsR0FBR3JGLFFBQVEsQ0FBQ0MsY0FBVCxDQUM3Qix3QkFENkIsQ0FBL0I7RUFHQSxNQUFNcUYsd0JBQXdCLEdBQUd0RixRQUFRLENBQUNDLGNBQVQsQ0FDL0IsMEJBRCtCLENBQWpDO0VBSUFnRixnQkFBZ0IsQ0FBQ25CLE9BQWpCLENBQXlCTSxNQUF6QixHQUFrQzdELElBQUksQ0FBQ08sR0FBdkM7O0VBRUEsSUFBSVAsSUFBSSxDQUFDZ0YsY0FBTCxDQUFvQixTQUFwQixLQUFrQ2hGLElBQUksQ0FBQ2lGLE9BQUwsS0FBaUIsRUFBdkQsRUFBMkQ7SUFDekRMLGFBQWEsQ0FBQ00sR0FBZCxHQUFvQmxGLElBQUksQ0FBQ2lGLE9BQXpCO0lBRUFOLG1CQUFtQixDQUFDL0IsU0FBcEIsQ0FBOEJDLEdBQTlCLENBQWtDLG1DQUFsQztJQUNBOEIsbUJBQW1CLENBQUMvQixTQUFwQixDQUE4QkUsTUFBOUIsQ0FBcUMsbUNBQXJDO0VBQ0QsQ0FMRCxNQUtPO0lBQ0w2QixtQkFBbUIsQ0FBQy9CLFNBQXBCLENBQThCQyxHQUE5QixDQUFrQyxtQ0FBbEM7SUFDQThCLG1CQUFtQixDQUFDL0IsU0FBcEIsQ0FBOEJFLE1BQTlCLENBQXFDLG1DQUFyQztFQUNEOztFQUNEK0Isb0JBQW9CLENBQUNNLFdBQXJCLEdBQW1DbkYsSUFBSSxDQUFDb0YsUUFBeEM7O0VBQ0EsSUFBSSxDQUFDcEYsSUFBSSxDQUFDcUYsV0FBVixFQUF1QjtJQUNyQixJQUFJckYsSUFBSSxDQUFDc0YsWUFBVCxFQUF1QjtNQUNyQlIsc0JBQXNCLENBQUNsQyxTQUF2QixDQUFpQ0UsTUFBakMsQ0FDRSx1Q0FERjtNQUdBZ0Msc0JBQXNCLENBQUNLLFdBQXZCLEdBQXFDLFFBQXJDO0lBQ0QsQ0FMRCxNQUtPO01BQ0wsSUFBSTtRQUFFSTtNQUFGLElBQTRCLE1BQU0sNlBBQXRDO01BR0FULHNCQUFzQixDQUFDbEMsU0FBdkIsQ0FBaUNFLE1BQWpDLENBQ0UsdUNBREY7O01BR0EsSUFBSTlDLElBQUksQ0FBQ2dGLGNBQUwsQ0FBb0IsZ0JBQXBCLENBQUosRUFBMkM7UUFDekNGLHNCQUFzQixDQUFDSyxXQUF2QixHQUFzQyxlQUFjSSxxQkFBcUIsQ0FDdkV2RixJQUFJLENBQUN3RixjQURrRSxDQUV2RSxNQUZGO01BR0QsQ0FKRCxNQUlPO1FBQ0xWLHNCQUFzQixDQUFDSyxXQUF2QixHQUFxQyxFQUFyQztNQUNEO0lBQ0Y7RUFDRixDQXJCRCxNQXFCTztJQUNMTCxzQkFBc0IsQ0FBQ2xDLFNBQXZCLENBQWlDRSxNQUFqQyxDQUNFLHVDQURGO0lBR0FnQyxzQkFBc0IsQ0FBQ0ssV0FBdkIsR0FBcUMsRUFBckM7RUFDRDs7RUFFRE0sNkJBQTZCLENBQUN6RixJQUFELENBQTdCO0FBQ0Q7QUFFTSxlQUFlMEYsK0JBQWYsR0FBaUQ7RUFDdEQsSUFBSTlGLDBCQUEwQixHQUFHSCxRQUFRLENBQUNDLGNBQVQsQ0FDL0IsNEJBRCtCLENBQWpDO0VBR0FFLDBCQUEwQixDQUFDTyxTQUEzQixHQUF1QyxFQUF2QztBQUNEO0FBRU0sZUFBZXNGLDZCQUFmLENBQTZDekYsSUFBN0MsRUFBbUQ7RUFDeEQsTUFBTStFLHdCQUF3QixHQUFHdEYsUUFBUSxDQUFDQyxjQUFULENBQy9CLDBCQUQrQixDQUFqQzs7RUFHQSxJQUNFTSxJQUFJLENBQUNnRixjQUFMLENBQW9CLDBCQUFwQixLQUNBaEYsSUFBSSxDQUFDMkYsd0JBQUwsS0FBa0MsS0FGcEMsRUFHRTtJQUNBWix3QkFBd0IsQ0FBQ25DLFNBQXpCLENBQW1DQyxHQUFuQyxDQUNFLHNDQURGO0lBR0FrQyx3QkFBd0IsQ0FBQ25DLFNBQXpCLENBQW1DRSxNQUFuQyxDQUNFLHFDQURGO0VBR0QsQ0FWRCxNQVVPO0lBQ0xpQyx3QkFBd0IsQ0FBQ25DLFNBQXpCLENBQW1DQyxHQUFuQyxDQUNFLHFDQURGO0lBR0FrQyx3QkFBd0IsQ0FBQ25DLFNBQXpCLENBQW1DRSxNQUFuQyxDQUNFLHNDQURGO0VBR0Q7QUFDRixFQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9kZXYtamF2YXNjcmlwdHMvY2hhdC9qcy9zaG93QWN0aXZlQ2hhdFNlY3Rpb24uZGV2LmpzP2JiNzEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGV0IGFsbENoYXRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGxDaGF0U2VjdGlvblwiKVxyXG4vLyBsZXQgYWN0aXZlQ2hhdFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRTZWN0aW9uXCIpXHJcbi8vIGNvbnN0IGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbi8vICAgXCJhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lclwiXHJcbi8vIClcclxuXHJcbi8vIGxldCB0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudFxyXG4vLyBsZXQgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50XHJcbi8vIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93QWN0aXZlQ2hhdFNlY3Rpb24oY2hhdCkge1xyXG4vLyAgIGxldCBhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4vLyAgICAgXCJhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudFwiXHJcbi8vICAgKVxyXG4vLyAgIGFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50LnZhbHVlID0gXCJcIlxyXG4vLyAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCJcclxuLy8gICB1cGRhdGVBY3RpdmVDaGF0U2VjdGlvbihjaGF0KVxyXG5cclxuLy8gICB0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCA9IDBcclxuLy8gICBsZXQgdW5zZWVuTWVzc2FnZXNDb3VudFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbi8vICAgICBgL21lc3NhZ2UvZGF0YS91bnNlZW4tbWVzc2FnZXMtY291bnQvJHtjaGF0Ll9pZH1gXHJcbi8vICAgKVxyXG4vLyAgIGxldCB1bnNlZW5NZXNzYWdlc0NvdW50RGF0YSA9IGF3YWl0IHVuc2Vlbk1lc3NhZ2VzQ291bnRSZXNwb25zZS5qc29uKClcclxuLy8gICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQgPSB1bnNlZW5NZXNzYWdlc0NvdW50RGF0YS51bnNlZW5NZXNzYWdlc0NvdW50XHJcbi8vICAgY29uc29sZS5sb2coXCJ0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQ6IFwiICsgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50KVxyXG4vLyAgIGxldCB7IG9wZW5BY3RpdmVDaGF0SW5wdXRCb3ggfSA9IGF3YWl0IGltcG9ydChcIi4uL2NoYXQuZGV2LmpzXCIpXHJcbi8vICAgb3BlbkFjdGl2ZUNoYXRJbnB1dEJveCgpXHJcblxyXG4vLyAgIGlmIChVU0VSX01FU1NBR0VfQk9YX09CU0VSVkVSICE9PSB1bmRlZmluZWQpIHtcclxuLy8gICAgIFVTRVJfTUVTU0FHRV9CT1hfT0JTRVJWRVIuZGlzY29ubmVjdCgpXHJcbi8vICAgfVxyXG4vLyAgIGluaXRpYWxpemVVc2VyTWVzc2FnZUJveE9ic2VydmVyKClcclxuLy8gICBpZiAoVE9QX01FU1NBR0VfQk9YX09CU0VSVkVSICE9PSB1bmRlZmluZWQpIHtcclxuLy8gICAgIFRPUF9NRVNTQUdFX0JPWF9PQlNFUlZFUi5kaXNjb25uZWN0KClcclxuLy8gICB9XHJcbi8vICAgaW5pdGlhbGl6ZVRvcE1lc3NhZ2VCb3hPYnNlcnZlcigpXHJcbi8vICAgaWYgKEJPVFRPTV9NRVNTQUdFX0JPWF9PQlNFUlZFUiAhPT0gdW5kZWZpbmVkKSB7XHJcbi8vICAgICBCT1RUT01fTUVTU0FHRV9CT1hfT0JTRVJWRVIuZGlzY29ubmVjdCgpXHJcbi8vICAgfVxyXG4vLyAgIGluaXRpYWxpemVCb3R0b21NZXNzYWdlQm94T2JzZXJ2ZXIoKVxyXG5cclxuLy8gICAvLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vICAgY29uc3QgeyBjaGVja1RpbWVBbmRDcmVhdGVPbGRNZXNzYWdlcyB9ID0gYXdhaXQgaW1wb3J0KFwiLi9tZXNzYWdlLmRldlwiKVxyXG5cclxuLy8gICBmZXRjaChgL21lc3NhZ2UvZmV0Y2gtbWVzc2FnZXMvJHtjaGF0Ll9pZH0/dG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQ9MGApXHJcbi8vICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbi8vICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4vLyAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcclxuLy8gICAgICAgfVxyXG4vLyAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzcG9uc2UpXHJcbi8vICAgICB9KVxyXG4vLyAgICAgLnRoZW4oYXN5bmMgZGF0YSA9PiB7XHJcbi8vICAgICAgIGlmIChkYXRhLmlzU3VjY2Vzcykge1xyXG4vLyAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCJcclxuLy8gICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG5cclxuLy8gICAgICAgICBpZiAoZGF0YS5hbGxNZXNzYWdlcy5sZW5ndGggPiAwKSB7XHJcbi8vICAgICAgICAgICB0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCArPSBkYXRhLmFsbE1lc3NhZ2VzLmxlbmd0aFxyXG4vLyAgICAgICAgICAgaWYgKFxyXG4vLyAgICAgICAgICAgICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQgIT09IDAgJiZcclxuLy8gICAgICAgICAgICAgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50IDw9IHRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50XHJcbi8vICAgICAgICAgICApIHtcclxuLy8gICAgICAgICAgICAgbGV0IHsgY3JlYXRlVW5zZWVuTWVzc2FnZVRhZ0JveCB9ID0gYXdhaXQgaW1wb3J0KFwiLi9tZXNzYWdlLmRldlwiKVxyXG5cclxuLy8gICAgICAgICAgICAgbGV0IHBvc2l0aW9uRm9yVW5zZWVlbk1lc3NhZ2VUYWcgPVxyXG4vLyAgICAgICAgICAgICAgIGRhdGEuYWxsTWVzc2FnZXMubGVuZ3RoIC1cclxuLy8gICAgICAgICAgICAgICAodG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQgLSB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQpXHJcbi8vICAgICAgICAgICAgIGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzKFxyXG4vLyAgICAgICAgICAgICAgIGRhdGEuYWxsTWVzc2FnZXMuc2xpY2UoMCwgcG9zaXRpb25Gb3JVbnNlZWVuTWVzc2FnZVRhZyksXHJcbi8vICAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIsXHJcbi8vICAgICAgICAgICAgICAgZmFsc2UsXHJcbi8vICAgICAgICAgICAgICAgdHJ1ZVxyXG4vLyAgICAgICAgICAgICApXHJcbi8vICAgICAgICAgICAgIGNyZWF0ZVVuc2Vlbk1lc3NhZ2VUYWdCb3goXHJcbi8vICAgICAgICAgICAgICAgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50LFxyXG4vLyAgICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLFxyXG4vLyAgICAgICAgICAgICAgIFwiYWZ0ZXJiZWdpblwiXHJcbi8vICAgICAgICAgICAgIClcclxuLy8gICAgICAgICAgICAgY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMoXHJcbi8vICAgICAgICAgICAgICAgZGF0YS5hbGxNZXNzYWdlcy5zbGljZShwb3NpdGlvbkZvclVuc2VlZW5NZXNzYWdlVGFnKSxcclxuLy8gICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lcixcclxuLy8gICAgICAgICAgICAgICBmYWxzZSxcclxuLy8gICAgICAgICAgICAgICB0cnVlXHJcbi8vICAgICAgICAgICAgIClcclxuLy8gICAgICAgICAgICAgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50ID0gMFxyXG4vLyAgICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICAgY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMoXHJcbi8vICAgICAgICAgICAgICAgZGF0YS5hbGxNZXNzYWdlcyxcclxuLy8gICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lcixcclxuLy8gICAgICAgICAgICAgICBmYWxzZSxcclxuLy8gICAgICAgICAgICAgICB0cnVlXHJcbi8vICAgICAgICAgICAgIClcclxuLy8gICAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuLy8gICAgICAgICAgICAgaWYgKGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkKVxyXG4vLyAgICAgICAgICAgICAgIFRPUF9NRVNTQUdFX0JPWF9PQlNFUlZFUi5vYnNlcnZlKFxyXG4vLyAgICAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGRcclxuLy8gICAgICAgICAgICAgICApXHJcbi8vICAgICAgICAgICB9LCAyNTAwKVxyXG4vLyAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbi8vICAgICAgICAgICAgIGlmIChhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkKVxyXG4vLyAgICAgICAgICAgICAgIEJPVFRPTV9NRVNTQUdFX0JPWF9PQlNFUlZFUi5vYnNlcnZlKFxyXG4vLyAgICAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIubGFzdEVsZW1lbnRDaGlsZFxyXG4vLyAgICAgICAgICAgICAgIClcclxuLy8gICAgICAgICAgIH0sIDIwMDApXHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBsZXQgeyBhZGp1c3RNZXNzYWdlQ29udGFpbmVyQm90dG9tUGFkZGluZyB9ID0gYXdhaXQgaW1wb3J0KFxyXG4vLyAgICAgICAgICAgXCIuLi9jaGF0LmRldlwiXHJcbi8vICAgICAgICAgKVxyXG4vLyAgICAgICAgIGFkanVzdE1lc3NhZ2VDb250YWluZXJCb3R0b21QYWRkaW5nKClcclxuLy8gICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICBsZXQgeyBjcmVhdGVNYWluTm90aWZpY2F0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbi8vICAgICAgICAgICBcIi4uLy4uL2NvbW1vbi9tYWluTm90aWZpY2F0aW9uLmRldlwiXHJcbi8vICAgICAgICAgKVxyXG4vLyAgICAgICAgIGNyZWF0ZU1haW5Ob3RpZmljYXRpb24oZGF0YS5lcnJvciwgXCJlcnJvclwiKVxyXG4vLyAgICAgICB9XHJcbi8vICAgICB9KVxyXG4vLyAgICAgLmNhdGNoKGFzeW5jIGVyciA9PiB7XHJcbi8vICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuLy8gICAgICAgbGV0IHsgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KFxyXG4vLyAgICAgICAgIFwiLi4vLi4vY29tbW9uL21haW5Ob3RpZmljYXRpb24uZGV2XCJcclxuLy8gICAgICAgKVxyXG4vLyAgICAgICBjcmVhdGVNYWluTm90aWZpY2F0aW9uKFxyXG4vLyAgICAgICAgIFwiU2VydmVyIEVycm9yIEluIEFjY2Vzc2luZyBNZXNzYWdlcywgUGxlYXNlIFJlZnJlc2ggWW91ciBQYWdlXCIsXHJcbi8vICAgICAgICAgXCJlcnJvclwiXHJcbi8vICAgICAgIClcclxuLy8gICAgIH0pXHJcblxyXG4vLyAgIGFsbENoYXRTZWN0aW9uLmNsYXNzTGlzdC5hZGQoXCJhbGwtY2hhdC1zZWN0aW9uLS1oaWRlXCIpXHJcbi8vICAgYWN0aXZlQ2hhdFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1jaGF0LXNlY3Rpb24tLWhpZGVcIilcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gaW5pdGlhbGl6ZVVzZXJNZXNzYWdlQm94T2JzZXJ2ZXIoKSB7XHJcbi8vICAgVVNFUl9NRVNTQUdFX0JPWF9PQlNFUlZFUiA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcclxuLy8gICAgIGFzeW5jIChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xyXG4vLyAgICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xyXG4vLyAgICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZyA9PT0gdHJ1ZSkge1xyXG4vLyAgICAgICAgICAgbGV0IG1lc3NhZ2VJZCA9IGVudHJ5LnRhcmdldC5kYXRhc2V0Lm1lc3NhZ2VJZFxyXG4vLyAgICAgICAgICAgc29ja2V0LmVtaXQoXCJjaGF0OnVwZGF0ZS1tZXNzYWdlLXNlZW4tc3RhdHVzXCIsIHtcclxuLy8gICAgICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlSWRcclxuLy8gICAgICAgICAgIH0pXHJcbi8vICAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgfSlcclxuLy8gICAgIH0sXHJcbi8vICAgICB7IHRocmVzaG9sZDogMC41LCByb290OiBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lciB9XHJcbi8vICAgKVxyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIGluaXRpYWxpemVUb3BNZXNzYWdlQm94T2JzZXJ2ZXIoKSB7XHJcbi8vICAgVE9QX01FU1NBR0VfQk9YX09CU0VSVkVSID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxyXG4vLyAgICAgYXN5bmMgKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XHJcbi8vICAgICAgIGVudHJpZXMuZm9yRWFjaChhc3luYyBlbnRyeSA9PiB7XHJcbi8vICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nID09PSB0cnVlKSB7XHJcbi8vICAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KVxyXG4vLyAgICAgICAgICAgbGV0IGNoYXRJZCA9IGFjdGl2ZUNoYXRTZWN0aW9uLmRhdGFzZXQuY2hhdElkXHJcblxyXG4vLyAgICAgICAgICAgY29uc3QgeyBjcmVhdGVMb2FkaW5nTWVzc2FnZXNBbmltYXRpb24gfSA9IGF3YWl0IGltcG9ydChcclxuLy8gICAgICAgICAgICAgXCIuL21lc3NhZ2UuZGV2XCJcclxuLy8gICAgICAgICAgIClcclxuLy8gICAgICAgICAgIGxldCBsb2FkaW5nTWVzc2FnZUFuaW1hdGlvbkJveCA9IGNyZWF0ZUxvYWRpbmdNZXNzYWdlc0FuaW1hdGlvbigpXHJcbi8vICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoXHJcbi8vICAgICAgICAgICAgIFwiYWZ0ZXJiZWdpblwiLFxyXG4vLyAgICAgICAgICAgICBsb2FkaW5nTWVzc2FnZUFuaW1hdGlvbkJveFxyXG4vLyAgICAgICAgICAgKVxyXG4vLyAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuc2Nyb2xsVG9wICs9IDE1MFxyXG4vLyAgICAgICAgICAgYXdhaXQgZmV0Y2hNZXNzYWdlQW5kQ3JlYXRlVXNlck1lc3NhZ2VCb3goY2hhdElkKVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgfSlcclxuLy8gICAgIH0sXHJcbi8vICAgICB7IHRocmVzaG9sZDogMC41LCByb290OiBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lciwgcm9vdE1hcmdpbjogXCIxMDBweFwiIH1cclxuLy8gICApXHJcbi8vIH1cclxuLy8gZnVuY3Rpb24gaW5pdGlhbGl6ZUJvdHRvbU1lc3NhZ2VCb3hPYnNlcnZlcigpIHtcclxuLy8gICBCT1RUT01fTUVTU0FHRV9CT1hfT0JTRVJWRVIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXHJcbi8vICAgICBhc3luYyAoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcclxuLy8gICAgICAgZW50cmllcy5mb3JFYWNoKGFzeW5jIGVudHJ5ID0+IHtcclxuLy8gICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcgPT09IHRydWUpIHtcclxuLy8gICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpXHJcbi8vICAgICAgICAgICBsZXQgY2hhdElkID0gYWN0aXZlQ2hhdFNlY3Rpb24uZGF0YXNldC5jaGF0SWRcclxuLy8gICAgICAgICAgIHNvY2tldC5lbWl0KFwiY2hhdDp1cGRhdGUtY2hhdC11bnNlZW4tbWVzc2FnZXNcIiwge1xyXG4vLyAgICAgICAgICAgICBjaGF0SWQ6IGNoYXRJZFxyXG4vLyAgICAgICAgICAgfSlcclxuLy8gICAgICAgICB9XHJcbi8vICAgICAgIH0pXHJcbi8vICAgICB9LFxyXG4vLyAgICAgeyB0aHJlc2hvbGQ6IDAuNSwgcm9vdDogYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIgfVxyXG4vLyAgIClcclxuLy8gfVxyXG5cclxuLy8gYXN5bmMgZnVuY3Rpb24gZmV0Y2hNZXNzYWdlQW5kQ3JlYXRlVXNlck1lc3NhZ2VCb3goY2hhdElkKSB7XHJcbi8vICAgY29uc3QgeyBjaGVja1RpbWVBbmRDcmVhdGVPbGRNZXNzYWdlcyB9ID0gYXdhaXQgaW1wb3J0KFwiLi9tZXNzYWdlLmRldlwiKVxyXG5cclxuLy8gICBmZXRjaChcclxuLy8gICAgIGAvbWVzc2FnZS9mZXRjaC1tZXNzYWdlcy8ke2NoYXRJZH0/dG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQ9JHt0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudH1gXHJcbi8vICAgKVxyXG4vLyAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4vLyAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuLy8gICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbi8vICAgICAgIH1cclxuLy8gICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlKVxyXG4vLyAgICAgfSlcclxuLy8gICAgIC50aGVuKGFzeW5jIGRhdGEgPT4ge1xyXG4vLyAgICAgICBpZiAoZGF0YS5pc1N1Y2Nlc3MpIHtcclxuLy8gICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG5cclxuLy8gICAgICAgICBpZiAoZGF0YS5hbGxNZXNzYWdlcy5sZW5ndGggPiAwKSB7XHJcbi8vICAgICAgICAgICB0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCArPSBkYXRhLmFsbE1lc3NhZ2VzLmxlbmd0aFxyXG4vLyAgICAgICAgICAgaWYgKFxyXG4vLyAgICAgICAgICAgICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQgIT09IDAgJiZcclxuLy8gICAgICAgICAgICAgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50IDw9IHRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50XHJcbi8vICAgICAgICAgICApIHtcclxuLy8gICAgICAgICAgICAgbGV0IHsgY3JlYXRlVW5zZWVuTWVzc2FnZVRhZ0JveCB9ID0gYXdhaXQgaW1wb3J0KFwiLi9tZXNzYWdlLmRldlwiKVxyXG5cclxuLy8gICAgICAgICAgICAgbGV0IHBvc2l0aW9uRm9yVW5zZWVlbk1lc3NhZ2VUYWcgPVxyXG4vLyAgICAgICAgICAgICAgIGRhdGEuYWxsTWVzc2FnZXMubGVuZ3RoIC1cclxuLy8gICAgICAgICAgICAgICAodG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQgLSB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQpXHJcbi8vICAgICAgICAgICAgIGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzKFxyXG4vLyAgICAgICAgICAgICAgIGRhdGEuYWxsTWVzc2FnZXMuc2xpY2UoMCwgcG9zaXRpb25Gb3JVbnNlZWVuTWVzc2FnZVRhZyksXHJcbi8vICAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIsXHJcbi8vICAgICAgICAgICAgICAgZmFsc2UsXHJcbi8vICAgICAgICAgICAgICAgZmFsc2VcclxuLy8gICAgICAgICAgICAgKVxyXG4vLyAgICAgICAgICAgICBjcmVhdGVVbnNlZW5NZXNzYWdlVGFnQm94KFxyXG4vLyAgICAgICAgICAgICAgIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCxcclxuLy8gICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lcixcclxuLy8gICAgICAgICAgICAgICBcImFmdGVyYmVnaW5cIlxyXG4vLyAgICAgICAgICAgICApXHJcbi8vICAgICAgICAgICAgIGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzKFxyXG4vLyAgICAgICAgICAgICAgIGRhdGEuYWxsTWVzc2FnZXMuc2xpY2UocG9zaXRpb25Gb3JVbnNlZWVuTWVzc2FnZVRhZyksXHJcbi8vICAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIsXHJcbi8vICAgICAgICAgICAgICAgZmFsc2UsXHJcbi8vICAgICAgICAgICAgICAgZmFsc2VcclxuLy8gICAgICAgICAgICAgKVxyXG4vLyAgICAgICAgICAgICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQgPSAwXHJcbi8vICAgICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgICBjaGVja1RpbWVBbmRDcmVhdGVPbGRNZXNzYWdlcyhcclxuLy8gICAgICAgICAgICAgICBkYXRhLmFsbE1lc3NhZ2VzLFxyXG4vLyAgICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLFxyXG4vLyAgICAgICAgICAgICAgIGZhbHNlLFxyXG4vLyAgICAgICAgICAgICAgIGZhbHNlXHJcbi8vICAgICAgICAgICAgIClcclxuLy8gICAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuLy8gICAgICAgICAgICAgaWYgKGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkKVxyXG4vLyAgICAgICAgICAgICAgIFRPUF9NRVNTQUdFX0JPWF9PQlNFUlZFUi5vYnNlcnZlKFxyXG4vLyAgICAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGRcclxuLy8gICAgICAgICAgICAgICApXHJcbi8vICAgICAgICAgICB9LCA0MDAwKVxyXG4vLyAgICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgICBsZXQgbG9hZGluZ01lc3NhZ2VBbmltYXRpb25Cb3ggPSBbXHJcbi8vICAgICAgICAgICAgIC4uLmFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXHJcbi8vICAgICAgICAgICAgICAgXCJsb2FkaW5nLW1lc3NhZ2UtYW5pbWF0aW9uLWJveFwiXHJcbi8vICAgICAgICAgICAgIClcclxuLy8gICAgICAgICAgIF1cclxuLy8gICAgICAgICAgIGxvYWRpbmdNZXNzYWdlQW5pbWF0aW9uQm94LmZvckVhY2goYm94ID0+IHtcclxuLy8gICAgICAgICAgICAgYm94LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYm94KVxyXG4vLyAgICAgICAgICAgfSlcclxuLy8gICAgICAgICB9XHJcbi8vICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgbGV0IHsgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KFxyXG4vLyAgICAgICAgICAgXCIuLi8uLi9jb21tb24vbWFpbk5vdGlmaWNhdGlvbi5kZXZcIlxyXG4vLyAgICAgICAgIClcclxuLy8gICAgICAgICBjcmVhdGVNYWluTm90aWZpY2F0aW9uKGRhdGEuZXJyb3IsIFwiZXJyb3JcIilcclxuLy8gICAgICAgfVxyXG4vLyAgICAgfSlcclxuLy8gICAgIC5jYXRjaChhc3luYyBlcnIgPT4ge1xyXG4vLyAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbi8vICAgICAgIGxldCB7IGNyZWF0ZU1haW5Ob3RpZmljYXRpb24gfSA9IGF3YWl0IGltcG9ydChcclxuLy8gICAgICAgICBcIi4uLy4uL2NvbW1vbi9tYWluTm90aWZpY2F0aW9uLmRldlwiXHJcbi8vICAgICAgIClcclxuLy8gICAgICAgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbihcclxuLy8gICAgICAgICBcIlNlcnZlciBFcnJvciBJbiBBY2Nlc3NpbmcgTWVzc2FnZXMsIFBsZWFzZSBSZWZyZXNoIFlvdXIgUGFnZVwiLFxyXG4vLyAgICAgICAgIFwiZXJyb3JcIlxyXG4vLyAgICAgICApXHJcbi8vICAgICB9KVxyXG4vLyB9XHJcblxyXG4vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIGluY3JlYXNlVG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQoKSB7XHJcbi8vICAgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50ID0gMFxyXG4vLyAgIHRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50KytcclxuLy8gfVxyXG5cclxuLy8gLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFjdGl2ZUNoYXRTZWN0aW9uKGNoYXQpIHtcclxuLy8gICBsZXQgeyBjbG9zZVJlcGx5TWVzc2FnZUJveCB9ID0gYXdhaXQgaW1wb3J0KFwiLi9yZXBseU1lc3NhZ2VCb3guZGV2LmpzXCIpXHJcbi8vICAgY2xvc2VSZXBseU1lc3NhZ2VCb3goKVxyXG4vLyAgIGFjdGl2ZUNoYXRTZWN0aW9uLmRhdGFzZXQuY2hhdElkID0gY2hhdC5faWRcclxuLy8gICBjb25zdCBhY3RpdmVDaGF0SGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0SGVhZGVyXCIpXHJcbi8vICAgY29uc3QgYWN0aXZlQ2hhdEhlYWRlclBpYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdEhlYWRlclBpY1wiKVxyXG4vLyAgIGNvbnN0IGFjdGl2ZUNoYXRJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRJbWdcIilcclxuLy8gICBjb25zdCBhY3RpdmVDaGF0SGVhZGVyTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdEhlYWRlck5hbWVcIilcclxuLy8gICBjb25zdCBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbi8vICAgICBcImFjdGl2ZUNoYXRIZWFkZXJTdGF0dXNcIlxyXG4vLyAgIClcclxuLy8gICBjb25zdCBhY3RpdmVDaGF0SW5wdXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuLy8gICAgIFwiYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyXCJcclxuLy8gICApXHJcblxyXG4vLyAgIGFjdGl2ZUNoYXRIZWFkZXIuZGF0YXNldC5jaGF0SWQgPSBjaGF0Ll9pZFxyXG5cclxuLy8gICBpZiAoY2hhdC5oYXNPd25Qcm9wZXJ0eShcImNoYXRQaWNcIikgJiYgY2hhdC5jaGF0UGljICE9PSBcIlwiKSB7XHJcbi8vICAgICBhY3RpdmVDaGF0SW1nLnNyYyA9IGNoYXQuY2hhdFBpY1xyXG5cclxuLy8gICAgIGFjdGl2ZUNoYXRIZWFkZXJQaWMuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1jaGF0LWhlYWRlcl9fcGljLS1oaWRlLXN2Z1wiKVxyXG4vLyAgICAgYWN0aXZlQ2hhdEhlYWRlclBpYy5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLWNoYXQtaGVhZGVyX19waWMtLWhpZGUtaW1nXCIpXHJcbi8vICAgfSBlbHNlIHtcclxuLy8gICAgIGFjdGl2ZUNoYXRIZWFkZXJQaWMuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1jaGF0LWhlYWRlcl9fcGljLS1oaWRlLWltZ1wiKVxyXG4vLyAgICAgYWN0aXZlQ2hhdEhlYWRlclBpYy5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLWNoYXQtaGVhZGVyX19waWMtLWhpZGUtc3ZnXCIpXHJcbi8vICAgfVxyXG5cclxuLy8gICBhY3RpdmVDaGF0SGVhZGVyTmFtZS50ZXh0Q29udGVudCA9IGNoYXQuY2hhdE5hbWVcclxuLy8gICBpZiAoIWNoYXQuaXNHcm91cENoYXQpIHtcclxuLy8gICAgIGlmIChjaGF0LmlzVXNlckFjdGl2ZSkge1xyXG4vLyAgICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXHJcbi8vICAgICAgICAgXCJhY3RpdmUtY2hhdC1oZWFkZXJfX2NoYXQtc3RhdHVzLS1oaWRlXCJcclxuLy8gICAgICAgKVxyXG4vLyAgICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLnRleHRDb250ZW50ID0gXCJBY3RpdmVcIlxyXG4vLyAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgbGV0IHsgdGltZURpZmZlcmVuY2VGcm9tTm93IH0gPSBhd2FpdCBpbXBvcnQoXHJcbi8vICAgICAgICAgXCIuLi8uLi9jb21tb24vY2FsY3VsYXRlVGltZURpZmZlcmVuY2UuZGV2XCJcclxuLy8gICAgICAgKVxyXG4vLyAgICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXHJcbi8vICAgICAgICAgXCJhY3RpdmUtY2hhdC1oZWFkZXJfX2NoYXQtc3RhdHVzLS1oaWRlXCJcclxuLy8gICAgICAgKVxyXG4vLyAgICAgICBpZiAoY2hhdC5oYXNPd25Qcm9wZXJ0eShcInVzZXJMYXN0QWN0aXZlXCIpKSB7XHJcbi8vICAgICAgICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy50ZXh0Q29udGVudCA9IGBsYXN0IGFjdGl2ZSAke3RpbWVEaWZmZXJlbmNlRnJvbU5vdyhcclxuLy8gICAgICAgICAgIGNoYXQudXNlckxhc3RBY3RpdmVcclxuLy8gICAgICAgICApfSBhZ29gXHJcbi8vICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy50ZXh0Q29udGVudCA9IFwiXCJcclxuLy8gICAgICAgfVxyXG4vLyAgICAgfVxyXG4vLyAgIH0gZWxzZSB7XHJcbi8vICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXHJcbi8vICAgICAgIFwiYWN0aXZlLWNoYXQtaGVhZGVyX19jaGF0LXN0YXR1cy0taGlkZVwiXHJcbi8vICAgICApXHJcbi8vICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLnRleHRDb250ZW50ID0gXCJcIlxyXG4vLyAgIH1cclxuXHJcbi8vICAgaWYgKGNoYXQuaGFzT3duUHJvcGVydHkoXCJpc09uQ2FsbFwiKSAmJiBjaGF0LmlzT25DYWxsID09PSB0cnVlKSB7XHJcbi8vICAgICBvcGVuQWN0aXZlQ2hhdENhbGxSb29tQm94KGNoYXQuY2FsbFJvb21JZClcclxuLy8gICB9IGVsc2Uge1xyXG4vLyAgICAgY2xvc2VBY3RpdmVDaGF0Q2FsbFJvb21Cb3goKVxyXG4vLyAgIH1cclxuXHJcbi8vICAgb25PZmZBY3RpdmVDaGF0SW5wdXRDb250YWluZXIoY2hhdClcclxuLy8gfVxyXG5cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIG9wZW5BY3RpdmVDaGF0Q2FsbFJvb21Cb3goY2FsbFJvb21JZCkge1xyXG4vLyAgIGxldCBhY3RpdmVDaGF0Q2FsbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdEF1ZGlvQ2FsbEJ0blwiKVxyXG4vLyAgIGxldCBhY3RpdmVDaGF0Q2FsbFJvb21Cb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRDYWxsUm9vbUJveFwiKVxyXG5cclxuLy8gICB3aGlsZSAoYWN0aXZlQ2hhdENhbGxSb29tQm94LmNsYXNzTGlzdC5jb250YWlucyhcImNoYXQtY2FsbC1yb29tLWJveC0taGlkZVwiKSlcclxuLy8gICAgIGNoYXRDYWxsUm9vbUJveC5jbGFzc0xpc3QucmVtb3ZlKFwiY2hhdC1jYWxsLXJvb20tYm94LS1oaWRlXCIpXHJcbi8vICAgYWN0aXZlQ2hhdENhbGxCdG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1jaGF0LWhlYWRlcl9fYnRuLS0taGlkZVwiKVxyXG5cclxuLy8gICBhY3RpdmVDaGF0Q2FsbFJvb21Cb3guZGF0YXNldC5jYWxsUm9vbUlkID0gY2FsbFJvb21JZFxyXG4vLyB9XHJcblxyXG4vLyBleHBvcnQgZnVuY3Rpb24gY2xvc2VBY3RpdmVDaGF0Q2FsbFJvb21Cb3goKSB7XHJcbi8vICAgbGV0IGFjdGl2ZUNoYXRDYWxsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0QXVkaW9DYWxsQnRuXCIpXHJcbi8vICAgbGV0IGFjdGl2ZUNoYXRDYWxsUm9vbUJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdENhbGxSb29tQm94XCIpXHJcblxyXG4vLyAgIHdoaWxlIChhY3RpdmVDaGF0Q2FsbEJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmUtY2hhdC1oZWFkZXJfX2J0bi0tLWhpZGVcIikpXHJcbi8vICAgICBhY3RpdmVDaGF0Q2FsbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLWNoYXQtaGVhZGVyX19idG4tLS1oaWRlXCIpXHJcbi8vICAgY2hhdENhbGxSb29tQm94LmNsYXNzTGlzdC5hZGQoXCJjaGF0LWNhbGwtcm9vbS1ib3gtLWhpZGVcIilcclxuXHJcbi8vICAgYWN0aXZlQ2hhdENhbGxSb29tQm94LmRhdGFzZXQuY2FsbFJvb21JZCA9IFwiXCJcclxuLy8gfVxyXG5cclxuLy8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyQWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIoKSB7XHJcbi8vICAgbGV0IGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbi8vICAgICBcImFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyXCJcclxuLy8gICApXHJcbi8vICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIlxyXG4vLyB9XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gb25PZmZBY3RpdmVDaGF0SW5wdXRDb250YWluZXIoY2hhdCkge1xyXG4vLyAgIGNvbnN0IGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4vLyAgICAgXCJhY3RpdmVDaGF0SW5wdXRDb250YWluZXJcIlxyXG4vLyAgIClcclxuLy8gICBpZiAoXHJcbi8vICAgICBjaGF0Lmhhc093blByb3BlcnR5KFwiY2FuU2VuZE1lc3NhZ2VUb1RoaXNDaGF0XCIpICYmXHJcbi8vICAgICBjaGF0LmNhblNlbmRNZXNzYWdlVG9UaGlzQ2hhdCA9PT0gZmFsc2VcclxuLy8gICApIHtcclxuLy8gICAgIGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFxyXG4vLyAgICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWNvbnRhaW5lci0tZGlzYWJsZVwiXHJcbi8vICAgICApXHJcbi8vICAgICBhY3RpdmVDaGF0SW5wdXRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcclxuLy8gICAgICAgXCJhY3RpdmUtY2hhdC1pbnB1dC1jb250YWluZXItLWVuYWJsZVwiXHJcbi8vICAgICApXHJcbi8vICAgfSBlbHNlIHtcclxuLy8gICAgIGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFxyXG4vLyAgICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWNvbnRhaW5lci0tZW5hYmxlXCJcclxuLy8gICAgIClcclxuLy8gICAgIGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFxyXG4vLyAgICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWNvbnRhaW5lci0tZGlzYWJsZVwiXHJcbi8vICAgICApXHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmxldCBhbGxDaGF0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxsQ2hhdFNlY3Rpb25cIilcclxubGV0IGFjdGl2ZUNoYXRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0U2VjdGlvblwiKVxyXG5jb25zdCBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwiYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXJcIlxyXG4pXHJcblxyXG5sZXQgdG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnRcclxubGV0IHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hvd0FjdGl2ZUNoYXRTZWN0aW9uKGNoYXQpIHtcclxuICBsZXQgYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgIFwiYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnRcIlxyXG4gIClcclxuICBhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudC52YWx1ZSA9IFwiXCJcclxuICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiXHJcbiAgdXBkYXRlQWN0aXZlQ2hhdFNlY3Rpb24oY2hhdClcclxuXHJcbiAgdG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQgPSAwXHJcbiAgbGV0IHVuc2Vlbk1lc3NhZ2VzQ291bnRSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgYC9tZXNzYWdlL2RhdGEvdW5zZWVuLW1lc3NhZ2VzLWNvdW50LyR7Y2hhdC5faWR9YFxyXG4gIClcclxuICBsZXQgdW5zZWVuTWVzc2FnZXNDb3VudERhdGEgPSBhd2FpdCB1bnNlZW5NZXNzYWdlc0NvdW50UmVzcG9uc2UuanNvbigpXHJcbiAgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50ID0gdW5zZWVuTWVzc2FnZXNDb3VudERhdGEudW5zZWVuTWVzc2FnZXNDb3VudFxyXG4gIGNvbnNvbGUubG9nKFwidG90YWxVbnNlZW5NZXNzYWdlc0NvdW50OiBcIiArIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudClcclxuICBsZXQgeyBvcGVuQWN0aXZlQ2hhdElucHV0Qm94IH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9jaGF0LmRldi5qc1wiKVxyXG4gIG9wZW5BY3RpdmVDaGF0SW5wdXRCb3goKVxyXG5cclxuICBpZiAoVVNFUl9NRVNTQUdFX0JPWF9PQlNFUlZFUiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBVU0VSX01FU1NBR0VfQk9YX09CU0VSVkVSLmRpc2Nvbm5lY3QoKVxyXG4gIH1cclxuICBpbml0aWFsaXplVXNlck1lc3NhZ2VCb3hPYnNlcnZlcigpXHJcbiAgaWYgKFRPUF9NRVNTQUdFX0JPWF9PQlNFUlZFUiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBUT1BfTUVTU0FHRV9CT1hfT0JTRVJWRVIuZGlzY29ubmVjdCgpXHJcbiAgfVxyXG4gIGluaXRpYWxpemVUb3BNZXNzYWdlQm94T2JzZXJ2ZXIoKVxyXG4gIGlmIChCT1RUT01fTUVTU0FHRV9CT1hfT0JTRVJWRVIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgQk9UVE9NX01FU1NBR0VfQk9YX09CU0VSVkVSLmRpc2Nvbm5lY3QoKVxyXG4gIH1cclxuICBpbml0aWFsaXplQm90dG9tTWVzc2FnZUJveE9ic2VydmVyKClcclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIGNvbnN0IHsgY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMgfSA9IGF3YWl0IGltcG9ydChcIi4vbWVzc2FnZS5kZXZcIilcclxuXHJcbiAgZmV0Y2goYC9tZXNzYWdlL2ZldGNoLW1lc3NhZ2VzLyR7Y2hhdC5faWR9P3RvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50PTBgKVxyXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlKVxyXG4gICAgfSlcclxuICAgIC50aGVuKGFzeW5jIGRhdGEgPT4ge1xyXG4gICAgICBpZiAoZGF0YS5pc1N1Y2Nlc3MpIHtcclxuICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiXHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuXHJcbiAgICAgICAgaWYgKGRhdGEuYWxsTWVzc2FnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQgKz0gZGF0YS5hbGxNZXNzYWdlcy5sZW5ndGhcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50ICE9PSAwICYmXHJcbiAgICAgICAgICAgIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCA8PSB0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudFxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGxldCB7IGNyZWF0ZVVuc2Vlbk1lc3NhZ2VUYWdCb3ggfSA9IGF3YWl0IGltcG9ydChcIi4vbWVzc2FnZS5kZXZcIilcclxuXHJcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbkZvclVuc2VlZW5NZXNzYWdlVGFnID1cclxuICAgICAgICAgICAgICBkYXRhLmFsbE1lc3NhZ2VzLmxlbmd0aCAtXHJcbiAgICAgICAgICAgICAgKHRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50IC0gdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50KVxyXG4gICAgICAgICAgICBjaGVja1RpbWVBbmRDcmVhdGVPbGRNZXNzYWdlcyhcclxuICAgICAgICAgICAgICBkYXRhLmFsbE1lc3NhZ2VzLnNsaWNlKDAsIHBvc2l0aW9uRm9yVW5zZWVlbk1lc3NhZ2VUYWcpLFxyXG4gICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLFxyXG4gICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBjcmVhdGVVbnNlZW5NZXNzYWdlVGFnQm94KFxyXG4gICAgICAgICAgICAgIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCxcclxuICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lcixcclxuICAgICAgICAgICAgICBcImFmdGVyYmVnaW5cIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzKFxyXG4gICAgICAgICAgICAgIGRhdGEuYWxsTWVzc2FnZXMuc2xpY2UocG9zaXRpb25Gb3JVbnNlZWVuTWVzc2FnZVRhZyksXHJcbiAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIsXHJcbiAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCA9IDBcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoZWNrVGltZUFuZENyZWF0ZU9sZE1lc3NhZ2VzKFxyXG4gICAgICAgICAgICAgIGRhdGEuYWxsTWVzc2FnZXMsXHJcbiAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIsXHJcbiAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZClcclxuICAgICAgICAgICAgICBUT1BfTUVTU0FHRV9CT1hfT0JTRVJWRVIub2JzZXJ2ZShcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfSwgMjUwMClcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIubGFzdEVsZW1lbnRDaGlsZClcclxuICAgICAgICAgICAgICBCT1RUT01fTUVTU0FHRV9CT1hfT0JTRVJWRVIub2JzZXJ2ZShcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmxhc3RFbGVtZW50Q2hpbGRcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICB9LCAyMDAwKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHsgYWRqdXN0TWVzc2FnZUNvbnRhaW5lckJvdHRvbVBhZGRpbmcgfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICAgIFwiLi4vY2hhdC5kZXZcIlxyXG4gICAgICAgIClcclxuICAgICAgICBhZGp1c3RNZXNzYWdlQ29udGFpbmVyQm90dG9tUGFkZGluZygpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IHsgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgICAgXCIuLi8uLi9jb21tb24vbWFpbk5vdGlmaWNhdGlvbi5kZXZcIlxyXG4gICAgICAgIClcclxuICAgICAgICBjcmVhdGVNYWluTm90aWZpY2F0aW9uKGRhdGEuZXJyb3IsIFwiZXJyb3JcIilcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC5jYXRjaChhc3luYyBlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgIGxldCB7IGNyZWF0ZU1haW5Ob3RpZmljYXRpb24gfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICBcIi4uLy4uL2NvbW1vbi9tYWluTm90aWZpY2F0aW9uLmRldlwiXHJcbiAgICAgIClcclxuICAgICAgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbihcclxuICAgICAgICBcIlNlcnZlciBFcnJvciBJbiBBY2Nlc3NpbmcgTWVzc2FnZXMsIFBsZWFzZSBSZWZyZXNoIFlvdXIgUGFnZVwiLFxyXG4gICAgICAgIFwiZXJyb3JcIlxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICBhbGxDaGF0U2VjdGlvbi5jbGFzc0xpc3QuYWRkKFwiYWxsLWNoYXQtc2VjdGlvbi0taGlkZVwiKVxyXG4gIGFjdGl2ZUNoYXRTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtY2hhdC1zZWN0aW9uLS1oaWRlXCIpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVVc2VyTWVzc2FnZUJveE9ic2VydmVyKCkge1xyXG4gIFVTRVJfTUVTU0FHRV9CT1hfT0JTRVJWRVIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXHJcbiAgICBhc3luYyAoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcclxuICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcclxuICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgIGxldCBtZXNzYWdlSWQgPSBlbnRyeS50YXJnZXQuZGF0YXNldC5tZXNzYWdlSWRcclxuICAgICAgICAgIHNvY2tldC5lbWl0KFwiY2hhdDp1cGRhdGUtbWVzc2FnZS1zZWVuLXN0YXR1c1wiLCB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZUlkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGVudHJ5LnRhcmdldClcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgeyB0aHJlc2hvbGQ6IDAuNSwgcm9vdDogYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIgfVxyXG4gIClcclxufVxyXG5mdW5jdGlvbiBpbml0aWFsaXplVG9wTWVzc2FnZUJveE9ic2VydmVyKCkge1xyXG4gIFRPUF9NRVNTQUdFX0JPWF9PQlNFUlZFUiA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcclxuICAgIGFzeW5jIChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xyXG4gICAgICBlbnRyaWVzLmZvckVhY2goYXN5bmMgZW50cnkgPT4ge1xyXG4gICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGVudHJ5LnRhcmdldClcclxuICAgICAgICAgIGxldCBjaGF0SWQgPSBhY3RpdmVDaGF0U2VjdGlvbi5kYXRhc2V0LmNoYXRJZFxyXG5cclxuICAgICAgICAgIGNvbnN0IHsgY3JlYXRlTG9hZGluZ01lc3NhZ2VzQW5pbWF0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgICAgICAgIFwiLi9tZXNzYWdlLmRldlwiXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBsZXQgbG9hZGluZ01lc3NhZ2VBbmltYXRpb25Cb3ggPSBjcmVhdGVMb2FkaW5nTWVzc2FnZXNBbmltYXRpb24oKVxyXG4gICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFxyXG4gICAgICAgICAgICBcImFmdGVyYmVnaW5cIixcclxuICAgICAgICAgICAgbG9hZGluZ01lc3NhZ2VBbmltYXRpb25Cb3hcclxuICAgICAgICAgIClcclxuICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLnNjcm9sbFRvcCArPSAxNTBcclxuICAgICAgICAgIGF3YWl0IGZldGNoTWVzc2FnZUFuZENyZWF0ZVVzZXJNZXNzYWdlQm94KGNoYXRJZClcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgeyB0aHJlc2hvbGQ6IDAuNSwgcm9vdDogYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIsIHJvb3RNYXJnaW46IFwiMTAwcHhcIiB9XHJcbiAgKVxyXG59XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVCb3R0b21NZXNzYWdlQm94T2JzZXJ2ZXIoKSB7XHJcbiAgQk9UVE9NX01FU1NBR0VfQk9YX09CU0VSVkVSID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxyXG4gICAgYXN5bmMgKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XHJcbiAgICAgIGVudHJpZXMuZm9yRWFjaChhc3luYyBlbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KVxyXG4gICAgICAgICAgbGV0IGNoYXRJZCA9IGFjdGl2ZUNoYXRTZWN0aW9uLmRhdGFzZXQuY2hhdElkXHJcbiAgICAgICAgICBzb2NrZXQuZW1pdChcImNoYXQ6dXBkYXRlLWNoYXQtdW5zZWVuLW1lc3NhZ2VzXCIsIHtcclxuICAgICAgICAgICAgY2hhdElkOiBjaGF0SWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuICAgIHsgdGhyZXNob2xkOiAwLjUsIHJvb3Q6IGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyIH1cclxuICApXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoTWVzc2FnZUFuZENyZWF0ZVVzZXJNZXNzYWdlQm94KGNoYXRJZCkge1xyXG4gIGNvbnN0IHsgY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMgfSA9IGF3YWl0IGltcG9ydChcIi4vbWVzc2FnZS5kZXZcIilcclxuXHJcbiAgZmV0Y2goXHJcbiAgICBgL21lc3NhZ2UvZmV0Y2gtbWVzc2FnZXMvJHtjaGF0SWR9P3RvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50PSR7dG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnR9YFxyXG4gIClcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZSlcclxuICAgIH0pXHJcbiAgICAudGhlbihhc3luYyBkYXRhID0+IHtcclxuICAgICAgaWYgKGRhdGEuaXNTdWNjZXNzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuXHJcbiAgICAgICAgaWYgKGRhdGEuYWxsTWVzc2FnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQgKz0gZGF0YS5hbGxNZXNzYWdlcy5sZW5ndGhcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50ICE9PSAwICYmXHJcbiAgICAgICAgICAgIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCA8PSB0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudFxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGxldCB7IGNyZWF0ZVVuc2Vlbk1lc3NhZ2VUYWdCb3ggfSA9IGF3YWl0IGltcG9ydChcIi4vbWVzc2FnZS5kZXZcIilcclxuXHJcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbkZvclVuc2VlZW5NZXNzYWdlVGFnID1cclxuICAgICAgICAgICAgICBkYXRhLmFsbE1lc3NhZ2VzLmxlbmd0aCAtXHJcbiAgICAgICAgICAgICAgKHRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50IC0gdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50KVxyXG4gICAgICAgICAgICBjaGVja1RpbWVBbmRDcmVhdGVPbGRNZXNzYWdlcyhcclxuICAgICAgICAgICAgICBkYXRhLmFsbE1lc3NhZ2VzLnNsaWNlKDAsIHBvc2l0aW9uRm9yVW5zZWVlbk1lc3NhZ2VUYWcpLFxyXG4gICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLFxyXG4gICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgY3JlYXRlVW5zZWVuTWVzc2FnZVRhZ0JveChcclxuICAgICAgICAgICAgICB0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQsXHJcbiAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIsXHJcbiAgICAgICAgICAgICAgXCJhZnRlcmJlZ2luXCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBjaGVja1RpbWVBbmRDcmVhdGVPbGRNZXNzYWdlcyhcclxuICAgICAgICAgICAgICBkYXRhLmFsbE1lc3NhZ2VzLnNsaWNlKHBvc2l0aW9uRm9yVW5zZWVlbk1lc3NhZ2VUYWcpLFxyXG4gICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLFxyXG4gICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgdG90YWxVbnNlZW5NZXNzYWdlc0NvdW50ID0gMFxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hlY2tUaW1lQW5kQ3JlYXRlT2xkTWVzc2FnZXMoXHJcbiAgICAgICAgICAgICAgZGF0YS5hbGxNZXNzYWdlcyxcclxuICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lcixcclxuICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZClcclxuICAgICAgICAgICAgICBUT1BfTUVTU0FHRV9CT1hfT0JTRVJWRVIub2JzZXJ2ZShcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfSwgNDAwMClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbGV0IGxvYWRpbmdNZXNzYWdlQW5pbWF0aW9uQm94ID0gW1xyXG4gICAgICAgICAgICAuLi5hY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxyXG4gICAgICAgICAgICAgIFwibG9hZGluZy1tZXNzYWdlLWFuaW1hdGlvbi1ib3hcIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgICBsb2FkaW5nTWVzc2FnZUFuaW1hdGlvbkJveC5mb3JFYWNoKGJveCA9PiB7XHJcbiAgICAgICAgICAgIGJveC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJveClcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCB7IGNyZWF0ZU1haW5Ob3RpZmljYXRpb24gfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICAgIFwiLi4vLi4vY29tbW9uL21haW5Ob3RpZmljYXRpb24uZGV2XCJcclxuICAgICAgICApXHJcbiAgICAgICAgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbihkYXRhLmVycm9yLCBcImVycm9yXCIpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuY2F0Y2goYXN5bmMgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICBsZXQgeyBjcmVhdGVNYWluTm90aWZpY2F0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgICAgXCIuLi8uLi9jb21tb24vbWFpbk5vdGlmaWNhdGlvbi5kZXZcIlxyXG4gICAgICApXHJcbiAgICAgIGNyZWF0ZU1haW5Ob3RpZmljYXRpb24oXHJcbiAgICAgICAgXCJTZXJ2ZXIgRXJyb3IgSW4gQWNjZXNzaW5nIE1lc3NhZ2VzLCBQbGVhc2UgUmVmcmVzaCBZb3VyIFBhZ2VcIixcclxuICAgICAgICBcImVycm9yXCJcclxuICAgICAgKVxyXG4gICAgfSlcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbmNyZWFzZVRvdGFsUmVjZWl2ZWRNZXNzYWdlc0NvdW50KCkge1xyXG4gIHRvdGFsVW5zZWVuTWVzc2FnZXNDb3VudCA9IDBcclxuICB0b3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCsrXHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVBY3RpdmVDaGF0U2VjdGlvbihjaGF0KSB7XHJcbiAgbGV0IHsgY2xvc2VSZXBseU1lc3NhZ2VCb3ggfSA9IGF3YWl0IGltcG9ydChcIi4vcmVwbHlNZXNzYWdlQm94LmRldi5qc1wiKVxyXG4gIGNsb3NlUmVwbHlNZXNzYWdlQm94KClcclxuICBhY3RpdmVDaGF0U2VjdGlvbi5kYXRhc2V0LmNoYXRJZCA9IGNoYXQuX2lkXHJcbiAgY29uc3QgYWN0aXZlQ2hhdEhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdEhlYWRlclwiKVxyXG4gIGNvbnN0IGFjdGl2ZUNoYXRIZWFkZXJQaWMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRIZWFkZXJQaWNcIilcclxuICBjb25zdCBhY3RpdmVDaGF0SW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0SW1nXCIpXHJcbiAgY29uc3QgYWN0aXZlQ2hhdEhlYWRlck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRIZWFkZXJOYW1lXCIpXHJcbiAgY29uc3QgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgXCJhY3RpdmVDaGF0SGVhZGVyU3RhdHVzXCJcclxuICApXHJcbiAgY29uc3QgYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICBcImFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lclwiXHJcbiAgKVxyXG5cclxuICBhY3RpdmVDaGF0SGVhZGVyLmRhdGFzZXQuY2hhdElkID0gY2hhdC5faWRcclxuXHJcbiAgaWYgKGNoYXQuaGFzT3duUHJvcGVydHkoXCJjaGF0UGljXCIpICYmIGNoYXQuY2hhdFBpYyAhPT0gXCJcIikge1xyXG4gICAgYWN0aXZlQ2hhdEltZy5zcmMgPSBjaGF0LmNoYXRQaWNcclxuXHJcbiAgICBhY3RpdmVDaGF0SGVhZGVyUGljLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtY2hhdC1oZWFkZXJfX3BpYy0taGlkZS1zdmdcIilcclxuICAgIGFjdGl2ZUNoYXRIZWFkZXJQaWMuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1jaGF0LWhlYWRlcl9fcGljLS1oaWRlLWltZ1wiKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBhY3RpdmVDaGF0SGVhZGVyUGljLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtY2hhdC1oZWFkZXJfX3BpYy0taGlkZS1pbWdcIilcclxuICAgIGFjdGl2ZUNoYXRIZWFkZXJQaWMuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1jaGF0LWhlYWRlcl9fcGljLS1oaWRlLXN2Z1wiKVxyXG4gIH1cclxuICBhY3RpdmVDaGF0SGVhZGVyTmFtZS50ZXh0Q29udGVudCA9IGNoYXQuY2hhdE5hbWVcclxuICBpZiAoIWNoYXQuaXNHcm91cENoYXQpIHtcclxuICAgIGlmIChjaGF0LmlzVXNlckFjdGl2ZSkge1xyXG4gICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgXCJhY3RpdmUtY2hhdC1oZWFkZXJfX2NoYXQtc3RhdHVzLS1oaWRlXCJcclxuICAgICAgKVxyXG4gICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLnRleHRDb250ZW50ID0gXCJBY3RpdmVcIlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHsgdGltZURpZmZlcmVuY2VGcm9tTm93IH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgICAgXCIuLi8uLi9jb21tb24vY2FsY3VsYXRlVGltZURpZmZlcmVuY2UuZGV2XCJcclxuICAgICAgKVxyXG4gICAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgXCJhY3RpdmUtY2hhdC1oZWFkZXJfX2NoYXQtc3RhdHVzLS1oaWRlXCJcclxuICAgICAgKVxyXG4gICAgICBpZiAoY2hhdC5oYXNPd25Qcm9wZXJ0eShcInVzZXJMYXN0QWN0aXZlXCIpKSB7XHJcbiAgICAgICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy50ZXh0Q29udGVudCA9IGBsYXN0IGFjdGl2ZSAke3RpbWVEaWZmZXJlbmNlRnJvbU5vdyhcclxuICAgICAgICAgIGNoYXQudXNlckxhc3RBY3RpdmVcclxuICAgICAgICApfSBhZ29gXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWN0aXZlQ2hhdEhlYWRlclN0YXR1cy50ZXh0Q29udGVudCA9IFwiXCJcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgIFwiYWN0aXZlLWNoYXQtaGVhZGVyX19jaGF0LXN0YXR1cy0taGlkZVwiXHJcbiAgICApXHJcbiAgICBhY3RpdmVDaGF0SGVhZGVyU3RhdHVzLnRleHRDb250ZW50ID0gXCJcIlxyXG4gIH1cclxuXHJcbiAgb25PZmZBY3RpdmVDaGF0SW5wdXRDb250YWluZXIoY2hhdClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyQWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIoKSB7XHJcbiAgbGV0IGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICBcImFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyXCJcclxuICApXHJcbiAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIlxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb25PZmZBY3RpdmVDaGF0SW5wdXRDb250YWluZXIoY2hhdCkge1xyXG4gIGNvbnN0IGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgXCJhY3RpdmVDaGF0SW5wdXRDb250YWluZXJcIlxyXG4gIClcclxuICBpZiAoXHJcbiAgICBjaGF0Lmhhc093blByb3BlcnR5KFwiY2FuU2VuZE1lc3NhZ2VUb1RoaXNDaGF0XCIpICYmXHJcbiAgICBjaGF0LmNhblNlbmRNZXNzYWdlVG9UaGlzQ2hhdCA9PT0gZmFsc2VcclxuICApIHtcclxuICAgIGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWNvbnRhaW5lci0tZGlzYWJsZVwiXHJcbiAgICApXHJcbiAgICBhY3RpdmVDaGF0SW5wdXRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgXCJhY3RpdmUtY2hhdC1pbnB1dC1jb250YWluZXItLWVuYWJsZVwiXHJcbiAgICApXHJcbiAgfSBlbHNlIHtcclxuICAgIGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWNvbnRhaW5lci0tZW5hYmxlXCJcclxuICAgIClcclxuICAgIGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWNvbnRhaW5lci0tZGlzYWJsZVwiXHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiJdLCJuYW1lcyI6WyJhbGxDaGF0U2VjdGlvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhY3RpdmVDaGF0U2VjdGlvbiIsImFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyIiwidG90YWxSZWNlaXZlZE1lc3NhZ2VzQ291bnQiLCJ0b3RhbFVuc2Vlbk1lc3NhZ2VzQ291bnQiLCJzaG93QWN0aXZlQ2hhdFNlY3Rpb24iLCJjaGF0IiwiYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnQiLCJ2YWx1ZSIsImlubmVySFRNTCIsInVwZGF0ZUFjdGl2ZUNoYXRTZWN0aW9uIiwidW5zZWVuTWVzc2FnZXNDb3VudFJlc3BvbnNlIiwiZmV0Y2giLCJfaWQiLCJ1bnNlZW5NZXNzYWdlc0NvdW50RGF0YSIsImpzb24iLCJ1bnNlZW5NZXNzYWdlc0NvdW50IiwiY29uc29sZSIsImxvZyIsIm9wZW5BY3RpdmVDaGF0SW5wdXRCb3giLCJVU0VSX01FU1NBR0VfQk9YX09CU0VSVkVSIiwidW5kZWZpbmVkIiwiZGlzY29ubmVjdCIsImluaXRpYWxpemVVc2VyTWVzc2FnZUJveE9ic2VydmVyIiwiVE9QX01FU1NBR0VfQk9YX09CU0VSVkVSIiwiaW5pdGlhbGl6ZVRvcE1lc3NhZ2VCb3hPYnNlcnZlciIsIkJPVFRPTV9NRVNTQUdFX0JPWF9PQlNFUlZFUiIsImluaXRpYWxpemVCb3R0b21NZXNzYWdlQm94T2JzZXJ2ZXIiLCJjaGVja1RpbWVBbmRDcmVhdGVPbGRNZXNzYWdlcyIsInRoZW4iLCJyZXNwb25zZSIsIm9rIiwiUHJvbWlzZSIsInJlamVjdCIsImRhdGEiLCJpc1N1Y2Nlc3MiLCJhbGxNZXNzYWdlcyIsImxlbmd0aCIsImNyZWF0ZVVuc2Vlbk1lc3NhZ2VUYWdCb3giLCJwb3NpdGlvbkZvclVuc2VlZW5NZXNzYWdlVGFnIiwic2xpY2UiLCJzZXRUaW1lb3V0IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJvYnNlcnZlIiwibGFzdEVsZW1lbnRDaGlsZCIsImFkanVzdE1lc3NhZ2VDb250YWluZXJCb3R0b21QYWRkaW5nIiwiY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiIsImVycm9yIiwiY2F0Y2giLCJlcnIiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJvYnNlcnZlciIsImZvckVhY2giLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwibWVzc2FnZUlkIiwidGFyZ2V0IiwiZGF0YXNldCIsInNvY2tldCIsImVtaXQiLCJ1bm9ic2VydmUiLCJ0aHJlc2hvbGQiLCJyb290IiwiY2hhdElkIiwiY3JlYXRlTG9hZGluZ01lc3NhZ2VzQW5pbWF0aW9uIiwibG9hZGluZ01lc3NhZ2VBbmltYXRpb25Cb3giLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJmZXRjaE1lc3NhZ2VBbmRDcmVhdGVVc2VyTWVzc2FnZUJveCIsInJvb3RNYXJnaW4iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiYm94IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaW5jcmVhc2VUb3RhbFJlY2VpdmVkTWVzc2FnZXNDb3VudCIsImNsb3NlUmVwbHlNZXNzYWdlQm94IiwiYWN0aXZlQ2hhdEhlYWRlciIsImFjdGl2ZUNoYXRIZWFkZXJQaWMiLCJhY3RpdmVDaGF0SW1nIiwiYWN0aXZlQ2hhdEhlYWRlck5hbWUiLCJhY3RpdmVDaGF0SGVhZGVyU3RhdHVzIiwiYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyIiwiaGFzT3duUHJvcGVydHkiLCJjaGF0UGljIiwic3JjIiwidGV4dENvbnRlbnQiLCJjaGF0TmFtZSIsImlzR3JvdXBDaGF0IiwiaXNVc2VyQWN0aXZlIiwidGltZURpZmZlcmVuY2VGcm9tTm93IiwidXNlckxhc3RBY3RpdmUiLCJvbk9mZkFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lciIsImNsZWFyQWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIiLCJjYW5TZW5kTWVzc2FnZVRvVGhpc0NoYXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./dev-javascripts/chat/js/showActiveChatSection.dev.js\n");

/***/ })

}]);