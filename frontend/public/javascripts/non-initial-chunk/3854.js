"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3854],{5965:(e,t,a)=>{a.r(t),a.d(t,{createNewRoom:()=>u});var o=a(7841),i=a.n(o),l=a(8455),r=a.n(l),n=a(8374),s=a.n(n),m=a(1154),g=a.n(m),c=(a(3095),a(7471),a(1106),a(8302),a(29));let d,p,h=document.getElementById("callMainContainer"),w=document.getElementById("roomInfoContainer"),A=document.getElementById("creatingNewRoom");function u(e,t){d=e,p=t,function(){if(A){const e=new(i())({id:"creatingNewRoomPic",autoProceed:!1,allowMultipleUploadBatches:!1,debug:!1,onBeforeFileAdded:(t,a)=>{if(t.type){let e=document.getElementById("creatingNewRoomPic").dataset.roomPic;return t.name=e,t}return e.log("Skipping file because it has no type"),e.info("Skipping file because it has no type","error",500),!1},onBeforeUpload:e=>{},restrictions:{maxFileSize:5242880,minFileSize:null,maxTotalFileSize:5242880,maxNumberOfFiles:1,minNumberOfFiles:1,allowedFileTypes:["image/jpeg","image/png","image/gif","image/svg+xml","image/x-png"]},meta:{mediaType:"new-call-room-pic"},infoTimeout:5e3}).use(r(),{trigger:"#creatingNewRoomPic",target:"body",inline:!1,plugins:["Webcam","ImageEditor"],thumbnailWidth:300,showRemoveButtonAfterComplete:!1,disablePageScrollWhenModalOpen:!0,closeModalOnClickOutside:!0,theme:"dark",locale:{strings:{}},note:"File size up to 5 MB",proudlyDisplayPoweredByUppy:!1}).use(s(),{target:r(),title:"Camera",mirror:!0,modes:["picture"]}).use(g(),{target:r(),quality:.8}).use(c.default,{limit:4,companionUrl:"http://localhost:5000/companion"});e.on("upload-success",((e,t)=>{let a=document.getElementById("creatingNewRoomPic");a.classList.add("creating-new-room__pic--img"),a.classList.remove("creating-new-room__pic--svg"),a.dataset.roomPic=e.s3Multipart.key;let o=a.querySelector("img");o&&(o.src=e.preview)})),A.addEventListener("click",(async e=>{let t=e.target.closest(".creating-new-room__btn ");if(console.log(t),t&&w.contains(t)&&"create-new-room"===t.dataset.btn){let e=document.getElementById("newRoomNameInput"),t=document.getElementById("newRoomAboutInput"),o=document.getElementById("creatingNewRoomPic"),i=e.value,l=t.value,r=o.dataset.roomPic;if(""!==i.trim()){let e=!!p.isAudioOn,t={isCameraOn:!!p.isCameraOn,isScreenShareOn:!!p.isScreenShareOn,isAudioOn:e,roomName:i,roomAbout:l,roomPic:r};fetch("/call/create-new-room",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.ok?e.json():Promise.reject(e))).then((async e=>{if(e.isSuccess){console.log(e.callRoom),h.dataset.callRoomId=e.callRoom._id.toString();let{createOnCallSection:t}=await Promise.all([a.e(819),a.e(3978)]).then(a.bind(a,3978));t(e.callRoom,d,p),history.replaceState(e.callRoom,"",`/call/?room=${e.callRoom._id.toString()}`)}else{let{createMainNotification:t}=await a.e(5967).then(a.bind(a,5967));t(e.error,"error")}})).catch((async e=>{console.log(e);let{createMainNotification:t}=await a.e(5967).then(a.bind(a,5967));t("Server error in creating new room, Please try again","error")}))}else{let{createMainNotification:t}=await a.e(5967).then(a.bind(a,5967));t("Please give a name to call room","error"),e.focus()}}}))}}()}},8738:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC"},6829:e=>{e.exports="data:image/svg+xml,%3Csvg width=%2748%27 height=%2748%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath d=%27M24 1v1C11.85 2 2 11.85 2 24s9.85 22 22 22 22-9.85 22-22S36.15 2 24 2V1zm0 0V0c13.254 0 24 10.746 24 24S37.254 48 24 48 0 37.254 0 24 10.746 0 24 0v1zm7.707 19.293a.999.999 0 1 1-1.414 1.414L25 16.414V34a1 1 0 1 1-2 0V16.414l-5.293 5.293a.999.999 0 1 1-1.414-1.414l7-7a.999.999 0 0 1 1.414 0l7 7z%27 fill=%27%2302BAF2%27 fill-rule=%27nonzero%27/%3E%3C/svg%3E"},511:e=>{e.exports="data:image/svg+xml,%3Csvg width=%2748%27 height=%2748%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath d=%27M24 1v1C11.85 2 2 11.85 2 24s9.85 22 22 22 22-9.85 22-22S36.15 2 24 2V1zm0 0V0c13.254 0 24 10.746 24 24S37.254 48 24 48 0 37.254 0 24 10.746 0 24 0v1zm7.707 19.293a.999.999 0 1 1-1.414 1.414L25 16.414V34a1 1 0 1 1-2 0V16.414l-5.293 5.293a.999.999 0 1 1-1.414-1.414l7-7a.999.999 0 0 1 1.414 0l7 7z%27 fill=%27%232275D7%27 fill-rule=%27nonzero%27/%3E%3C/svg%3E"},3920:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2735%27 height=%2739%27 viewBox=%270 0 35 39%27%3E%3Cpath d=%27M1.708 38.66c1.709 0 3.417-3.417 6.834-3.417 3.416 0 5.125 3.417 8.61 3.417 3.348 0 5.056-3.417 8.473-3.417 4.305 0 5.125 3.417 6.833 3.417.889 0 1.709-.889 1.709-1.709v-19.68C34.167-5.757 0-5.757 0 17.271v19.68c0 .82.888 1.709 1.708 1.709zm8.542-17.084a3.383 3.383 0 01-3.417-3.416 3.383 3.383 0 013.417-3.417 3.383 3.383 0 013.417 3.417 3.383 3.383 0 01-3.417 3.416zm13.667 0A3.383 3.383 0 0120.5 18.16a3.383 3.383 0 013.417-3.417 3.383 3.383 0 013.416 3.417 3.383 3.383 0 01-3.416 3.416z%27 fill=%27%2523000%27 fill-rule=%27nonzero%27/%3E%3C/svg%3E"},4349:e=>{e.exports="data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23757575%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E"},8260:e=>{e.exports="data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2212px%22%20height%3D%2236px%22%3E%3Cpath%20fill%3D%22rgba%2817,%2017,%2017,%200.9%29%22%20transform%3D%22rotate%28-90%2018%2018%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E"},8261:e=>{e.exports="data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2212px%22%20height%3D%2236px%22%3E%3Cpath%20fill%3D%22rgba%2817,%2017,%2017,%200.9%29%22%20transform%3D%22rotate%2890%206%206%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E"},9854:e=>{e.exports="data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba%2817,%2017,%2017,%200.9%29%22%20transform%3D%22rotate%280%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E"},1627:e=>{e.exports="data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba%2817,%2017,%2017,%200.9%29%22%20transform%3D%22rotate%28180%2018%206%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E"}}]);