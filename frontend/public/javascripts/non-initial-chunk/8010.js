"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8010,5766,602,8676,2859],{6400:(e,t,n)=>{n.r(t),n.d(t,{Component:()=>m,Fragment:()=>y,cloneElement:()=>U,createContext:()=>B,createElement:()=>f,createRef:()=>g,h:()=>f,hydrate:()=>H,isValidElement:()=>s,options:()=>o,render:()=>M,toChildArray:()=>x});var i,o,r,s,u,l,a,c={},_=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function h(e,t){for(var n in t)e[n]=t[n];return e}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function f(e,t,n){var o,r,s,u={};for(s in t)"key"==s?o=t[s]:"ref"==s?r=t[s]:u[s]=t[s];if(arguments.length>2&&(u.children=arguments.length>3?i.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===u[s]&&(u[s]=e.defaultProps[s]);return v(e,u,o,r,null)}function v(e,t,n,i,s){var u={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==s?++r:s};return null==s&&null!=o.vnode&&o.vnode(u),u}function g(){return{current:null}}function y(e){return e.children}function m(e,t){this.props=e,this.context=t}function b(e,t){if(null==t)return e.__?b(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?b(e):null}function w(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return w(e)}}function S(e){(!e.__d&&(e.__d=!0)&&u.push(e)&&!A.__r++||l!==o.debounceRendering)&&((l=o.debounceRendering)||setTimeout)(A)}function A(){for(var e;A.__r=u.length;)e=u.sort((function(e,t){return e.__v.__b-t.__v.__b})),u=[],e.some((function(e){var t,n,i,o,r,s;e.__d&&(r=(o=(t=e).__v).__e,(s=t.__P)&&(n=[],(i=h({},o)).__v=o.__v+1,F(s,o,i,t.__n,void 0!==s.ownerSVGElement,null!=o.__h?[r]:null,n,null==r?b(o):r,o.__h),E(n,o),o.__e!=r&&w(o)))}))}function k(e,t,n,i,o,r,s,u,l,a){var d,h,p,f,g,m,w,S=i&&i.__k||_,A=S.length;for(n.__k=[],d=0;d<t.length;d++)if(null!=(f=n.__k[d]=null==(f=t[d])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?v(null,f,null,null,f):Array.isArray(f)?v(y,{children:f},null,null,null):f.__b>0?v(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(p=S[d])||p&&f.key==p.key&&f.type===p.type)S[d]=void 0;else for(h=0;h<A;h++){if((p=S[h])&&f.key==p.key&&f.type===p.type){S[h]=void 0;break}p=null}F(e,f,p=p||c,o,r,s,u,l,a),g=f.__e,(h=f.ref)&&p.ref!=h&&(w||(w=[]),p.ref&&w.push(p.ref,null,f),w.push(h,f.__c||g,f)),null!=g?(null==m&&(m=g),"function"==typeof f.type&&f.__k===p.__k?f.__d=l=P(f,l,e):l=C(e,f,p,S,g,l),"function"==typeof n.type&&(n.__d=l)):l&&p.__e==l&&l.parentNode!=e&&(l=b(p))}for(n.__e=m,d=A;d--;)null!=S[d]&&("function"==typeof n.type&&null!=S[d].__e&&S[d].__e==n.__d&&(n.__d=b(i,d+1)),j(S[d],S[d]));if(w)for(d=0;d<w.length;d++)T(w[d],w[++d],w[++d])}function P(e,t,n){for(var i,o=e.__k,r=0;o&&r<o.length;r++)(i=o[r])&&(i.__=e,t="function"==typeof i.type?P(i,t,n):C(n,i,i,o,i.__e,t));return t}function x(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){x(e,t)})):t.push(e)),t}function C(e,t,n,i,o,r){var s,u,l;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(null==n||o!=r||null==o.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(o),s=null;else{for(u=r,l=0;(u=u.nextSibling)&&l<i.length;l+=2)if(u==o)break e;e.insertBefore(o,r),s=r}return void 0!==s?s:o.nextSibling}function R(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||d.test(t)?n:n+"px"}function L(e,t,n,i,o){var r;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||R(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||R(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?i||e.addEventListener(t,r?N:D,r):e.removeEventListener(t,r?N:D,r);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function D(e){this.l[e.type+!1](o.event?o.event(e):e)}function N(e){this.l[e.type+!0](o.event?o.event(e):e)}function F(e,t,n,i,r,s,u,l,a){var c,_,d,p,f,v,g,b,w,S,A,P,x,C=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(a=n.__h,l=t.__e=n.__e,t.__h=null,s=[l]),(c=o.__b)&&c(t);try{e:if("function"==typeof C){if(b=t.props,w=(c=C.contextType)&&i[c.__c],S=c?w?w.props.value:c.__:i,n.__c?g=(_=t.__c=n.__c).__=_.__E:("prototype"in C&&C.prototype.render?t.__c=_=new C(b,S):(t.__c=_=new m(b,S),_.constructor=C,_.render=I),w&&w.sub(_),_.props=b,_.state||(_.state={}),_.context=S,_.__n=i,d=_.__d=!0,_.__h=[]),null==_.__s&&(_.__s=_.state),null!=C.getDerivedStateFromProps&&(_.__s==_.state&&(_.__s=h({},_.__s)),h(_.__s,C.getDerivedStateFromProps(b,_.__s))),p=_.props,f=_.state,d)null==C.getDerivedStateFromProps&&null!=_.componentWillMount&&_.componentWillMount(),null!=_.componentDidMount&&_.__h.push(_.componentDidMount);else{if(null==C.getDerivedStateFromProps&&b!==p&&null!=_.componentWillReceiveProps&&_.componentWillReceiveProps(b,S),!_.__e&&null!=_.shouldComponentUpdate&&!1===_.shouldComponentUpdate(b,_.__s,S)||t.__v===n.__v){_.props=b,_.state=_.__s,t.__v!==n.__v&&(_.__d=!1),_.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),_.__h.length&&u.push(_);break e}null!=_.componentWillUpdate&&_.componentWillUpdate(b,_.__s,S),null!=_.componentDidUpdate&&_.__h.push((function(){_.componentDidUpdate(p,f,v)}))}if(_.context=S,_.props=b,_.__v=t,_.__P=e,A=o.__r,P=0,"prototype"in C&&C.prototype.render)_.state=_.__s,_.__d=!1,A&&A(t),c=_.render(_.props,_.state,_.context);else do{_.__d=!1,A&&A(t),c=_.render(_.props,_.state,_.context),_.state=_.__s}while(_.__d&&++P<25);_.state=_.__s,null!=_.getChildContext&&(i=h(h({},i),_.getChildContext())),d||null==_.getSnapshotBeforeUpdate||(v=_.getSnapshotBeforeUpdate(p,f)),x=null!=c&&c.type===y&&null==c.key?c.props.children:c,k(e,Array.isArray(x)?x:[x],t,n,i,r,s,u,l,a),_.base=t.__e,t.__h=null,_.__h.length&&u.push(_),g&&(_.__E=_.__=null),_.__e=!1}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=O(n.__e,t,n,i,r,s,u,a);(c=o.diffed)&&c(t)}catch(e){t.__v=null,(a||null!=s)&&(t.__e=l,t.__h=!!a,s[s.indexOf(l)]=null),o.__e(e,t,n)}}function E(e,t){o.__c&&o.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){o.__e(e,t.__v)}}))}function O(e,t,n,o,r,s,u,l){var a,_,d,h=n.props,f=t.props,v=t.type,g=0;if("svg"===v&&(r=!0),null!=s)for(;g<s.length;g++)if((a=s[g])&&"setAttribute"in a==!!v&&(v?a.localName===v:3===a.nodeType)){e=a,s[g]=null;break}if(null==e){if(null===v)return document.createTextNode(f);e=r?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,f.is&&f),s=null,l=!1}if(null===v)h===f||l&&e.data===f||(e.data=f);else{if(s=s&&i.call(e.childNodes),_=(h=n.props||c).dangerouslySetInnerHTML,d=f.dangerouslySetInnerHTML,!l){if(null!=s)for(h={},g=0;g<e.attributes.length;g++)h[e.attributes[g].name]=e.attributes[g].value;(d||_)&&(d&&(_&&d.__html==_.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function(e,t,n,i,o){var r;for(r in n)"children"===r||"key"===r||r in t||L(e,r,null,n[r],i);for(r in t)o&&"function"!=typeof t[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===t[r]||L(e,r,t[r],n[r],i)}(e,f,h,r,l),d)t.__k=[];else if(g=t.props.children,k(e,Array.isArray(g)?g:[g],t,n,o,r&&"foreignObject"!==v,s,u,s?s[0]:n.__k&&b(n,0),l),null!=s)for(g=s.length;g--;)null!=s[g]&&p(s[g]);l||("value"in f&&void 0!==(g=f.value)&&(g!==e.value||"progress"===v&&!g||"option"===v&&g!==h.value)&&L(e,"value",g,h.value,!1),"checked"in f&&void 0!==(g=f.checked)&&g!==e.checked&&L(e,"checked",g,h.checked,!1))}return e}function T(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){o.__e(e,n)}}function j(e,t,n){var i,r;if(o.unmount&&o.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||T(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){o.__e(e,t)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&j(i[r],t,"function"!=typeof e.type);n||null==e.__e||p(e.__e),e.__=e.__e=e.__d=void 0}function I(e,t,n){return this.constructor(e,n)}function M(e,t,n){var r,s,u;o.__&&o.__(e,t),s=(r="function"==typeof n)?null:n&&n.__k||t.__k,u=[],F(t,e=(!r&&n||t).__k=f(y,null,[e]),s||c,c,void 0!==t.ownerSVGElement,!r&&n?[n]:s?null:t.firstChild?i.call(t.childNodes):null,u,!r&&n?n:s?s.__e:t.firstChild,r),E(u,e)}function H(e,t){M(e,t,H)}function U(e,t,n){var o,r,s,u=h({},e.props);for(s in t)"key"==s?o=t[s]:"ref"==s?r=t[s]:u[s]=t[s];return arguments.length>2&&(u.children=arguments.length>3?i.call(arguments,2):n),v(e.type,u,o||e.key,r||e.ref,null)}function B(e,t){var n={__c:t="__cC"+a++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,i;return this.getChildContext||(n=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(S)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}i=_.slice,o={__e:function(e,t,n,i){for(var o,r,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((r=o.constructor)&&null!=r.getDerivedStateFromError&&(o.setState(r.getDerivedStateFromError(e)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,i||{}),s=o.__d),s)return o.__E=o}catch(t){e=t}throw e}},r=0,s=function(e){return null!=e&&void 0===e.constructor},m.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=h({},this.state),"function"==typeof e&&(e=e(h({},n),this.props)),e&&h(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),S(this))},m.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),S(this))},m.prototype.render=y,u=[],A.__r=0,a=0},7841:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Uppy=t.UIPlugin=t.BasePlugin=void 0,Object.defineProperty(t,"debugLogger",{enumerable:!0,get:function(){return i.debugLogger}});var i=n(9721);e.exports=n(9069);const o=n(2693);t.UIPlugin=o;const r=n(3521);t.BasePlugin=r;const s=n(9069);t.Uppy=s;const u=n(2693),l=n(3521);s.Uppy=s,s.UIPlugin=u,s.BasePlugin=l,s.debugLogger=i.debugLogger},8010:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ue});var i=n(6400),o=n(7841);const r={"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};var s,u,l,a,c=0,_=[],d=[],h=i.options.__b,p=i.options.__r,f=i.options.diffed,v=i.options.__c,g=i.options.unmount;function y(e,t){i.options.__h&&i.options.__h(u,e,c||t),c=0;var n=u.__H||(u.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:d}),n.__[e]}function m(e,t){var n=y(s++,3);!i.options.__s&&x(n.__H,t)&&(n.__=e,n.i=t,u.__H.__h.push(n))}function b(e){return c=5,function(e,t){var n=y(s++,7);return x(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}((function(){return{current:e}}),[])}function w(){for(var e;e=_.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(k),e.__H.__h.forEach(P),e.__H.__h=[]}catch(t){e.__H.__h=[],i.options.__e(t,e.__v)}}i.options.__b=function(e){"function"!=typeof e.type||e.o||e.type===i.Fragment?e.o||(e.o=e.__&&e.__.o?e.__.o:""):e.o=(e.__&&e.__.o?e.__.o:"")+(e.__&&e.__.__k?e.__.__k.indexOf(e):0),u=null,h&&h(e)},i.options.__r=function(e){p&&p(e),s=0;var t=(u=e.__c).__H;t&&(l===u?(t.__h=[],u.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=d,e.__N=e.i=void 0}))):(t.__h.forEach(k),t.__h.forEach(P),t.__h=[])),l=u},i.options.diffed=function(e){f&&f(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==_.push(t)&&a===i.options.requestAnimationFrame||((a=i.options.requestAnimationFrame)||A)(w)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==d&&(e.__=e.__V),e.i=void 0,e.__V=d}))),l=u=null},i.options.__c=function(e,t){t.some((function(e){try{e.__h.forEach(k),e.__h=e.__h.filter((function(e){return!e.__||P(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],i.options.__e(n,e.__v)}})),v&&v(e,t)},i.options.unmount=function(e){g&&g(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{k(e)}catch(e){t=e}})),n.__H=void 0,t&&i.options.__e(t,n.__v))};var S="function"==typeof requestAnimationFrame;function A(e){var t,n=function(){clearTimeout(i),S&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);S&&(t=requestAnimationFrame(n))}function k(e){var t=u,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),u=t}function P(e){var t=u;e.__c=e.__(),u=t}function x(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function C(e){let{recording:t,onStartRecording:n,onStopRecording:o,i18n:r}=e;return t?(0,i.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:r("stopAudioRecording"),"aria-label":r("stopAudioRecording"),onClick:o,"data-uppy-super-focusable":!0},(0,i.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,i.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,i.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:r("startAudioRecording"),"aria-label":r("startAudioRecording"),onClick:n,"data-uppy-super-focusable":!0},(0,i.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14px",height:"20px",viewBox:"0 0 14 20"},(0,i.h)("path",{d:"M7 14c2.21 0 4-1.71 4-3.818V3.818C11 1.71 9.21 0 7 0S3 1.71 3 3.818v6.364C3 12.29 4.79 14 7 14zm6.364-7h-.637a.643.643 0 0 0-.636.65V9.6c0 3.039-2.565 5.477-5.6 5.175-2.645-.264-4.582-2.692-4.582-5.407V7.65c0-.36-.285-.65-.636-.65H.636A.643.643 0 0 0 0 7.65v1.631c0 3.642 2.544 6.888 6.045 7.382v1.387H3.818a.643.643 0 0 0-.636.65v.65c0 .36.285.65.636.65h6.364c.351 0 .636-.29.636-.65v-.65c0-.36-.285-.65-.636-.65H7.955v-1.372C11.363 16.2 14 13.212 14 9.6V7.65c0-.36-.285-.65-.636-.65z",fill:"#FFF","fill-rule":"nonzero"})))}function R(e){let{recordingLengthSeconds:t,i18n:n}=e;const o=(r=t,`${Math.floor(r/60)}:${String(r%60).padStart(2,0)}`);var r;return(0,i.h)("span",{"aria-label":n("recordingLength",{recording_length:o})},o)}var L=0;function D(e){return"__private_"+L+++"_"+e}function N(e){return"function"==typeof e}function F(e){return N(e)?e():e}var E=D("draw");class O{constructor(e,t){void 0===t&&(t={}),Object.defineProperty(this,E,{writable:!0,value:()=>this.draw()});const n=t.canvas||{},i=t.canvasContext||{};this.analyser=null,this.bufferLength=0,this.dataArray=[],this.canvas=e,this.width=F(n.width)||this.canvas.width,this.height=F(n.height)||this.canvas.height,this.canvas.width=this.width,this.canvas.height=this.height,this.canvasContext=this.canvas.getContext("2d"),this.canvasContext.fillStyle=F(i.fillStyle)||"rgb(255, 255, 255)",this.canvasContext.strokeStyle=F(i.strokeStyle)||"rgb(0, 0, 0)",this.canvasContext.lineWidth=F(i.lineWidth)||1,this.onDrawFrame=N(t.onDrawFrame)?t.onDrawFrame:()=>{}}addSource(e){this.streamSource=e,this.audioContext=this.streamSource.context,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.bufferLength=this.analyser.frequencyBinCount,this.source=this.audioContext.createBufferSource(),this.dataArray=new Uint8Array(this.bufferLength),this.analyser.getByteTimeDomainData(this.dataArray),this.streamSource.connect(this.analyser)}draw(){const{analyser:e,dataArray:t,bufferLength:n}=this,i=this.canvasContext,o=this.width,r=this.height;e&&e.getByteTimeDomainData(t),i.fillRect(0,0,o,r),i.beginPath();const s=1*o/n;let u=0;n||i.moveTo(0,this.height/2);for(let e=0;e<n;e++){const n=t[e]/128*(r/2);0===e?i.moveTo(u,n):i.lineTo(u,n),u+=s}i.lineTo(o,r/2),i.stroke(),this.onDrawFrame(this),requestAnimationFrame(function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}(this,E)[E])}}const T=function(e){let{onSubmit:t,i18n:n}=e;return(0,i.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button uppy-Audio-button--submit",type:"button",title:n("submitRecordedFile"),"aria-label":n("submitRecordedFile"),onClick:t,"data-uppy-super-focusable":!0},(0,i.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,i.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))},j=function(e){let{onDiscard:t,i18n:n}=e;return(0,i.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:n("discardRecordedFile"),"aria-label":n("discardRecordedFile"),onClick:t,"data-uppy-super-focusable":!0},(0,i.h)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"uppy-c-icon"},(0,i.h)("g",{fill:"#FFF",fillRule:"evenodd"},(0,i.h)("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),(0,i.h)("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))};function I(e){const{stream:t,recordedAudio:n,onStop:o,recording:r,supportsRecording:s,audioSources:u,showAudioSourceDropdown:l,onSubmit:a,i18n:c,onStartRecording:_,onStopRecording:d,onDiscardRecordedAudio:h,recordingLengthSeconds:p}=e,f=b(null),v=b(null);m((()=>()=>{v.current=null,o()}),[o]),m((()=>{if(!n&&(v.current=new O(f.current,{canvas:{width:600,height:600},canvasContext:{lineWidth:2,fillStyle:"rgb(0,0,0)",strokeStyle:"green"}}),v.current.draw(),t)){const e=(new AudioContext).createMediaStreamSource(t);v.current.addSource(e)}}),[n,t]);const g=null!=n,y=!g&&s,w=l&&!g&&u&&u.length>1;return(0,i.h)("div",{className:"uppy-Audio-container"},(0,i.h)("div",{className:"uppy-Audio-audioContainer"},g?(0,i.h)("audio",{className:"uppy-Audio-player",controls:!0,src:n}):(0,i.h)("canvas",{ref:f,className:"uppy-Audio-canvas"})),(0,i.h)("div",{className:"uppy-Audio-footer"},(0,i.h)("div",{className:"uppy-Audio-audioSourceContainer"},w?(e=>{let{currentDeviceId:t,audioSources:n,onChangeSource:o}=e;return(0,i.h)("div",{className:"uppy-Audio-videoSource"},(0,i.h)("select",{className:"uppy-u-reset uppy-Audio-audioSource-select",onChange:e=>{o(e.target.value)}},n.map((e=>(0,i.h)("option",{key:e.deviceId,value:e.deviceId,selected:e.deviceId===t},e.label)))))})(e):null),(0,i.h)("div",{className:"uppy-Audio-buttonContainer"},y&&(0,i.h)(C,{recording:r,onStartRecording:_,onStopRecording:d,i18n:c}),g&&(0,i.h)(T,{onSubmit:a,i18n:c}),g&&(0,i.h)(j,{onDiscard:h,i18n:c})),(0,i.h)("div",{className:"uppy-Audio-recordingLength"},!g&&(0,i.h)(R,{recordingLengthSeconds:p,i18n:c}))))}const M=e=>{const{icon:t,hasAudio:n,i18n:o}=e;return(0,i.h)("div",{className:"uppy-Audio-permissons"},(0,i.h)("div",{className:"uppy-Audio-permissonsIcon"},t()),(0,i.h)("h1",{className:"uppy-Audio-title"},o(n?"allowAudioAccessTitle":"noAudioTitle")),(0,i.h)("p",null,o(n?"allowAudioAccessDescription":"noAudioDescription")))},H={strings:{pluginNameAudio:"Audio",startAudioRecording:"Begin audio recording",stopAudioRecording:"Stop audio recording",allowAudioAccessTitle:"Please allow access to your microphone",allowAudioAccessDescription:"In order to record audio, please allow microphone access for this site.",noAudioTitle:"Microphone Not Available",noAudioDescription:"In order to record audio, please connect a microphone or another audio input device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",recordingLength:"Recording length %{recording_length}",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file"}};function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},U.apply(this,arguments)}function B(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var z=0;function V(e){return"__private_"+z+++"_"+e}var W=V("stream"),q=V("audioActive"),$=V("recordingChunks"),G=V("recorder"),J=V("capturedMediaFile"),K=V("mediaDevices"),Q=V("supportsUserMedia"),X=V("hasAudioCheck"),Y=V("start"),Z=V("startRecording"),ee=V("stopRecording"),te=V("discardRecordedAudio"),ne=V("submit"),ie=V("stop"),oe=V("getAudio"),re=V("changeSource"),se=V("updateSources");class ue extends o.UIPlugin{constructor(e,t){var n;super(e,t),n=this,Object.defineProperty(this,oe,{value:ae}),Object.defineProperty(this,X,{value:le}),Object.defineProperty(this,W,{writable:!0,value:null}),Object.defineProperty(this,q,{writable:!0,value:!1}),Object.defineProperty(this,$,{writable:!0,value:null}),Object.defineProperty(this,G,{writable:!0,value:null}),Object.defineProperty(this,J,{writable:!0,value:null}),Object.defineProperty(this,K,{writable:!0,value:null}),Object.defineProperty(this,Q,{writable:!0,value:null}),Object.defineProperty(this,Y,{writable:!0,value:function(e){if(void 0===e&&(e=null),!B(n,Q)[Q])return Promise.reject(new Error("Microphone access not supported"));B(n,q)[q]=!0,B(n,X)[X]().then((t=>(n.setPluginState({hasAudio:t}),B(n,K)[K].getUserMedia({audio:!0}).then((t=>{B(n,W)[W]=t;let i=null;const o=t.getAudioTracks();e&&e.deviceId?o.forEach((t=>{t.getSettings().deviceId===e.deviceId&&(i=t.getSettings().deviceId)})):i=o[0].getSettings().deviceId,B(n,se)[se](),n.setPluginState({currentDeviceId:i,audioReady:!0})})).catch((e=>{n.setPluginState({audioReady:!1,cameraError:e}),n.uppy.info(e.message,"error")})))))}}),Object.defineProperty(this,Z,{writable:!0,value:()=>{B(this,G)[G]=new MediaRecorder(B(this,W)[W]),B(this,$)[$]=[];let e=!1;B(this,G)[G].addEventListener("dataavailable",(t=>{B(this,$)[$].push(t.data);const{restrictions:n}=this.uppy.opts;if(B(this,$)[$].length>1&&null!=n.maxFileSize&&!e){const t=B(this,$)[$].reduce(((e,t)=>e+t.size),0),i=(t-B(this,$)[$][0].size)/(B(this,$)[$].length-1)*3;t>Math.max(0,n.maxFileSize-i)&&(e=!0,this.uppy.info(this.i18n("recordingStoppedMaxSize"),"warning",4e3),B(this,ee)[ee]())}})),B(this,G)[G].start(500),this.recordingLengthTimer=setInterval((()=>{const e=this.getPluginState().recordingLengthSeconds;this.setPluginState({recordingLengthSeconds:e+1})}),1e3),this.setPluginState({isRecording:!0})}}),Object.defineProperty(this,ee,{writable:!0,value:()=>new Promise((e=>{B(this,G)[G].addEventListener("stop",(()=>{e()})),B(this,G)[G].stop(),clearInterval(this.recordingLengthTimer),this.setPluginState({recordingLengthSeconds:0})})).then((()=>(this.setPluginState({isRecording:!1}),B(this,oe)[oe]()))).then((e=>{try{B(this,J)[J]=e,this.setPluginState({recordedAudio:URL.createObjectURL(e.data)})}catch(e){e.isRestriction||this.uppy.log(e)}})).then((()=>{B(this,$)[$]=null,B(this,G)[G]=null}),(e=>{throw B(this,$)[$]=null,B(this,G)[G]=null,e}))}),Object.defineProperty(this,te,{writable:!0,value:()=>{this.setPluginState({recordedAudio:null}),B(this,J)[J]=null}}),Object.defineProperty(this,ne,{writable:!0,value:()=>{try{B(this,J)[J]&&this.uppy.addFile(B(this,J)[J])}catch(e){e.isRestriction||this.uppy.log(e,"error")}}}),Object.defineProperty(this,ie,{writable:!0,value:async()=>{B(this,W)[W]&&B(this,W)[W].getAudioTracks().forEach((e=>e.stop())),B(this,G)[G]&&await new Promise((e=>{B(this,G)[G].addEventListener("stop",e,{once:!0}),B(this,G)[G].stop(),clearInterval(this.recordingLengthTimer)})),B(this,$)[$]=null,B(this,G)[G]=null,B(this,q)[q]=!1,B(this,W)[W]=null,this.setPluginState({recordedAudio:null,isRecording:!1,recordingLengthSeconds:0})}}),Object.defineProperty(this,re,{writable:!0,value:e=>{B(this,ie)[ie](),B(this,Y)[Y]({deviceId:e})}}),Object.defineProperty(this,se,{writable:!0,value:()=>{B(this,K)[K].enumerateDevices().then((e=>{this.setPluginState({audioSources:e.filter((e=>"audioinput"===e.kind))})}))}}),B(this,K)[K]=navigator.mediaDevices,B(this,Q)[Q]=null!=B(this,K)[K],this.id=this.opts.id||"Audio",this.type="acquirer",this.icon=()=>(0,i.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32px",height:"32px",viewBox:"0 0 32 32"},(0,i.h)("g",{fill:"none","fill-rule":"evenodd"},(0,i.h)("rect",{fill:"#9B59B6",width:"32",height:"32",rx:"16"}),(0,i.h)("path",{d:"M16 20c-2.21 0-4-1.71-4-3.818V9.818C12 7.71 13.79 6 16 6s4 1.71 4 3.818v6.364C20 18.29 18.21 20 16 20zm-6.364-7h.637c.351 0 .636.29.636.65v1.95c0 3.039 2.565 5.477 5.6 5.175 2.645-.264 4.582-2.692 4.582-5.407V13.65c0-.36.285-.65.636-.65h.637c.351 0 .636.29.636.65v1.631c0 3.642-2.544 6.888-6.045 7.382v1.387h2.227c.351 0 .636.29.636.65v.65c0 .36-.285.65-.636.65h-6.364a.643.643 0 0 1-.636-.65v-.65c0-.36.285-.65.636-.65h2.227v-1.372C11.637 22.2 9 19.212 9 15.6v-1.95c0-.36.285-.65.636-.65z",fill:"#FFF","fill-rule":"nonzero"}))),this.defaultLocale=H,this.opts={...t},this.i18nInit(),this.title=this.i18n("pluginNameAudio"),this.setPluginState({hasAudio:!1,audioReady:!1,cameraError:null,recordingLengthSeconds:0,audioSources:[],currentDeviceId:null})}render(){B(this,q)[q]||B(this,Y)[Y]();const e=this.getPluginState();return e.audioReady&&e.hasAudio?(0,i.h)(I,U({},e,{audioActive:B(this,q)[q],onChangeSource:B(this,re)[re],onStartRecording:B(this,Z)[Z],onStopRecording:B(this,ee)[ee],onDiscardRecordedAudio:B(this,te)[te],onSubmit:B(this,ne)[ne],onStop:B(this,ie)[ie],i18n:this.i18n,showAudioSourceDropdown:this.opts.showAudioSourceDropdown,supportsRecording:"function"==typeof MediaRecorder&&"function"==typeof(null==(t=MediaRecorder.prototype)?void 0:t.start),recording:e.isRecording,stream:B(this,W)[W]})):(0,i.h)(M,{icon:this.icon,i18n:this.i18n,hasAudio:e.hasAudio});var t}install(){this.setPluginState({audioReady:!1,recordingLengthSeconds:0});const{target:e}=this.opts;e&&this.mount(e,this),B(this,K)[K]&&(B(this,se)[se](),B(this,K)[K].ondevicechange=()=>{if(B(this,se)[se](),B(this,W)[W]){let e=!0;const{audioSources:t,currentDeviceId:n}=this.getPluginState();t.forEach((t=>{n===t.deviceId&&(e=!1)})),e&&(B(this,ie)[ie](),B(this,Y)[Y]())}})}uninstall(){B(this,W)[W]&&B(this,ie)[ie](),this.unmount()}}function le(){return B(this,K)[K]?B(this,K)[K].enumerateDevices().then((e=>e.some((e=>"audioinput"===e.kind)))):Promise.resolve(!1)}function ae(){const e=B(this,$)[$].find((e=>{var t;return(null==(t=e.type)?void 0:t.length)>0})).type,t=function(e){return[e]=e.split(";",1),r[e]||null}(e);if(!t)return Promise.reject(new Error(`Could not retrieve recording: Unsupported media type "${e}"`));const n=`audio-${Date.now()}.${t}`,i=new Blob(B(this,$)[$],{type:e}),o={source:this.id,name:n,data:new Blob([i],{type:e}),type:e};return Promise.resolve(o)}ue.VERSION="1.0.2"}}]);