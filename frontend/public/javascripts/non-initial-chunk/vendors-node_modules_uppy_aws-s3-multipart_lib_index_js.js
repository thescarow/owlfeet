"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkfrontend"] = self["webpackChunkfrontend"] || []).push([["vendors-node_modules_uppy_aws-s3-multipart_lib_index_js"],{

/***/ "./node_modules/@uppy/aws-s3-multipart/lib/MultipartUploader.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@uppy/aws-s3-multipart/lib/MultipartUploader.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _uppy_utils_lib_AbortController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uppy/utils/lib/AbortController */ \"./node_modules/@uppy/utils/lib/AbortController.js\");\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\n\nconst MB = 1024 * 1024;\nconst defaultOptions = {\n  getChunkSize(file) {\n    return Math.ceil(file.size / 10000);\n  },\n\n  onProgress() {},\n\n  onPartComplete() {},\n\n  onSuccess() {},\n\n  onError(err) {\n    throw err;\n  }\n\n};\n\nfunction ensureInt(value) {\n  if (typeof value === 'string') {\n    return parseInt(value, 10);\n  }\n\n  if (typeof value === 'number') {\n    return value;\n  }\n\n  throw new TypeError('Expected a number');\n}\n\nconst pausingUploadReason = Symbol('pausing upload, not an actual error');\n\nvar _abortController = /*#__PURE__*/_classPrivateFieldLooseKey(\"abortController\");\n\nvar _chunks = /*#__PURE__*/_classPrivateFieldLooseKey(\"chunks\");\n\nvar _chunkState = /*#__PURE__*/_classPrivateFieldLooseKey(\"chunkState\");\n\nvar _data = /*#__PURE__*/_classPrivateFieldLooseKey(\"data\");\n\nvar _file = /*#__PURE__*/_classPrivateFieldLooseKey(\"file\");\n\nvar _uploadPromise = /*#__PURE__*/_classPrivateFieldLooseKey(\"uploadPromise\");\n\nvar _onError = /*#__PURE__*/_classPrivateFieldLooseKey(\"onError\");\n\nvar _onSuccess = /*#__PURE__*/_classPrivateFieldLooseKey(\"onSuccess\");\n\nvar _onReject = /*#__PURE__*/_classPrivateFieldLooseKey(\"onReject\");\n\nvar _initChunks = /*#__PURE__*/_classPrivateFieldLooseKey(\"initChunks\");\n\nvar _createUpload = /*#__PURE__*/_classPrivateFieldLooseKey(\"createUpload\");\n\nvar _resumeUpload = /*#__PURE__*/_classPrivateFieldLooseKey(\"resumeUpload\");\n\nvar _onPartProgress = /*#__PURE__*/_classPrivateFieldLooseKey(\"onPartProgress\");\n\nvar _onPartComplete = /*#__PURE__*/_classPrivateFieldLooseKey(\"onPartComplete\");\n\nvar _abortUpload = /*#__PURE__*/_classPrivateFieldLooseKey(\"abortUpload\");\n\nclass MultipartUploader {\n  constructor(data, options) {\n    var _this$options, _this$options$getChun;\n\n    Object.defineProperty(this, _abortUpload, {\n      value: _abortUpload2\n    });\n    Object.defineProperty(this, _resumeUpload, {\n      value: _resumeUpload2\n    });\n    Object.defineProperty(this, _createUpload, {\n      value: _createUpload2\n    });\n    Object.defineProperty(this, _initChunks, {\n      value: _initChunks2\n    });\n    Object.defineProperty(this, _abortController, {\n      writable: true,\n      value: new _uppy_utils_lib_AbortController__WEBPACK_IMPORTED_MODULE_0__.AbortController()\n    });\n    Object.defineProperty(this, _chunks, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _chunkState, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _data, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _file, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _uploadPromise, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _onError, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _onSuccess, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _onReject, {\n      writable: true,\n      value: err => (err == null ? void 0 : err.cause) === pausingUploadReason ? null : _classPrivateFieldLooseBase(this, _onError)[_onError](err)\n    });\n    Object.defineProperty(this, _onPartProgress, {\n      writable: true,\n      value: index => ev => {\n        if (!ev.lengthComputable) return;\n        const sent = ev.loaded;\n        _classPrivateFieldLooseBase(this, _chunkState)[_chunkState][index].uploaded = ensureInt(sent);\n\n        const totalUploaded = _classPrivateFieldLooseBase(this, _chunkState)[_chunkState].reduce((n, c) => n + c.uploaded, 0);\n\n        this.options.onProgress(totalUploaded, _classPrivateFieldLooseBase(this, _data)[_data].size);\n      }\n    });\n    Object.defineProperty(this, _onPartComplete, {\n      writable: true,\n      value: index => etag => {\n        // This avoids the net::ERR_OUT_OF_MEMORY in Chromium Browsers.\n        _classPrivateFieldLooseBase(this, _chunks)[_chunks][index] = null;\n        _classPrivateFieldLooseBase(this, _chunkState)[_chunkState][index].etag = etag;\n        _classPrivateFieldLooseBase(this, _chunkState)[_chunkState][index].done = true;\n        const part = {\n          PartNumber: index + 1,\n          ETag: etag\n        };\n        this.options.onPartComplete(part);\n      }\n    });\n    this.options = { ...defaultOptions,\n      ...options\n    }; // Use default `getChunkSize` if it was null or something\n\n    (_this$options$getChun = (_this$options = this.options).getChunkSize) != null ? _this$options$getChun : _this$options.getChunkSize = defaultOptions.getChunkSize;\n    _classPrivateFieldLooseBase(this, _data)[_data] = data;\n    _classPrivateFieldLooseBase(this, _file)[_file] = options.file;\n    _classPrivateFieldLooseBase(this, _onSuccess)[_onSuccess] = this.options.onSuccess;\n    _classPrivateFieldLooseBase(this, _onError)[_onError] = this.options.onError;\n\n    _classPrivateFieldLooseBase(this, _initChunks)[_initChunks]();\n  }\n\n  start() {\n    if (_classPrivateFieldLooseBase(this, _uploadPromise)[_uploadPromise]) {\n      if (!_classPrivateFieldLooseBase(this, _abortController)[_abortController].signal.aborted) _classPrivateFieldLooseBase(this, _abortController)[_abortController].abort(pausingUploadReason);\n      _classPrivateFieldLooseBase(this, _abortController)[_abortController] = new _uppy_utils_lib_AbortController__WEBPACK_IMPORTED_MODULE_0__.AbortController();\n\n      _classPrivateFieldLooseBase(this, _resumeUpload)[_resumeUpload]();\n    } else {\n      _classPrivateFieldLooseBase(this, _createUpload)[_createUpload]();\n    }\n  }\n\n  pause() {\n    _classPrivateFieldLooseBase(this, _abortController)[_abortController].abort(pausingUploadReason); // Swap it out for a new controller, because this instance may be resumed later.\n\n\n    _classPrivateFieldLooseBase(this, _abortController)[_abortController] = new _uppy_utils_lib_AbortController__WEBPACK_IMPORTED_MODULE_0__.AbortController();\n  }\n\n  abort(opts) {\n    var _opts;\n\n    if (opts === void 0) {\n      opts = undefined;\n    }\n\n    if ((_opts = opts) != null && _opts.really) _classPrivateFieldLooseBase(this, _abortUpload)[_abortUpload]();else this.pause();\n  } // TODO: remove this in the next major\n\n\n  get chunkState() {\n    return _classPrivateFieldLooseBase(this, _chunkState)[_chunkState];\n  }\n\n}\n\nfunction _initChunks2() {\n  const desiredChunkSize = this.options.getChunkSize(_classPrivateFieldLooseBase(this, _data)[_data]); // at least 5MB per request, at most 10k requests\n\n  const fileSize = _classPrivateFieldLooseBase(this, _data)[_data].size;\n\n  const minChunkSize = Math.max(5 * MB, Math.ceil(fileSize / 10000));\n  const chunkSize = Math.max(desiredChunkSize, minChunkSize); // Upload zero-sized files in one zero-sized chunk\n\n  if (_classPrivateFieldLooseBase(this, _data)[_data].size === 0) {\n    _classPrivateFieldLooseBase(this, _chunks)[_chunks] = [_classPrivateFieldLooseBase(this, _data)[_data]];\n    _classPrivateFieldLooseBase(this, _data)[_data].onProgress = _classPrivateFieldLooseBase(this, _onPartProgress)[_onPartProgress](0);\n    _classPrivateFieldLooseBase(this, _data)[_data].onComplete = _classPrivateFieldLooseBase(this, _onPartComplete)[_onPartComplete](0);\n  } else {\n    const arraySize = Math.ceil(fileSize / chunkSize);\n    _classPrivateFieldLooseBase(this, _chunks)[_chunks] = Array(arraySize);\n    let j = 0;\n\n    for (let i = 0; i < fileSize; i += chunkSize) {\n      const end = Math.min(fileSize, i + chunkSize);\n\n      const chunk = _classPrivateFieldLooseBase(this, _data)[_data].slice(i, end);\n\n      chunk.onProgress = _classPrivateFieldLooseBase(this, _onPartProgress)[_onPartProgress](j);\n      chunk.onComplete = _classPrivateFieldLooseBase(this, _onPartComplete)[_onPartComplete](j);\n      _classPrivateFieldLooseBase(this, _chunks)[_chunks][j++] = chunk;\n    }\n  }\n\n  _classPrivateFieldLooseBase(this, _chunkState)[_chunkState] = _classPrivateFieldLooseBase(this, _chunks)[_chunks].map(() => ({\n    uploaded: 0\n  }));\n}\n\nfunction _createUpload2() {\n  _classPrivateFieldLooseBase(this, _uploadPromise)[_uploadPromise] = this.options.companionComm.uploadFile(_classPrivateFieldLooseBase(this, _file)[_file], _classPrivateFieldLooseBase(this, _chunks)[_chunks], _classPrivateFieldLooseBase(this, _abortController)[_abortController].signal).then(_classPrivateFieldLooseBase(this, _onSuccess)[_onSuccess], _classPrivateFieldLooseBase(this, _onReject)[_onReject]);\n}\n\nfunction _resumeUpload2() {\n  _classPrivateFieldLooseBase(this, _uploadPromise)[_uploadPromise] = this.options.companionComm.resumeUploadFile(_classPrivateFieldLooseBase(this, _file)[_file], _classPrivateFieldLooseBase(this, _chunks)[_chunks], _classPrivateFieldLooseBase(this, _abortController)[_abortController].signal).then(_classPrivateFieldLooseBase(this, _onSuccess)[_onSuccess], _classPrivateFieldLooseBase(this, _onReject)[_onReject]);\n}\n\nfunction _abortUpload2() {\n  _classPrivateFieldLooseBase(this, _abortController)[_abortController].abort();\n\n  this.options.companionComm.abortFileUpload(_classPrivateFieldLooseBase(this, _file)[_file]).catch(err => this.options.log(err));\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MultipartUploader);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvYXdzLXMzLW11bHRpcGFydC9saWIvTXVsdGlwYXJ0VXBsb2FkZXIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw2REFBNkQsbUVBQW1FLHlFQUF5RTs7QUFFek07O0FBRUEsNENBQTRDOztBQUVzQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsaUJBQWlCOztBQUVqQixxQkFBcUI7O0FBRXJCLGdCQUFnQjs7QUFFaEI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxpQkFBaUIsNEVBQWU7QUFDaEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wscUJBQXFCO0FBQ3JCO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGLDRFQUFlOztBQUVqRztBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzR0FBc0c7OztBQUd0RyxnRkFBZ0YsNEVBQWU7QUFDL0Y7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsZ0hBQWdIO0FBQ2hILElBQUk7OztBQUdKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHVHQUF1Rzs7QUFFdkc7O0FBRUE7QUFDQSw4REFBOEQ7O0FBRTlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsY0FBYztBQUNsQzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUVBQWUsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQHVwcHkvYXdzLXMzLW11bHRpcGFydC9saWIvTXVsdGlwYXJ0VXBsb2FkZXIuanM/NzUzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UocmVjZWl2ZXIsIHByaXZhdGVLZXkpIHsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVjZWl2ZXIsIHByaXZhdGVLZXkpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gdXNlIHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpOyB9IHJldHVybiByZWNlaXZlcjsgfVxuXG52YXIgaWQgPSAwO1xuXG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShuYW1lKSB7IHJldHVybiBcIl9fcHJpdmF0ZV9cIiArIGlkKysgKyBcIl9cIiArIG5hbWU7IH1cblxuaW1wb3J0IHsgQWJvcnRDb250cm9sbGVyIH0gZnJvbSAnQHVwcHkvdXRpbHMvbGliL0Fib3J0Q29udHJvbGxlcic7XG5jb25zdCBNQiA9IDEwMjQgKiAxMDI0O1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIGdldENodW5rU2l6ZShmaWxlKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbChmaWxlLnNpemUgLyAxMDAwMCk7XG4gIH0sXG5cbiAgb25Qcm9ncmVzcygpIHt9LFxuXG4gIG9uUGFydENvbXBsZXRlKCkge30sXG5cbiAgb25TdWNjZXNzKCkge30sXG5cbiAgb25FcnJvcihlcnIpIHtcbiAgICB0aHJvdyBlcnI7XG4gIH1cblxufTtcblxuZnVuY3Rpb24gZW5zdXJlSW50KHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgbnVtYmVyJyk7XG59XG5cbmNvbnN0IHBhdXNpbmdVcGxvYWRSZWFzb24gPSBTeW1ib2woJ3BhdXNpbmcgdXBsb2FkLCBub3QgYW4gYWN0dWFsIGVycm9yJyk7XG5cbnZhciBfYWJvcnRDb250cm9sbGVyID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiYWJvcnRDb250cm9sbGVyXCIpO1xuXG52YXIgX2NodW5rcyA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcImNodW5rc1wiKTtcblxudmFyIF9jaHVua1N0YXRlID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiY2h1bmtTdGF0ZVwiKTtcblxudmFyIF9kYXRhID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiZGF0YVwiKTtcblxudmFyIF9maWxlID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiZmlsZVwiKTtcblxudmFyIF91cGxvYWRQcm9taXNlID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwidXBsb2FkUHJvbWlzZVwiKTtcblxudmFyIF9vbkVycm9yID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwib25FcnJvclwiKTtcblxudmFyIF9vblN1Y2Nlc3MgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJvblN1Y2Nlc3NcIik7XG5cbnZhciBfb25SZWplY3QgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJvblJlamVjdFwiKTtcblxudmFyIF9pbml0Q2h1bmtzID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiaW5pdENodW5rc1wiKTtcblxudmFyIF9jcmVhdGVVcGxvYWQgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJjcmVhdGVVcGxvYWRcIik7XG5cbnZhciBfcmVzdW1lVXBsb2FkID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwicmVzdW1lVXBsb2FkXCIpO1xuXG52YXIgX29uUGFydFByb2dyZXNzID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwib25QYXJ0UHJvZ3Jlc3NcIik7XG5cbnZhciBfb25QYXJ0Q29tcGxldGUgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJvblBhcnRDb21wbGV0ZVwiKTtcblxudmFyIF9hYm9ydFVwbG9hZCA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcImFib3J0VXBsb2FkXCIpO1xuXG5jbGFzcyBNdWx0aXBhcnRVcGxvYWRlciB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMkb3B0aW9ucywgX3RoaXMkb3B0aW9ucyRnZXRDaHVuO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9hYm9ydFVwbG9hZCwge1xuICAgICAgdmFsdWU6IF9hYm9ydFVwbG9hZDJcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX3Jlc3VtZVVwbG9hZCwge1xuICAgICAgdmFsdWU6IF9yZXN1bWVVcGxvYWQyXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9jcmVhdGVVcGxvYWQsIHtcbiAgICAgIHZhbHVlOiBfY3JlYXRlVXBsb2FkMlxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfaW5pdENodW5rcywge1xuICAgICAgdmFsdWU6IF9pbml0Q2h1bmtzMlxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfYWJvcnRDb250cm9sbGVyLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBuZXcgQWJvcnRDb250cm9sbGVyKClcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2NodW5rcywge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogdm9pZCAwXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9jaHVua1N0YXRlLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2RhdGEsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfZmlsZSwge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogdm9pZCAwXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF91cGxvYWRQcm9taXNlLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX29uRXJyb3IsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfb25TdWNjZXNzLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX29uUmVqZWN0LCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBlcnIgPT4gKGVyciA9PSBudWxsID8gdm9pZCAwIDogZXJyLmNhdXNlKSA9PT0gcGF1c2luZ1VwbG9hZFJlYXNvbiA/IG51bGwgOiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX29uRXJyb3IpW19vbkVycm9yXShlcnIpXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9vblBhcnRQcm9ncmVzcywge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogaW5kZXggPT4gZXYgPT4ge1xuICAgICAgICBpZiAoIWV2Lmxlbmd0aENvbXB1dGFibGUpIHJldHVybjtcbiAgICAgICAgY29uc3Qgc2VudCA9IGV2LmxvYWRlZDtcbiAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jaHVua1N0YXRlKVtfY2h1bmtTdGF0ZV1baW5kZXhdLnVwbG9hZGVkID0gZW5zdXJlSW50KHNlbnQpO1xuXG4gICAgICAgIGNvbnN0IHRvdGFsVXBsb2FkZWQgPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NodW5rU3RhdGUpW19jaHVua1N0YXRlXS5yZWR1Y2UoKG4sIGMpID0+IG4gKyBjLnVwbG9hZGVkLCAwKTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMub25Qcm9ncmVzcyh0b3RhbFVwbG9hZGVkLCBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2RhdGEpW19kYXRhXS5zaXplKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX29uUGFydENvbXBsZXRlLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBpbmRleCA9PiBldGFnID0+IHtcbiAgICAgICAgLy8gVGhpcyBhdm9pZHMgdGhlIG5ldDo6RVJSX09VVF9PRl9NRU1PUlkgaW4gQ2hyb21pdW0gQnJvd3NlcnMuXG4gICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfY2h1bmtzKVtfY2h1bmtzXVtpbmRleF0gPSBudWxsO1xuICAgICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NodW5rU3RhdGUpW19jaHVua1N0YXRlXVtpbmRleF0uZXRhZyA9IGV0YWc7XG4gICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfY2h1bmtTdGF0ZSlbX2NodW5rU3RhdGVdW2luZGV4XS5kb25lID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgcGFydCA9IHtcbiAgICAgICAgICBQYXJ0TnVtYmVyOiBpbmRleCArIDEsXG4gICAgICAgICAgRVRhZzogZXRhZ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9wdGlvbnMub25QYXJ0Q29tcGxldGUocGFydCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5vcHRpb25zID0geyAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9OyAvLyBVc2UgZGVmYXVsdCBgZ2V0Q2h1bmtTaXplYCBpZiBpdCB3YXMgbnVsbCBvciBzb21ldGhpbmdcblxuICAgIChfdGhpcyRvcHRpb25zJGdldENodW4gPSAoX3RoaXMkb3B0aW9ucyA9IHRoaXMub3B0aW9ucykuZ2V0Q2h1bmtTaXplKSAhPSBudWxsID8gX3RoaXMkb3B0aW9ucyRnZXRDaHVuIDogX3RoaXMkb3B0aW9ucy5nZXRDaHVua1NpemUgPSBkZWZhdWx0T3B0aW9ucy5nZXRDaHVua1NpemU7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9kYXRhKVtfZGF0YV0gPSBkYXRhO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZmlsZSlbX2ZpbGVdID0gb3B0aW9ucy5maWxlO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfb25TdWNjZXNzKVtfb25TdWNjZXNzXSA9IHRoaXMub3B0aW9ucy5vblN1Y2Nlc3M7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9vbkVycm9yKVtfb25FcnJvcl0gPSB0aGlzLm9wdGlvbnMub25FcnJvcjtcblxuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfaW5pdENodW5rcylbX2luaXRDaHVua3NdKCk7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF91cGxvYWRQcm9taXNlKVtfdXBsb2FkUHJvbWlzZV0pIHtcbiAgICAgIGlmICghX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9hYm9ydENvbnRyb2xsZXIpW19hYm9ydENvbnRyb2xsZXJdLnNpZ25hbC5hYm9ydGVkKSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2Fib3J0Q29udHJvbGxlcilbX2Fib3J0Q29udHJvbGxlcl0uYWJvcnQocGF1c2luZ1VwbG9hZFJlYXNvbik7XG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2Fib3J0Q29udHJvbGxlcilbX2Fib3J0Q29udHJvbGxlcl0gPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcmVzdW1lVXBsb2FkKVtfcmVzdW1lVXBsb2FkXSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NyZWF0ZVVwbG9hZClbX2NyZWF0ZVVwbG9hZF0oKTtcbiAgICB9XG4gIH1cblxuICBwYXVzZSgpIHtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2Fib3J0Q29udHJvbGxlcilbX2Fib3J0Q29udHJvbGxlcl0uYWJvcnQocGF1c2luZ1VwbG9hZFJlYXNvbik7IC8vIFN3YXAgaXQgb3V0IGZvciBhIG5ldyBjb250cm9sbGVyLCBiZWNhdXNlIHRoaXMgaW5zdGFuY2UgbWF5IGJlIHJlc3VtZWQgbGF0ZXIuXG5cblxuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfYWJvcnRDb250cm9sbGVyKVtfYWJvcnRDb250cm9sbGVyXSA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgfVxuXG4gIGFib3J0KG9wdHMpIHtcbiAgICB2YXIgX29wdHM7XG5cbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICgoX29wdHMgPSBvcHRzKSAhPSBudWxsICYmIF9vcHRzLnJlYWxseSkgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9hYm9ydFVwbG9hZClbX2Fib3J0VXBsb2FkXSgpO2Vsc2UgdGhpcy5wYXVzZSgpO1xuICB9IC8vIFRPRE86IHJlbW92ZSB0aGlzIGluIHRoZSBuZXh0IG1ham9yXG5cblxuICBnZXQgY2h1bmtTdGF0ZSgpIHtcbiAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jaHVua1N0YXRlKVtfY2h1bmtTdGF0ZV07XG4gIH1cblxufVxuXG5mdW5jdGlvbiBfaW5pdENodW5rczIoKSB7XG4gIGNvbnN0IGRlc2lyZWRDaHVua1NpemUgPSB0aGlzLm9wdGlvbnMuZ2V0Q2h1bmtTaXplKF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZGF0YSlbX2RhdGFdKTsgLy8gYXQgbGVhc3QgNU1CIHBlciByZXF1ZXN0LCBhdCBtb3N0IDEwayByZXF1ZXN0c1xuXG4gIGNvbnN0IGZpbGVTaXplID0gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9kYXRhKVtfZGF0YV0uc2l6ZTtcblxuICBjb25zdCBtaW5DaHVua1NpemUgPSBNYXRoLm1heCg1ICogTUIsIE1hdGguY2VpbChmaWxlU2l6ZSAvIDEwMDAwKSk7XG4gIGNvbnN0IGNodW5rU2l6ZSA9IE1hdGgubWF4KGRlc2lyZWRDaHVua1NpemUsIG1pbkNodW5rU2l6ZSk7IC8vIFVwbG9hZCB6ZXJvLXNpemVkIGZpbGVzIGluIG9uZSB6ZXJvLXNpemVkIGNodW5rXG5cbiAgaWYgKF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZGF0YSlbX2RhdGFdLnNpemUgPT09IDApIHtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NodW5rcylbX2NodW5rc10gPSBbX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9kYXRhKVtfZGF0YV1dO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZGF0YSlbX2RhdGFdLm9uUHJvZ3Jlc3MgPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX29uUGFydFByb2dyZXNzKVtfb25QYXJ0UHJvZ3Jlc3NdKDApO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZGF0YSlbX2RhdGFdLm9uQ29tcGxldGUgPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX29uUGFydENvbXBsZXRlKVtfb25QYXJ0Q29tcGxldGVdKDApO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGFycmF5U2l6ZSA9IE1hdGguY2VpbChmaWxlU2l6ZSAvIGNodW5rU2l6ZSk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jaHVua3MpW19jaHVua3NdID0gQXJyYXkoYXJyYXlTaXplKTtcbiAgICBsZXQgaiA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVTaXplOyBpICs9IGNodW5rU2l6ZSkge1xuICAgICAgY29uc3QgZW5kID0gTWF0aC5taW4oZmlsZVNpemUsIGkgKyBjaHVua1NpemUpO1xuXG4gICAgICBjb25zdCBjaHVuayA9IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZGF0YSlbX2RhdGFdLnNsaWNlKGksIGVuZCk7XG5cbiAgICAgIGNodW5rLm9uUHJvZ3Jlc3MgPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX29uUGFydFByb2dyZXNzKVtfb25QYXJ0UHJvZ3Jlc3NdKGopO1xuICAgICAgY2h1bmsub25Db21wbGV0ZSA9IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfb25QYXJ0Q29tcGxldGUpW19vblBhcnRDb21wbGV0ZV0oaik7XG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NodW5rcylbX2NodW5rc11baisrXSA9IGNodW5rO1xuICAgIH1cbiAgfVxuXG4gIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfY2h1bmtTdGF0ZSlbX2NodW5rU3RhdGVdID0gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jaHVua3MpW19jaHVua3NdLm1hcCgoKSA9PiAoe1xuICAgIHVwbG9hZGVkOiAwXG4gIH0pKTtcbn1cblxuZnVuY3Rpb24gX2NyZWF0ZVVwbG9hZDIoKSB7XG4gIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfdXBsb2FkUHJvbWlzZSlbX3VwbG9hZFByb21pc2VdID0gdGhpcy5vcHRpb25zLmNvbXBhbmlvbkNvbW0udXBsb2FkRmlsZShfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2ZpbGUpW19maWxlXSwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jaHVua3MpW19jaHVua3NdLCBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2Fib3J0Q29udHJvbGxlcilbX2Fib3J0Q29udHJvbGxlcl0uc2lnbmFsKS50aGVuKF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfb25TdWNjZXNzKVtfb25TdWNjZXNzXSwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9vblJlamVjdClbX29uUmVqZWN0XSk7XG59XG5cbmZ1bmN0aW9uIF9yZXN1bWVVcGxvYWQyKCkge1xuICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3VwbG9hZFByb21pc2UpW191cGxvYWRQcm9taXNlXSA9IHRoaXMub3B0aW9ucy5jb21wYW5pb25Db21tLnJlc3VtZVVwbG9hZEZpbGUoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9maWxlKVtfZmlsZV0sIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfY2h1bmtzKVtfY2h1bmtzXSwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9hYm9ydENvbnRyb2xsZXIpW19hYm9ydENvbnRyb2xsZXJdLnNpZ25hbCkudGhlbihfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX29uU3VjY2VzcylbX29uU3VjY2Vzc10sIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfb25SZWplY3QpW19vblJlamVjdF0pO1xufVxuXG5mdW5jdGlvbiBfYWJvcnRVcGxvYWQyKCkge1xuICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2Fib3J0Q29udHJvbGxlcilbX2Fib3J0Q29udHJvbGxlcl0uYWJvcnQoKTtcblxuICB0aGlzLm9wdGlvbnMuY29tcGFuaW9uQ29tbS5hYm9ydEZpbGVVcGxvYWQoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9maWxlKVtfZmlsZV0pLmNhdGNoKGVyciA9PiB0aGlzLm9wdGlvbnMubG9nKGVycikpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBNdWx0aXBhcnRVcGxvYWRlcjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@uppy/aws-s3-multipart/lib/MultipartUploader.js\n");

/***/ }),

/***/ "./node_modules/@uppy/aws-s3-multipart/lib/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@uppy/aws-s3-multipart/lib/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AwsS3Multipart)\n/* harmony export */ });\n/* harmony import */ var _uppy_core_lib_BasePlugin_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uppy/core/lib/BasePlugin.js */ \"./node_modules/@uppy/core/lib/BasePlugin.js\");\n/* harmony import */ var _uppy_companion_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uppy/companion-client */ \"./node_modules/@uppy/companion-client/lib/index.js\");\n/* harmony import */ var _uppy_utils_lib_EventTracker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @uppy/utils/lib/EventTracker */ \"./node_modules/@uppy/utils/lib/EventTracker.js\");\n/* harmony import */ var _uppy_utils_lib_emitSocketProgress__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @uppy/utils/lib/emitSocketProgress */ \"./node_modules/@uppy/utils/lib/emitSocketProgress.js\");\n/* harmony import */ var _uppy_utils_lib_getSocketHost__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @uppy/utils/lib/getSocketHost */ \"./node_modules/@uppy/utils/lib/getSocketHost.js\");\n/* harmony import */ var _uppy_utils_lib_RateLimitedQueue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @uppy/utils/lib/RateLimitedQueue */ \"./node_modules/@uppy/utils/lib/RateLimitedQueue.js\");\n/* harmony import */ var _uppy_utils_lib_AbortController__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @uppy/utils/lib/AbortController */ \"./node_modules/@uppy/utils/lib/AbortController.js\");\n/* harmony import */ var _MultipartUploader_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./MultipartUploader.js */ \"./node_modules/@uppy/aws-s3-multipart/lib/MultipartUploader.js\");\nlet _Symbol$for;\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\n\n\n\n\n\n\n\nconst packageJson = {\n  \"version\": \"3.1.1\"\n};\n\n\nfunction assertServerError(res) {\n  if (res && res.error) {\n    const error = new Error(res.message);\n    Object.assign(error, res.error);\n    throw error;\n  }\n\n  return res;\n}\n\nfunction throwIfAborted(signal) {\n  if (signal != null && signal.aborted) {\n    throw (0,_uppy_utils_lib_AbortController__WEBPACK_IMPORTED_MODULE_6__.createAbortError)('The operation was aborted', {\n      cause: signal.reason\n    });\n  }\n}\n\nvar _abortMultipartUpload = /*#__PURE__*/_classPrivateFieldLooseKey(\"abortMultipartUpload\");\n\nvar _cache = /*#__PURE__*/_classPrivateFieldLooseKey(\"cache\");\n\nvar _createMultipartUpload = /*#__PURE__*/_classPrivateFieldLooseKey(\"createMultipartUpload\");\n\nvar _fetchSignature = /*#__PURE__*/_classPrivateFieldLooseKey(\"fetchSignature\");\n\nvar _listParts = /*#__PURE__*/_classPrivateFieldLooseKey(\"listParts\");\n\nvar _previousRetryDelay = /*#__PURE__*/_classPrivateFieldLooseKey(\"previousRetryDelay\");\n\nvar _requests = /*#__PURE__*/_classPrivateFieldLooseKey(\"requests\");\n\nvar _retryDelayIterator = /*#__PURE__*/_classPrivateFieldLooseKey(\"retryDelayIterator\");\n\nvar _sendCompletionRequest = /*#__PURE__*/_classPrivateFieldLooseKey(\"sendCompletionRequest\");\n\nvar _setS3MultipartState = /*#__PURE__*/_classPrivateFieldLooseKey(\"setS3MultipartState\");\n\nvar _uploadPartBytes = /*#__PURE__*/_classPrivateFieldLooseKey(\"uploadPartBytes\");\n\nvar _shouldRetry = /*#__PURE__*/_classPrivateFieldLooseKey(\"shouldRetry\");\n\nclass HTTPCommunicationQueue {\n  constructor(_requests2, options, setS3MultipartState) {\n    Object.defineProperty(this, _shouldRetry, {\n      value: _shouldRetry2\n    });\n    Object.defineProperty(this, _abortMultipartUpload, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _cache, {\n      writable: true,\n      value: new WeakMap()\n    });\n    Object.defineProperty(this, _createMultipartUpload, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _fetchSignature, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _listParts, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _previousRetryDelay, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _requests, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _retryDelayIterator, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _sendCompletionRequest, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _setS3MultipartState, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _uploadPartBytes, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldLooseBase(this, _requests)[_requests] = _requests2;\n    _classPrivateFieldLooseBase(this, _setS3MultipartState)[_setS3MultipartState] = setS3MultipartState;\n    this.setOptions(options);\n  }\n\n  setOptions(options) {\n    const requests = _classPrivateFieldLooseBase(this, _requests)[_requests];\n\n    if ('abortMultipartUpload' in options) {\n      _classPrivateFieldLooseBase(this, _abortMultipartUpload)[_abortMultipartUpload] = requests.wrapPromiseFunction(options.abortMultipartUpload);\n    }\n\n    if ('createMultipartUpload' in options) {\n      _classPrivateFieldLooseBase(this, _createMultipartUpload)[_createMultipartUpload] = requests.wrapPromiseFunction(options.createMultipartUpload, {\n        priority: -1\n      });\n    }\n\n    if ('signPart' in options) {\n      _classPrivateFieldLooseBase(this, _fetchSignature)[_fetchSignature] = requests.wrapPromiseFunction(options.signPart);\n    }\n\n    if ('listParts' in options) {\n      _classPrivateFieldLooseBase(this, _listParts)[_listParts] = requests.wrapPromiseFunction(options.listParts);\n    }\n\n    if ('completeMultipartUpload' in options) {\n      _classPrivateFieldLooseBase(this, _sendCompletionRequest)[_sendCompletionRequest] = requests.wrapPromiseFunction(options.completeMultipartUpload);\n    }\n\n    if ('retryDelays' in options) {\n      var _options$retryDelays;\n\n      _classPrivateFieldLooseBase(this, _retryDelayIterator)[_retryDelayIterator] = (_options$retryDelays = options.retryDelays) == null ? void 0 : _options$retryDelays.values();\n    }\n\n    if ('uploadPartBytes' in options) {\n      _classPrivateFieldLooseBase(this, _uploadPartBytes)[_uploadPartBytes] = requests.wrapPromiseFunction(options.uploadPartBytes, {\n        priority: Infinity\n      });\n    }\n  }\n\n  async getUploadId(file, signal) {\n    const cachedResult = _classPrivateFieldLooseBase(this, _cache)[_cache].get(file.data);\n\n    if (cachedResult != null) {\n      return cachedResult;\n    }\n\n    const promise = _classPrivateFieldLooseBase(this, _createMultipartUpload)[_createMultipartUpload](file, signal);\n\n    const abortPromise = () => {\n      promise.abort(signal.reason);\n\n      _classPrivateFieldLooseBase(this, _cache)[_cache].delete(file.data);\n    };\n\n    signal.addEventListener('abort', abortPromise, {\n      once: true\n    });\n\n    _classPrivateFieldLooseBase(this, _cache)[_cache].set(file.data, promise);\n\n    promise.then(async result => {\n      signal.removeEventListener('abort', abortPromise);\n\n      _classPrivateFieldLooseBase(this, _setS3MultipartState)[_setS3MultipartState](file, result);\n\n      _classPrivateFieldLooseBase(this, _cache)[_cache].set(file.data, result);\n    }, () => {\n      signal.removeEventListener('abort', abortPromise);\n    });\n    return promise;\n  }\n\n  async abortFileUpload(file) {\n    const result = _classPrivateFieldLooseBase(this, _cache)[_cache].get(file.data);\n\n    if (result != null) {\n      // If the createMultipartUpload request never was made, we don't\n      // need to send the abortMultipartUpload request.\n      await _classPrivateFieldLooseBase(this, _abortMultipartUpload)[_abortMultipartUpload](file, await result);\n    }\n  }\n\n  async uploadFile(file, chunks, signal) {\n    throwIfAborted(signal);\n    const {\n      uploadId,\n      key\n    } = await this.getUploadId(file, signal);\n    throwIfAborted(signal);\n    const parts = await Promise.all(chunks.map((chunk, i) => this.uploadChunk(file, i + 1, chunk, signal)));\n    throwIfAborted(signal);\n    return _classPrivateFieldLooseBase(this, _sendCompletionRequest)[_sendCompletionRequest](file, {\n      key,\n      uploadId,\n      parts,\n      signal\n    }).abortOn(signal);\n  }\n\n  async resumeUploadFile(file, chunks, signal) {\n    throwIfAborted(signal);\n    const {\n      uploadId,\n      key\n    } = await this.getUploadId(file, signal);\n    throwIfAborted(signal);\n    const alreadyUploadedParts = await _classPrivateFieldLooseBase(this, _listParts)[_listParts](file, {\n      uploadId,\n      key,\n      signal\n    }).abortOn(signal);\n    throwIfAborted(signal);\n    const parts = await Promise.all(chunks.map((chunk, i) => {\n      const partNumber = i + 1;\n      const alreadyUploadedInfo = alreadyUploadedParts.find(_ref => {\n        let {\n          PartNumber\n        } = _ref;\n        return PartNumber === partNumber;\n      });\n      return alreadyUploadedInfo == null ? this.uploadChunk(file, partNumber, chunk, signal) : {\n        PartNumber: partNumber,\n        ETag: alreadyUploadedInfo.ETag\n      };\n    }));\n    throwIfAborted(signal);\n    return _classPrivateFieldLooseBase(this, _sendCompletionRequest)[_sendCompletionRequest](file, {\n      key,\n      uploadId,\n      parts,\n      signal\n    }).abortOn(signal);\n  }\n\n  async uploadChunk(file, partNumber, body, signal) {\n    throwIfAborted(signal);\n    const {\n      uploadId,\n      key\n    } = await this.getUploadId(file, signal);\n    throwIfAborted(signal);\n\n    for (;;) {\n      const signature = await _classPrivateFieldLooseBase(this, _fetchSignature)[_fetchSignature](file, {\n        uploadId,\n        key,\n        partNumber,\n        body,\n        signal\n      }).abortOn(signal);\n      throwIfAborted(signal);\n\n      try {\n        return {\n          PartNumber: partNumber,\n          ...(await _classPrivateFieldLooseBase(this, _uploadPartBytes)[_uploadPartBytes](signature, body, signal).abortOn(signal))\n        };\n      } catch (err) {\n        if (!(await _classPrivateFieldLooseBase(this, _shouldRetry)[_shouldRetry](err))) throw err;\n      }\n    }\n  }\n\n}\n\nasync function _shouldRetry2(err) {\n  var _err$source;\n\n  const requests = _classPrivateFieldLooseBase(this, _requests)[_requests];\n\n  const status = err == null ? void 0 : (_err$source = err.source) == null ? void 0 : _err$source.status; // TODO: this retry logic is taken out of Tus. We should have a centralized place for retrying,\n  // perhaps the rate limited queue, and dedupe all plugins with that.\n\n  if (status == null) {\n    return false;\n  }\n\n  if (status === 403 && err.message === 'Request has expired') {\n    if (!requests.isPaused) {\n      // We don't want to exhaust the retryDelayIterator as long as there are\n      // more than one request in parallel, to give slower connection a chance\n      // to catch up with the expiry set in Companion.\n      if (requests.limit === 1 || _classPrivateFieldLooseBase(this, _previousRetryDelay)[_previousRetryDelay] == null) {\n        var _classPrivateFieldLoo;\n\n        const next = (_classPrivateFieldLoo = _classPrivateFieldLooseBase(this, _retryDelayIterator)[_retryDelayIterator]) == null ? void 0 : _classPrivateFieldLoo.next();\n\n        if (next == null || next.done) {\n          return false;\n        } // If there are more than 1 request done in parallel, the RLQ limit is\n        // decreased and the failed request is requeued after waiting for a bit.\n        // If there is only one request in parallel, the limit can't be\n        // decreased, so we iterate over `retryDelayIterator` as we do for\n        // other failures.\n        // `#previousRetryDelay` caches the value so we can re-use it next time.\n\n\n        _classPrivateFieldLooseBase(this, _previousRetryDelay)[_previousRetryDelay] = next.value;\n      } // No need to stop the other requests, we just want to lower the limit.\n\n\n      requests.rateLimit(0);\n      await new Promise(resolve => setTimeout(resolve, _classPrivateFieldLooseBase(this, _previousRetryDelay)[_previousRetryDelay]));\n    }\n  } else if (status === 429) {\n    // HTTP 429 Too Many Requests => to avoid the whole download to fail, pause all requests.\n    if (!requests.isPaused) {\n      var _classPrivateFieldLoo2;\n\n      const next = (_classPrivateFieldLoo2 = _classPrivateFieldLooseBase(this, _retryDelayIterator)[_retryDelayIterator]) == null ? void 0 : _classPrivateFieldLoo2.next();\n\n      if (next == null || next.done) {\n        return false;\n      }\n\n      requests.rateLimit(next.value);\n    }\n  } else if (status > 400 && status < 500 && status !== 409) {\n    // HTTP 4xx, the server won't send anything, it's doesn't make sense to retry\n    return false;\n  } else if (typeof navigator !== 'undefined' && navigator.onLine === false) {\n    // The navigator is offline, let's wait for it to come back online.\n    if (!requests.isPaused) {\n      requests.pause();\n      window.addEventListener('online', () => {\n        requests.resume();\n      }, {\n        once: true\n      });\n    }\n  } else {\n    var _classPrivateFieldLoo3;\n\n    // Other error code means the request can be retried later.\n    const next = (_classPrivateFieldLoo3 = _classPrivateFieldLooseBase(this, _retryDelayIterator)[_retryDelayIterator]) == null ? void 0 : _classPrivateFieldLoo3.next();\n\n    if (next == null || next.done) {\n      return false;\n    }\n\n    await new Promise(resolve => setTimeout(resolve, next.value));\n  }\n\n  return true;\n}\n\nvar _queueRequestSocketToken = /*#__PURE__*/_classPrivateFieldLooseKey(\"queueRequestSocketToken\");\n\nvar _companionCommunicationQueue = /*#__PURE__*/_classPrivateFieldLooseKey(\"companionCommunicationQueue\");\n\nvar _client = /*#__PURE__*/_classPrivateFieldLooseKey(\"client\");\n\nvar _setS3MultipartState2 = /*#__PURE__*/_classPrivateFieldLooseKey(\"setS3MultipartState\");\n\nvar _requestSocketToken = /*#__PURE__*/_classPrivateFieldLooseKey(\"requestSocketToken\");\n\nvar _setCompanionHeaders = /*#__PURE__*/_classPrivateFieldLooseKey(\"setCompanionHeaders\");\n\n_Symbol$for = Symbol.for('uppy test: getClient');\nclass AwsS3Multipart extends _uppy_core_lib_BasePlugin_js__WEBPACK_IMPORTED_MODULE_0__ {\n  constructor(uppy, _opts) {\n    var _this$opts$rateLimite;\n\n    super(uppy, _opts);\n    Object.defineProperty(this, _queueRequestSocketToken, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _companionCommunicationQueue, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _client, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _setS3MultipartState2, {\n      writable: true,\n      value: (file, _ref2) => {\n        let {\n          key,\n          uploadId\n        } = _ref2;\n        const cFile = this.uppy.getFile(file.id);\n        this.uppy.setFileState(file.id, {\n          s3Multipart: { ...cFile.s3Multipart,\n            key,\n            uploadId\n          }\n        });\n      }\n    });\n    Object.defineProperty(this, _requestSocketToken, {\n      writable: true,\n      value: async file => {\n        const Client = file.remote.providerOptions.provider ? _uppy_companion_client__WEBPACK_IMPORTED_MODULE_1__.Provider : _uppy_companion_client__WEBPACK_IMPORTED_MODULE_1__.RequestClient;\n        const client = new Client(this.uppy, file.remote.providerOptions);\n        const opts = { ...this.opts\n        };\n\n        if (file.tus) {\n          // Install file-specific upload overrides.\n          Object.assign(opts, file.tus);\n        }\n\n        if (file.remote.url == null) {\n          throw new Error('Cannot connect to an undefined URL');\n        }\n\n        const res = await client.post(file.remote.url, { ...file.remote.body,\n          protocol: 's3-multipart',\n          size: file.data.size,\n          metadata: file.meta\n        });\n        return res.token;\n      }\n    });\n    Object.defineProperty(this, _setCompanionHeaders, {\n      writable: true,\n      value: () => {\n        _classPrivateFieldLooseBase(this, _client)[_client].setCompanionHeaders(this.opts.companionHeaders);\n      }\n    });\n    this.type = 'uploader';\n    this.id = this.opts.id || 'AwsS3Multipart';\n    this.title = 'AWS S3 Multipart';\n    _classPrivateFieldLooseBase(this, _client)[_client] = new _uppy_companion_client__WEBPACK_IMPORTED_MODULE_1__.RequestClient(uppy, _opts);\n    const defaultOptions = {\n      limit: 6,\n      retryDelays: [0, 1000, 3000, 5000],\n      createMultipartUpload: this.createMultipartUpload.bind(this),\n      listParts: this.listParts.bind(this),\n      abortMultipartUpload: this.abortMultipartUpload.bind(this),\n      completeMultipartUpload: this.completeMultipartUpload.bind(this),\n      signPart: this.signPart.bind(this),\n      uploadPartBytes: AwsS3Multipart.uploadPartBytes,\n      companionHeaders: {}\n    };\n    this.opts = { ...defaultOptions,\n      ..._opts\n    };\n\n    if ((_opts == null ? void 0 : _opts.prepareUploadParts) != null && _opts.signPart == null) {\n      this.opts.signPart = async (file, _ref3) => {\n        let {\n          uploadId,\n          key,\n          partNumber,\n          body,\n          signal\n        } = _ref3;\n        const {\n          presignedUrls,\n          headers\n        } = await _opts.prepareUploadParts(file, {\n          uploadId,\n          key,\n          parts: [{\n            number: partNumber,\n            chunk: body\n          }],\n          signal\n        });\n        return {\n          url: presignedUrls == null ? void 0 : presignedUrls[partNumber],\n          headers: headers == null ? void 0 : headers[partNumber]\n        };\n      };\n    }\n\n    this.upload = this.upload.bind(this);\n    /**\n     * Simultaneous upload limiting is shared across all uploads with this plugin.\n     *\n     * @type {RateLimitedQueue}\n     */\n\n    this.requests = (_this$opts$rateLimite = this.opts.rateLimitedQueue) != null ? _this$opts$rateLimite : new _uppy_utils_lib_RateLimitedQueue__WEBPACK_IMPORTED_MODULE_5__.RateLimitedQueue(this.opts.limit);\n    _classPrivateFieldLooseBase(this, _companionCommunicationQueue)[_companionCommunicationQueue] = new HTTPCommunicationQueue(this.requests, this.opts, _classPrivateFieldLooseBase(this, _setS3MultipartState2)[_setS3MultipartState2]);\n    this.uploaders = Object.create(null);\n    this.uploaderEvents = Object.create(null);\n    this.uploaderSockets = Object.create(null);\n    _classPrivateFieldLooseBase(this, _queueRequestSocketToken)[_queueRequestSocketToken] = this.requests.wrapPromiseFunction(_classPrivateFieldLooseBase(this, _requestSocketToken)[_requestSocketToken], {\n      priority: -1\n    });\n  }\n\n  [_Symbol$for]() {\n    return _classPrivateFieldLooseBase(this, _client)[_client];\n  }\n\n  setOptions(newOptions) {\n    _classPrivateFieldLooseBase(this, _companionCommunicationQueue)[_companionCommunicationQueue].setOptions(newOptions);\n\n    return super.setOptions(newOptions);\n  }\n  /**\n   * Clean up all references for a file's upload: the MultipartUploader instance,\n   * any events related to the file, and the Companion WebSocket connection.\n   *\n   * Set `opts.abort` to tell S3 that the multipart upload is cancelled and must be removed.\n   * This should be done when the user cancels the upload, not when the upload is completed or errored.\n   */\n\n\n  resetUploaderReferences(fileID, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    if (this.uploaders[fileID]) {\n      this.uploaders[fileID].abort({\n        really: opts.abort || false\n      });\n      this.uploaders[fileID] = null;\n    }\n\n    if (this.uploaderEvents[fileID]) {\n      this.uploaderEvents[fileID].remove();\n      this.uploaderEvents[fileID] = null;\n    }\n\n    if (this.uploaderSockets[fileID]) {\n      this.uploaderSockets[fileID].close();\n      this.uploaderSockets[fileID] = null;\n    }\n  } // TODO: make this a private method in the next major\n\n\n  assertHost(method) {\n    if (!this.opts.companionUrl) {\n      throw new Error(`Expected a \\`companionUrl\\` option containing a Companion address, or if you are not using Companion, a custom \\`${method}\\` implementation.`);\n    }\n  }\n\n  createMultipartUpload(file, signal) {\n    this.assertHost('createMultipartUpload');\n    throwIfAborted(signal);\n    const metadata = {};\n    Object.keys(file.meta || {}).forEach(key => {\n      if (file.meta[key] != null) {\n        metadata[key] = file.meta[key].toString();\n      }\n    });\n    return _classPrivateFieldLooseBase(this, _client)[_client].post('s3/multipart', {\n      filename: file.name,\n      type: file.type,\n      metadata\n    }, {\n      signal\n    }).then(assertServerError);\n  }\n\n  listParts(file, _ref4, signal) {\n    let {\n      key,\n      uploadId\n    } = _ref4;\n    this.assertHost('listParts');\n    throwIfAborted(signal);\n    const filename = encodeURIComponent(key);\n    return _classPrivateFieldLooseBase(this, _client)[_client].get(`s3/multipart/${uploadId}?key=${filename}`, {\n      signal\n    }).then(assertServerError);\n  }\n\n  completeMultipartUpload(file, _ref5, signal) {\n    let {\n      key,\n      uploadId,\n      parts\n    } = _ref5;\n    this.assertHost('completeMultipartUpload');\n    throwIfAborted(signal);\n    const filename = encodeURIComponent(key);\n    const uploadIdEnc = encodeURIComponent(uploadId);\n    return _classPrivateFieldLooseBase(this, _client)[_client].post(`s3/multipart/${uploadIdEnc}/complete?key=${filename}`, {\n      parts\n    }, {\n      signal\n    }).then(assertServerError);\n  }\n\n  signPart(file, _ref6) {\n    let {\n      uploadId,\n      key,\n      partNumber,\n      signal\n    } = _ref6;\n    this.assertHost('signPart');\n    throwIfAborted(signal);\n\n    if (uploadId == null || key == null || partNumber == null) {\n      throw new Error('Cannot sign without a key, an uploadId, and a partNumber');\n    }\n\n    const filename = encodeURIComponent(key);\n    return _classPrivateFieldLooseBase(this, _client)[_client].get(`s3/multipart/${uploadId}/${partNumber}?key=${filename}`, {\n      signal\n    }).then(assertServerError);\n  }\n\n  abortMultipartUpload(file, _ref7, signal) {\n    let {\n      key,\n      uploadId\n    } = _ref7;\n    this.assertHost('abortMultipartUpload');\n    const filename = encodeURIComponent(key);\n    const uploadIdEnc = encodeURIComponent(uploadId);\n    return _classPrivateFieldLooseBase(this, _client)[_client].delete(`s3/multipart/${uploadIdEnc}?key=${filename}`, undefined, {\n      signal\n    }).then(assertServerError);\n  }\n\n  static async uploadPartBytes(_ref8, body, signal) {\n    let {\n      url,\n      expires,\n      headers\n    } = _ref8;\n    throwIfAborted(signal);\n\n    if (url == null) {\n      throw new Error('Cannot upload to an undefined URL');\n    }\n\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open('PUT', url, true);\n\n      if (headers) {\n        Object.keys(headers).forEach(key => {\n          xhr.setRequestHeader(key, headers[key]);\n        });\n      }\n\n      xhr.responseType = 'text';\n\n      if (typeof expires === 'number') {\n        xhr.timeout = expires * 1000;\n      }\n\n      function onabort() {\n        xhr.abort();\n      }\n\n      function cleanup() {\n        signal.removeEventListener('abort', onabort);\n      }\n\n      signal.addEventListener('abort', onabort);\n      xhr.upload.addEventListener('progress', body.onProgress);\n      xhr.addEventListener('abort', () => {\n        cleanup();\n        reject((0,_uppy_utils_lib_AbortController__WEBPACK_IMPORTED_MODULE_6__.createAbortError)());\n      });\n      xhr.addEventListener('timeout', () => {\n        cleanup();\n        const error = new Error('Request has expired');\n        error.source = {\n          status: 403\n        };\n        reject(error);\n      });\n      xhr.addEventListener('load', ev => {\n        cleanup();\n\n        if (ev.target.status === 403 && ev.target.responseText.includes('<Message>Request has expired</Message>')) {\n          const error = new Error('Request has expired');\n          error.source = ev.target;\n          reject(error);\n          return;\n        }\n\n        if (ev.target.status < 200 || ev.target.status >= 300) {\n          const error = new Error('Non 2xx');\n          error.source = ev.target;\n          reject(error);\n          return;\n        }\n\n        body.onProgress == null ? void 0 : body.onProgress(body.size); // NOTE This must be allowed by CORS.\n\n        const etag = ev.target.getResponseHeader('ETag');\n\n        if (etag === null) {\n          reject(new Error('AwsS3/Multipart: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3-multipart#S3-Bucket-Configuration for instructions.'));\n          return;\n        }\n\n        body.onComplete == null ? void 0 : body.onComplete(etag);\n        resolve({\n          ETag: etag\n        });\n      });\n      xhr.addEventListener('error', ev => {\n        cleanup();\n        const error = new Error('Unknown error');\n        error.source = ev.target;\n        reject(error);\n      });\n      xhr.send(body);\n    });\n  }\n\n  uploadFile(file) {\n    var _this = this;\n\n    return new Promise((resolve, reject) => {\n      const onProgress = (bytesUploaded, bytesTotal) => {\n        this.uppy.emit('upload-progress', file, {\n          uploader: this,\n          bytesUploaded,\n          bytesTotal\n        });\n      };\n\n      const onError = err => {\n        this.uppy.log(err);\n        this.uppy.emit('upload-error', file, err);\n        this.resetUploaderReferences(file.id);\n        reject(err);\n      };\n\n      const onSuccess = result => {\n        const uploadObject = upload; // eslint-disable-line no-use-before-define\n\n        const uploadResp = {\n          body: { ...result\n          },\n          uploadURL: result.location\n        };\n        this.resetUploaderReferences(file.id);\n        const cFile = this.uppy.getFile(file.id);\n        this.uppy.emit('upload-success', cFile || file, uploadResp);\n\n        if (result.location) {\n          this.uppy.log(`Download ${file.name} from ${result.location}`);\n        }\n\n        resolve(uploadObject);\n      };\n\n      const onPartComplete = part => {\n        const cFile = this.uppy.getFile(file.id);\n\n        if (!cFile) {\n          return;\n        }\n\n        this.uppy.emit('s3-multipart:part-uploaded', cFile, part);\n      };\n\n      const upload = new _MultipartUploader_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"](file.data, {\n        // .bind to pass the file object to each handler.\n        companionComm: _classPrivateFieldLooseBase(this, _companionCommunicationQueue)[_companionCommunicationQueue],\n        log: function () {\n          return _this.uppy.log(...arguments);\n        },\n        getChunkSize: this.opts.getChunkSize ? this.opts.getChunkSize.bind(this) : null,\n        onProgress,\n        onError,\n        onSuccess,\n        onPartComplete,\n        file,\n        ...file.s3Multipart\n      });\n      this.uploaders[file.id] = upload;\n      this.uploaderEvents[file.id] = new _uppy_utils_lib_EventTracker__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.uppy);\n      this.onFileRemove(file.id, removed => {\n        upload.abort();\n        this.resetUploaderReferences(file.id, {\n          abort: true\n        });\n        resolve(`upload ${removed.id} was removed`);\n      });\n      this.onCancelAll(file.id, function (_temp) {\n        let {\n          reason\n        } = _temp === void 0 ? {} : _temp;\n\n        if (reason === 'user') {\n          upload.abort();\n\n          _this.resetUploaderReferences(file.id, {\n            abort: true\n          });\n        }\n\n        resolve(`upload ${file.id} was canceled`);\n      });\n      this.onFilePause(file.id, isPaused => {\n        if (isPaused) {\n          upload.pause();\n        } else {\n          upload.start();\n        }\n      });\n      this.onPauseAll(file.id, () => {\n        upload.pause();\n      });\n      this.onResumeAll(file.id, () => {\n        upload.start();\n      }); // Don't double-emit upload-started for Golden Retriever-restored files that were already started\n\n      if (!file.progress.uploadStarted || !file.isRestored) {\n        upload.start();\n        this.uppy.emit('upload-started', file);\n      }\n    });\n  }\n\n  async uploadRemote(file) {\n    this.resetUploaderReferences(file.id); // Don't double-emit upload-started for Golden Retriever-restored files that were already started\n\n    if (!file.progress.uploadStarted || !file.isRestored) {\n      this.uppy.emit('upload-started', file);\n    }\n\n    try {\n      if (file.serverToken) {\n        return this.connectToServerSocket(file);\n      }\n\n      const serverToken = await _classPrivateFieldLooseBase(this, _queueRequestSocketToken)[_queueRequestSocketToken](file);\n      this.uppy.setFileState(file.id, {\n        serverToken\n      });\n      return this.connectToServerSocket(this.uppy.getFile(file.id));\n    } catch (err) {\n      this.uppy.emit('upload-error', file, err);\n      throw err;\n    }\n  }\n\n  async connectToServerSocket(file) {\n    var _this2 = this;\n\n    return new Promise((resolve, reject) => {\n      let queuedRequest;\n      const token = file.serverToken;\n      const host = (0,_uppy_utils_lib_getSocketHost__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(file.remote.companionUrl);\n      const socket = new _uppy_companion_client__WEBPACK_IMPORTED_MODULE_1__.Socket({\n        target: `${host}/api/${token}`\n      });\n      this.uploaderSockets[file.id] = socket;\n      this.uploaderEvents[file.id] = new _uppy_utils_lib_EventTracker__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.uppy);\n      this.onFileRemove(file.id, () => {\n        queuedRequest.abort();\n        socket.send('cancel', {});\n        this.resetUploaderReferences(file.id, {\n          abort: true\n        });\n        resolve(`upload ${file.id} was removed`);\n      });\n      this.onFilePause(file.id, isPaused => {\n        if (isPaused) {\n          // Remove this file from the queue so another file can start in its place.\n          queuedRequest.abort();\n          socket.send('pause', {});\n        } else {\n          // Resuming an upload should be queued, else you could pause and then\n          // resume a queued upload to make it skip the queue.\n          queuedRequest.abort();\n          queuedRequest = this.requests.run(() => {\n            socket.send('resume', {});\n            return () => {};\n          });\n        }\n      });\n      this.onPauseAll(file.id, () => {\n        queuedRequest.abort();\n        socket.send('pause', {});\n      });\n      this.onCancelAll(file.id, function (_temp2) {\n        let {\n          reason\n        } = _temp2 === void 0 ? {} : _temp2;\n\n        if (reason === 'user') {\n          queuedRequest.abort();\n          socket.send('cancel', {});\n\n          _this2.resetUploaderReferences(file.id);\n        }\n\n        resolve(`upload ${file.id} was canceled`);\n      });\n      this.onResumeAll(file.id, () => {\n        queuedRequest.abort();\n\n        if (file.error) {\n          socket.send('pause', {});\n        }\n\n        queuedRequest = this.requests.run(() => {\n          socket.send('resume', {});\n        });\n      });\n      this.onRetry(file.id, () => {\n        // Only do the retry if the upload is actually in progress;\n        // else we could try to send these messages when the upload is still queued.\n        // We may need a better check for this since the socket may also be closed\n        // for other reasons, like network failures.\n        if (socket.isOpen) {\n          socket.send('pause', {});\n          socket.send('resume', {});\n        }\n      });\n      this.onRetryAll(file.id, () => {\n        if (socket.isOpen) {\n          socket.send('pause', {});\n          socket.send('resume', {});\n        }\n      });\n      socket.on('progress', progressData => (0,_uppy_utils_lib_emitSocketProgress__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this, progressData, file));\n      socket.on('error', errData => {\n        this.uppy.emit('upload-error', file, new Error(errData.error));\n        this.resetUploaderReferences(file.id);\n        queuedRequest.done();\n        reject(new Error(errData.error));\n      });\n      socket.on('success', data => {\n        const uploadResp = {\n          uploadURL: data.url\n        };\n        this.uppy.emit('upload-success', file, uploadResp);\n        this.resetUploaderReferences(file.id);\n        queuedRequest.done();\n        resolve();\n      });\n      queuedRequest = this.requests.run(() => {\n        if (file.isPaused) {\n          socket.send('pause', {});\n        }\n\n        return () => {};\n      });\n    });\n  }\n\n  async upload(fileIDs) {\n    if (fileIDs.length === 0) return undefined;\n    const promises = fileIDs.map(id => {\n      const file = this.uppy.getFile(id);\n\n      if (file.isRemote) {\n        return this.uploadRemote(file);\n      }\n\n      return this.uploadFile(file);\n    });\n    return Promise.all(promises);\n  }\n\n  onFileRemove(fileID, cb) {\n    this.uploaderEvents[fileID].on('file-removed', file => {\n      if (fileID === file.id) cb(file.id);\n    });\n  }\n\n  onFilePause(fileID, cb) {\n    this.uploaderEvents[fileID].on('upload-pause', (targetFileID, isPaused) => {\n      if (fileID === targetFileID) {\n        cb(isPaused);\n      }\n    });\n  }\n\n  onRetry(fileID, cb) {\n    this.uploaderEvents[fileID].on('upload-retry', targetFileID => {\n      if (fileID === targetFileID) {\n        cb();\n      }\n    });\n  }\n\n  onRetryAll(fileID, cb) {\n    this.uploaderEvents[fileID].on('retry-all', () => {\n      if (!this.uppy.getFile(fileID)) return;\n      cb();\n    });\n  }\n\n  onPauseAll(fileID, cb) {\n    this.uploaderEvents[fileID].on('pause-all', () => {\n      if (!this.uppy.getFile(fileID)) return;\n      cb();\n    });\n  }\n\n  onCancelAll(fileID, eventHandler) {\n    var _this3 = this;\n\n    this.uploaderEvents[fileID].on('cancel-all', function () {\n      if (!_this3.uppy.getFile(fileID)) return;\n      eventHandler(...arguments);\n    });\n  }\n\n  onResumeAll(fileID, cb) {\n    this.uploaderEvents[fileID].on('resume-all', () => {\n      if (!this.uppy.getFile(fileID)) return;\n      cb();\n    });\n  }\n\n  install() {\n    const {\n      capabilities\n    } = this.uppy.getState();\n    this.uppy.setState({\n      capabilities: { ...capabilities,\n        resumableUploads: true\n      }\n    });\n    this.uppy.addPreProcessor(_classPrivateFieldLooseBase(this, _setCompanionHeaders)[_setCompanionHeaders]);\n    this.uppy.addUploader(this.upload);\n  }\n\n  uninstall() {\n    const {\n      capabilities\n    } = this.uppy.getState();\n    this.uppy.setState({\n      capabilities: { ...capabilities,\n        resumableUploads: false\n      }\n    });\n    this.uppy.removePreProcessor(_classPrivateFieldLooseBase(this, _setCompanionHeaders)[_setCompanionHeaders]);\n    this.uppy.removeUploader(this.upload);\n  }\n\n}\nAwsS3Multipart.VERSION = packageJson.version;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvYXdzLXMzLW11bHRpcGFydC9saWIvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7O0FBRUEsNkRBQTZELG1FQUFtRSx5RUFBeUU7O0FBRXpNOztBQUVBLDRDQUE0Qzs7QUFFVTtBQUNtQjtBQUNqQjtBQUNZO0FBQ1Y7QUFDVTtBQUNEO0FBQ25FO0FBQ0E7QUFDQTtBQUN1RDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVUsaUZBQWdCO0FBQzFCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUEsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsMEdBQTBHO0FBQzFHOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0EsUUFBUTs7O0FBR1I7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ2UsNkJBQTZCLHlEQUFVO0FBQ3REO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsOERBQThELDREQUFRLEdBQUcsaUVBQWE7QUFDdEY7QUFDQSx1QkFBdUI7QUFDdkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHlEQUF5RDtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxpRUFBYTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7O0FBRUEsK0dBQStHLDhFQUFnQjtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7OztBQUdKO0FBQ0E7QUFDQSwwSUFBMEksT0FBTztBQUNqSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsU0FBUyxPQUFPLFNBQVM7QUFDNUc7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRixZQUFZLGdCQUFnQixTQUFTO0FBQ3pIO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1GQUFtRixTQUFTLEdBQUcsV0FBVyxPQUFPLFNBQVM7QUFDMUg7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGLFlBQVksT0FBTyxTQUFTO0FBQ2xIO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlGQUFnQjtBQUMvQixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVFQUF1RTs7QUFFdkU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQzs7QUFFckM7QUFDQSxrQkFBa0I7QUFDbEIsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQ0FBb0MsV0FBVyxPQUFPLGdCQUFnQjtBQUN0RTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEseUJBQXlCLDZEQUFpQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLHlDQUF5QyxvRUFBWTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwwQkFBMEIsWUFBWTtBQUN0QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsVUFBVSx3QkFBd0I7O0FBRWxDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQSwwQkFBMEIsU0FBUztBQUNuQyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTyxHQUFHOztBQUVWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0EsMkNBQTJDOztBQUUzQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlFQUFhO0FBQ2hDLHlCQUF5QiwwREFBTTtBQUMvQixtQkFBbUIsS0FBSyxPQUFPLE1BQU07QUFDckMsT0FBTztBQUNQO0FBQ0EseUNBQXlDLG9FQUFZO0FBQ3JEO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLFNBQVM7QUFDVCwwQkFBMEIsU0FBUztBQUNuQyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakMsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0IsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFVBQVUseUJBQXlCOztBQUVuQztBQUNBO0FBQ0Esa0NBQWtDOztBQUVsQztBQUNBOztBQUVBLDBCQUEwQixTQUFTO0FBQ25DLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0EsaUNBQWlDO0FBQ2pDOztBQUVBO0FBQ0Esa0NBQWtDO0FBQ2xDLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLGtDQUFrQztBQUNsQztBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLGtDQUFrQztBQUNsQztBQUNBLE9BQU87QUFDUCw0Q0FBNEMsOEVBQWtCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDOztBQUVBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0B1cHB5L2F3cy1zMy1tdWx0aXBhcnQvbGliL2luZGV4LmpzPzY2MTQiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IF9TeW1ib2wkZm9yO1xuXG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UocmVjZWl2ZXIsIHByaXZhdGVLZXkpIHsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVjZWl2ZXIsIHByaXZhdGVLZXkpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gdXNlIHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpOyB9IHJldHVybiByZWNlaXZlcjsgfVxuXG52YXIgaWQgPSAwO1xuXG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShuYW1lKSB7IHJldHVybiBcIl9fcHJpdmF0ZV9cIiArIGlkKysgKyBcIl9cIiArIG5hbWU7IH1cblxuaW1wb3J0IEJhc2VQbHVnaW4gZnJvbSAnQHVwcHkvY29yZS9saWIvQmFzZVBsdWdpbi5qcyc7XG5pbXBvcnQgeyBTb2NrZXQsIFByb3ZpZGVyLCBSZXF1ZXN0Q2xpZW50IH0gZnJvbSAnQHVwcHkvY29tcGFuaW9uLWNsaWVudCc7XG5pbXBvcnQgRXZlbnRUcmFja2VyIGZyb20gJ0B1cHB5L3V0aWxzL2xpYi9FdmVudFRyYWNrZXInO1xuaW1wb3J0IGVtaXRTb2NrZXRQcm9ncmVzcyBmcm9tICdAdXBweS91dGlscy9saWIvZW1pdFNvY2tldFByb2dyZXNzJztcbmltcG9ydCBnZXRTb2NrZXRIb3N0IGZyb20gJ0B1cHB5L3V0aWxzL2xpYi9nZXRTb2NrZXRIb3N0JztcbmltcG9ydCB7IFJhdGVMaW1pdGVkUXVldWUgfSBmcm9tICdAdXBweS91dGlscy9saWIvUmF0ZUxpbWl0ZWRRdWV1ZSc7XG5pbXBvcnQgeyBjcmVhdGVBYm9ydEVycm9yIH0gZnJvbSAnQHVwcHkvdXRpbHMvbGliL0Fib3J0Q29udHJvbGxlcic7XG5jb25zdCBwYWNrYWdlSnNvbiA9IHtcbiAgXCJ2ZXJzaW9uXCI6IFwiMy4xLjFcIlxufTtcbmltcG9ydCBNdWx0aXBhcnRVcGxvYWRlciBmcm9tICcuL011bHRpcGFydFVwbG9hZGVyLmpzJztcblxuZnVuY3Rpb24gYXNzZXJ0U2VydmVyRXJyb3IocmVzKSB7XG4gIGlmIChyZXMgJiYgcmVzLmVycm9yKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IocmVzLm1lc3NhZ2UpO1xuICAgIE9iamVjdC5hc3NpZ24oZXJyb3IsIHJlcy5lcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cblxuICByZXR1cm4gcmVzO1xufVxuXG5mdW5jdGlvbiB0aHJvd0lmQWJvcnRlZChzaWduYWwpIHtcbiAgaWYgKHNpZ25hbCAhPSBudWxsICYmIHNpZ25hbC5hYm9ydGVkKSB7XG4gICAgdGhyb3cgY3JlYXRlQWJvcnRFcnJvcignVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZCcsIHtcbiAgICAgIGNhdXNlOiBzaWduYWwucmVhc29uXG4gICAgfSk7XG4gIH1cbn1cblxudmFyIF9hYm9ydE11bHRpcGFydFVwbG9hZCA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcImFib3J0TXVsdGlwYXJ0VXBsb2FkXCIpO1xuXG52YXIgX2NhY2hlID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiY2FjaGVcIik7XG5cbnZhciBfY3JlYXRlTXVsdGlwYXJ0VXBsb2FkID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiY3JlYXRlTXVsdGlwYXJ0VXBsb2FkXCIpO1xuXG52YXIgX2ZldGNoU2lnbmF0dXJlID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiZmV0Y2hTaWduYXR1cmVcIik7XG5cbnZhciBfbGlzdFBhcnRzID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwibGlzdFBhcnRzXCIpO1xuXG52YXIgX3ByZXZpb3VzUmV0cnlEZWxheSA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcInByZXZpb3VzUmV0cnlEZWxheVwiKTtcblxudmFyIF9yZXF1ZXN0cyA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcInJlcXVlc3RzXCIpO1xuXG52YXIgX3JldHJ5RGVsYXlJdGVyYXRvciA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcInJldHJ5RGVsYXlJdGVyYXRvclwiKTtcblxudmFyIF9zZW5kQ29tcGxldGlvblJlcXVlc3QgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJzZW5kQ29tcGxldGlvblJlcXVlc3RcIik7XG5cbnZhciBfc2V0UzNNdWx0aXBhcnRTdGF0ZSA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcInNldFMzTXVsdGlwYXJ0U3RhdGVcIik7XG5cbnZhciBfdXBsb2FkUGFydEJ5dGVzID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwidXBsb2FkUGFydEJ5dGVzXCIpO1xuXG52YXIgX3Nob3VsZFJldHJ5ID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwic2hvdWxkUmV0cnlcIik7XG5cbmNsYXNzIEhUVFBDb21tdW5pY2F0aW9uUXVldWUge1xuICBjb25zdHJ1Y3RvcihfcmVxdWVzdHMyLCBvcHRpb25zLCBzZXRTM011bHRpcGFydFN0YXRlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9zaG91bGRSZXRyeSwge1xuICAgICAgdmFsdWU6IF9zaG91bGRSZXRyeTJcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2Fib3J0TXVsdGlwYXJ0VXBsb2FkLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2NhY2hlLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBuZXcgV2Vha01hcCgpXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9jcmVhdGVNdWx0aXBhcnRVcGxvYWQsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfZmV0Y2hTaWduYXR1cmUsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfbGlzdFBhcnRzLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX3ByZXZpb3VzUmV0cnlEZWxheSwge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogdm9pZCAwXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9yZXF1ZXN0cywge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogdm9pZCAwXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9yZXRyeURlbGF5SXRlcmF0b3IsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfc2VuZENvbXBsZXRpb25SZXF1ZXN0LCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX3NldFMzTXVsdGlwYXJ0U3RhdGUsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfdXBsb2FkUGFydEJ5dGVzLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3JlcXVlc3RzKVtfcmVxdWVzdHNdID0gX3JlcXVlc3RzMjtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3NldFMzTXVsdGlwYXJ0U3RhdGUpW19zZXRTM011bHRpcGFydFN0YXRlXSA9IHNldFMzTXVsdGlwYXJ0U3RhdGU7XG4gICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICB9XG5cbiAgc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgY29uc3QgcmVxdWVzdHMgPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3JlcXVlc3RzKVtfcmVxdWVzdHNdO1xuXG4gICAgaWYgKCdhYm9ydE11bHRpcGFydFVwbG9hZCcgaW4gb3B0aW9ucykge1xuICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9hYm9ydE11bHRpcGFydFVwbG9hZClbX2Fib3J0TXVsdGlwYXJ0VXBsb2FkXSA9IHJlcXVlc3RzLndyYXBQcm9taXNlRnVuY3Rpb24ob3B0aW9ucy5hYm9ydE11bHRpcGFydFVwbG9hZCk7XG4gICAgfVxuXG4gICAgaWYgKCdjcmVhdGVNdWx0aXBhcnRVcGxvYWQnIGluIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfY3JlYXRlTXVsdGlwYXJ0VXBsb2FkKVtfY3JlYXRlTXVsdGlwYXJ0VXBsb2FkXSA9IHJlcXVlc3RzLndyYXBQcm9taXNlRnVuY3Rpb24ob3B0aW9ucy5jcmVhdGVNdWx0aXBhcnRVcGxvYWQsIHtcbiAgICAgICAgcHJpb3JpdHk6IC0xXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoJ3NpZ25QYXJ0JyBpbiBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2ZldGNoU2lnbmF0dXJlKVtfZmV0Y2hTaWduYXR1cmVdID0gcmVxdWVzdHMud3JhcFByb21pc2VGdW5jdGlvbihvcHRpb25zLnNpZ25QYXJ0KTtcbiAgICB9XG5cbiAgICBpZiAoJ2xpc3RQYXJ0cycgaW4gb3B0aW9ucykge1xuICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9saXN0UGFydHMpW19saXN0UGFydHNdID0gcmVxdWVzdHMud3JhcFByb21pc2VGdW5jdGlvbihvcHRpb25zLmxpc3RQYXJ0cyk7XG4gICAgfVxuXG4gICAgaWYgKCdjb21wbGV0ZU11bHRpcGFydFVwbG9hZCcgaW4gb3B0aW9ucykge1xuICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9zZW5kQ29tcGxldGlvblJlcXVlc3QpW19zZW5kQ29tcGxldGlvblJlcXVlc3RdID0gcmVxdWVzdHMud3JhcFByb21pc2VGdW5jdGlvbihvcHRpb25zLmNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkKTtcbiAgICB9XG5cbiAgICBpZiAoJ3JldHJ5RGVsYXlzJyBpbiBvcHRpb25zKSB7XG4gICAgICB2YXIgX29wdGlvbnMkcmV0cnlEZWxheXM7XG5cbiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcmV0cnlEZWxheUl0ZXJhdG9yKVtfcmV0cnlEZWxheUl0ZXJhdG9yXSA9IChfb3B0aW9ucyRyZXRyeURlbGF5cyA9IG9wdGlvbnMucmV0cnlEZWxheXMpID09IG51bGwgPyB2b2lkIDAgOiBfb3B0aW9ucyRyZXRyeURlbGF5cy52YWx1ZXMoKTtcbiAgICB9XG5cbiAgICBpZiAoJ3VwbG9hZFBhcnRCeXRlcycgaW4gb3B0aW9ucykge1xuICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF91cGxvYWRQYXJ0Qnl0ZXMpW191cGxvYWRQYXJ0Qnl0ZXNdID0gcmVxdWVzdHMud3JhcFByb21pc2VGdW5jdGlvbihvcHRpb25zLnVwbG9hZFBhcnRCeXRlcywge1xuICAgICAgICBwcmlvcml0eTogSW5maW5pdHlcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFVwbG9hZElkKGZpbGUsIHNpZ25hbCkge1xuICAgIGNvbnN0IGNhY2hlZFJlc3VsdCA9IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfY2FjaGUpW19jYWNoZV0uZ2V0KGZpbGUuZGF0YSk7XG5cbiAgICBpZiAoY2FjaGVkUmVzdWx0ICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBjYWNoZWRSZXN1bHQ7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvbWlzZSA9IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfY3JlYXRlTXVsdGlwYXJ0VXBsb2FkKVtfY3JlYXRlTXVsdGlwYXJ0VXBsb2FkXShmaWxlLCBzaWduYWwpO1xuXG4gICAgY29uc3QgYWJvcnRQcm9taXNlID0gKCkgPT4ge1xuICAgICAgcHJvbWlzZS5hYm9ydChzaWduYWwucmVhc29uKTtcblxuICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jYWNoZSlbX2NhY2hlXS5kZWxldGUoZmlsZS5kYXRhKTtcbiAgICB9O1xuXG4gICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRQcm9taXNlLCB7XG4gICAgICBvbmNlOiB0cnVlXG4gICAgfSk7XG5cbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NhY2hlKVtfY2FjaGVdLnNldChmaWxlLmRhdGEsIHByb21pc2UpO1xuXG4gICAgcHJvbWlzZS50aGVuKGFzeW5jIHJlc3VsdCA9PiB7XG4gICAgICBzaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydFByb21pc2UpO1xuXG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3NldFMzTXVsdGlwYXJ0U3RhdGUpW19zZXRTM011bHRpcGFydFN0YXRlXShmaWxlLCByZXN1bHQpO1xuXG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NhY2hlKVtfY2FjaGVdLnNldChmaWxlLmRhdGEsIHJlc3VsdCk7XG4gICAgfSwgKCkgPT4ge1xuICAgICAgc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRQcm9taXNlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIGFzeW5jIGFib3J0RmlsZVVwbG9hZChmaWxlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jYWNoZSlbX2NhY2hlXS5nZXQoZmlsZS5kYXRhKTtcblxuICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgLy8gSWYgdGhlIGNyZWF0ZU11bHRpcGFydFVwbG9hZCByZXF1ZXN0IG5ldmVyIHdhcyBtYWRlLCB3ZSBkb24ndFxuICAgICAgLy8gbmVlZCB0byBzZW5kIHRoZSBhYm9ydE11bHRpcGFydFVwbG9hZCByZXF1ZXN0LlxuICAgICAgYXdhaXQgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9hYm9ydE11bHRpcGFydFVwbG9hZClbX2Fib3J0TXVsdGlwYXJ0VXBsb2FkXShmaWxlLCBhd2FpdCByZXN1bHQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwbG9hZEZpbGUoZmlsZSwgY2h1bmtzLCBzaWduYWwpIHtcbiAgICB0aHJvd0lmQWJvcnRlZChzaWduYWwpO1xuICAgIGNvbnN0IHtcbiAgICAgIHVwbG9hZElkLFxuICAgICAga2V5XG4gICAgfSA9IGF3YWl0IHRoaXMuZ2V0VXBsb2FkSWQoZmlsZSwgc2lnbmFsKTtcbiAgICB0aHJvd0lmQWJvcnRlZChzaWduYWwpO1xuICAgIGNvbnN0IHBhcnRzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2h1bmtzLm1hcCgoY2h1bmssIGkpID0+IHRoaXMudXBsb2FkQ2h1bmsoZmlsZSwgaSArIDEsIGNodW5rLCBzaWduYWwpKSk7XG4gICAgdGhyb3dJZkFib3J0ZWQoc2lnbmFsKTtcbiAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9zZW5kQ29tcGxldGlvblJlcXVlc3QpW19zZW5kQ29tcGxldGlvblJlcXVlc3RdKGZpbGUsIHtcbiAgICAgIGtleSxcbiAgICAgIHVwbG9hZElkLFxuICAgICAgcGFydHMsXG4gICAgICBzaWduYWxcbiAgICB9KS5hYm9ydE9uKHNpZ25hbCk7XG4gIH1cblxuICBhc3luYyByZXN1bWVVcGxvYWRGaWxlKGZpbGUsIGNodW5rcywgc2lnbmFsKSB7XG4gICAgdGhyb3dJZkFib3J0ZWQoc2lnbmFsKTtcbiAgICBjb25zdCB7XG4gICAgICB1cGxvYWRJZCxcbiAgICAgIGtleVxuICAgIH0gPSBhd2FpdCB0aGlzLmdldFVwbG9hZElkKGZpbGUsIHNpZ25hbCk7XG4gICAgdGhyb3dJZkFib3J0ZWQoc2lnbmFsKTtcbiAgICBjb25zdCBhbHJlYWR5VXBsb2FkZWRQYXJ0cyA9IGF3YWl0IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfbGlzdFBhcnRzKVtfbGlzdFBhcnRzXShmaWxlLCB7XG4gICAgICB1cGxvYWRJZCxcbiAgICAgIGtleSxcbiAgICAgIHNpZ25hbFxuICAgIH0pLmFib3J0T24oc2lnbmFsKTtcbiAgICB0aHJvd0lmQWJvcnRlZChzaWduYWwpO1xuICAgIGNvbnN0IHBhcnRzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2h1bmtzLm1hcCgoY2h1bmssIGkpID0+IHtcbiAgICAgIGNvbnN0IHBhcnROdW1iZXIgPSBpICsgMTtcbiAgICAgIGNvbnN0IGFscmVhZHlVcGxvYWRlZEluZm8gPSBhbHJlYWR5VXBsb2FkZWRQYXJ0cy5maW5kKF9yZWYgPT4ge1xuICAgICAgICBsZXQge1xuICAgICAgICAgIFBhcnROdW1iZXJcbiAgICAgICAgfSA9IF9yZWY7XG4gICAgICAgIHJldHVybiBQYXJ0TnVtYmVyID09PSBwYXJ0TnVtYmVyO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWxyZWFkeVVwbG9hZGVkSW5mbyA9PSBudWxsID8gdGhpcy51cGxvYWRDaHVuayhmaWxlLCBwYXJ0TnVtYmVyLCBjaHVuaywgc2lnbmFsKSA6IHtcbiAgICAgICAgUGFydE51bWJlcjogcGFydE51bWJlcixcbiAgICAgICAgRVRhZzogYWxyZWFkeVVwbG9hZGVkSW5mby5FVGFnXG4gICAgICB9O1xuICAgIH0pKTtcbiAgICB0aHJvd0lmQWJvcnRlZChzaWduYWwpO1xuICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3NlbmRDb21wbGV0aW9uUmVxdWVzdClbX3NlbmRDb21wbGV0aW9uUmVxdWVzdF0oZmlsZSwge1xuICAgICAga2V5LFxuICAgICAgdXBsb2FkSWQsXG4gICAgICBwYXJ0cyxcbiAgICAgIHNpZ25hbFxuICAgIH0pLmFib3J0T24oc2lnbmFsKTtcbiAgfVxuXG4gIGFzeW5jIHVwbG9hZENodW5rKGZpbGUsIHBhcnROdW1iZXIsIGJvZHksIHNpZ25hbCkge1xuICAgIHRocm93SWZBYm9ydGVkKHNpZ25hbCk7XG4gICAgY29uc3Qge1xuICAgICAgdXBsb2FkSWQsXG4gICAgICBrZXlcbiAgICB9ID0gYXdhaXQgdGhpcy5nZXRVcGxvYWRJZChmaWxlLCBzaWduYWwpO1xuICAgIHRocm93SWZBYm9ydGVkKHNpZ25hbCk7XG5cbiAgICBmb3IgKDs7KSB7XG4gICAgICBjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2ZldGNoU2lnbmF0dXJlKVtfZmV0Y2hTaWduYXR1cmVdKGZpbGUsIHtcbiAgICAgICAgdXBsb2FkSWQsXG4gICAgICAgIGtleSxcbiAgICAgICAgcGFydE51bWJlcixcbiAgICAgICAgYm9keSxcbiAgICAgICAgc2lnbmFsXG4gICAgICB9KS5hYm9ydE9uKHNpZ25hbCk7XG4gICAgICB0aHJvd0lmQWJvcnRlZChzaWduYWwpO1xuXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIFBhcnROdW1iZXI6IHBhcnROdW1iZXIsXG4gICAgICAgICAgLi4uKGF3YWl0IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfdXBsb2FkUGFydEJ5dGVzKVtfdXBsb2FkUGFydEJ5dGVzXShzaWduYXR1cmUsIGJvZHksIHNpZ25hbCkuYWJvcnRPbihzaWduYWwpKVxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICghKGF3YWl0IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfc2hvdWxkUmV0cnkpW19zaG91bGRSZXRyeV0oZXJyKSkpIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuXG5hc3luYyBmdW5jdGlvbiBfc2hvdWxkUmV0cnkyKGVycikge1xuICB2YXIgX2VyciRzb3VyY2U7XG5cbiAgY29uc3QgcmVxdWVzdHMgPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3JlcXVlc3RzKVtfcmVxdWVzdHNdO1xuXG4gIGNvbnN0IHN0YXR1cyA9IGVyciA9PSBudWxsID8gdm9pZCAwIDogKF9lcnIkc291cmNlID0gZXJyLnNvdXJjZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lcnIkc291cmNlLnN0YXR1czsgLy8gVE9ETzogdGhpcyByZXRyeSBsb2dpYyBpcyB0YWtlbiBvdXQgb2YgVHVzLiBXZSBzaG91bGQgaGF2ZSBhIGNlbnRyYWxpemVkIHBsYWNlIGZvciByZXRyeWluZyxcbiAgLy8gcGVyaGFwcyB0aGUgcmF0ZSBsaW1pdGVkIHF1ZXVlLCBhbmQgZGVkdXBlIGFsbCBwbHVnaW5zIHdpdGggdGhhdC5cblxuICBpZiAoc3RhdHVzID09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoc3RhdHVzID09PSA0MDMgJiYgZXJyLm1lc3NhZ2UgPT09ICdSZXF1ZXN0IGhhcyBleHBpcmVkJykge1xuICAgIGlmICghcmVxdWVzdHMuaXNQYXVzZWQpIHtcbiAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gZXhoYXVzdCB0aGUgcmV0cnlEZWxheUl0ZXJhdG9yIGFzIGxvbmcgYXMgdGhlcmUgYXJlXG4gICAgICAvLyBtb3JlIHRoYW4gb25lIHJlcXVlc3QgaW4gcGFyYWxsZWwsIHRvIGdpdmUgc2xvd2VyIGNvbm5lY3Rpb24gYSBjaGFuY2VcbiAgICAgIC8vIHRvIGNhdGNoIHVwIHdpdGggdGhlIGV4cGlyeSBzZXQgaW4gQ29tcGFuaW9uLlxuICAgICAgaWYgKHJlcXVlc3RzLmxpbWl0ID09PSAxIHx8IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcHJldmlvdXNSZXRyeURlbGF5KVtfcHJldmlvdXNSZXRyeURlbGF5XSA9PSBudWxsKSB7XG4gICAgICAgIHZhciBfY2xhc3NQcml2YXRlRmllbGRMb287XG5cbiAgICAgICAgY29uc3QgbmV4dCA9IChfY2xhc3NQcml2YXRlRmllbGRMb28gPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3JldHJ5RGVsYXlJdGVyYXRvcilbX3JldHJ5RGVsYXlJdGVyYXRvcl0pID09IG51bGwgPyB2b2lkIDAgOiBfY2xhc3NQcml2YXRlRmllbGRMb28ubmV4dCgpO1xuXG4gICAgICAgIGlmIChuZXh0ID09IG51bGwgfHwgbmV4dC5kb25lKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IC8vIElmIHRoZXJlIGFyZSBtb3JlIHRoYW4gMSByZXF1ZXN0IGRvbmUgaW4gcGFyYWxsZWwsIHRoZSBSTFEgbGltaXQgaXNcbiAgICAgICAgLy8gZGVjcmVhc2VkIGFuZCB0aGUgZmFpbGVkIHJlcXVlc3QgaXMgcmVxdWV1ZWQgYWZ0ZXIgd2FpdGluZyBmb3IgYSBiaXQuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIG9ubHkgb25lIHJlcXVlc3QgaW4gcGFyYWxsZWwsIHRoZSBsaW1pdCBjYW4ndCBiZVxuICAgICAgICAvLyBkZWNyZWFzZWQsIHNvIHdlIGl0ZXJhdGUgb3ZlciBgcmV0cnlEZWxheUl0ZXJhdG9yYCBhcyB3ZSBkbyBmb3JcbiAgICAgICAgLy8gb3RoZXIgZmFpbHVyZXMuXG4gICAgICAgIC8vIGAjcHJldmlvdXNSZXRyeURlbGF5YCBjYWNoZXMgdGhlIHZhbHVlIHNvIHdlIGNhbiByZS11c2UgaXQgbmV4dCB0aW1lLlxuXG5cbiAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9wcmV2aW91c1JldHJ5RGVsYXkpW19wcmV2aW91c1JldHJ5RGVsYXldID0gbmV4dC52YWx1ZTtcbiAgICAgIH0gLy8gTm8gbmVlZCB0byBzdG9wIHRoZSBvdGhlciByZXF1ZXN0cywgd2UganVzdCB3YW50IHRvIGxvd2VyIHRoZSBsaW1pdC5cblxuXG4gICAgICByZXF1ZXN0cy5yYXRlTGltaXQoMCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9wcmV2aW91c1JldHJ5RGVsYXkpW19wcmV2aW91c1JldHJ5RGVsYXldKSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gNDI5KSB7XG4gICAgLy8gSFRUUCA0MjkgVG9vIE1hbnkgUmVxdWVzdHMgPT4gdG8gYXZvaWQgdGhlIHdob2xlIGRvd25sb2FkIHRvIGZhaWwsIHBhdXNlIGFsbCByZXF1ZXN0cy5cbiAgICBpZiAoIXJlcXVlc3RzLmlzUGF1c2VkKSB7XG4gICAgICB2YXIgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vMjtcblxuICAgICAgY29uc3QgbmV4dCA9IChfY2xhc3NQcml2YXRlRmllbGRMb28yID0gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9yZXRyeURlbGF5SXRlcmF0b3IpW19yZXRyeURlbGF5SXRlcmF0b3JdKSA9PSBudWxsID8gdm9pZCAwIDogX2NsYXNzUHJpdmF0ZUZpZWxkTG9vMi5uZXh0KCk7XG5cbiAgICAgIGlmIChuZXh0ID09IG51bGwgfHwgbmV4dC5kb25lKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdHMucmF0ZUxpbWl0KG5leHQudmFsdWUpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChzdGF0dXMgPiA0MDAgJiYgc3RhdHVzIDwgNTAwICYmIHN0YXR1cyAhPT0gNDA5KSB7XG4gICAgLy8gSFRUUCA0eHgsIHRoZSBzZXJ2ZXIgd29uJ3Qgc2VuZCBhbnl0aGluZywgaXQncyBkb2Vzbid0IG1ha2Ugc2Vuc2UgdG8gcmV0cnlcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLm9uTGluZSA9PT0gZmFsc2UpIHtcbiAgICAvLyBUaGUgbmF2aWdhdG9yIGlzIG9mZmxpbmUsIGxldCdzIHdhaXQgZm9yIGl0IHRvIGNvbWUgYmFjayBvbmxpbmUuXG4gICAgaWYgKCFyZXF1ZXN0cy5pc1BhdXNlZCkge1xuICAgICAgcmVxdWVzdHMucGF1c2UoKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCAoKSA9PiB7XG4gICAgICAgIHJlcXVlc3RzLnJlc3VtZSgpO1xuICAgICAgfSwge1xuICAgICAgICBvbmNlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIF9jbGFzc1ByaXZhdGVGaWVsZExvbzM7XG5cbiAgICAvLyBPdGhlciBlcnJvciBjb2RlIG1lYW5zIHRoZSByZXF1ZXN0IGNhbiBiZSByZXRyaWVkIGxhdGVyLlxuICAgIGNvbnN0IG5leHQgPSAoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vMyA9IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcmV0cnlEZWxheUl0ZXJhdG9yKVtfcmV0cnlEZWxheUl0ZXJhdG9yXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jbGFzc1ByaXZhdGVGaWVsZExvbzMubmV4dCgpO1xuXG4gICAgaWYgKG5leHQgPT0gbnVsbCB8fCBuZXh0LmRvbmUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbmV4dC52YWx1ZSkpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbnZhciBfcXVldWVSZXF1ZXN0U29ja2V0VG9rZW4gPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJxdWV1ZVJlcXVlc3RTb2NrZXRUb2tlblwiKTtcblxudmFyIF9jb21wYW5pb25Db21tdW5pY2F0aW9uUXVldWUgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJjb21wYW5pb25Db21tdW5pY2F0aW9uUXVldWVcIik7XG5cbnZhciBfY2xpZW50ID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiY2xpZW50XCIpO1xuXG52YXIgX3NldFMzTXVsdGlwYXJ0U3RhdGUyID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwic2V0UzNNdWx0aXBhcnRTdGF0ZVwiKTtcblxudmFyIF9yZXF1ZXN0U29ja2V0VG9rZW4gPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJyZXF1ZXN0U29ja2V0VG9rZW5cIik7XG5cbnZhciBfc2V0Q29tcGFuaW9uSGVhZGVycyA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcInNldENvbXBhbmlvbkhlYWRlcnNcIik7XG5cbl9TeW1ib2wkZm9yID0gU3ltYm9sLmZvcigndXBweSB0ZXN0OiBnZXRDbGllbnQnKTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF3c1MzTXVsdGlwYXJ0IGV4dGVuZHMgQmFzZVBsdWdpbiB7XG4gIGNvbnN0cnVjdG9yKHVwcHksIF9vcHRzKSB7XG4gICAgdmFyIF90aGlzJG9wdHMkcmF0ZUxpbWl0ZTtcblxuICAgIHN1cGVyKHVwcHksIF9vcHRzKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX3F1ZXVlUmVxdWVzdFNvY2tldFRva2VuLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2NvbXBhbmlvbkNvbW11bmljYXRpb25RdWV1ZSwge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogdm9pZCAwXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9jbGllbnQsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfc2V0UzNNdWx0aXBhcnRTdGF0ZTIsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IChmaWxlLCBfcmVmMikgPT4ge1xuICAgICAgICBsZXQge1xuICAgICAgICAgIGtleSxcbiAgICAgICAgICB1cGxvYWRJZFxuICAgICAgICB9ID0gX3JlZjI7XG4gICAgICAgIGNvbnN0IGNGaWxlID0gdGhpcy51cHB5LmdldEZpbGUoZmlsZS5pZCk7XG4gICAgICAgIHRoaXMudXBweS5zZXRGaWxlU3RhdGUoZmlsZS5pZCwge1xuICAgICAgICAgIHMzTXVsdGlwYXJ0OiB7IC4uLmNGaWxlLnMzTXVsdGlwYXJ0LFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdXBsb2FkSWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfcmVxdWVzdFNvY2tldFRva2VuLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBhc3luYyBmaWxlID0+IHtcbiAgICAgICAgY29uc3QgQ2xpZW50ID0gZmlsZS5yZW1vdGUucHJvdmlkZXJPcHRpb25zLnByb3ZpZGVyID8gUHJvdmlkZXIgOiBSZXF1ZXN0Q2xpZW50O1xuICAgICAgICBjb25zdCBjbGllbnQgPSBuZXcgQ2xpZW50KHRoaXMudXBweSwgZmlsZS5yZW1vdGUucHJvdmlkZXJPcHRpb25zKTtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHsgLi4udGhpcy5vcHRzXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGZpbGUudHVzKSB7XG4gICAgICAgICAgLy8gSW5zdGFsbCBmaWxlLXNwZWNpZmljIHVwbG9hZCBvdmVycmlkZXMuXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihvcHRzLCBmaWxlLnR1cyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsZS5yZW1vdGUudXJsID09IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjb25uZWN0IHRvIGFuIHVuZGVmaW5lZCBVUkwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5wb3N0KGZpbGUucmVtb3RlLnVybCwgeyAuLi5maWxlLnJlbW90ZS5ib2R5LFxuICAgICAgICAgIHByb3RvY29sOiAnczMtbXVsdGlwYXJ0JyxcbiAgICAgICAgICBzaXplOiBmaWxlLmRhdGEuc2l6ZSxcbiAgICAgICAgICBtZXRhZGF0YTogZmlsZS5tZXRhXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzLnRva2VuO1xuICAgICAgfVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfc2V0Q29tcGFuaW9uSGVhZGVycywge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogKCkgPT4ge1xuICAgICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NsaWVudClbX2NsaWVudF0uc2V0Q29tcGFuaW9uSGVhZGVycyh0aGlzLm9wdHMuY29tcGFuaW9uSGVhZGVycyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy50eXBlID0gJ3VwbG9hZGVyJztcbiAgICB0aGlzLmlkID0gdGhpcy5vcHRzLmlkIHx8ICdBd3NTM011bHRpcGFydCc7XG4gICAgdGhpcy50aXRsZSA9ICdBV1MgUzMgTXVsdGlwYXJ0JztcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NsaWVudClbX2NsaWVudF0gPSBuZXcgUmVxdWVzdENsaWVudCh1cHB5LCBfb3B0cyk7XG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICBsaW1pdDogNixcbiAgICAgIHJldHJ5RGVsYXlzOiBbMCwgMTAwMCwgMzAwMCwgNTAwMF0sXG4gICAgICBjcmVhdGVNdWx0aXBhcnRVcGxvYWQ6IHRoaXMuY3JlYXRlTXVsdGlwYXJ0VXBsb2FkLmJpbmQodGhpcyksXG4gICAgICBsaXN0UGFydHM6IHRoaXMubGlzdFBhcnRzLmJpbmQodGhpcyksXG4gICAgICBhYm9ydE11bHRpcGFydFVwbG9hZDogdGhpcy5hYm9ydE11bHRpcGFydFVwbG9hZC5iaW5kKHRoaXMpLFxuICAgICAgY29tcGxldGVNdWx0aXBhcnRVcGxvYWQ6IHRoaXMuY29tcGxldGVNdWx0aXBhcnRVcGxvYWQuYmluZCh0aGlzKSxcbiAgICAgIHNpZ25QYXJ0OiB0aGlzLnNpZ25QYXJ0LmJpbmQodGhpcyksXG4gICAgICB1cGxvYWRQYXJ0Qnl0ZXM6IEF3c1MzTXVsdGlwYXJ0LnVwbG9hZFBhcnRCeXRlcyxcbiAgICAgIGNvbXBhbmlvbkhlYWRlcnM6IHt9XG4gICAgfTtcbiAgICB0aGlzLm9wdHMgPSB7IC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgLi4uX29wdHNcbiAgICB9O1xuXG4gICAgaWYgKChfb3B0cyA9PSBudWxsID8gdm9pZCAwIDogX29wdHMucHJlcGFyZVVwbG9hZFBhcnRzKSAhPSBudWxsICYmIF9vcHRzLnNpZ25QYXJ0ID09IG51bGwpIHtcbiAgICAgIHRoaXMub3B0cy5zaWduUGFydCA9IGFzeW5jIChmaWxlLCBfcmVmMykgPT4ge1xuICAgICAgICBsZXQge1xuICAgICAgICAgIHVwbG9hZElkLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgICBwYXJ0TnVtYmVyLFxuICAgICAgICAgIGJvZHksXG4gICAgICAgICAgc2lnbmFsXG4gICAgICAgIH0gPSBfcmVmMztcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHByZXNpZ25lZFVybHMsXG4gICAgICAgICAgaGVhZGVyc1xuICAgICAgICB9ID0gYXdhaXQgX29wdHMucHJlcGFyZVVwbG9hZFBhcnRzKGZpbGUsIHtcbiAgICAgICAgICB1cGxvYWRJZCxcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgcGFydHM6IFt7XG4gICAgICAgICAgICBudW1iZXI6IHBhcnROdW1iZXIsXG4gICAgICAgICAgICBjaHVuazogYm9keVxuICAgICAgICAgIH1dLFxuICAgICAgICAgIHNpZ25hbFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1cmw6IHByZXNpZ25lZFVybHMgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXNpZ25lZFVybHNbcGFydE51bWJlcl0sXG4gICAgICAgICAgaGVhZGVyczogaGVhZGVycyA9PSBudWxsID8gdm9pZCAwIDogaGVhZGVyc1twYXJ0TnVtYmVyXVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLnVwbG9hZCA9IHRoaXMudXBsb2FkLmJpbmQodGhpcyk7XG4gICAgLyoqXG4gICAgICogU2ltdWx0YW5lb3VzIHVwbG9hZCBsaW1pdGluZyBpcyBzaGFyZWQgYWNyb3NzIGFsbCB1cGxvYWRzIHdpdGggdGhpcyBwbHVnaW4uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7UmF0ZUxpbWl0ZWRRdWV1ZX1cbiAgICAgKi9cblxuICAgIHRoaXMucmVxdWVzdHMgPSAoX3RoaXMkb3B0cyRyYXRlTGltaXRlID0gdGhpcy5vcHRzLnJhdGVMaW1pdGVkUXVldWUpICE9IG51bGwgPyBfdGhpcyRvcHRzJHJhdGVMaW1pdGUgOiBuZXcgUmF0ZUxpbWl0ZWRRdWV1ZSh0aGlzLm9wdHMubGltaXQpO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfY29tcGFuaW9uQ29tbXVuaWNhdGlvblF1ZXVlKVtfY29tcGFuaW9uQ29tbXVuaWNhdGlvblF1ZXVlXSA9IG5ldyBIVFRQQ29tbXVuaWNhdGlvblF1ZXVlKHRoaXMucmVxdWVzdHMsIHRoaXMub3B0cywgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9zZXRTM011bHRpcGFydFN0YXRlMilbX3NldFMzTXVsdGlwYXJ0U3RhdGUyXSk7XG4gICAgdGhpcy51cGxvYWRlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMudXBsb2FkZXJFdmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMudXBsb2FkZXJTb2NrZXRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3F1ZXVlUmVxdWVzdFNvY2tldFRva2VuKVtfcXVldWVSZXF1ZXN0U29ja2V0VG9rZW5dID0gdGhpcy5yZXF1ZXN0cy53cmFwUHJvbWlzZUZ1bmN0aW9uKF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcmVxdWVzdFNvY2tldFRva2VuKVtfcmVxdWVzdFNvY2tldFRva2VuXSwge1xuICAgICAgcHJpb3JpdHk6IC0xXG4gICAgfSk7XG4gIH1cblxuICBbX1N5bWJvbCRmb3JdKCkge1xuICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NsaWVudClbX2NsaWVudF07XG4gIH1cblxuICBzZXRPcHRpb25zKG5ld09wdGlvbnMpIHtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NvbXBhbmlvbkNvbW11bmljYXRpb25RdWV1ZSlbX2NvbXBhbmlvbkNvbW11bmljYXRpb25RdWV1ZV0uc2V0T3B0aW9ucyhuZXdPcHRpb25zKTtcblxuICAgIHJldHVybiBzdXBlci5zZXRPcHRpb25zKG5ld09wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBDbGVhbiB1cCBhbGwgcmVmZXJlbmNlcyBmb3IgYSBmaWxlJ3MgdXBsb2FkOiB0aGUgTXVsdGlwYXJ0VXBsb2FkZXIgaW5zdGFuY2UsXG4gICAqIGFueSBldmVudHMgcmVsYXRlZCB0byB0aGUgZmlsZSwgYW5kIHRoZSBDb21wYW5pb24gV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAqXG4gICAqIFNldCBgb3B0cy5hYm9ydGAgdG8gdGVsbCBTMyB0aGF0IHRoZSBtdWx0aXBhcnQgdXBsb2FkIGlzIGNhbmNlbGxlZCBhbmQgbXVzdCBiZSByZW1vdmVkLlxuICAgKiBUaGlzIHNob3VsZCBiZSBkb25lIHdoZW4gdGhlIHVzZXIgY2FuY2VscyB0aGUgdXBsb2FkLCBub3Qgd2hlbiB0aGUgdXBsb2FkIGlzIGNvbXBsZXRlZCBvciBlcnJvcmVkLlxuICAgKi9cblxuXG4gIHJlc2V0VXBsb2FkZXJSZWZlcmVuY2VzKGZpbGVJRCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy51cGxvYWRlcnNbZmlsZUlEXSkge1xuICAgICAgdGhpcy51cGxvYWRlcnNbZmlsZUlEXS5hYm9ydCh7XG4gICAgICAgIHJlYWxseTogb3B0cy5hYm9ydCB8fCBmYWxzZVxuICAgICAgfSk7XG4gICAgICB0aGlzLnVwbG9hZGVyc1tmaWxlSURdID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy51cGxvYWRlckV2ZW50c1tmaWxlSURdKSB7XG4gICAgICB0aGlzLnVwbG9hZGVyRXZlbnRzW2ZpbGVJRF0ucmVtb3ZlKCk7XG4gICAgICB0aGlzLnVwbG9hZGVyRXZlbnRzW2ZpbGVJRF0gPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVwbG9hZGVyU29ja2V0c1tmaWxlSURdKSB7XG4gICAgICB0aGlzLnVwbG9hZGVyU29ja2V0c1tmaWxlSURdLmNsb3NlKCk7XG4gICAgICB0aGlzLnVwbG9hZGVyU29ja2V0c1tmaWxlSURdID0gbnVsbDtcbiAgICB9XG4gIH0gLy8gVE9ETzogbWFrZSB0aGlzIGEgcHJpdmF0ZSBtZXRob2QgaW4gdGhlIG5leHQgbWFqb3JcblxuXG4gIGFzc2VydEhvc3QobWV0aG9kKSB7XG4gICAgaWYgKCF0aGlzLm9wdHMuY29tcGFuaW9uVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGEgXFxgY29tcGFuaW9uVXJsXFxgIG9wdGlvbiBjb250YWluaW5nIGEgQ29tcGFuaW9uIGFkZHJlc3MsIG9yIGlmIHlvdSBhcmUgbm90IHVzaW5nIENvbXBhbmlvbiwgYSBjdXN0b20gXFxgJHttZXRob2R9XFxgIGltcGxlbWVudGF0aW9uLmApO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZU11bHRpcGFydFVwbG9hZChmaWxlLCBzaWduYWwpIHtcbiAgICB0aGlzLmFzc2VydEhvc3QoJ2NyZWF0ZU11bHRpcGFydFVwbG9hZCcpO1xuICAgIHRocm93SWZBYm9ydGVkKHNpZ25hbCk7XG4gICAgY29uc3QgbWV0YWRhdGEgPSB7fTtcbiAgICBPYmplY3Qua2V5cyhmaWxlLm1ldGEgfHwge30pLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmIChmaWxlLm1ldGFba2V5XSAhPSBudWxsKSB7XG4gICAgICAgIG1ldGFkYXRhW2tleV0gPSBmaWxlLm1ldGFba2V5XS50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NsaWVudClbX2NsaWVudF0ucG9zdCgnczMvbXVsdGlwYXJ0Jywge1xuICAgICAgZmlsZW5hbWU6IGZpbGUubmFtZSxcbiAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgIG1ldGFkYXRhXG4gICAgfSwge1xuICAgICAgc2lnbmFsXG4gICAgfSkudGhlbihhc3NlcnRTZXJ2ZXJFcnJvcik7XG4gIH1cblxuICBsaXN0UGFydHMoZmlsZSwgX3JlZjQsIHNpZ25hbCkge1xuICAgIGxldCB7XG4gICAgICBrZXksXG4gICAgICB1cGxvYWRJZFxuICAgIH0gPSBfcmVmNDtcbiAgICB0aGlzLmFzc2VydEhvc3QoJ2xpc3RQYXJ0cycpO1xuICAgIHRocm93SWZBYm9ydGVkKHNpZ25hbCk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KTtcbiAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jbGllbnQpW19jbGllbnRdLmdldChgczMvbXVsdGlwYXJ0LyR7dXBsb2FkSWR9P2tleT0ke2ZpbGVuYW1lfWAsIHtcbiAgICAgIHNpZ25hbFxuICAgIH0pLnRoZW4oYXNzZXJ0U2VydmVyRXJyb3IpO1xuICB9XG5cbiAgY29tcGxldGVNdWx0aXBhcnRVcGxvYWQoZmlsZSwgX3JlZjUsIHNpZ25hbCkge1xuICAgIGxldCB7XG4gICAgICBrZXksXG4gICAgICB1cGxvYWRJZCxcbiAgICAgIHBhcnRzXG4gICAgfSA9IF9yZWY1O1xuICAgIHRoaXMuYXNzZXJ0SG9zdCgnY29tcGxldGVNdWx0aXBhcnRVcGxvYWQnKTtcbiAgICB0aHJvd0lmQWJvcnRlZChzaWduYWwpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XG4gICAgY29uc3QgdXBsb2FkSWRFbmMgPSBlbmNvZGVVUklDb21wb25lbnQodXBsb2FkSWQpO1xuICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NsaWVudClbX2NsaWVudF0ucG9zdChgczMvbXVsdGlwYXJ0LyR7dXBsb2FkSWRFbmN9L2NvbXBsZXRlP2tleT0ke2ZpbGVuYW1lfWAsIHtcbiAgICAgIHBhcnRzXG4gICAgfSwge1xuICAgICAgc2lnbmFsXG4gICAgfSkudGhlbihhc3NlcnRTZXJ2ZXJFcnJvcik7XG4gIH1cblxuICBzaWduUGFydChmaWxlLCBfcmVmNikge1xuICAgIGxldCB7XG4gICAgICB1cGxvYWRJZCxcbiAgICAgIGtleSxcbiAgICAgIHBhcnROdW1iZXIsXG4gICAgICBzaWduYWxcbiAgICB9ID0gX3JlZjY7XG4gICAgdGhpcy5hc3NlcnRIb3N0KCdzaWduUGFydCcpO1xuICAgIHRocm93SWZBYm9ydGVkKHNpZ25hbCk7XG5cbiAgICBpZiAodXBsb2FkSWQgPT0gbnVsbCB8fCBrZXkgPT0gbnVsbCB8fCBwYXJ0TnVtYmVyID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNpZ24gd2l0aG91dCBhIGtleSwgYW4gdXBsb2FkSWQsIGFuZCBhIHBhcnROdW1iZXInKTtcbiAgICB9XG5cbiAgICBjb25zdCBmaWxlbmFtZSA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpO1xuICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NsaWVudClbX2NsaWVudF0uZ2V0KGBzMy9tdWx0aXBhcnQvJHt1cGxvYWRJZH0vJHtwYXJ0TnVtYmVyfT9rZXk9JHtmaWxlbmFtZX1gLCB7XG4gICAgICBzaWduYWxcbiAgICB9KS50aGVuKGFzc2VydFNlcnZlckVycm9yKTtcbiAgfVxuXG4gIGFib3J0TXVsdGlwYXJ0VXBsb2FkKGZpbGUsIF9yZWY3LCBzaWduYWwpIHtcbiAgICBsZXQge1xuICAgICAga2V5LFxuICAgICAgdXBsb2FkSWRcbiAgICB9ID0gX3JlZjc7XG4gICAgdGhpcy5hc3NlcnRIb3N0KCdhYm9ydE11bHRpcGFydFVwbG9hZCcpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XG4gICAgY29uc3QgdXBsb2FkSWRFbmMgPSBlbmNvZGVVUklDb21wb25lbnQodXBsb2FkSWQpO1xuICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2NsaWVudClbX2NsaWVudF0uZGVsZXRlKGBzMy9tdWx0aXBhcnQvJHt1cGxvYWRJZEVuY30/a2V5PSR7ZmlsZW5hbWV9YCwgdW5kZWZpbmVkLCB7XG4gICAgICBzaWduYWxcbiAgICB9KS50aGVuKGFzc2VydFNlcnZlckVycm9yKTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGxvYWRQYXJ0Qnl0ZXMoX3JlZjgsIGJvZHksIHNpZ25hbCkge1xuICAgIGxldCB7XG4gICAgICB1cmwsXG4gICAgICBleHBpcmVzLFxuICAgICAgaGVhZGVyc1xuICAgIH0gPSBfcmVmODtcbiAgICB0aHJvd0lmQWJvcnRlZChzaWduYWwpO1xuXG4gICAgaWYgKHVybCA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCB1cGxvYWQgdG8gYW4gdW5kZWZpbmVkIFVSTCcpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHhoci5vcGVuKCdQVVQnLCB1cmwsIHRydWUpO1xuXG4gICAgICBpZiAoaGVhZGVycykge1xuICAgICAgICBPYmplY3Qua2V5cyhoZWFkZXJzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBoZWFkZXJzW2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcblxuICAgICAgaWYgKHR5cGVvZiBleHBpcmVzID09PSAnbnVtYmVyJykge1xuICAgICAgICB4aHIudGltZW91dCA9IGV4cGlyZXMgKiAxMDAwO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbmFib3J0KCkge1xuICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgICAgc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25hYm9ydCk7XG4gICAgICB9XG5cbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIG9uYWJvcnQpO1xuICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGJvZHkub25Qcm9ncmVzcyk7XG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB7XG4gICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgcmVqZWN0KGNyZWF0ZUFib3J0RXJyb3IoKSk7XG4gICAgICB9KTtcbiAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCd0aW1lb3V0JywgKCkgPT4ge1xuICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdSZXF1ZXN0IGhhcyBleHBpcmVkJyk7XG4gICAgICAgIGVycm9yLnNvdXJjZSA9IHtcbiAgICAgICAgICBzdGF0dXM6IDQwM1xuICAgICAgICB9O1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGV2ID0+IHtcbiAgICAgICAgY2xlYW51cCgpO1xuXG4gICAgICAgIGlmIChldi50YXJnZXQuc3RhdHVzID09PSA0MDMgJiYgZXYudGFyZ2V0LnJlc3BvbnNlVGV4dC5pbmNsdWRlcygnPE1lc3NhZ2U+UmVxdWVzdCBoYXMgZXhwaXJlZDwvTWVzc2FnZT4nKSkge1xuICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdSZXF1ZXN0IGhhcyBleHBpcmVkJyk7XG4gICAgICAgICAgZXJyb3Iuc291cmNlID0gZXYudGFyZ2V0O1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2LnRhcmdldC5zdGF0dXMgPCAyMDAgfHwgZXYudGFyZ2V0LnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignTm9uIDJ4eCcpO1xuICAgICAgICAgIGVycm9yLnNvdXJjZSA9IGV2LnRhcmdldDtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJvZHkub25Qcm9ncmVzcyA9PSBudWxsID8gdm9pZCAwIDogYm9keS5vblByb2dyZXNzKGJvZHkuc2l6ZSk7IC8vIE5PVEUgVGhpcyBtdXN0IGJlIGFsbG93ZWQgYnkgQ09SUy5cblxuICAgICAgICBjb25zdCBldGFnID0gZXYudGFyZ2V0LmdldFJlc3BvbnNlSGVhZGVyKCdFVGFnJyk7XG5cbiAgICAgICAgaWYgKGV0YWcgPT09IG51bGwpIHtcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdBd3NTMy9NdWx0aXBhcnQ6IENvdWxkIG5vdCByZWFkIHRoZSBFVGFnIGhlYWRlci4gVGhpcyBsaWtlbHkgbWVhbnMgQ09SUyBpcyBub3QgY29uZmlndXJlZCBjb3JyZWN0bHkgb24gdGhlIFMzIEJ1Y2tldC4gU2VlIGh0dHBzOi8vdXBweS5pby9kb2NzL2F3cy1zMy1tdWx0aXBhcnQjUzMtQnVja2V0LUNvbmZpZ3VyYXRpb24gZm9yIGluc3RydWN0aW9ucy4nKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYm9keS5vbkNvbXBsZXRlID09IG51bGwgPyB2b2lkIDAgOiBib2R5Lm9uQ29tcGxldGUoZXRhZyk7XG4gICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgIEVUYWc6IGV0YWdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGV2ID0+IHtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignVW5rbm93biBlcnJvcicpO1xuICAgICAgICBlcnJvci5zb3VyY2UgPSBldi50YXJnZXQ7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9KTtcbiAgICAgIHhoci5zZW5kKGJvZHkpO1xuICAgIH0pO1xuICB9XG5cbiAgdXBsb2FkRmlsZShmaWxlKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBvblByb2dyZXNzID0gKGJ5dGVzVXBsb2FkZWQsIGJ5dGVzVG90YWwpID0+IHtcbiAgICAgICAgdGhpcy51cHB5LmVtaXQoJ3VwbG9hZC1wcm9ncmVzcycsIGZpbGUsIHtcbiAgICAgICAgICB1cGxvYWRlcjogdGhpcyxcbiAgICAgICAgICBieXRlc1VwbG9hZGVkLFxuICAgICAgICAgIGJ5dGVzVG90YWxcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBvbkVycm9yID0gZXJyID0+IHtcbiAgICAgICAgdGhpcy51cHB5LmxvZyhlcnIpO1xuICAgICAgICB0aGlzLnVwcHkuZW1pdCgndXBsb2FkLWVycm9yJywgZmlsZSwgZXJyKTtcbiAgICAgICAgdGhpcy5yZXNldFVwbG9hZGVyUmVmZXJlbmNlcyhmaWxlLmlkKTtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBvblN1Y2Nlc3MgPSByZXN1bHQgPT4ge1xuICAgICAgICBjb25zdCB1cGxvYWRPYmplY3QgPSB1cGxvYWQ7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcblxuICAgICAgICBjb25zdCB1cGxvYWRSZXNwID0ge1xuICAgICAgICAgIGJvZHk6IHsgLi4ucmVzdWx0XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGxvYWRVUkw6IHJlc3VsdC5sb2NhdGlvblxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlc2V0VXBsb2FkZXJSZWZlcmVuY2VzKGZpbGUuaWQpO1xuICAgICAgICBjb25zdCBjRmlsZSA9IHRoaXMudXBweS5nZXRGaWxlKGZpbGUuaWQpO1xuICAgICAgICB0aGlzLnVwcHkuZW1pdCgndXBsb2FkLXN1Y2Nlc3MnLCBjRmlsZSB8fCBmaWxlLCB1cGxvYWRSZXNwKTtcblxuICAgICAgICBpZiAocmVzdWx0LmxvY2F0aW9uKSB7XG4gICAgICAgICAgdGhpcy51cHB5LmxvZyhgRG93bmxvYWQgJHtmaWxlLm5hbWV9IGZyb20gJHtyZXN1bHQubG9jYXRpb259YCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKHVwbG9hZE9iamVjdCk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBvblBhcnRDb21wbGV0ZSA9IHBhcnQgPT4ge1xuICAgICAgICBjb25zdCBjRmlsZSA9IHRoaXMudXBweS5nZXRGaWxlKGZpbGUuaWQpO1xuXG4gICAgICAgIGlmICghY0ZpbGUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwcHkuZW1pdCgnczMtbXVsdGlwYXJ0OnBhcnQtdXBsb2FkZWQnLCBjRmlsZSwgcGFydCk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB1cGxvYWQgPSBuZXcgTXVsdGlwYXJ0VXBsb2FkZXIoZmlsZS5kYXRhLCB7XG4gICAgICAgIC8vIC5iaW5kIHRvIHBhc3MgdGhlIGZpbGUgb2JqZWN0IHRvIGVhY2ggaGFuZGxlci5cbiAgICAgICAgY29tcGFuaW9uQ29tbTogX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jb21wYW5pb25Db21tdW5pY2F0aW9uUXVldWUpW19jb21wYW5pb25Db21tdW5pY2F0aW9uUXVldWVdLFxuICAgICAgICBsb2c6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMudXBweS5sb2coLi4uYXJndW1lbnRzKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2h1bmtTaXplOiB0aGlzLm9wdHMuZ2V0Q2h1bmtTaXplID8gdGhpcy5vcHRzLmdldENodW5rU2l6ZS5iaW5kKHRoaXMpIDogbnVsbCxcbiAgICAgICAgb25Qcm9ncmVzcyxcbiAgICAgICAgb25FcnJvcixcbiAgICAgICAgb25TdWNjZXNzLFxuICAgICAgICBvblBhcnRDb21wbGV0ZSxcbiAgICAgICAgZmlsZSxcbiAgICAgICAgLi4uZmlsZS5zM011bHRpcGFydFxuICAgICAgfSk7XG4gICAgICB0aGlzLnVwbG9hZGVyc1tmaWxlLmlkXSA9IHVwbG9hZDtcbiAgICAgIHRoaXMudXBsb2FkZXJFdmVudHNbZmlsZS5pZF0gPSBuZXcgRXZlbnRUcmFja2VyKHRoaXMudXBweSk7XG4gICAgICB0aGlzLm9uRmlsZVJlbW92ZShmaWxlLmlkLCByZW1vdmVkID0+IHtcbiAgICAgICAgdXBsb2FkLmFib3J0KCk7XG4gICAgICAgIHRoaXMucmVzZXRVcGxvYWRlclJlZmVyZW5jZXMoZmlsZS5pZCwge1xuICAgICAgICAgIGFib3J0OiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXNvbHZlKGB1cGxvYWQgJHtyZW1vdmVkLmlkfSB3YXMgcmVtb3ZlZGApO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uQ2FuY2VsQWxsKGZpbGUuaWQsIGZ1bmN0aW9uIChfdGVtcCkge1xuICAgICAgICBsZXQge1xuICAgICAgICAgIHJlYXNvblxuICAgICAgICB9ID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXA7XG5cbiAgICAgICAgaWYgKHJlYXNvbiA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgdXBsb2FkLmFib3J0KCk7XG5cbiAgICAgICAgICBfdGhpcy5yZXNldFVwbG9hZGVyUmVmZXJlbmNlcyhmaWxlLmlkLCB7XG4gICAgICAgICAgICBhYm9ydDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzb2x2ZShgdXBsb2FkICR7ZmlsZS5pZH0gd2FzIGNhbmNlbGVkYCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub25GaWxlUGF1c2UoZmlsZS5pZCwgaXNQYXVzZWQgPT4ge1xuICAgICAgICBpZiAoaXNQYXVzZWQpIHtcbiAgICAgICAgICB1cGxvYWQucGF1c2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGxvYWQuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLm9uUGF1c2VBbGwoZmlsZS5pZCwgKCkgPT4ge1xuICAgICAgICB1cGxvYWQucGF1c2UoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vblJlc3VtZUFsbChmaWxlLmlkLCAoKSA9PiB7XG4gICAgICAgIHVwbG9hZC5zdGFydCgpO1xuICAgICAgfSk7IC8vIERvbid0IGRvdWJsZS1lbWl0IHVwbG9hZC1zdGFydGVkIGZvciBHb2xkZW4gUmV0cmlldmVyLXJlc3RvcmVkIGZpbGVzIHRoYXQgd2VyZSBhbHJlYWR5IHN0YXJ0ZWRcblxuICAgICAgaWYgKCFmaWxlLnByb2dyZXNzLnVwbG9hZFN0YXJ0ZWQgfHwgIWZpbGUuaXNSZXN0b3JlZCkge1xuICAgICAgICB1cGxvYWQuc3RhcnQoKTtcbiAgICAgICAgdGhpcy51cHB5LmVtaXQoJ3VwbG9hZC1zdGFydGVkJywgZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyB1cGxvYWRSZW1vdGUoZmlsZSkge1xuICAgIHRoaXMucmVzZXRVcGxvYWRlclJlZmVyZW5jZXMoZmlsZS5pZCk7IC8vIERvbid0IGRvdWJsZS1lbWl0IHVwbG9hZC1zdGFydGVkIGZvciBHb2xkZW4gUmV0cmlldmVyLXJlc3RvcmVkIGZpbGVzIHRoYXQgd2VyZSBhbHJlYWR5IHN0YXJ0ZWRcblxuICAgIGlmICghZmlsZS5wcm9ncmVzcy51cGxvYWRTdGFydGVkIHx8ICFmaWxlLmlzUmVzdG9yZWQpIHtcbiAgICAgIHRoaXMudXBweS5lbWl0KCd1cGxvYWQtc3RhcnRlZCcsIGZpbGUpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpZiAoZmlsZS5zZXJ2ZXJUb2tlbikge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0VG9TZXJ2ZXJTb2NrZXQoZmlsZSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNlcnZlclRva2VuID0gYXdhaXQgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9xdWV1ZVJlcXVlc3RTb2NrZXRUb2tlbilbX3F1ZXVlUmVxdWVzdFNvY2tldFRva2VuXShmaWxlKTtcbiAgICAgIHRoaXMudXBweS5zZXRGaWxlU3RhdGUoZmlsZS5pZCwge1xuICAgICAgICBzZXJ2ZXJUb2tlblxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcy5jb25uZWN0VG9TZXJ2ZXJTb2NrZXQodGhpcy51cHB5LmdldEZpbGUoZmlsZS5pZCkpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy51cHB5LmVtaXQoJ3VwbG9hZC1lcnJvcicsIGZpbGUsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29ubmVjdFRvU2VydmVyU29ja2V0KGZpbGUpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgcXVldWVkUmVxdWVzdDtcbiAgICAgIGNvbnN0IHRva2VuID0gZmlsZS5zZXJ2ZXJUb2tlbjtcbiAgICAgIGNvbnN0IGhvc3QgPSBnZXRTb2NrZXRIb3N0KGZpbGUucmVtb3RlLmNvbXBhbmlvblVybCk7XG4gICAgICBjb25zdCBzb2NrZXQgPSBuZXcgU29ja2V0KHtcbiAgICAgICAgdGFyZ2V0OiBgJHtob3N0fS9hcGkvJHt0b2tlbn1gXG4gICAgICB9KTtcbiAgICAgIHRoaXMudXBsb2FkZXJTb2NrZXRzW2ZpbGUuaWRdID0gc29ja2V0O1xuICAgICAgdGhpcy51cGxvYWRlckV2ZW50c1tmaWxlLmlkXSA9IG5ldyBFdmVudFRyYWNrZXIodGhpcy51cHB5KTtcbiAgICAgIHRoaXMub25GaWxlUmVtb3ZlKGZpbGUuaWQsICgpID0+IHtcbiAgICAgICAgcXVldWVkUmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICBzb2NrZXQuc2VuZCgnY2FuY2VsJywge30pO1xuICAgICAgICB0aGlzLnJlc2V0VXBsb2FkZXJSZWZlcmVuY2VzKGZpbGUuaWQsIHtcbiAgICAgICAgICBhYm9ydDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzb2x2ZShgdXBsb2FkICR7ZmlsZS5pZH0gd2FzIHJlbW92ZWRgKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbkZpbGVQYXVzZShmaWxlLmlkLCBpc1BhdXNlZCA9PiB7XG4gICAgICAgIGlmIChpc1BhdXNlZCkge1xuICAgICAgICAgIC8vIFJlbW92ZSB0aGlzIGZpbGUgZnJvbSB0aGUgcXVldWUgc28gYW5vdGhlciBmaWxlIGNhbiBzdGFydCBpbiBpdHMgcGxhY2UuXG4gICAgICAgICAgcXVldWVkUmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICAgIHNvY2tldC5zZW5kKCdwYXVzZScsIHt9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZXN1bWluZyBhbiB1cGxvYWQgc2hvdWxkIGJlIHF1ZXVlZCwgZWxzZSB5b3UgY291bGQgcGF1c2UgYW5kIHRoZW5cbiAgICAgICAgICAvLyByZXN1bWUgYSBxdWV1ZWQgdXBsb2FkIHRvIG1ha2UgaXQgc2tpcCB0aGUgcXVldWUuXG4gICAgICAgICAgcXVldWVkUmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICAgIHF1ZXVlZFJlcXVlc3QgPSB0aGlzLnJlcXVlc3RzLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICBzb2NrZXQuc2VuZCgncmVzdW1lJywge30pO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHt9O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMub25QYXVzZUFsbChmaWxlLmlkLCAoKSA9PiB7XG4gICAgICAgIHF1ZXVlZFJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgc29ja2V0LnNlbmQoJ3BhdXNlJywge30pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uQ2FuY2VsQWxsKGZpbGUuaWQsIGZ1bmN0aW9uIChfdGVtcDIpIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICByZWFzb25cbiAgICAgICAgfSA9IF90ZW1wMiA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDI7XG5cbiAgICAgICAgaWYgKHJlYXNvbiA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgcXVldWVkUmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICAgIHNvY2tldC5zZW5kKCdjYW5jZWwnLCB7fSk7XG5cbiAgICAgICAgICBfdGhpczIucmVzZXRVcGxvYWRlclJlZmVyZW5jZXMoZmlsZS5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKGB1cGxvYWQgJHtmaWxlLmlkfSB3YXMgY2FuY2VsZWRgKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vblJlc3VtZUFsbChmaWxlLmlkLCAoKSA9PiB7XG4gICAgICAgIHF1ZXVlZFJlcXVlc3QuYWJvcnQoKTtcblxuICAgICAgICBpZiAoZmlsZS5lcnJvcikge1xuICAgICAgICAgIHNvY2tldC5zZW5kKCdwYXVzZScsIHt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHF1ZXVlZFJlcXVlc3QgPSB0aGlzLnJlcXVlc3RzLnJ1bigoKSA9PiB7XG4gICAgICAgICAgc29ja2V0LnNlbmQoJ3Jlc3VtZScsIHt9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub25SZXRyeShmaWxlLmlkLCAoKSA9PiB7XG4gICAgICAgIC8vIE9ubHkgZG8gdGhlIHJldHJ5IGlmIHRoZSB1cGxvYWQgaXMgYWN0dWFsbHkgaW4gcHJvZ3Jlc3M7XG4gICAgICAgIC8vIGVsc2Ugd2UgY291bGQgdHJ5IHRvIHNlbmQgdGhlc2UgbWVzc2FnZXMgd2hlbiB0aGUgdXBsb2FkIGlzIHN0aWxsIHF1ZXVlZC5cbiAgICAgICAgLy8gV2UgbWF5IG5lZWQgYSBiZXR0ZXIgY2hlY2sgZm9yIHRoaXMgc2luY2UgdGhlIHNvY2tldCBtYXkgYWxzbyBiZSBjbG9zZWRcbiAgICAgICAgLy8gZm9yIG90aGVyIHJlYXNvbnMsIGxpa2UgbmV0d29yayBmYWlsdXJlcy5cbiAgICAgICAgaWYgKHNvY2tldC5pc09wZW4pIHtcbiAgICAgICAgICBzb2NrZXQuc2VuZCgncGF1c2UnLCB7fSk7XG4gICAgICAgICAgc29ja2V0LnNlbmQoJ3Jlc3VtZScsIHt9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLm9uUmV0cnlBbGwoZmlsZS5pZCwgKCkgPT4ge1xuICAgICAgICBpZiAoc29ja2V0LmlzT3Blbikge1xuICAgICAgICAgIHNvY2tldC5zZW5kKCdwYXVzZScsIHt9KTtcbiAgICAgICAgICBzb2NrZXQuc2VuZCgncmVzdW1lJywge30pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHNvY2tldC5vbigncHJvZ3Jlc3MnLCBwcm9ncmVzc0RhdGEgPT4gZW1pdFNvY2tldFByb2dyZXNzKHRoaXMsIHByb2dyZXNzRGF0YSwgZmlsZSkpO1xuICAgICAgc29ja2V0Lm9uKCdlcnJvcicsIGVyckRhdGEgPT4ge1xuICAgICAgICB0aGlzLnVwcHkuZW1pdCgndXBsb2FkLWVycm9yJywgZmlsZSwgbmV3IEVycm9yKGVyckRhdGEuZXJyb3IpKTtcbiAgICAgICAgdGhpcy5yZXNldFVwbG9hZGVyUmVmZXJlbmNlcyhmaWxlLmlkKTtcbiAgICAgICAgcXVldWVkUmVxdWVzdC5kb25lKCk7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXJyRGF0YS5lcnJvcikpO1xuICAgICAgfSk7XG4gICAgICBzb2NrZXQub24oJ3N1Y2Nlc3MnLCBkYXRhID0+IHtcbiAgICAgICAgY29uc3QgdXBsb2FkUmVzcCA9IHtcbiAgICAgICAgICB1cGxvYWRVUkw6IGRhdGEudXJsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBweS5lbWl0KCd1cGxvYWQtc3VjY2VzcycsIGZpbGUsIHVwbG9hZFJlc3ApO1xuICAgICAgICB0aGlzLnJlc2V0VXBsb2FkZXJSZWZlcmVuY2VzKGZpbGUuaWQpO1xuICAgICAgICBxdWV1ZWRSZXF1ZXN0LmRvbmUoKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgICBxdWV1ZWRSZXF1ZXN0ID0gdGhpcy5yZXF1ZXN0cy5ydW4oKCkgPT4ge1xuICAgICAgICBpZiAoZmlsZS5pc1BhdXNlZCkge1xuICAgICAgICAgIHNvY2tldC5zZW5kKCdwYXVzZScsIHt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoKSA9PiB7fTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgdXBsb2FkKGZpbGVJRHMpIHtcbiAgICBpZiAoZmlsZUlEcy5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBmaWxlSURzLm1hcChpZCA9PiB7XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy51cHB5LmdldEZpbGUoaWQpO1xuXG4gICAgICBpZiAoZmlsZS5pc1JlbW90ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRSZW1vdGUoZmlsZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnVwbG9hZEZpbGUoZmlsZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgfVxuXG4gIG9uRmlsZVJlbW92ZShmaWxlSUQsIGNiKSB7XG4gICAgdGhpcy51cGxvYWRlckV2ZW50c1tmaWxlSURdLm9uKCdmaWxlLXJlbW92ZWQnLCBmaWxlID0+IHtcbiAgICAgIGlmIChmaWxlSUQgPT09IGZpbGUuaWQpIGNiKGZpbGUuaWQpO1xuICAgIH0pO1xuICB9XG5cbiAgb25GaWxlUGF1c2UoZmlsZUlELCBjYikge1xuICAgIHRoaXMudXBsb2FkZXJFdmVudHNbZmlsZUlEXS5vbigndXBsb2FkLXBhdXNlJywgKHRhcmdldEZpbGVJRCwgaXNQYXVzZWQpID0+IHtcbiAgICAgIGlmIChmaWxlSUQgPT09IHRhcmdldEZpbGVJRCkge1xuICAgICAgICBjYihpc1BhdXNlZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvblJldHJ5KGZpbGVJRCwgY2IpIHtcbiAgICB0aGlzLnVwbG9hZGVyRXZlbnRzW2ZpbGVJRF0ub24oJ3VwbG9hZC1yZXRyeScsIHRhcmdldEZpbGVJRCA9PiB7XG4gICAgICBpZiAoZmlsZUlEID09PSB0YXJnZXRGaWxlSUQpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG9uUmV0cnlBbGwoZmlsZUlELCBjYikge1xuICAgIHRoaXMudXBsb2FkZXJFdmVudHNbZmlsZUlEXS5vbigncmV0cnktYWxsJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnVwcHkuZ2V0RmlsZShmaWxlSUQpKSByZXR1cm47XG4gICAgICBjYigpO1xuICAgIH0pO1xuICB9XG5cbiAgb25QYXVzZUFsbChmaWxlSUQsIGNiKSB7XG4gICAgdGhpcy51cGxvYWRlckV2ZW50c1tmaWxlSURdLm9uKCdwYXVzZS1hbGwnLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudXBweS5nZXRGaWxlKGZpbGVJRCkpIHJldHVybjtcbiAgICAgIGNiKCk7XG4gICAgfSk7XG4gIH1cblxuICBvbkNhbmNlbEFsbChmaWxlSUQsIGV2ZW50SGFuZGxlcikge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdGhpcy51cGxvYWRlckV2ZW50c1tmaWxlSURdLm9uKCdjYW5jZWwtYWxsJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFfdGhpczMudXBweS5nZXRGaWxlKGZpbGVJRCkpIHJldHVybjtcbiAgICAgIGV2ZW50SGFuZGxlciguLi5hcmd1bWVudHMpO1xuICAgIH0pO1xuICB9XG5cbiAgb25SZXN1bWVBbGwoZmlsZUlELCBjYikge1xuICAgIHRoaXMudXBsb2FkZXJFdmVudHNbZmlsZUlEXS5vbigncmVzdW1lLWFsbCcsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy51cHB5LmdldEZpbGUoZmlsZUlEKSkgcmV0dXJuO1xuICAgICAgY2IoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGluc3RhbGwoKSB7XG4gICAgY29uc3Qge1xuICAgICAgY2FwYWJpbGl0aWVzXG4gICAgfSA9IHRoaXMudXBweS5nZXRTdGF0ZSgpO1xuICAgIHRoaXMudXBweS5zZXRTdGF0ZSh7XG4gICAgICBjYXBhYmlsaXRpZXM6IHsgLi4uY2FwYWJpbGl0aWVzLFxuICAgICAgICByZXN1bWFibGVVcGxvYWRzOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy51cHB5LmFkZFByZVByb2Nlc3NvcihfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3NldENvbXBhbmlvbkhlYWRlcnMpW19zZXRDb21wYW5pb25IZWFkZXJzXSk7XG4gICAgdGhpcy51cHB5LmFkZFVwbG9hZGVyKHRoaXMudXBsb2FkKTtcbiAgfVxuXG4gIHVuaW5zdGFsbCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBjYXBhYmlsaXRpZXNcbiAgICB9ID0gdGhpcy51cHB5LmdldFN0YXRlKCk7XG4gICAgdGhpcy51cHB5LnNldFN0YXRlKHtcbiAgICAgIGNhcGFiaWxpdGllczogeyAuLi5jYXBhYmlsaXRpZXMsXG4gICAgICAgIHJlc3VtYWJsZVVwbG9hZHM6IGZhbHNlXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy51cHB5LnJlbW92ZVByZVByb2Nlc3NvcihfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3NldENvbXBhbmlvbkhlYWRlcnMpW19zZXRDb21wYW5pb25IZWFkZXJzXSk7XG4gICAgdGhpcy51cHB5LnJlbW92ZVVwbG9hZGVyKHRoaXMudXBsb2FkKTtcbiAgfVxuXG59XG5Bd3NTM011bHRpcGFydC5WRVJTSU9OID0gcGFja2FnZUpzb24udmVyc2lvbjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@uppy/aws-s3-multipart/lib/index.js\n");

/***/ }),

/***/ "./node_modules/@uppy/companion-client/lib/AuthError.js":
/*!**************************************************************!*\
  !*** ./node_modules/@uppy/companion-client/lib/AuthError.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n\n\nclass AuthError extends Error {\n  constructor() {\n    super('Authorization required');\n    this.name = 'AuthError';\n    this.isAuthError = true;\n  }\n\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AuthError);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvY29tcGFuaW9uLWNsaWVudC9saWIvQXV0aEVycm9yLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsaUVBQWUsU0FBUyIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0B1cHB5L2NvbXBhbmlvbi1jbGllbnQvbGliL0F1dGhFcnJvci5qcz9hYTIxIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY2xhc3MgQXV0aEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignQXV0aG9yaXphdGlvbiByZXF1aXJlZCcpO1xuICAgIHRoaXMubmFtZSA9ICdBdXRoRXJyb3InO1xuICAgIHRoaXMuaXNBdXRoRXJyb3IgPSB0cnVlO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXV0aEVycm9yOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@uppy/companion-client/lib/AuthError.js\n");

/***/ }),

/***/ "./node_modules/@uppy/companion-client/lib/Provider.js":
/*!*************************************************************!*\
  !*** ./node_modules/@uppy/companion-client/lib/Provider.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Provider)\n/* harmony export */ });\n/* harmony import */ var _RequestClient_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RequestClient.js */ \"./node_modules/@uppy/companion-client/lib/RequestClient.js\");\n/* harmony import */ var _tokenStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tokenStorage.js */ \"./node_modules/@uppy/companion-client/lib/tokenStorage.js\");\n\n\n\n\n\nconst getName = id => {\n  return id.split('-').map(s => s.charAt(0).toUpperCase() + s.slice(1)).join(' ');\n};\n\nclass Provider extends _RequestClient_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(uppy, opts) {\n    super(uppy, opts);\n    this.provider = opts.provider;\n    this.id = this.provider;\n    this.name = this.opts.name || getName(this.id);\n    this.pluginId = this.opts.pluginId;\n    this.tokenKey = `companion-${this.pluginId}-auth-token`;\n    this.companionKeysParams = this.opts.companionKeysParams;\n    this.preAuthToken = null;\n  }\n\n  async headers() {\n    const [headers, token] = await Promise.all([super.headers(), this.getAuthToken()]);\n    const authHeaders = {};\n\n    if (token) {\n      authHeaders['uppy-auth-token'] = token;\n    }\n\n    if (this.companionKeysParams) {\n      authHeaders['uppy-credentials-params'] = btoa(JSON.stringify({\n        params: this.companionKeysParams\n      }));\n    }\n\n    return { ...headers,\n      ...authHeaders\n    };\n  }\n\n  onReceiveResponse(response) {\n    super.onReceiveResponse(response);\n    const plugin = this.uppy.getPlugin(this.pluginId);\n    const oldAuthenticated = plugin.getPluginState().authenticated;\n    const authenticated = oldAuthenticated ? response.status !== 401 : response.status < 400;\n    plugin.setPluginState({\n      authenticated\n    });\n    return response;\n  }\n\n  setAuthToken(token) {\n    return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey, token);\n  }\n\n  getAuthToken() {\n    return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey);\n  }\n  /**\n   * Ensure we have a preauth token if necessary. Attempts to fetch one if we don't,\n   * or rejects if loading one fails.\n   */\n\n\n  async ensurePreAuth() {\n    if (this.companionKeysParams && !this.preAuthToken) {\n      await this.fetchPreAuthToken();\n\n      if (!this.preAuthToken) {\n        throw new Error('Could not load authentication data required for third-party login. Please try again later.');\n      }\n    }\n  }\n\n  authUrl(queries) {\n    if (queries === void 0) {\n      queries = {};\n    }\n\n    const params = new URLSearchParams(queries);\n\n    if (this.preAuthToken) {\n      params.set('uppyPreAuthToken', this.preAuthToken);\n    }\n\n    return `${this.hostname}/${this.id}/connect?${params}`;\n  }\n\n  fileUrl(id) {\n    return `${this.hostname}/${this.id}/get/${id}`;\n  }\n\n  async fetchPreAuthToken() {\n    if (!this.companionKeysParams) {\n      return;\n    }\n\n    try {\n      const res = await this.post(`${this.id}/preauth/`, {\n        params: this.companionKeysParams\n      });\n      this.preAuthToken = res.token;\n    } catch (err) {\n      this.uppy.log(`[CompanionClient] unable to fetch preAuthToken ${err}`, 'warning');\n    }\n  }\n\n  list(directory) {\n    return this.get(`${this.id}/list/${directory || ''}`);\n  }\n\n  logout() {\n    return this.get(`${this.id}/logout`).then(response => Promise.all([response, this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey)])).then(_ref => {\n      let [response] = _ref;\n      return response;\n    });\n  }\n\n  static initPlugin(plugin, opts, defaultOpts) {\n    /* eslint-disable no-param-reassign */\n    plugin.type = 'acquirer';\n    plugin.files = [];\n\n    if (defaultOpts) {\n      plugin.opts = { ...defaultOpts,\n        ...opts\n      };\n    }\n\n    if (opts.serverUrl || opts.serverPattern) {\n      throw new Error('`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`');\n    }\n\n    if (opts.companionAllowedHosts) {\n      const pattern = opts.companionAllowedHosts; // validate companionAllowedHosts param\n\n      if (typeof pattern !== 'string' && !Array.isArray(pattern) && !(pattern instanceof RegExp)) {\n        throw new TypeError(`${plugin.id}: the option \"companionAllowedHosts\" must be one of string, Array, RegExp`);\n      }\n\n      plugin.opts.companionAllowedHosts = pattern;\n    } else if (/^(?!https?:\\/\\/).*$/i.test(opts.companionUrl)) {\n      // does not start with https://\n      plugin.opts.companionAllowedHosts = `https://${opts.companionUrl.replace(/^\\/\\//, '')}`;\n    } else {\n      plugin.opts.companionAllowedHosts = new URL(opts.companionUrl).origin;\n    }\n\n    plugin.storage = plugin.opts.storage || _tokenStorage_js__WEBPACK_IMPORTED_MODULE_1__;\n    /* eslint-enable no-param-reassign */\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvY29tcGFuaW9uLWNsaWVudC9saWIvUHJvdmlkZXIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWE7O0FBRWtDO0FBQ0c7O0FBRWxEO0FBQ0E7QUFDQTs7QUFFZSx1QkFBdUIseURBQWE7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGNBQWM7QUFDL0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLGNBQWMsR0FBRyxRQUFRLFdBQVcsT0FBTztBQUN6RDs7QUFFQTtBQUNBLGNBQWMsY0FBYyxHQUFHLFFBQVEsT0FBTyxHQUFHO0FBQ2pEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUNBQXFDLFFBQVE7QUFDN0M7QUFDQSxPQUFPO0FBQ1A7QUFDQSxNQUFNO0FBQ04sc0VBQXNFLElBQUk7QUFDMUU7QUFDQTs7QUFFQTtBQUNBLHVCQUF1QixRQUFRLFFBQVEsZ0JBQWdCO0FBQ3ZEOztBQUVBO0FBQ0EsdUJBQXVCLFFBQVE7QUFDL0I7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0RBQWtEOztBQUVsRDtBQUNBLCtCQUErQixVQUFVO0FBQ3pDOztBQUVBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EscURBQXFELHVDQUF1QztBQUM1RixNQUFNO0FBQ047QUFDQTs7QUFFQSw0Q0FBNEMsNkNBQVk7QUFDeEQ7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0B1cHB5L2NvbXBhbmlvbi1jbGllbnQvbGliL1Byb3ZpZGVyLmpzPzkzYjkiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUmVxdWVzdENsaWVudCBmcm9tICcuL1JlcXVlc3RDbGllbnQuanMnO1xuaW1wb3J0ICogYXMgdG9rZW5TdG9yYWdlIGZyb20gJy4vdG9rZW5TdG9yYWdlLmpzJztcblxuY29uc3QgZ2V0TmFtZSA9IGlkID0+IHtcbiAgcmV0dXJuIGlkLnNwbGl0KCctJykubWFwKHMgPT4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkpLmpvaW4oJyAnKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb3ZpZGVyIGV4dGVuZHMgUmVxdWVzdENsaWVudCB7XG4gIGNvbnN0cnVjdG9yKHVwcHksIG9wdHMpIHtcbiAgICBzdXBlcih1cHB5LCBvcHRzKTtcbiAgICB0aGlzLnByb3ZpZGVyID0gb3B0cy5wcm92aWRlcjtcbiAgICB0aGlzLmlkID0gdGhpcy5wcm92aWRlcjtcbiAgICB0aGlzLm5hbWUgPSB0aGlzLm9wdHMubmFtZSB8fCBnZXROYW1lKHRoaXMuaWQpO1xuICAgIHRoaXMucGx1Z2luSWQgPSB0aGlzLm9wdHMucGx1Z2luSWQ7XG4gICAgdGhpcy50b2tlbktleSA9IGBjb21wYW5pb24tJHt0aGlzLnBsdWdpbklkfS1hdXRoLXRva2VuYDtcbiAgICB0aGlzLmNvbXBhbmlvbktleXNQYXJhbXMgPSB0aGlzLm9wdHMuY29tcGFuaW9uS2V5c1BhcmFtcztcbiAgICB0aGlzLnByZUF1dGhUb2tlbiA9IG51bGw7XG4gIH1cblxuICBhc3luYyBoZWFkZXJzKCkge1xuICAgIGNvbnN0IFtoZWFkZXJzLCB0b2tlbl0gPSBhd2FpdCBQcm9taXNlLmFsbChbc3VwZXIuaGVhZGVycygpLCB0aGlzLmdldEF1dGhUb2tlbigpXSk7XG4gICAgY29uc3QgYXV0aEhlYWRlcnMgPSB7fTtcblxuICAgIGlmICh0b2tlbikge1xuICAgICAgYXV0aEhlYWRlcnNbJ3VwcHktYXV0aC10b2tlbiddID0gdG9rZW47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29tcGFuaW9uS2V5c1BhcmFtcykge1xuICAgICAgYXV0aEhlYWRlcnNbJ3VwcHktY3JlZGVudGlhbHMtcGFyYW1zJ10gPSBidG9hKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgcGFyYW1zOiB0aGlzLmNvbXBhbmlvbktleXNQYXJhbXNcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyAuLi5oZWFkZXJzLFxuICAgICAgLi4uYXV0aEhlYWRlcnNcbiAgICB9O1xuICB9XG5cbiAgb25SZWNlaXZlUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICBzdXBlci5vblJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgY29uc3QgcGx1Z2luID0gdGhpcy51cHB5LmdldFBsdWdpbih0aGlzLnBsdWdpbklkKTtcbiAgICBjb25zdCBvbGRBdXRoZW50aWNhdGVkID0gcGx1Z2luLmdldFBsdWdpblN0YXRlKCkuYXV0aGVudGljYXRlZDtcbiAgICBjb25zdCBhdXRoZW50aWNhdGVkID0gb2xkQXV0aGVudGljYXRlZCA/IHJlc3BvbnNlLnN0YXR1cyAhPT0gNDAxIDogcmVzcG9uc2Uuc3RhdHVzIDwgNDAwO1xuICAgIHBsdWdpbi5zZXRQbHVnaW5TdGF0ZSh7XG4gICAgICBhdXRoZW50aWNhdGVkXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgc2V0QXV0aFRva2VuKHRva2VuKSB7XG4gICAgcmV0dXJuIHRoaXMudXBweS5nZXRQbHVnaW4odGhpcy5wbHVnaW5JZCkuc3RvcmFnZS5zZXRJdGVtKHRoaXMudG9rZW5LZXksIHRva2VuKTtcbiAgfVxuXG4gIGdldEF1dGhUb2tlbigpIHtcbiAgICByZXR1cm4gdGhpcy51cHB5LmdldFBsdWdpbih0aGlzLnBsdWdpbklkKS5zdG9yYWdlLmdldEl0ZW0odGhpcy50b2tlbktleSk7XG4gIH1cbiAgLyoqXG4gICAqIEVuc3VyZSB3ZSBoYXZlIGEgcHJlYXV0aCB0b2tlbiBpZiBuZWNlc3NhcnkuIEF0dGVtcHRzIHRvIGZldGNoIG9uZSBpZiB3ZSBkb24ndCxcbiAgICogb3IgcmVqZWN0cyBpZiBsb2FkaW5nIG9uZSBmYWlscy5cbiAgICovXG5cblxuICBhc3luYyBlbnN1cmVQcmVBdXRoKCkge1xuICAgIGlmICh0aGlzLmNvbXBhbmlvbktleXNQYXJhbXMgJiYgIXRoaXMucHJlQXV0aFRva2VuKSB7XG4gICAgICBhd2FpdCB0aGlzLmZldGNoUHJlQXV0aFRva2VuKCk7XG5cbiAgICAgIGlmICghdGhpcy5wcmVBdXRoVG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgbG9hZCBhdXRoZW50aWNhdGlvbiBkYXRhIHJlcXVpcmVkIGZvciB0aGlyZC1wYXJ0eSBsb2dpbi4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhdXRoVXJsKHF1ZXJpZXMpIHtcbiAgICBpZiAocXVlcmllcyA9PT0gdm9pZCAwKSB7XG4gICAgICBxdWVyaWVzID0ge307XG4gICAgfVxuXG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyaWVzKTtcblxuICAgIGlmICh0aGlzLnByZUF1dGhUb2tlbikge1xuICAgICAgcGFyYW1zLnNldCgndXBweVByZUF1dGhUb2tlbicsIHRoaXMucHJlQXV0aFRva2VuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYCR7dGhpcy5ob3N0bmFtZX0vJHt0aGlzLmlkfS9jb25uZWN0PyR7cGFyYW1zfWA7XG4gIH1cblxuICBmaWxlVXJsKGlkKSB7XG4gICAgcmV0dXJuIGAke3RoaXMuaG9zdG5hbWV9LyR7dGhpcy5pZH0vZ2V0LyR7aWR9YDtcbiAgfVxuXG4gIGFzeW5jIGZldGNoUHJlQXV0aFRva2VuKCkge1xuICAgIGlmICghdGhpcy5jb21wYW5pb25LZXlzUGFyYW1zKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucG9zdChgJHt0aGlzLmlkfS9wcmVhdXRoL2AsIHtcbiAgICAgICAgcGFyYW1zOiB0aGlzLmNvbXBhbmlvbktleXNQYXJhbXNcbiAgICAgIH0pO1xuICAgICAgdGhpcy5wcmVBdXRoVG9rZW4gPSByZXMudG9rZW47XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLnVwcHkubG9nKGBbQ29tcGFuaW9uQ2xpZW50XSB1bmFibGUgdG8gZmV0Y2ggcHJlQXV0aFRva2VuICR7ZXJyfWAsICd3YXJuaW5nJyk7XG4gICAgfVxuICB9XG5cbiAgbGlzdChkaXJlY3RvcnkpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYCR7dGhpcy5pZH0vbGlzdC8ke2RpcmVjdG9yeSB8fCAnJ31gKTtcbiAgfVxuXG4gIGxvZ291dCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYCR7dGhpcy5pZH0vbG9nb3V0YCkudGhlbihyZXNwb25zZSA9PiBQcm9taXNlLmFsbChbcmVzcG9uc2UsIHRoaXMudXBweS5nZXRQbHVnaW4odGhpcy5wbHVnaW5JZCkuc3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMudG9rZW5LZXkpXSkpLnRoZW4oX3JlZiA9PiB7XG4gICAgICBsZXQgW3Jlc3BvbnNlXSA9IF9yZWY7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgaW5pdFBsdWdpbihwbHVnaW4sIG9wdHMsIGRlZmF1bHRPcHRzKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgICBwbHVnaW4udHlwZSA9ICdhY3F1aXJlcic7XG4gICAgcGx1Z2luLmZpbGVzID0gW107XG5cbiAgICBpZiAoZGVmYXVsdE9wdHMpIHtcbiAgICAgIHBsdWdpbi5vcHRzID0geyAuLi5kZWZhdWx0T3B0cyxcbiAgICAgICAgLi4ub3B0c1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAob3B0cy5zZXJ2ZXJVcmwgfHwgb3B0cy5zZXJ2ZXJQYXR0ZXJuKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BzZXJ2ZXJVcmxgIGFuZCBgc2VydmVyUGF0dGVybmAgaGF2ZSBiZWVuIHJlbmFtZWQgdG8gYGNvbXBhbmlvblVybGAgYW5kIGBjb21wYW5pb25BbGxvd2VkSG9zdHNgIHJlc3BlY3RpdmVseSBpbiB0aGUgMC4zMC41IHJlbGVhc2UuIFBsZWFzZSBjb25zdWx0IHRoZSBkb2NzIChmb3IgZXhhbXBsZSwgaHR0cHM6Ly91cHB5LmlvL2RvY3MvaW5zdGFncmFtLyBmb3IgdGhlIEluc3RhZ3JhbSBwbHVnaW4pIGFuZCB1c2UgdGhlIHVwZGF0ZWQgb3B0aW9ucy5gJyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMuY29tcGFuaW9uQWxsb3dlZEhvc3RzKSB7XG4gICAgICBjb25zdCBwYXR0ZXJuID0gb3B0cy5jb21wYW5pb25BbGxvd2VkSG9zdHM7IC8vIHZhbGlkYXRlIGNvbXBhbmlvbkFsbG93ZWRIb3N0cyBwYXJhbVxuXG4gICAgICBpZiAodHlwZW9mIHBhdHRlcm4gIT09ICdzdHJpbmcnICYmICFBcnJheS5pc0FycmF5KHBhdHRlcm4pICYmICEocGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJHtwbHVnaW4uaWR9OiB0aGUgb3B0aW9uIFwiY29tcGFuaW9uQWxsb3dlZEhvc3RzXCIgbXVzdCBiZSBvbmUgb2Ygc3RyaW5nLCBBcnJheSwgUmVnRXhwYCk7XG4gICAgICB9XG5cbiAgICAgIHBsdWdpbi5vcHRzLmNvbXBhbmlvbkFsbG93ZWRIb3N0cyA9IHBhdHRlcm47XG4gICAgfSBlbHNlIGlmICgvXig/IWh0dHBzPzpcXC9cXC8pLiokL2kudGVzdChvcHRzLmNvbXBhbmlvblVybCkpIHtcbiAgICAgIC8vIGRvZXMgbm90IHN0YXJ0IHdpdGggaHR0cHM6Ly9cbiAgICAgIHBsdWdpbi5vcHRzLmNvbXBhbmlvbkFsbG93ZWRIb3N0cyA9IGBodHRwczovLyR7b3B0cy5jb21wYW5pb25VcmwucmVwbGFjZSgvXlxcL1xcLy8sICcnKX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbHVnaW4ub3B0cy5jb21wYW5pb25BbGxvd2VkSG9zdHMgPSBuZXcgVVJMKG9wdHMuY29tcGFuaW9uVXJsKS5vcmlnaW47XG4gICAgfVxuXG4gICAgcGx1Z2luLnN0b3JhZ2UgPSBwbHVnaW4ub3B0cy5zdG9yYWdlIHx8IHRva2VuU3RvcmFnZTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG4gIH1cblxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@uppy/companion-client/lib/Provider.js\n");

/***/ }),

/***/ "./node_modules/@uppy/companion-client/lib/RequestClient.js":
/*!******************************************************************!*\
  !*** ./node_modules/@uppy/companion-client/lib/RequestClient.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RequestClient)\n/* harmony export */ });\n/* harmony import */ var _uppy_utils_lib_fetchWithNetworkError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uppy/utils/lib/fetchWithNetworkError */ \"./node_modules/@uppy/utils/lib/fetchWithNetworkError.js\");\n/* harmony import */ var _uppy_utils_lib_ErrorWithCause__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uppy/utils/lib/ErrorWithCause */ \"./node_modules/@uppy/utils/lib/ErrorWithCause.js\");\n/* harmony import */ var _AuthError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AuthError.js */ \"./node_modules/@uppy/companion-client/lib/AuthError.js\");\n\n\nlet _Symbol$for;\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\n\n\n\nconst packageJson = {\n  \"version\": \"3.1.1\"\n}; // Remove the trailing slash so we can always safely append /xyz.\n\nfunction stripSlash(url) {\n  return url.replace(/\\/$/, '');\n}\n\nasync function handleJSONResponse(res) {\n  if (res.status === 401) {\n    throw new _AuthError_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n  }\n\n  const jsonPromise = res.json();\n\n  if (res.ok) {\n    return jsonPromise;\n  }\n\n  let errMsg = `Failed request with status: ${res.status}. ${res.statusText}`;\n\n  try {\n    const errData = await jsonPromise;\n    errMsg = errData.message ? `${errMsg} message: ${errData.message}` : errMsg;\n    errMsg = errData.requestId ? `${errMsg} request-Id: ${errData.requestId}` : errMsg;\n  } catch {\n    /* if the response contains invalid JSON, let's ignore the error */\n  }\n\n  throw new Error(errMsg);\n} // todo pull out into core instead?\n\n\nconst allowedHeadersCache = new Map();\n\nvar _companionHeaders = /*#__PURE__*/_classPrivateFieldLooseKey(\"companionHeaders\");\n\nvar _getUrl = /*#__PURE__*/_classPrivateFieldLooseKey(\"getUrl\");\n\nvar _request = /*#__PURE__*/_classPrivateFieldLooseKey(\"request\");\n\n_Symbol$for = Symbol.for('uppy test: getCompanionHeaders');\nclass RequestClient {\n  constructor(uppy, opts) {\n    Object.defineProperty(this, _request, {\n      value: _request2\n    });\n    Object.defineProperty(this, _getUrl, {\n      value: _getUrl2\n    });\n    Object.defineProperty(this, _companionHeaders, {\n      writable: true,\n      value: void 0\n    });\n    this.uppy = uppy;\n    this.opts = opts;\n    this.onReceiveResponse = this.onReceiveResponse.bind(this);\n    _classPrivateFieldLooseBase(this, _companionHeaders)[_companionHeaders] = opts == null ? void 0 : opts.companionHeaders;\n  }\n\n  setCompanionHeaders(headers) {\n    _classPrivateFieldLooseBase(this, _companionHeaders)[_companionHeaders] = headers;\n  }\n\n  [_Symbol$for]() {\n    return _classPrivateFieldLooseBase(this, _companionHeaders)[_companionHeaders];\n  }\n\n  get hostname() {\n    const {\n      companion\n    } = this.uppy.getState();\n    const host = this.opts.companionUrl;\n    return stripSlash(companion && companion[host] ? companion[host] : host);\n  }\n\n  async headers() {\n    const defaultHeaders = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      'Uppy-Versions': `@uppy/companion-client=${RequestClient.VERSION}`\n    };\n    return { ...defaultHeaders,\n      ..._classPrivateFieldLooseBase(this, _companionHeaders)[_companionHeaders]\n    };\n  }\n\n  onReceiveResponse(_ref) {\n    let {\n      headers\n    } = _ref;\n    const state = this.uppy.getState();\n    const companion = state.companion || {};\n    const host = this.opts.companionUrl; // Store the self-identified domain name for the Companion instance we just hit.\n\n    if (headers.has('i-am') && headers.get('i-am') !== companion[host]) {\n      this.uppy.setState({\n        companion: { ...companion,\n          [host]: headers.get('i-am')\n        }\n      });\n    }\n  }\n\n  /*\n    Preflight was added to avoid breaking change between older Companion-client versions and\n    newer Companion versions and vice-versa. Usually the break will manifest via CORS errors because a\n    version of companion-client could be sending certain headers to a version of Companion server that\n    does not support those headers. In which case, the default preflight would lead to CORS.\n    So to avoid those errors, we do preflight ourselves, to see what headers the Companion server\n    we are communicating with allows. And based on that, companion-client knows what headers to\n    send and what headers to not send.\n     The preflight only happens once throughout the life-cycle of a certain\n    Companion-client <-> Companion-server pair (allowedHeadersCache).\n    Subsequent requests use the cached result of the preflight.\n    However if there is an error retrieving the allowed headers, we will try again next time\n  */\n  async preflight(path) {\n    const allowedHeadersCached = allowedHeadersCache.get(this.hostname);\n    if (allowedHeadersCached != null) return allowedHeadersCached;\n    const fallbackAllowedHeaders = ['accept', 'content-type', 'uppy-auth-token'];\n\n    const promise = (async () => {\n      try {\n        const response = await fetch(_classPrivateFieldLooseBase(this, _getUrl)[_getUrl](path), {\n          method: 'OPTIONS'\n        });\n        const header = response.headers.get('access-control-allow-headers');\n\n        if (header == null || header === '*') {\n          allowedHeadersCache.set(this.hostname, fallbackAllowedHeaders);\n          return fallbackAllowedHeaders;\n        }\n\n        this.uppy.log(`[CompanionClient] adding allowed preflight headers to companion cache: ${this.hostname} ${header}`);\n        const allowedHeaders = header.split(',').map(headerName => headerName.trim().toLowerCase());\n        allowedHeadersCache.set(this.hostname, allowedHeaders);\n        return allowedHeaders;\n      } catch (err) {\n        this.uppy.log(`[CompanionClient] unable to make preflight request ${err}`, 'warning'); // If the user gets a network error or similar, we should try preflight\n        // again next time, or else we might get incorrect behaviour.\n\n        allowedHeadersCache.delete(this.hostname); // re-fetch next time\n\n        return fallbackAllowedHeaders;\n      }\n    })();\n\n    allowedHeadersCache.set(this.hostname, promise);\n    return promise;\n  }\n\n  async preflightAndHeaders(path) {\n    const [allowedHeaders, headers] = await Promise.all([this.preflight(path), this.headers()]); // filter to keep only allowed Headers\n\n    return Object.fromEntries(Object.entries(headers).filter(_ref2 => {\n      let [header] = _ref2;\n\n      if (!allowedHeaders.includes(header.toLowerCase())) {\n        this.uppy.log(`[CompanionClient] excluding disallowed header ${header}`);\n        return false;\n      }\n\n      return true;\n    }));\n  }\n\n  async get(path, options) {\n    if (options === void 0) {\n      options = undefined;\n    }\n\n    // TODO: remove boolean support for options that was added for backward compatibility.\n    // eslint-disable-next-line no-param-reassign\n    if (typeof options === 'boolean') options = {\n      skipPostResponse: options\n    };\n    return _classPrivateFieldLooseBase(this, _request)[_request]({ ...options,\n      path\n    });\n  }\n\n  async post(path, data, options) {\n    if (options === void 0) {\n      options = undefined;\n    }\n\n    // TODO: remove boolean support for options that was added for backward compatibility.\n    // eslint-disable-next-line no-param-reassign\n    if (typeof options === 'boolean') options = {\n      skipPostResponse: options\n    };\n    return _classPrivateFieldLooseBase(this, _request)[_request]({ ...options,\n      path,\n      method: 'POST',\n      data\n    });\n  }\n\n  async delete(path, data, options) {\n    if (data === void 0) {\n      data = undefined;\n    }\n\n    // TODO: remove boolean support for options that was added for backward compatibility.\n    // eslint-disable-next-line no-param-reassign\n    if (typeof options === 'boolean') options = {\n      skipPostResponse: options\n    };\n    return _classPrivateFieldLooseBase(this, _request)[_request]({ ...options,\n      path,\n      method: 'DELETE',\n      data\n    });\n  }\n\n}\n\nfunction _getUrl2(url) {\n  if (/^(https?:|)\\/\\//.test(url)) {\n    return url;\n  }\n\n  return `${this.hostname}/${url}`;\n}\n\nasync function _request2(_ref3) {\n  let {\n    path,\n    method = 'GET',\n    data,\n    skipPostResponse,\n    signal\n  } = _ref3;\n\n  try {\n    const headers = await this.preflightAndHeaders(path);\n    const response = await (0,_uppy_utils_lib_fetchWithNetworkError__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_classPrivateFieldLooseBase(this, _getUrl)[_getUrl](path), {\n      method,\n      signal,\n      headers,\n      credentials: this.opts.companionCookiesRule || 'same-origin',\n      body: data ? JSON.stringify(data) : null\n    });\n    if (!skipPostResponse) this.onReceiveResponse(response);\n    return handleJSONResponse(response);\n  } catch (err) {\n    if (err != null && err.isAuthError) throw err;\n    throw new _uppy_utils_lib_ErrorWithCause__WEBPACK_IMPORTED_MODULE_1__[\"default\"](`Could not ${method} ${_classPrivateFieldLooseBase(this, _getUrl)[_getUrl](path)}`, {\n      cause: err\n    });\n  }\n}\n\nRequestClient.VERSION = packageJson.version;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvY29tcGFuaW9uLWNsaWVudC9saWIvUmVxdWVzdENsaWVudC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWE7O0FBRWI7O0FBRUEsNkRBQTZELG1FQUFtRSx5RUFBeUU7O0FBRXpNOztBQUVBLDRDQUE0Qzs7QUFFOEI7QUFDZDtBQUNyQjtBQUN2QztBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWMscURBQVM7QUFDdkI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDhDQUE4QyxXQUFXLElBQUksZUFBZTs7QUFFNUU7QUFDQTtBQUNBLGtDQUFrQyxRQUFRLFdBQVcsZ0JBQWdCO0FBQ3JFLG9DQUFvQyxRQUFRLGNBQWMsa0JBQWtCO0FBQzVFLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7O0FBR0Y7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxzQkFBc0I7QUFDdkU7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EseUNBQXlDOztBQUV6QztBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdHQUFnRyxlQUFlLEVBQUUsT0FBTztBQUN4SDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsNEVBQTRFLElBQUksZUFBZTtBQUMvRjs7QUFFQSxtREFBbUQ7O0FBRW5EO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlHQUFpRzs7QUFFakc7QUFDQTs7QUFFQTtBQUNBLHVFQUF1RSxPQUFPO0FBQzlFO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRTtBQUNuRTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxZQUFZLGNBQWMsR0FBRyxJQUFJO0FBQ2pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsMkJBQTJCLGlGQUFxQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxjQUFjLHNFQUFjLGNBQWMsUUFBUSxFQUFFLDBEQUEwRDtBQUM5RztBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQHVwcHkvY29tcGFuaW9uLWNsaWVudC9saWIvUmVxdWVzdENsaWVudC5qcz83NzMwIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxubGV0IF9TeW1ib2wkZm9yO1xuXG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UocmVjZWl2ZXIsIHByaXZhdGVLZXkpIHsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVjZWl2ZXIsIHByaXZhdGVLZXkpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gdXNlIHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpOyB9IHJldHVybiByZWNlaXZlcjsgfVxuXG52YXIgaWQgPSAwO1xuXG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShuYW1lKSB7IHJldHVybiBcIl9fcHJpdmF0ZV9cIiArIGlkKysgKyBcIl9cIiArIG5hbWU7IH1cblxuaW1wb3J0IGZldGNoV2l0aE5ldHdvcmtFcnJvciBmcm9tICdAdXBweS91dGlscy9saWIvZmV0Y2hXaXRoTmV0d29ya0Vycm9yJztcbmltcG9ydCBFcnJvcldpdGhDYXVzZSBmcm9tICdAdXBweS91dGlscy9saWIvRXJyb3JXaXRoQ2F1c2UnO1xuaW1wb3J0IEF1dGhFcnJvciBmcm9tICcuL0F1dGhFcnJvci5qcyc7XG5jb25zdCBwYWNrYWdlSnNvbiA9IHtcbiAgXCJ2ZXJzaW9uXCI6IFwiMy4xLjFcIlxufTsgLy8gUmVtb3ZlIHRoZSB0cmFpbGluZyBzbGFzaCBzbyB3ZSBjYW4gYWx3YXlzIHNhZmVseSBhcHBlbmQgL3h5ei5cblxuZnVuY3Rpb24gc3RyaXBTbGFzaCh1cmwpIHtcbiAgcmV0dXJuIHVybC5yZXBsYWNlKC9cXC8kLywgJycpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVKU09OUmVzcG9uc2UocmVzKSB7XG4gIGlmIChyZXMuc3RhdHVzID09PSA0MDEpIHtcbiAgICB0aHJvdyBuZXcgQXV0aEVycm9yKCk7XG4gIH1cblxuICBjb25zdCBqc29uUHJvbWlzZSA9IHJlcy5qc29uKCk7XG5cbiAgaWYgKHJlcy5vaykge1xuICAgIHJldHVybiBqc29uUHJvbWlzZTtcbiAgfVxuXG4gIGxldCBlcnJNc2cgPSBgRmFpbGVkIHJlcXVlc3Qgd2l0aCBzdGF0dXM6ICR7cmVzLnN0YXR1c30uICR7cmVzLnN0YXR1c1RleHR9YDtcblxuICB0cnkge1xuICAgIGNvbnN0IGVyckRhdGEgPSBhd2FpdCBqc29uUHJvbWlzZTtcbiAgICBlcnJNc2cgPSBlcnJEYXRhLm1lc3NhZ2UgPyBgJHtlcnJNc2d9IG1lc3NhZ2U6ICR7ZXJyRGF0YS5tZXNzYWdlfWAgOiBlcnJNc2c7XG4gICAgZXJyTXNnID0gZXJyRGF0YS5yZXF1ZXN0SWQgPyBgJHtlcnJNc2d9IHJlcXVlc3QtSWQ6ICR7ZXJyRGF0YS5yZXF1ZXN0SWR9YCA6IGVyck1zZztcbiAgfSBjYXRjaCB7XG4gICAgLyogaWYgdGhlIHJlc3BvbnNlIGNvbnRhaW5zIGludmFsaWQgSlNPTiwgbGV0J3MgaWdub3JlIHRoZSBlcnJvciAqL1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKGVyck1zZyk7XG59IC8vIHRvZG8gcHVsbCBvdXQgaW50byBjb3JlIGluc3RlYWQ/XG5cblxuY29uc3QgYWxsb3dlZEhlYWRlcnNDYWNoZSA9IG5ldyBNYXAoKTtcblxudmFyIF9jb21wYW5pb25IZWFkZXJzID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiY29tcGFuaW9uSGVhZGVyc1wiKTtcblxudmFyIF9nZXRVcmwgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJnZXRVcmxcIik7XG5cbnZhciBfcmVxdWVzdCA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcInJlcXVlc3RcIik7XG5cbl9TeW1ib2wkZm9yID0gU3ltYm9sLmZvcigndXBweSB0ZXN0OiBnZXRDb21wYW5pb25IZWFkZXJzJyk7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXF1ZXN0Q2xpZW50IHtcbiAgY29uc3RydWN0b3IodXBweSwgb3B0cykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfcmVxdWVzdCwge1xuICAgICAgdmFsdWU6IF9yZXF1ZXN0MlxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfZ2V0VXJsLCB7XG4gICAgICB2YWx1ZTogX2dldFVybDJcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2NvbXBhbmlvbkhlYWRlcnMsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIHRoaXMudXBweSA9IHVwcHk7XG4gICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICB0aGlzLm9uUmVjZWl2ZVJlc3BvbnNlID0gdGhpcy5vblJlY2VpdmVSZXNwb25zZS5iaW5kKHRoaXMpO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfY29tcGFuaW9uSGVhZGVycylbX2NvbXBhbmlvbkhlYWRlcnNdID0gb3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5jb21wYW5pb25IZWFkZXJzO1xuICB9XG5cbiAgc2V0Q29tcGFuaW9uSGVhZGVycyhoZWFkZXJzKSB7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jb21wYW5pb25IZWFkZXJzKVtfY29tcGFuaW9uSGVhZGVyc10gPSBoZWFkZXJzO1xuICB9XG5cbiAgW19TeW1ib2wkZm9yXSgpIHtcbiAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jb21wYW5pb25IZWFkZXJzKVtfY29tcGFuaW9uSGVhZGVyc107XG4gIH1cblxuICBnZXQgaG9zdG5hbWUoKSB7XG4gICAgY29uc3Qge1xuICAgICAgY29tcGFuaW9uXG4gICAgfSA9IHRoaXMudXBweS5nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IGhvc3QgPSB0aGlzLm9wdHMuY29tcGFuaW9uVXJsO1xuICAgIHJldHVybiBzdHJpcFNsYXNoKGNvbXBhbmlvbiAmJiBjb21wYW5pb25baG9zdF0gPyBjb21wYW5pb25baG9zdF0gOiBob3N0KTtcbiAgfVxuXG4gIGFzeW5jIGhlYWRlcnMoKSB7XG4gICAgY29uc3QgZGVmYXVsdEhlYWRlcnMgPSB7XG4gICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnVXBweS1WZXJzaW9ucyc6IGBAdXBweS9jb21wYW5pb24tY2xpZW50PSR7UmVxdWVzdENsaWVudC5WRVJTSU9OfWBcbiAgICB9O1xuICAgIHJldHVybiB7IC4uLmRlZmF1bHRIZWFkZXJzLFxuICAgICAgLi4uX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jb21wYW5pb25IZWFkZXJzKVtfY29tcGFuaW9uSGVhZGVyc11cbiAgICB9O1xuICB9XG5cbiAgb25SZWNlaXZlUmVzcG9uc2UoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBoZWFkZXJzXG4gICAgfSA9IF9yZWY7XG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnVwcHkuZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBjb21wYW5pb24gPSBzdGF0ZS5jb21wYW5pb24gfHwge307XG4gICAgY29uc3QgaG9zdCA9IHRoaXMub3B0cy5jb21wYW5pb25Vcmw7IC8vIFN0b3JlIHRoZSBzZWxmLWlkZW50aWZpZWQgZG9tYWluIG5hbWUgZm9yIHRoZSBDb21wYW5pb24gaW5zdGFuY2Ugd2UganVzdCBoaXQuXG5cbiAgICBpZiAoaGVhZGVycy5oYXMoJ2ktYW0nKSAmJiBoZWFkZXJzLmdldCgnaS1hbScpICE9PSBjb21wYW5pb25baG9zdF0pIHtcbiAgICAgIHRoaXMudXBweS5zZXRTdGF0ZSh7XG4gICAgICAgIGNvbXBhbmlvbjogeyAuLi5jb21wYW5pb24sXG4gICAgICAgICAgW2hvc3RdOiBoZWFkZXJzLmdldCgnaS1hbScpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAgUHJlZmxpZ2h0IHdhcyBhZGRlZCB0byBhdm9pZCBicmVha2luZyBjaGFuZ2UgYmV0d2VlbiBvbGRlciBDb21wYW5pb24tY2xpZW50IHZlcnNpb25zIGFuZFxuICAgIG5ld2VyIENvbXBhbmlvbiB2ZXJzaW9ucyBhbmQgdmljZS12ZXJzYS4gVXN1YWxseSB0aGUgYnJlYWsgd2lsbCBtYW5pZmVzdCB2aWEgQ09SUyBlcnJvcnMgYmVjYXVzZSBhXG4gICAgdmVyc2lvbiBvZiBjb21wYW5pb24tY2xpZW50IGNvdWxkIGJlIHNlbmRpbmcgY2VydGFpbiBoZWFkZXJzIHRvIGEgdmVyc2lvbiBvZiBDb21wYW5pb24gc2VydmVyIHRoYXRcbiAgICBkb2VzIG5vdCBzdXBwb3J0IHRob3NlIGhlYWRlcnMuIEluIHdoaWNoIGNhc2UsIHRoZSBkZWZhdWx0IHByZWZsaWdodCB3b3VsZCBsZWFkIHRvIENPUlMuXG4gICAgU28gdG8gYXZvaWQgdGhvc2UgZXJyb3JzLCB3ZSBkbyBwcmVmbGlnaHQgb3Vyc2VsdmVzLCB0byBzZWUgd2hhdCBoZWFkZXJzIHRoZSBDb21wYW5pb24gc2VydmVyXG4gICAgd2UgYXJlIGNvbW11bmljYXRpbmcgd2l0aCBhbGxvd3MuIEFuZCBiYXNlZCBvbiB0aGF0LCBjb21wYW5pb24tY2xpZW50IGtub3dzIHdoYXQgaGVhZGVycyB0b1xuICAgIHNlbmQgYW5kIHdoYXQgaGVhZGVycyB0byBub3Qgc2VuZC5cbiAgICAgVGhlIHByZWZsaWdodCBvbmx5IGhhcHBlbnMgb25jZSB0aHJvdWdob3V0IHRoZSBsaWZlLWN5Y2xlIG9mIGEgY2VydGFpblxuICAgIENvbXBhbmlvbi1jbGllbnQgPC0+IENvbXBhbmlvbi1zZXJ2ZXIgcGFpciAoYWxsb3dlZEhlYWRlcnNDYWNoZSkuXG4gICAgU3Vic2VxdWVudCByZXF1ZXN0cyB1c2UgdGhlIGNhY2hlZCByZXN1bHQgb2YgdGhlIHByZWZsaWdodC5cbiAgICBIb3dldmVyIGlmIHRoZXJlIGlzIGFuIGVycm9yIHJldHJpZXZpbmcgdGhlIGFsbG93ZWQgaGVhZGVycywgd2Ugd2lsbCB0cnkgYWdhaW4gbmV4dCB0aW1lXG4gICovXG4gIGFzeW5jIHByZWZsaWdodChwYXRoKSB7XG4gICAgY29uc3QgYWxsb3dlZEhlYWRlcnNDYWNoZWQgPSBhbGxvd2VkSGVhZGVyc0NhY2hlLmdldCh0aGlzLmhvc3RuYW1lKTtcbiAgICBpZiAoYWxsb3dlZEhlYWRlcnNDYWNoZWQgIT0gbnVsbCkgcmV0dXJuIGFsbG93ZWRIZWFkZXJzQ2FjaGVkO1xuICAgIGNvbnN0IGZhbGxiYWNrQWxsb3dlZEhlYWRlcnMgPSBbJ2FjY2VwdCcsICdjb250ZW50LXR5cGUnLCAndXBweS1hdXRoLXRva2VuJ107XG5cbiAgICBjb25zdCBwcm9taXNlID0gKGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9nZXRVcmwpW19nZXRVcmxdKHBhdGgpLCB7XG4gICAgICAgICAgbWV0aG9kOiAnT1BUSU9OUydcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdhY2Nlc3MtY29udHJvbC1hbGxvdy1oZWFkZXJzJyk7XG5cbiAgICAgICAgaWYgKGhlYWRlciA9PSBudWxsIHx8IGhlYWRlciA9PT0gJyonKSB7XG4gICAgICAgICAgYWxsb3dlZEhlYWRlcnNDYWNoZS5zZXQodGhpcy5ob3N0bmFtZSwgZmFsbGJhY2tBbGxvd2VkSGVhZGVycyk7XG4gICAgICAgICAgcmV0dXJuIGZhbGxiYWNrQWxsb3dlZEhlYWRlcnM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwcHkubG9nKGBbQ29tcGFuaW9uQ2xpZW50XSBhZGRpbmcgYWxsb3dlZCBwcmVmbGlnaHQgaGVhZGVycyB0byBjb21wYW5pb24gY2FjaGU6ICR7dGhpcy5ob3N0bmFtZX0gJHtoZWFkZXJ9YCk7XG4gICAgICAgIGNvbnN0IGFsbG93ZWRIZWFkZXJzID0gaGVhZGVyLnNwbGl0KCcsJykubWFwKGhlYWRlck5hbWUgPT4gaGVhZGVyTmFtZS50cmltKCkudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGFsbG93ZWRIZWFkZXJzQ2FjaGUuc2V0KHRoaXMuaG9zdG5hbWUsIGFsbG93ZWRIZWFkZXJzKTtcbiAgICAgICAgcmV0dXJuIGFsbG93ZWRIZWFkZXJzO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRoaXMudXBweS5sb2coYFtDb21wYW5pb25DbGllbnRdIHVuYWJsZSB0byBtYWtlIHByZWZsaWdodCByZXF1ZXN0ICR7ZXJyfWAsICd3YXJuaW5nJyk7IC8vIElmIHRoZSB1c2VyIGdldHMgYSBuZXR3b3JrIGVycm9yIG9yIHNpbWlsYXIsIHdlIHNob3VsZCB0cnkgcHJlZmxpZ2h0XG4gICAgICAgIC8vIGFnYWluIG5leHQgdGltZSwgb3IgZWxzZSB3ZSBtaWdodCBnZXQgaW5jb3JyZWN0IGJlaGF2aW91ci5cblxuICAgICAgICBhbGxvd2VkSGVhZGVyc0NhY2hlLmRlbGV0ZSh0aGlzLmhvc3RuYW1lKTsgLy8gcmUtZmV0Y2ggbmV4dCB0aW1lXG5cbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrQWxsb3dlZEhlYWRlcnM7XG4gICAgICB9XG4gICAgfSkoKTtcblxuICAgIGFsbG93ZWRIZWFkZXJzQ2FjaGUuc2V0KHRoaXMuaG9zdG5hbWUsIHByb21pc2UpO1xuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgYXN5bmMgcHJlZmxpZ2h0QW5kSGVhZGVycyhwYXRoKSB7XG4gICAgY29uc3QgW2FsbG93ZWRIZWFkZXJzLCBoZWFkZXJzXSA9IGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLnByZWZsaWdodChwYXRoKSwgdGhpcy5oZWFkZXJzKCldKTsgLy8gZmlsdGVyIHRvIGtlZXAgb25seSBhbGxvd2VkIEhlYWRlcnNcblxuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoaGVhZGVycykuZmlsdGVyKF9yZWYyID0+IHtcbiAgICAgIGxldCBbaGVhZGVyXSA9IF9yZWYyO1xuXG4gICAgICBpZiAoIWFsbG93ZWRIZWFkZXJzLmluY2x1ZGVzKGhlYWRlci50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICB0aGlzLnVwcHkubG9nKGBbQ29tcGFuaW9uQ2xpZW50XSBleGNsdWRpbmcgZGlzYWxsb3dlZCBoZWFkZXIgJHtoZWFkZXJ9YCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0KHBhdGgsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFRPRE86IHJlbW92ZSBib29sZWFuIHN1cHBvcnQgZm9yIG9wdGlvbnMgdGhhdCB3YXMgYWRkZWQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicpIG9wdGlvbnMgPSB7XG4gICAgICBza2lwUG9zdFJlc3BvbnNlOiBvcHRpb25zXG4gICAgfTtcbiAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9yZXF1ZXN0KVtfcmVxdWVzdF0oeyAuLi5vcHRpb25zLFxuICAgICAgcGF0aFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgcG9zdChwYXRoLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiByZW1vdmUgYm9vbGVhbiBzdXBwb3J0IGZvciBvcHRpb25zIHRoYXQgd2FzIGFkZGVkIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Jvb2xlYW4nKSBvcHRpb25zID0ge1xuICAgICAgc2tpcFBvc3RSZXNwb25zZTogb3B0aW9uc1xuICAgIH07XG4gICAgcmV0dXJuIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcmVxdWVzdClbX3JlcXVlc3RdKHsgLi4ub3B0aW9ucyxcbiAgICAgIHBhdGgsXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGRhdGFcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZShwYXRoLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgaWYgKGRhdGEgPT09IHZvaWQgMCkge1xuICAgICAgZGF0YSA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiByZW1vdmUgYm9vbGVhbiBzdXBwb3J0IGZvciBvcHRpb25zIHRoYXQgd2FzIGFkZGVkIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Jvb2xlYW4nKSBvcHRpb25zID0ge1xuICAgICAgc2tpcFBvc3RSZXNwb25zZTogb3B0aW9uc1xuICAgIH07XG4gICAgcmV0dXJuIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcmVxdWVzdClbX3JlcXVlc3RdKHsgLi4ub3B0aW9ucyxcbiAgICAgIHBhdGgsXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgZGF0YVxuICAgIH0pO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gX2dldFVybDIodXJsKSB7XG4gIGlmICgvXihodHRwcz86fClcXC9cXC8vLnRlc3QodXJsKSkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICByZXR1cm4gYCR7dGhpcy5ob3N0bmFtZX0vJHt1cmx9YDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX3JlcXVlc3QyKF9yZWYzKSB7XG4gIGxldCB7XG4gICAgcGF0aCxcbiAgICBtZXRob2QgPSAnR0VUJyxcbiAgICBkYXRhLFxuICAgIHNraXBQb3N0UmVzcG9uc2UsXG4gICAgc2lnbmFsXG4gIH0gPSBfcmVmMztcblxuICB0cnkge1xuICAgIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCB0aGlzLnByZWZsaWdodEFuZEhlYWRlcnMocGF0aCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhOZXR3b3JrRXJyb3IoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9nZXRVcmwpW19nZXRVcmxdKHBhdGgpLCB7XG4gICAgICBtZXRob2QsXG4gICAgICBzaWduYWwsXG4gICAgICBoZWFkZXJzLFxuICAgICAgY3JlZGVudGlhbHM6IHRoaXMub3B0cy5jb21wYW5pb25Db29raWVzUnVsZSB8fCAnc2FtZS1vcmlnaW4nLFxuICAgICAgYm9keTogZGF0YSA/IEpTT04uc3RyaW5naWZ5KGRhdGEpIDogbnVsbFxuICAgIH0pO1xuICAgIGlmICghc2tpcFBvc3RSZXNwb25zZSkgdGhpcy5vblJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgcmV0dXJuIGhhbmRsZUpTT05SZXNwb25zZShyZXNwb25zZSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChlcnIgIT0gbnVsbCAmJiBlcnIuaXNBdXRoRXJyb3IpIHRocm93IGVycjtcbiAgICB0aHJvdyBuZXcgRXJyb3JXaXRoQ2F1c2UoYENvdWxkIG5vdCAke21ldGhvZH0gJHtfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2dldFVybClbX2dldFVybF0ocGF0aCl9YCwge1xuICAgICAgY2F1c2U6IGVyclxuICAgIH0pO1xuICB9XG59XG5cblJlcXVlc3RDbGllbnQuVkVSU0lPTiA9IHBhY2thZ2VKc29uLnZlcnNpb247Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@uppy/companion-client/lib/RequestClient.js\n");

/***/ }),

/***/ "./node_modules/@uppy/companion-client/lib/SearchProvider.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@uppy/companion-client/lib/SearchProvider.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SearchProvider)\n/* harmony export */ });\n/* harmony import */ var _RequestClient_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RequestClient.js */ \"./node_modules/@uppy/companion-client/lib/RequestClient.js\");\n\n\n\n\nconst getName = id => {\n  return id.split('-').map(s => s.charAt(0).toUpperCase() + s.slice(1)).join(' ');\n};\n\nclass SearchProvider extends _RequestClient_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(uppy, opts) {\n    super(uppy, opts);\n    this.provider = opts.provider;\n    this.id = this.provider;\n    this.name = this.opts.name || getName(this.id);\n    this.pluginId = this.opts.pluginId;\n  }\n\n  fileUrl(id) {\n    return `${this.hostname}/search/${this.id}/get/${id}`;\n  }\n\n  search(text, queries) {\n    return this.get(`search/${this.id}/list?q=${encodeURIComponent(text)}${queries ? `&${queries}` : ''}`);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvY29tcGFuaW9uLWNsaWVudC9saWIvU2VhcmNoUHJvdmlkZXIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBYTs7QUFFa0M7O0FBRS9DO0FBQ0E7QUFDQTs7QUFFZSw2QkFBNkIseURBQWE7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjLGNBQWMsVUFBVSxRQUFRLE9BQU8sR0FBRztBQUN4RDs7QUFFQTtBQUNBLDhCQUE4QixRQUFRLFVBQVUseUJBQXlCLEVBQUUsY0FBYyxRQUFRLE9BQU87QUFDeEc7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AdXBweS9jb21wYW5pb24tY2xpZW50L2xpYi9TZWFyY2hQcm92aWRlci5qcz81MzhkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFJlcXVlc3RDbGllbnQgZnJvbSAnLi9SZXF1ZXN0Q2xpZW50LmpzJztcblxuY29uc3QgZ2V0TmFtZSA9IGlkID0+IHtcbiAgcmV0dXJuIGlkLnNwbGl0KCctJykubWFwKHMgPT4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkpLmpvaW4oJyAnKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlYXJjaFByb3ZpZGVyIGV4dGVuZHMgUmVxdWVzdENsaWVudCB7XG4gIGNvbnN0cnVjdG9yKHVwcHksIG9wdHMpIHtcbiAgICBzdXBlcih1cHB5LCBvcHRzKTtcbiAgICB0aGlzLnByb3ZpZGVyID0gb3B0cy5wcm92aWRlcjtcbiAgICB0aGlzLmlkID0gdGhpcy5wcm92aWRlcjtcbiAgICB0aGlzLm5hbWUgPSB0aGlzLm9wdHMubmFtZSB8fCBnZXROYW1lKHRoaXMuaWQpO1xuICAgIHRoaXMucGx1Z2luSWQgPSB0aGlzLm9wdHMucGx1Z2luSWQ7XG4gIH1cblxuICBmaWxlVXJsKGlkKSB7XG4gICAgcmV0dXJuIGAke3RoaXMuaG9zdG5hbWV9L3NlYXJjaC8ke3RoaXMuaWR9L2dldC8ke2lkfWA7XG4gIH1cblxuICBzZWFyY2godGV4dCwgcXVlcmllcykge1xuICAgIHJldHVybiB0aGlzLmdldChgc2VhcmNoLyR7dGhpcy5pZH0vbGlzdD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRleHQpfSR7cXVlcmllcyA/IGAmJHtxdWVyaWVzfWAgOiAnJ31gKTtcbiAgfVxuXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@uppy/companion-client/lib/SearchProvider.js\n");

/***/ }),

/***/ "./node_modules/@uppy/companion-client/lib/Socket.js":
/*!***********************************************************!*\
  !*** ./node_modules/@uppy/companion-client/lib/Socket.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ UppySocket)\n/* harmony export */ });\n/* harmony import */ var namespace_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! namespace-emitter */ \"./node_modules/namespace-emitter/index.js\");\nlet _Symbol$for, _Symbol$for2;\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\n\n\nvar _queued = /*#__PURE__*/_classPrivateFieldLooseKey(\"queued\");\n\nvar _emitter = /*#__PURE__*/_classPrivateFieldLooseKey(\"emitter\");\n\nvar _isOpen = /*#__PURE__*/_classPrivateFieldLooseKey(\"isOpen\");\n\nvar _socket = /*#__PURE__*/_classPrivateFieldLooseKey(\"socket\");\n\nvar _handleMessage = /*#__PURE__*/_classPrivateFieldLooseKey(\"handleMessage\");\n\n_Symbol$for = Symbol.for('uppy test: getSocket');\n_Symbol$for2 = Symbol.for('uppy test: getQueued');\nclass UppySocket {\n  constructor(opts) {\n    Object.defineProperty(this, _queued, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _emitter, {\n      writable: true,\n      value: namespace_emitter__WEBPACK_IMPORTED_MODULE_0__()\n    });\n    Object.defineProperty(this, _isOpen, {\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, _socket, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _handleMessage, {\n      writable: true,\n      value: e => {\n        try {\n          const message = JSON.parse(e.data);\n          this.emit(message.action, message.payload);\n        } catch (err) {\n          // TODO: use a more robust error handler.\n          console.log(err); // eslint-disable-line no-console\n        }\n      }\n    });\n    this.opts = opts;\n\n    if (!opts || opts.autoOpen !== false) {\n      this.open();\n    }\n  }\n\n  get isOpen() {\n    return _classPrivateFieldLooseBase(this, _isOpen)[_isOpen];\n  }\n\n  [_Symbol$for]() {\n    return _classPrivateFieldLooseBase(this, _socket)[_socket];\n  }\n\n  [_Symbol$for2]() {\n    return _classPrivateFieldLooseBase(this, _queued)[_queued];\n  }\n\n  open() {\n    _classPrivateFieldLooseBase(this, _socket)[_socket] = new WebSocket(this.opts.target);\n\n    _classPrivateFieldLooseBase(this, _socket)[_socket].onopen = () => {\n      _classPrivateFieldLooseBase(this, _isOpen)[_isOpen] = true;\n\n      while (_classPrivateFieldLooseBase(this, _queued)[_queued].length > 0 && _classPrivateFieldLooseBase(this, _isOpen)[_isOpen]) {\n        const first = _classPrivateFieldLooseBase(this, _queued)[_queued].shift();\n\n        this.send(first.action, first.payload);\n      }\n    };\n\n    _classPrivateFieldLooseBase(this, _socket)[_socket].onclose = () => {\n      _classPrivateFieldLooseBase(this, _isOpen)[_isOpen] = false;\n    };\n\n    _classPrivateFieldLooseBase(this, _socket)[_socket].onmessage = _classPrivateFieldLooseBase(this, _handleMessage)[_handleMessage];\n  }\n\n  close() {\n    var _classPrivateFieldLoo;\n\n    (_classPrivateFieldLoo = _classPrivateFieldLooseBase(this, _socket)[_socket]) == null ? void 0 : _classPrivateFieldLoo.close();\n  }\n\n  send(action, payload) {\n    // attach uuid\n    if (!_classPrivateFieldLooseBase(this, _isOpen)[_isOpen]) {\n      _classPrivateFieldLooseBase(this, _queued)[_queued].push({\n        action,\n        payload\n      });\n\n      return;\n    }\n\n    _classPrivateFieldLooseBase(this, _socket)[_socket].send(JSON.stringify({\n      action,\n      payload\n    }));\n  }\n\n  on(action, handler) {\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter].on(action, handler);\n  }\n\n  emit(action, payload) {\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter].emit(action, payload);\n  }\n\n  once(action, handler) {\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter].once(action, handler);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvY29tcGFuaW9uLWNsaWVudC9saWIvU29ja2V0LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7O0FBRUEsNkRBQTZELG1FQUFtRSx5RUFBeUU7O0FBRXpNOztBQUVBLDRDQUE0Qzs7QUFFVDs7QUFFbkM7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsOENBQUU7QUFDZixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AdXBweS9jb21wYW5pb24tY2xpZW50L2xpYi9Tb2NrZXQuanM/NzY2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgX1N5bWJvbCRmb3IsIF9TeW1ib2wkZm9yMjtcblxuZnVuY3Rpb24gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHJlY2VpdmVyLCBwcml2YXRlS2V5KSB7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlY2VpdmVyLCBwcml2YXRlS2V5KSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHVzZSBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTsgfSByZXR1cm4gcmVjZWl2ZXI7IH1cblxudmFyIGlkID0gMDtcblxuZnVuY3Rpb24gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkobmFtZSkgeyByZXR1cm4gXCJfX3ByaXZhdGVfXCIgKyBpZCsrICsgXCJfXCIgKyBuYW1lOyB9XG5cbmltcG9ydCBlZSBmcm9tICduYW1lc3BhY2UtZW1pdHRlcic7XG5cbnZhciBfcXVldWVkID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwicXVldWVkXCIpO1xuXG52YXIgX2VtaXR0ZXIgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJlbWl0dGVyXCIpO1xuXG52YXIgX2lzT3BlbiA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcImlzT3BlblwiKTtcblxudmFyIF9zb2NrZXQgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJzb2NrZXRcIik7XG5cbnZhciBfaGFuZGxlTWVzc2FnZSA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcImhhbmRsZU1lc3NhZ2VcIik7XG5cbl9TeW1ib2wkZm9yID0gU3ltYm9sLmZvcigndXBweSB0ZXN0OiBnZXRTb2NrZXQnKTtcbl9TeW1ib2wkZm9yMiA9IFN5bWJvbC5mb3IoJ3VwcHkgdGVzdDogZ2V0UXVldWVkJyk7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVcHB5U29ja2V0IHtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfcXVldWVkLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBbXVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfZW1pdHRlciwge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogZWUoKVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfaXNPcGVuLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBmYWxzZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfc29ja2V0LCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2hhbmRsZU1lc3NhZ2UsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGUgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG4gICAgICAgICAgdGhpcy5lbWl0KG1lc3NhZ2UuYWN0aW9uLCBtZXNzYWdlLnBheWxvYWQpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAvLyBUT0RPOiB1c2UgYSBtb3JlIHJvYnVzdCBlcnJvciBoYW5kbGVyLlxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5vcHRzID0gb3B0cztcblxuICAgIGlmICghb3B0cyB8fCBvcHRzLmF1dG9PcGVuICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzT3BlbigpIHtcbiAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9pc09wZW4pW19pc09wZW5dO1xuICB9XG5cbiAgW19TeW1ib2wkZm9yXSgpIHtcbiAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9zb2NrZXQpW19zb2NrZXRdO1xuICB9XG5cbiAgW19TeW1ib2wkZm9yMl0oKSB7XG4gICAgcmV0dXJuIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcXVldWVkKVtfcXVldWVkXTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9zb2NrZXQpW19zb2NrZXRdID0gbmV3IFdlYlNvY2tldCh0aGlzLm9wdHMudGFyZ2V0KTtcblxuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfc29ja2V0KVtfc29ja2V0XS5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2lzT3BlbilbX2lzT3Blbl0gPSB0cnVlO1xuXG4gICAgICB3aGlsZSAoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9xdWV1ZWQpW19xdWV1ZWRdLmxlbmd0aCA+IDAgJiYgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9pc09wZW4pW19pc09wZW5dKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0ID0gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9xdWV1ZWQpW19xdWV1ZWRdLnNoaWZ0KCk7XG5cbiAgICAgICAgdGhpcy5zZW5kKGZpcnN0LmFjdGlvbiwgZmlyc3QucGF5bG9hZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfc29ja2V0KVtfc29ja2V0XS5vbmNsb3NlID0gKCkgPT4ge1xuICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9pc09wZW4pW19pc09wZW5dID0gZmFsc2U7XG4gICAgfTtcblxuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfc29ja2V0KVtfc29ja2V0XS5vbm1lc3NhZ2UgPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2hhbmRsZU1lc3NhZ2UpW19oYW5kbGVNZXNzYWdlXTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHZhciBfY2xhc3NQcml2YXRlRmllbGRMb287XG5cbiAgICAoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vID0gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9zb2NrZXQpW19zb2NrZXRdKSA9PSBudWxsID8gdm9pZCAwIDogX2NsYXNzUHJpdmF0ZUZpZWxkTG9vLmNsb3NlKCk7XG4gIH1cblxuICBzZW5kKGFjdGlvbiwgcGF5bG9hZCkge1xuICAgIC8vIGF0dGFjaCB1dWlkXG4gICAgaWYgKCFfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2lzT3BlbilbX2lzT3Blbl0pIHtcbiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcXVldWVkKVtfcXVldWVkXS5wdXNoKHtcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICBwYXlsb2FkXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfc29ja2V0KVtfc29ja2V0XS5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGFjdGlvbixcbiAgICAgIHBheWxvYWRcbiAgICB9KSk7XG4gIH1cblxuICBvbihhY3Rpb24sIGhhbmRsZXIpIHtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2VtaXR0ZXIpW19lbWl0dGVyXS5vbihhY3Rpb24sIGhhbmRsZXIpO1xuICB9XG5cbiAgZW1pdChhY3Rpb24sIHBheWxvYWQpIHtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2VtaXR0ZXIpW19lbWl0dGVyXS5lbWl0KGFjdGlvbiwgcGF5bG9hZCk7XG4gIH1cblxuICBvbmNlKGFjdGlvbiwgaGFuZGxlcikge1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZW1pdHRlcilbX2VtaXR0ZXJdLm9uY2UoYWN0aW9uLCBoYW5kbGVyKTtcbiAgfVxuXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@uppy/companion-client/lib/Socket.js\n");

/***/ }),

/***/ "./node_modules/@uppy/companion-client/lib/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@uppy/companion-client/lib/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Provider\": () => (/* reexport safe */ _Provider_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   \"RequestClient\": () => (/* reexport safe */ _RequestClient_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   \"SearchProvider\": () => (/* reexport safe */ _SearchProvider_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   \"Socket\": () => (/* reexport safe */ _Socket_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _RequestClient_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RequestClient.js */ \"./node_modules/@uppy/companion-client/lib/RequestClient.js\");\n/* harmony import */ var _Provider_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Provider.js */ \"./node_modules/@uppy/companion-client/lib/Provider.js\");\n/* harmony import */ var _SearchProvider_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SearchProvider.js */ \"./node_modules/@uppy/companion-client/lib/SearchProvider.js\");\n/* harmony import */ var _Socket_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Socket.js */ \"./node_modules/@uppy/companion-client/lib/Socket.js\");\n\n/**\n * Manages communications with Companion\n */\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvY29tcGFuaW9uLWNsaWVudC9saWIvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFOEQ7QUFDVjtBQUNZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQHVwcHkvY29tcGFuaW9uLWNsaWVudC9saWIvaW5kZXguanM/ZTVkNyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG4vKipcbiAqIE1hbmFnZXMgY29tbXVuaWNhdGlvbnMgd2l0aCBDb21wYW5pb25cbiAqL1xuXG5leHBvcnQgeyBkZWZhdWx0IGFzIFJlcXVlc3RDbGllbnQgfSBmcm9tICcuL1JlcXVlc3RDbGllbnQuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQcm92aWRlciB9IGZyb20gJy4vUHJvdmlkZXIuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTZWFyY2hQcm92aWRlciB9IGZyb20gJy4vU2VhcmNoUHJvdmlkZXIuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTb2NrZXQgfSBmcm9tICcuL1NvY2tldC5qcyc7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@uppy/companion-client/lib/index.js\n");

/***/ }),

/***/ "./node_modules/@uppy/companion-client/lib/tokenStorage.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@uppy/companion-client/lib/tokenStorage.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getItem\": () => (/* binding */ getItem),\n/* harmony export */   \"removeItem\": () => (/* binding */ removeItem),\n/* harmony export */   \"setItem\": () => (/* binding */ setItem)\n/* harmony export */ });\n\n/**\n * This module serves as an Async wrapper for LocalStorage\n */\n\nfunction setItem(key, value) {\n  return new Promise(resolve => {\n    localStorage.setItem(key, value);\n    resolve();\n  });\n}\nfunction getItem(key) {\n  return Promise.resolve(localStorage.getItem(key));\n}\nfunction removeItem(key) {\n  return new Promise(resolve => {\n    localStorage.removeItem(key);\n    resolve();\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvY29tcGFuaW9uLWNsaWVudC9saWIvdG9rZW5TdG9yYWdlLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AdXBweS9jb21wYW5pb24tY2xpZW50L2xpYi90b2tlblN0b3JhZ2UuanM/YWY2NSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG4vKipcbiAqIFRoaXMgbW9kdWxlIHNlcnZlcyBhcyBhbiBBc3luYyB3cmFwcGVyIGZvciBMb2NhbFN0b3JhZ2VcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0SXRlbShrZXksIHZhbHVlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICByZXNvbHZlKCk7XG4gIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEl0ZW0oa2V5KSB7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXkpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgcmVzb2x2ZSgpO1xuICB9KTtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@uppy/companion-client/lib/tokenStorage.js\n");

/***/ }),

/***/ "./node_modules/@uppy/utils/lib/AbortController.js":
/*!*********************************************************!*\
  !*** ./node_modules/@uppy/utils/lib/AbortController.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbortController\": () => (/* binding */ AbortController),\n/* harmony export */   \"AbortSignal\": () => (/* binding */ AbortSignal),\n/* harmony export */   \"createAbortError\": () => (/* binding */ createAbortError)\n/* harmony export */ });\n/* harmony import */ var _hasProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hasProperty.js */ \"./node_modules/@uppy/utils/lib/hasProperty.js\");\n\n/**\n * Little AbortController proxy module so we can swap out the implementation easily later.\n */\n\nconst {\n  AbortController\n} = globalThis;\nconst {\n  AbortSignal\n} = globalThis;\nconst createAbortError = function (message, options) {\n  if (message === void 0) {\n    message = 'Aborted';\n  }\n\n  const err = new DOMException(message, 'AbortError');\n\n  if (options != null && (0,_hasProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(options, 'cause')) {\n    Object.defineProperty(err, 'cause', {\n      __proto__: null,\n      configurable: true,\n      writable: true,\n      value: options.cause\n    });\n  }\n\n  return err;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL0Fib3J0Q29udHJvbGxlci5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThDO0FBQzlDO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0EsRUFBRTtBQUNLO0FBQ1A7QUFDQSxFQUFFO0FBQ0s7QUFDUDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEseUJBQXlCLDJEQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0B1cHB5L3V0aWxzL2xpYi9BYm9ydENvbnRyb2xsZXIuanM/MDAxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaGFzT3duUHJvcGVydHkgZnJvbSAnLi9oYXNQcm9wZXJ0eS5qcyc7XG4vKipcbiAqIExpdHRsZSBBYm9ydENvbnRyb2xsZXIgcHJveHkgbW9kdWxlIHNvIHdlIGNhbiBzd2FwIG91dCB0aGUgaW1wbGVtZW50YXRpb24gZWFzaWx5IGxhdGVyLlxuICovXG5cbmV4cG9ydCBjb25zdCB7XG4gIEFib3J0Q29udHJvbGxlclxufSA9IGdsb2JhbFRoaXM7XG5leHBvcnQgY29uc3Qge1xuICBBYm9ydFNpZ25hbFxufSA9IGdsb2JhbFRoaXM7XG5leHBvcnQgY29uc3QgY3JlYXRlQWJvcnRFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlLCBvcHRpb25zKSB7XG4gIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHtcbiAgICBtZXNzYWdlID0gJ0Fib3J0ZWQnO1xuICB9XG5cbiAgY29uc3QgZXJyID0gbmV3IERPTUV4Y2VwdGlvbihtZXNzYWdlLCAnQWJvcnRFcnJvcicpO1xuXG4gIGlmIChvcHRpb25zICE9IG51bGwgJiYgaGFzT3duUHJvcGVydHkob3B0aW9ucywgJ2NhdXNlJykpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXJyLCAnY2F1c2UnLCB7XG4gICAgICBfX3Byb3RvX186IG51bGwsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBvcHRpb25zLmNhdXNlXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZXJyO1xufTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@uppy/utils/lib/AbortController.js\n");

/***/ }),

/***/ "./node_modules/@uppy/utils/lib/ErrorWithCause.js":
/*!********************************************************!*\
  !*** ./node_modules/@uppy/utils/lib/ErrorWithCause.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _hasProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hasProperty.js */ \"./node_modules/@uppy/utils/lib/hasProperty.js\");\n\n\nclass ErrorWithCause extends Error {\n  constructor(message, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    super(message);\n    this.cause = options.cause;\n\n    if (this.cause && (0,_hasProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this.cause, 'isNetworkError')) {\n      this.isNetworkError = this.cause.isNetworkError;\n    }\n  }\n\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ErrorWithCause);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL0Vycm9yV2l0aENhdXNlLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJDOztBQUUzQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsc0JBQXNCLDJEQUFXO0FBQ2pDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxpRUFBZSxjQUFjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL0Vycm9yV2l0aENhdXNlLmpzPzA5MmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGhhc1Byb3BlcnR5IGZyb20gJy4vaGFzUHJvcGVydHkuanMnO1xuXG5jbGFzcyBFcnJvcldpdGhDYXVzZSBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLmNhdXNlID0gb3B0aW9ucy5jYXVzZTtcblxuICAgIGlmICh0aGlzLmNhdXNlICYmIGhhc1Byb3BlcnR5KHRoaXMuY2F1c2UsICdpc05ldHdvcmtFcnJvcicpKSB7XG4gICAgICB0aGlzLmlzTmV0d29ya0Vycm9yID0gdGhpcy5jYXVzZS5pc05ldHdvcmtFcnJvcjtcbiAgICB9XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBFcnJvcldpdGhDYXVzZTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@uppy/utils/lib/ErrorWithCause.js\n");

/***/ }),

/***/ "./node_modules/@uppy/utils/lib/EventTracker.js":
/*!******************************************************!*\
  !*** ./node_modules/@uppy/utils/lib/EventTracker.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EventTracker)\n/* harmony export */ });\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\nvar _emitter = /*#__PURE__*/_classPrivateFieldLooseKey(\"emitter\");\n\nvar _events = /*#__PURE__*/_classPrivateFieldLooseKey(\"events\");\n\n/**\n * Create a wrapper around an event emitter with a `remove` method to remove\n * all events that were added using the wrapped emitter.\n */\nclass EventTracker {\n  constructor(emitter) {\n    Object.defineProperty(this, _emitter, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _events, {\n      writable: true,\n      value: []\n    });\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter] = emitter;\n  }\n\n  on(event, fn) {\n    _classPrivateFieldLooseBase(this, _events)[_events].push([event, fn]);\n\n    return _classPrivateFieldLooseBase(this, _emitter)[_emitter].on(event, fn);\n  }\n\n  remove() {\n    for (const [event, fn] of _classPrivateFieldLooseBase(this, _events)[_events].splice(0)) {\n      _classPrivateFieldLooseBase(this, _emitter)[_emitter].off(event, fn);\n    }\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL0V2ZW50VHJhY2tlci5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsNkRBQTZELG1FQUFtRSx5RUFBeUU7O0FBRXpNOztBQUVBLDRDQUE0Qzs7QUFFNUM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL0V2ZW50VHJhY2tlci5qcz9jMzEzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZShyZWNlaXZlciwgcHJpdmF0ZUtleSkgeyBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZWNlaXZlciwgcHJpdmF0ZUtleSkpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byB1c2UgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7IH0gcmV0dXJuIHJlY2VpdmVyOyB9XG5cbnZhciBpZCA9IDA7XG5cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KG5hbWUpIHsgcmV0dXJuIFwiX19wcml2YXRlX1wiICsgaWQrKyArIFwiX1wiICsgbmFtZTsgfVxuXG52YXIgX2VtaXR0ZXIgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJlbWl0dGVyXCIpO1xuXG52YXIgX2V2ZW50cyA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcImV2ZW50c1wiKTtcblxuLyoqXG4gKiBDcmVhdGUgYSB3cmFwcGVyIGFyb3VuZCBhbiBldmVudCBlbWl0dGVyIHdpdGggYSBgcmVtb3ZlYCBtZXRob2QgdG8gcmVtb3ZlXG4gKiBhbGwgZXZlbnRzIHRoYXQgd2VyZSBhZGRlZCB1c2luZyB0aGUgd3JhcHBlZCBlbWl0dGVyLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFdmVudFRyYWNrZXIge1xuICBjb25zdHJ1Y3RvcihlbWl0dGVyKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9lbWl0dGVyLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2V2ZW50cywge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogW11cbiAgICB9KTtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2VtaXR0ZXIpW19lbWl0dGVyXSA9IGVtaXR0ZXI7XG4gIH1cblxuICBvbihldmVudCwgZm4pIHtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2V2ZW50cylbX2V2ZW50c10ucHVzaChbZXZlbnQsIGZuXSk7XG5cbiAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9lbWl0dGVyKVtfZW1pdHRlcl0ub24oZXZlbnQsIGZuKTtcbiAgfVxuXG4gIHJlbW92ZSgpIHtcbiAgICBmb3IgKGNvbnN0IFtldmVudCwgZm5dIG9mIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZXZlbnRzKVtfZXZlbnRzXS5zcGxpY2UoMCkpIHtcbiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZW1pdHRlcilbX2VtaXR0ZXJdLm9mZihldmVudCwgZm4pO1xuICAgIH1cbiAgfVxuXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@uppy/utils/lib/EventTracker.js\n");

/***/ }),

/***/ "./node_modules/@uppy/utils/lib/NetworkError.js":
/*!******************************************************!*\
  !*** ./node_modules/@uppy/utils/lib/NetworkError.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass NetworkError extends Error {\n  constructor(error, xhr) {\n    if (xhr === void 0) {\n      xhr = null;\n    }\n\n    super(`This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.`);\n    this.cause = error;\n    this.isNetworkError = true;\n    this.request = xhr;\n  }\n\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NetworkError);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL05ldHdvcmtFcnJvci5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGlFQUFlLFlBQVkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AdXBweS91dGlscy9saWIvTmV0d29ya0Vycm9yLmpzPzMzOTAiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgTmV0d29ya0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihlcnJvciwgeGhyKSB7XG4gICAgaWYgKHhociA9PT0gdm9pZCAwKSB7XG4gICAgICB4aHIgPSBudWxsO1xuICAgIH1cblxuICAgIHN1cGVyKGBUaGlzIGxvb2tzIGxpa2UgYSBuZXR3b3JrIGVycm9yLCB0aGUgZW5kcG9pbnQgbWlnaHQgYmUgYmxvY2tlZCBieSBhbiBpbnRlcm5ldCBwcm92aWRlciBvciBhIGZpcmV3YWxsLmApO1xuICAgIHRoaXMuY2F1c2UgPSBlcnJvcjtcbiAgICB0aGlzLmlzTmV0d29ya0Vycm9yID0gdHJ1ZTtcbiAgICB0aGlzLnJlcXVlc3QgPSB4aHI7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBOZXR3b3JrRXJyb3I7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@uppy/utils/lib/NetworkError.js\n");

/***/ }),

/***/ "./node_modules/@uppy/utils/lib/RateLimitedQueue.js":
/*!**********************************************************!*\
  !*** ./node_modules/@uppy/utils/lib/RateLimitedQueue.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RateLimitedQueue\": () => (/* binding */ RateLimitedQueue),\n/* harmony export */   \"internalRateLimitedQueue\": () => (/* binding */ internalRateLimitedQueue)\n/* harmony export */ });\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\nfunction createCancelError(cause) {\n  return new Error('Cancelled', {\n    cause\n  });\n}\n\nfunction abortOn(signal) {\n  if (signal != null) {\n    const abortPromise = () => this.abort(signal.reason);\n\n    signal.addEventListener('abort', abortPromise, {\n      once: true\n    });\n\n    const removeAbortListener = () => {\n      signal.removeEventListener('abort', abortPromise);\n    };\n\n    this.then(removeAbortListener, removeAbortListener);\n  }\n\n  return this;\n}\n\nvar _activeRequests = /*#__PURE__*/_classPrivateFieldLooseKey(\"activeRequests\");\n\nvar _queuedHandlers = /*#__PURE__*/_classPrivateFieldLooseKey(\"queuedHandlers\");\n\nvar _paused = /*#__PURE__*/_classPrivateFieldLooseKey(\"paused\");\n\nvar _pauseTimer = /*#__PURE__*/_classPrivateFieldLooseKey(\"pauseTimer\");\n\nvar _downLimit = /*#__PURE__*/_classPrivateFieldLooseKey(\"downLimit\");\n\nvar _upperLimit = /*#__PURE__*/_classPrivateFieldLooseKey(\"upperLimit\");\n\nvar _rateLimitingTimer = /*#__PURE__*/_classPrivateFieldLooseKey(\"rateLimitingTimer\");\n\nvar _call = /*#__PURE__*/_classPrivateFieldLooseKey(\"call\");\n\nvar _queueNext = /*#__PURE__*/_classPrivateFieldLooseKey(\"queueNext\");\n\nvar _next = /*#__PURE__*/_classPrivateFieldLooseKey(\"next\");\n\nvar _queue = /*#__PURE__*/_classPrivateFieldLooseKey(\"queue\");\n\nvar _dequeue = /*#__PURE__*/_classPrivateFieldLooseKey(\"dequeue\");\n\nvar _resume = /*#__PURE__*/_classPrivateFieldLooseKey(\"resume\");\n\nvar _increaseLimit = /*#__PURE__*/_classPrivateFieldLooseKey(\"increaseLimit\");\n\nclass RateLimitedQueue {\n  constructor(limit) {\n    Object.defineProperty(this, _dequeue, {\n      value: _dequeue2\n    });\n    Object.defineProperty(this, _queue, {\n      value: _queue2\n    });\n    Object.defineProperty(this, _next, {\n      value: _next2\n    });\n    Object.defineProperty(this, _queueNext, {\n      value: _queueNext2\n    });\n    Object.defineProperty(this, _call, {\n      value: _call2\n    });\n    Object.defineProperty(this, _activeRequests, {\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, _queuedHandlers, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _paused, {\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, _pauseTimer, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _downLimit, {\n      writable: true,\n      value: 1\n    });\n    Object.defineProperty(this, _upperLimit, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _rateLimitingTimer, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _resume, {\n      writable: true,\n      value: () => this.resume()\n    });\n    Object.defineProperty(this, _increaseLimit, {\n      writable: true,\n      value: () => {\n        if (_classPrivateFieldLooseBase(this, _paused)[_paused]) {\n          _classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer] = setTimeout(_classPrivateFieldLooseBase(this, _increaseLimit)[_increaseLimit], 0);\n          return;\n        }\n\n        _classPrivateFieldLooseBase(this, _downLimit)[_downLimit] = this.limit;\n        this.limit = Math.ceil((_classPrivateFieldLooseBase(this, _upperLimit)[_upperLimit] + _classPrivateFieldLooseBase(this, _downLimit)[_downLimit]) / 2);\n\n        for (let i = _classPrivateFieldLooseBase(this, _downLimit)[_downLimit]; i <= this.limit; i++) {\n          _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n        }\n\n        if (_classPrivateFieldLooseBase(this, _upperLimit)[_upperLimit] - _classPrivateFieldLooseBase(this, _downLimit)[_downLimit] > 3) {\n          _classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer] = setTimeout(_classPrivateFieldLooseBase(this, _increaseLimit)[_increaseLimit], 2000);\n        } else {\n          _classPrivateFieldLooseBase(this, _downLimit)[_downLimit] = Math.floor(_classPrivateFieldLooseBase(this, _downLimit)[_downLimit] / 2);\n        }\n      }\n    });\n\n    if (typeof limit !== 'number' || limit === 0) {\n      this.limit = Infinity;\n    } else {\n      this.limit = limit;\n    }\n  }\n\n  run(fn, queueOptions) {\n    if (!_classPrivateFieldLooseBase(this, _paused)[_paused] && _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] < this.limit) {\n      return _classPrivateFieldLooseBase(this, _call)[_call](fn);\n    }\n\n    return _classPrivateFieldLooseBase(this, _queue)[_queue](fn, queueOptions);\n  }\n\n  wrapPromiseFunction(fn, queueOptions) {\n    var _this = this;\n\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      let queuedRequest;\n      const outerPromise = new Promise((resolve, reject) => {\n        queuedRequest = _this.run(() => {\n          let cancelError;\n          let innerPromise;\n\n          try {\n            innerPromise = Promise.resolve(fn(...args));\n          } catch (err) {\n            innerPromise = Promise.reject(err);\n          }\n\n          innerPromise.then(result => {\n            if (cancelError) {\n              reject(cancelError);\n            } else {\n              queuedRequest.done();\n              resolve(result);\n            }\n          }, err => {\n            if (cancelError) {\n              reject(cancelError);\n            } else {\n              queuedRequest.done();\n              reject(err);\n            }\n          });\n          return cause => {\n            cancelError = createCancelError(cause);\n          };\n        }, queueOptions);\n      });\n\n      outerPromise.abort = cause => {\n        queuedRequest.abort(cause);\n      };\n\n      outerPromise.abortOn = abortOn;\n      return outerPromise;\n    };\n  }\n\n  resume() {\n    _classPrivateFieldLooseBase(this, _paused)[_paused] = false;\n    clearTimeout(_classPrivateFieldLooseBase(this, _pauseTimer)[_pauseTimer]);\n\n    for (let i = 0; i < this.limit; i++) {\n      _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n    }\n  }\n\n  /**\n   * Freezes the queue for a while or indefinitely.\n   *\n   * @param {number | null } [duration] Duration for the pause to happen, in milliseconds.\n   *                                    If omitted, the queue won't resume automatically.\n   */\n  pause(duration) {\n    if (duration === void 0) {\n      duration = null;\n    }\n\n    _classPrivateFieldLooseBase(this, _paused)[_paused] = true;\n    clearTimeout(_classPrivateFieldLooseBase(this, _pauseTimer)[_pauseTimer]);\n\n    if (duration != null) {\n      _classPrivateFieldLooseBase(this, _pauseTimer)[_pauseTimer] = setTimeout(_classPrivateFieldLooseBase(this, _resume)[_resume], duration);\n    }\n  }\n  /**\n   * Pauses the queue for a duration, and lower the limit of concurrent requests\n   * when the queue resumes. When the queue resumes, it tries to progressively\n   * increase the limit in `this.#increaseLimit` until another call is made to\n   * `this.rateLimit`.\n   * Call this function when using the RateLimitedQueue for network requests and\n   * the remote server responds with 429 HTTP code.\n   *\n   * @param {number} duration in milliseconds.\n   */\n\n\n  rateLimit(duration) {\n    clearTimeout(_classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer]);\n    this.pause(duration);\n\n    if (this.limit > 1 && Number.isFinite(this.limit)) {\n      _classPrivateFieldLooseBase(this, _upperLimit)[_upperLimit] = this.limit - 1;\n      this.limit = _classPrivateFieldLooseBase(this, _downLimit)[_downLimit];\n      _classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer] = setTimeout(_classPrivateFieldLooseBase(this, _increaseLimit)[_increaseLimit], duration);\n    }\n  }\n\n  get isPaused() {\n    return _classPrivateFieldLooseBase(this, _paused)[_paused];\n  }\n\n}\n\nfunction _call2(fn) {\n  _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] += 1;\n  let done = false;\n  let cancelActive;\n\n  try {\n    cancelActive = fn();\n  } catch (err) {\n    _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] -= 1;\n    throw err;\n  }\n\n  return {\n    abort: cause => {\n      if (done) return;\n      done = true;\n      _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] -= 1;\n      cancelActive(cause);\n\n      _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n    },\n    done: () => {\n      if (done) return;\n      done = true;\n      _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] -= 1;\n\n      _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n    }\n  };\n}\n\nfunction _queueNext2() {\n  // Do it soon but not immediately, this allows clearing out the entire queue synchronously\n  // one by one without continuously _advancing_ it (and starting new tasks before immediately\n  // aborting them)\n  queueMicrotask(() => _classPrivateFieldLooseBase(this, _next)[_next]());\n}\n\nfunction _next2() {\n  if (_classPrivateFieldLooseBase(this, _paused)[_paused] || _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] >= this.limit) {\n    return;\n  }\n\n  if (_classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].length === 0) {\n    return;\n  } // Dispatch the next request, and update the abort/done handlers\n  // so that cancelling it does the Right Thing (and doesn't just try\n  // to dequeue an already-running request).\n\n\n  const next = _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].shift();\n\n  const handler = _classPrivateFieldLooseBase(this, _call)[_call](next.fn);\n\n  next.abort = handler.abort;\n  next.done = handler.done;\n}\n\nfunction _queue2(fn, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  const handler = {\n    fn,\n    priority: options.priority || 0,\n    abort: () => {\n      _classPrivateFieldLooseBase(this, _dequeue)[_dequeue](handler);\n    },\n    done: () => {\n      throw new Error('Cannot mark a queued request as done: this indicates a bug');\n    }\n  };\n\n  const index = _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].findIndex(other => {\n    return handler.priority > other.priority;\n  });\n\n  if (index === -1) {\n    _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].push(handler);\n  } else {\n    _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].splice(index, 0, handler);\n  }\n\n  return handler;\n}\n\nfunction _dequeue2(handler) {\n  const index = _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].indexOf(handler);\n\n  if (index !== -1) {\n    _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].splice(index, 1);\n  }\n}\n\nconst internalRateLimitedQueue = Symbol('__queue');//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL1JhdGVMaW1pdGVkUXVldWUuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw2REFBNkQsbUVBQW1FLHlFQUF5RTs7QUFFek07O0FBRUEsNENBQTRDOztBQUU1QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsZ0ZBQWdGLGlCQUFpQjtBQUNqRztBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSwwRUFBMEUsYUFBYTtBQUN2RjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL1JhdGVMaW1pdGVkUXVldWUuanM/MGZmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UocmVjZWl2ZXIsIHByaXZhdGVLZXkpIHsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVjZWl2ZXIsIHByaXZhdGVLZXkpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gdXNlIHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpOyB9IHJldHVybiByZWNlaXZlcjsgfVxuXG52YXIgaWQgPSAwO1xuXG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShuYW1lKSB7IHJldHVybiBcIl9fcHJpdmF0ZV9cIiArIGlkKysgKyBcIl9cIiArIG5hbWU7IH1cblxuZnVuY3Rpb24gY3JlYXRlQ2FuY2VsRXJyb3IoY2F1c2UpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcignQ2FuY2VsbGVkJywge1xuICAgIGNhdXNlXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhYm9ydE9uKHNpZ25hbCkge1xuICBpZiAoc2lnbmFsICE9IG51bGwpIHtcbiAgICBjb25zdCBhYm9ydFByb21pc2UgPSAoKSA9PiB0aGlzLmFib3J0KHNpZ25hbC5yZWFzb24pO1xuXG4gICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRQcm9taXNlLCB7XG4gICAgICBvbmNlOiB0cnVlXG4gICAgfSk7XG5cbiAgICBjb25zdCByZW1vdmVBYm9ydExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRQcm9taXNlKTtcbiAgICB9O1xuXG4gICAgdGhpcy50aGVuKHJlbW92ZUFib3J0TGlzdGVuZXIsIHJlbW92ZUFib3J0TGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbnZhciBfYWN0aXZlUmVxdWVzdHMgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJhY3RpdmVSZXF1ZXN0c1wiKTtcblxudmFyIF9xdWV1ZWRIYW5kbGVycyA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcInF1ZXVlZEhhbmRsZXJzXCIpO1xuXG52YXIgX3BhdXNlZCA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcInBhdXNlZFwiKTtcblxudmFyIF9wYXVzZVRpbWVyID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwicGF1c2VUaW1lclwiKTtcblxudmFyIF9kb3duTGltaXQgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJkb3duTGltaXRcIik7XG5cbnZhciBfdXBwZXJMaW1pdCA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcInVwcGVyTGltaXRcIik7XG5cbnZhciBfcmF0ZUxpbWl0aW5nVGltZXIgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJyYXRlTGltaXRpbmdUaW1lclwiKTtcblxudmFyIF9jYWxsID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiY2FsbFwiKTtcblxudmFyIF9xdWV1ZU5leHQgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJxdWV1ZU5leHRcIik7XG5cbnZhciBfbmV4dCA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcIm5leHRcIik7XG5cbnZhciBfcXVldWUgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJxdWV1ZVwiKTtcblxudmFyIF9kZXF1ZXVlID0gLyojX19QVVJFX18qL19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5KFwiZGVxdWV1ZVwiKTtcblxudmFyIF9yZXN1bWUgPSAvKiNfX1BVUkVfXyovX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkoXCJyZXN1bWVcIik7XG5cbnZhciBfaW5jcmVhc2VMaW1pdCA9IC8qI19fUFVSRV9fKi9fY2xhc3NQcml2YXRlRmllbGRMb29zZUtleShcImluY3JlYXNlTGltaXRcIik7XG5cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRlZFF1ZXVlIHtcbiAgY29uc3RydWN0b3IobGltaXQpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2RlcXVldWUsIHtcbiAgICAgIHZhbHVlOiBfZGVxdWV1ZTJcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX3F1ZXVlLCB7XG4gICAgICB2YWx1ZTogX3F1ZXVlMlxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfbmV4dCwge1xuICAgICAgdmFsdWU6IF9uZXh0MlxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfcXVldWVOZXh0LCB7XG4gICAgICB2YWx1ZTogX3F1ZXVlTmV4dDJcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2NhbGwsIHtcbiAgICAgIHZhbHVlOiBfY2FsbDJcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX2FjdGl2ZVJlcXVlc3RzLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiAwXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF9xdWV1ZWRIYW5kbGVycywge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogW11cbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX3BhdXNlZCwge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogZmFsc2VcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX3BhdXNlVGltZXIsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfZG93bkxpbWl0LCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiAxXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIF91cHBlckxpbWl0LCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX3JhdGVMaW1pdGluZ1RpbWVyLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgX3Jlc3VtZSwge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogKCkgPT4gdGhpcy5yZXN1bWUoKVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBfaW5jcmVhc2VMaW1pdCwge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogKCkgPT4ge1xuICAgICAgICBpZiAoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9wYXVzZWQpW19wYXVzZWRdKSB7XG4gICAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9yYXRlTGltaXRpbmdUaW1lcilbX3JhdGVMaW1pdGluZ1RpbWVyXSA9IHNldFRpbWVvdXQoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9pbmNyZWFzZUxpbWl0KVtfaW5jcmVhc2VMaW1pdF0sIDApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZG93bkxpbWl0KVtfZG93bkxpbWl0XSA9IHRoaXMubGltaXQ7XG4gICAgICAgIHRoaXMubGltaXQgPSBNYXRoLmNlaWwoKF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfdXBwZXJMaW1pdClbX3VwcGVyTGltaXRdICsgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9kb3duTGltaXQpW19kb3duTGltaXRdKSAvIDIpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2Rvd25MaW1pdClbX2Rvd25MaW1pdF07IGkgPD0gdGhpcy5saW1pdDsgaSsrKSB7XG4gICAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9xdWV1ZU5leHQpW19xdWV1ZU5leHRdKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF91cHBlckxpbWl0KVtfdXBwZXJMaW1pdF0gLSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2Rvd25MaW1pdClbX2Rvd25MaW1pdF0gPiAzKSB7XG4gICAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9yYXRlTGltaXRpbmdUaW1lcilbX3JhdGVMaW1pdGluZ1RpbWVyXSA9IHNldFRpbWVvdXQoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9pbmNyZWFzZUxpbWl0KVtfaW5jcmVhc2VMaW1pdF0sIDIwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfZG93bkxpbWl0KVtfZG93bkxpbWl0XSA9IE1hdGguZmxvb3IoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9kb3duTGltaXQpW19kb3duTGltaXRdIC8gMik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0eXBlb2YgbGltaXQgIT09ICdudW1iZXInIHx8IGxpbWl0ID09PSAwKSB7XG4gICAgICB0aGlzLmxpbWl0ID0gSW5maW5pdHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGltaXQgPSBsaW1pdDtcbiAgICB9XG4gIH1cblxuICBydW4oZm4sIHF1ZXVlT3B0aW9ucykge1xuICAgIGlmICghX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9wYXVzZWQpW19wYXVzZWRdICYmIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfYWN0aXZlUmVxdWVzdHMpW19hY3RpdmVSZXF1ZXN0c10gPCB0aGlzLmxpbWl0KSB7XG4gICAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9jYWxsKVtfY2FsbF0oZm4pO1xuICAgIH1cblxuICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3F1ZXVlKVtfcXVldWVdKGZuLCBxdWV1ZU9wdGlvbnMpO1xuICB9XG5cbiAgd3JhcFByb21pc2VGdW5jdGlvbihmbiwgcXVldWVPcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgbGV0IHF1ZXVlZFJlcXVlc3Q7XG4gICAgICBjb25zdCBvdXRlclByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHF1ZXVlZFJlcXVlc3QgPSBfdGhpcy5ydW4oKCkgPT4ge1xuICAgICAgICAgIGxldCBjYW5jZWxFcnJvcjtcbiAgICAgICAgICBsZXQgaW5uZXJQcm9taXNlO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlubmVyUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShmbiguLi5hcmdzKSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpbm5lclByb21pc2UgPSBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlubmVyUHJvbWlzZS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICBpZiAoY2FuY2VsRXJyb3IpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGNhbmNlbEVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHF1ZXVlZFJlcXVlc3QuZG9uZSgpO1xuICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgZXJyID0+IHtcbiAgICAgICAgICAgIGlmIChjYW5jZWxFcnJvcikge1xuICAgICAgICAgICAgICByZWplY3QoY2FuY2VsRXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcXVldWVkUmVxdWVzdC5kb25lKCk7XG4gICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBjYXVzZSA9PiB7XG4gICAgICAgICAgICBjYW5jZWxFcnJvciA9IGNyZWF0ZUNhbmNlbEVycm9yKGNhdXNlKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9LCBxdWV1ZU9wdGlvbnMpO1xuICAgICAgfSk7XG5cbiAgICAgIG91dGVyUHJvbWlzZS5hYm9ydCA9IGNhdXNlID0+IHtcbiAgICAgICAgcXVldWVkUmVxdWVzdC5hYm9ydChjYXVzZSk7XG4gICAgICB9O1xuXG4gICAgICBvdXRlclByb21pc2UuYWJvcnRPbiA9IGFib3J0T247XG4gICAgICByZXR1cm4gb3V0ZXJQcm9taXNlO1xuICAgIH07XG4gIH1cblxuICByZXN1bWUoKSB7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9wYXVzZWQpW19wYXVzZWRdID0gZmFsc2U7XG4gICAgY2xlYXJUaW1lb3V0KF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcGF1c2VUaW1lcilbX3BhdXNlVGltZXJdKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5saW1pdDsgaSsrKSB7XG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3F1ZXVlTmV4dClbX3F1ZXVlTmV4dF0oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRnJlZXplcyB0aGUgcXVldWUgZm9yIGEgd2hpbGUgb3IgaW5kZWZpbml0ZWx5LlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlciB8IG51bGwgfSBbZHVyYXRpb25dIER1cmF0aW9uIGZvciB0aGUgcGF1c2UgdG8gaGFwcGVuLCBpbiBtaWxsaXNlY29uZHMuXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgb21pdHRlZCwgdGhlIHF1ZXVlIHdvbid0IHJlc3VtZSBhdXRvbWF0aWNhbGx5LlxuICAgKi9cbiAgcGF1c2UoZHVyYXRpb24pIHtcbiAgICBpZiAoZHVyYXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgZHVyYXRpb24gPSBudWxsO1xuICAgIH1cblxuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcGF1c2VkKVtfcGF1c2VkXSA9IHRydWU7XG4gICAgY2xlYXJUaW1lb3V0KF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcGF1c2VUaW1lcilbX3BhdXNlVGltZXJdKTtcblxuICAgIGlmIChkdXJhdGlvbiAhPSBudWxsKSB7XG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3BhdXNlVGltZXIpW19wYXVzZVRpbWVyXSA9IHNldFRpbWVvdXQoX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9yZXN1bWUpW19yZXN1bWVdLCBkdXJhdGlvbik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBQYXVzZXMgdGhlIHF1ZXVlIGZvciBhIGR1cmF0aW9uLCBhbmQgbG93ZXIgdGhlIGxpbWl0IG9mIGNvbmN1cnJlbnQgcmVxdWVzdHNcbiAgICogd2hlbiB0aGUgcXVldWUgcmVzdW1lcy4gV2hlbiB0aGUgcXVldWUgcmVzdW1lcywgaXQgdHJpZXMgdG8gcHJvZ3Jlc3NpdmVseVxuICAgKiBpbmNyZWFzZSB0aGUgbGltaXQgaW4gYHRoaXMuI2luY3JlYXNlTGltaXRgIHVudGlsIGFub3RoZXIgY2FsbCBpcyBtYWRlIHRvXG4gICAqIGB0aGlzLnJhdGVMaW1pdGAuXG4gICAqIENhbGwgdGhpcyBmdW5jdGlvbiB3aGVuIHVzaW5nIHRoZSBSYXRlTGltaXRlZFF1ZXVlIGZvciBuZXR3b3JrIHJlcXVlc3RzIGFuZFxuICAgKiB0aGUgcmVtb3RlIHNlcnZlciByZXNwb25kcyB3aXRoIDQyOSBIVFRQIGNvZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gICAqL1xuXG5cbiAgcmF0ZUxpbWl0KGR1cmF0aW9uKSB7XG4gICAgY2xlYXJUaW1lb3V0KF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcmF0ZUxpbWl0aW5nVGltZXIpW19yYXRlTGltaXRpbmdUaW1lcl0pO1xuICAgIHRoaXMucGF1c2UoZHVyYXRpb24pO1xuXG4gICAgaWYgKHRoaXMubGltaXQgPiAxICYmIE51bWJlci5pc0Zpbml0ZSh0aGlzLmxpbWl0KSkge1xuICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF91cHBlckxpbWl0KVtfdXBwZXJMaW1pdF0gPSB0aGlzLmxpbWl0IC0gMTtcbiAgICAgIHRoaXMubGltaXQgPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2Rvd25MaW1pdClbX2Rvd25MaW1pdF07XG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3JhdGVMaW1pdGluZ1RpbWVyKVtfcmF0ZUxpbWl0aW5nVGltZXJdID0gc2V0VGltZW91dChfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2luY3JlYXNlTGltaXQpW19pbmNyZWFzZUxpbWl0XSwgZHVyYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpc1BhdXNlZCgpIHtcbiAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9wYXVzZWQpW19wYXVzZWRdO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gX2NhbGwyKGZuKSB7XG4gIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfYWN0aXZlUmVxdWVzdHMpW19hY3RpdmVSZXF1ZXN0c10gKz0gMTtcbiAgbGV0IGRvbmUgPSBmYWxzZTtcbiAgbGV0IGNhbmNlbEFjdGl2ZTtcblxuICB0cnkge1xuICAgIGNhbmNlbEFjdGl2ZSA9IGZuKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfYWN0aXZlUmVxdWVzdHMpW19hY3RpdmVSZXF1ZXN0c10gLT0gMTtcbiAgICB0aHJvdyBlcnI7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFib3J0OiBjYXVzZSA9PiB7XG4gICAgICBpZiAoZG9uZSkgcmV0dXJuO1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX2FjdGl2ZVJlcXVlc3RzKVtfYWN0aXZlUmVxdWVzdHNdIC09IDE7XG4gICAgICBjYW5jZWxBY3RpdmUoY2F1c2UpO1xuXG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3F1ZXVlTmV4dClbX3F1ZXVlTmV4dF0oKTtcbiAgICB9LFxuICAgIGRvbmU6ICgpID0+IHtcbiAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfYWN0aXZlUmVxdWVzdHMpW19hY3RpdmVSZXF1ZXN0c10gLT0gMTtcblxuICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9xdWV1ZU5leHQpW19xdWV1ZU5leHRdKCk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBfcXVldWVOZXh0MigpIHtcbiAgLy8gRG8gaXQgc29vbiBidXQgbm90IGltbWVkaWF0ZWx5LCB0aGlzIGFsbG93cyBjbGVhcmluZyBvdXQgdGhlIGVudGlyZSBxdWV1ZSBzeW5jaHJvbm91c2x5XG4gIC8vIG9uZSBieSBvbmUgd2l0aG91dCBjb250aW51b3VzbHkgX2FkdmFuY2luZ18gaXQgKGFuZCBzdGFydGluZyBuZXcgdGFza3MgYmVmb3JlIGltbWVkaWF0ZWx5XG4gIC8vIGFib3J0aW5nIHRoZW0pXG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfbmV4dClbX25leHRdKCkpO1xufVxuXG5mdW5jdGlvbiBfbmV4dDIoKSB7XG4gIGlmIChfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3BhdXNlZClbX3BhdXNlZF0gfHwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9hY3RpdmVSZXF1ZXN0cylbX2FjdGl2ZVJlcXVlc3RzXSA+PSB0aGlzLmxpbWl0KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcXVldWVkSGFuZGxlcnMpW19xdWV1ZWRIYW5kbGVyc10ubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vIERpc3BhdGNoIHRoZSBuZXh0IHJlcXVlc3QsIGFuZCB1cGRhdGUgdGhlIGFib3J0L2RvbmUgaGFuZGxlcnNcbiAgLy8gc28gdGhhdCBjYW5jZWxsaW5nIGl0IGRvZXMgdGhlIFJpZ2h0IFRoaW5nIChhbmQgZG9lc24ndCBqdXN0IHRyeVxuICAvLyB0byBkZXF1ZXVlIGFuIGFscmVhZHktcnVubmluZyByZXF1ZXN0KS5cblxuXG4gIGNvbnN0IG5leHQgPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3F1ZXVlZEhhbmRsZXJzKVtfcXVldWVkSGFuZGxlcnNdLnNoaWZ0KCk7XG5cbiAgY29uc3QgaGFuZGxlciA9IF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfY2FsbClbX2NhbGxdKG5leHQuZm4pO1xuXG4gIG5leHQuYWJvcnQgPSBoYW5kbGVyLmFib3J0O1xuICBuZXh0LmRvbmUgPSBoYW5kbGVyLmRvbmU7XG59XG5cbmZ1bmN0aW9uIF9xdWV1ZTIoZm4sIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZXIgPSB7XG4gICAgZm4sXG4gICAgcHJpb3JpdHk6IG9wdGlvbnMucHJpb3JpdHkgfHwgMCxcbiAgICBhYm9ydDogKCkgPT4ge1xuICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHRoaXMsIF9kZXF1ZXVlKVtfZGVxdWV1ZV0oaGFuZGxlcik7XG4gICAgfSxcbiAgICBkb25lOiAoKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBtYXJrIGEgcXVldWVkIHJlcXVlc3QgYXMgZG9uZTogdGhpcyBpbmRpY2F0ZXMgYSBidWcnKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaW5kZXggPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3F1ZXVlZEhhbmRsZXJzKVtfcXVldWVkSGFuZGxlcnNdLmZpbmRJbmRleChvdGhlciA9PiB7XG4gICAgcmV0dXJuIGhhbmRsZXIucHJpb3JpdHkgPiBvdGhlci5wcmlvcml0eTtcbiAgfSk7XG5cbiAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcXVldWVkSGFuZGxlcnMpW19xdWV1ZWRIYW5kbGVyc10ucHVzaChoYW5kbGVyKTtcbiAgfSBlbHNlIHtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3F1ZXVlZEhhbmRsZXJzKVtfcXVldWVkSGFuZGxlcnNdLnNwbGljZShpbmRleCwgMCwgaGFuZGxlcik7XG4gIH1cblxuICByZXR1cm4gaGFuZGxlcjtcbn1cblxuZnVuY3Rpb24gX2RlcXVldWUyKGhhbmRsZXIpIHtcbiAgY29uc3QgaW5kZXggPSBfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UodGhpcywgX3F1ZXVlZEhhbmRsZXJzKVtfcXVldWVkSGFuZGxlcnNdLmluZGV4T2YoaGFuZGxlcik7XG5cbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSh0aGlzLCBfcXVldWVkSGFuZGxlcnMpW19xdWV1ZWRIYW5kbGVyc10uc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaW50ZXJuYWxSYXRlTGltaXRlZFF1ZXVlID0gU3ltYm9sKCdfX3F1ZXVlJyk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@uppy/utils/lib/RateLimitedQueue.js\n");

/***/ }),

/***/ "./node_modules/@uppy/utils/lib/emitSocketProgress.js":
/*!************************************************************!*\
  !*** ./node_modules/@uppy/utils/lib/emitSocketProgress.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.throttle */ \"./node_modules/lodash.throttle/index.js\");\n\n\nfunction emitSocketProgress(uploader, progressData, file) {\n  const {\n    progress,\n    bytesUploaded,\n    bytesTotal\n  } = progressData;\n\n  if (progress) {\n    uploader.uppy.log(`Upload progress: ${progress}`);\n    uploader.uppy.emit('upload-progress', file, {\n      uploader,\n      bytesUploaded,\n      bytesTotal\n    });\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (lodash_throttle__WEBPACK_IMPORTED_MODULE_0__(emitSocketProgress, 300, {\n  leading: true,\n  trailing: true\n}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL2VtaXRTb2NrZXRQcm9ncmVzcy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1Qzs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQSwwQ0FBMEMsU0FBUztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBLGlFQUFlLDRDQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AdXBweS91dGlscy9saWIvZW1pdFNvY2tldFByb2dyZXNzLmpzPzk3MDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHRocm90dGxlIGZyb20gJ2xvZGFzaC50aHJvdHRsZSc7XG5cbmZ1bmN0aW9uIGVtaXRTb2NrZXRQcm9ncmVzcyh1cGxvYWRlciwgcHJvZ3Jlc3NEYXRhLCBmaWxlKSB7XG4gIGNvbnN0IHtcbiAgICBwcm9ncmVzcyxcbiAgICBieXRlc1VwbG9hZGVkLFxuICAgIGJ5dGVzVG90YWxcbiAgfSA9IHByb2dyZXNzRGF0YTtcblxuICBpZiAocHJvZ3Jlc3MpIHtcbiAgICB1cGxvYWRlci51cHB5LmxvZyhgVXBsb2FkIHByb2dyZXNzOiAke3Byb2dyZXNzfWApO1xuICAgIHVwbG9hZGVyLnVwcHkuZW1pdCgndXBsb2FkLXByb2dyZXNzJywgZmlsZSwge1xuICAgICAgdXBsb2FkZXIsXG4gICAgICBieXRlc1VwbG9hZGVkLFxuICAgICAgYnl0ZXNUb3RhbFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHRocm90dGxlKGVtaXRTb2NrZXRQcm9ncmVzcywgMzAwLCB7XG4gIGxlYWRpbmc6IHRydWUsXG4gIHRyYWlsaW5nOiB0cnVlXG59KTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@uppy/utils/lib/emitSocketProgress.js\n");

/***/ }),

/***/ "./node_modules/@uppy/utils/lib/fetchWithNetworkError.js":
/*!***************************************************************!*\
  !*** ./node_modules/@uppy/utils/lib/fetchWithNetworkError.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ fetchWithNetworkError)\n/* harmony export */ });\n/* harmony import */ var _NetworkError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NetworkError.js */ \"./node_modules/@uppy/utils/lib/NetworkError.js\");\n\n/**\n * Wrapper around window.fetch that throws a NetworkError when appropriate\n */\n\nfunction fetchWithNetworkError() {\n  return fetch(...arguments).catch(err => {\n    if (err.name === 'AbortError') {\n      throw err;\n    } else {\n      throw new _NetworkError_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](err);\n    }\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL2ZldGNoV2l0aE5ldHdvcmtFcnJvci5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2QztBQUM3QztBQUNBO0FBQ0E7O0FBRWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sZ0JBQWdCLHdEQUFZO0FBQzVCO0FBQ0EsR0FBRztBQUNIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL2ZldGNoV2l0aE5ldHdvcmtFcnJvci5qcz8zOWJhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOZXR3b3JrRXJyb3IgZnJvbSAnLi9OZXR3b3JrRXJyb3IuanMnO1xuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCB3aW5kb3cuZmV0Y2ggdGhhdCB0aHJvd3MgYSBOZXR3b3JrRXJyb3Igd2hlbiBhcHByb3ByaWF0ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGZldGNoV2l0aE5ldHdvcmtFcnJvcigpIHtcbiAgcmV0dXJuIGZldGNoKC4uLmFyZ3VtZW50cykuY2F0Y2goZXJyID0+IHtcbiAgICBpZiAoZXJyLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGVycik7XG4gICAgfVxuICB9KTtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@uppy/utils/lib/fetchWithNetworkError.js\n");

/***/ }),

/***/ "./node_modules/@uppy/utils/lib/getSocketHost.js":
/*!*******************************************************!*\
  !*** ./node_modules/@uppy/utils/lib/getSocketHost.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ getSocketHost)\n/* harmony export */ });\nfunction getSocketHost(url) {\n  // get the host domain\n  const regex = /^(?:https?:\\/\\/|\\/\\/)?(?:[^@\\n]+@)?(?:www\\.)?([^\\n]+)/i;\n  const host = regex.exec(url)[1];\n  const socketProtocol = /^http:\\/\\//i.test(url) ? 'ws' : 'wss';\n  return `${socketProtocol}://${host}`;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL2dldFNvY2tldEhvc3QuanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWUsS0FBSyxLQUFLO0FBQ3JDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL2dldFNvY2tldEhvc3QuanM/ODE3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRTb2NrZXRIb3N0KHVybCkge1xuICAvLyBnZXQgdGhlIGhvc3QgZG9tYWluXG4gIGNvbnN0IHJlZ2V4ID0gL14oPzpodHRwcz86XFwvXFwvfFxcL1xcLyk/KD86W15AXFxuXStAKT8oPzp3d3dcXC4pPyhbXlxcbl0rKS9pO1xuICBjb25zdCBob3N0ID0gcmVnZXguZXhlYyh1cmwpWzFdO1xuICBjb25zdCBzb2NrZXRQcm90b2NvbCA9IC9eaHR0cDpcXC9cXC8vaS50ZXN0KHVybCkgPyAnd3MnIDogJ3dzcyc7XG4gIHJldHVybiBgJHtzb2NrZXRQcm90b2NvbH06Ly8ke2hvc3R9YDtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@uppy/utils/lib/getSocketHost.js\n");

/***/ }),

/***/ "./node_modules/@uppy/utils/lib/hasProperty.js":
/*!*****************************************************!*\
  !*** ./node_modules/@uppy/utils/lib/hasProperty.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ has)\n/* harmony export */ });\nfunction has(object, key) {\n  return Object.prototype.hasOwnProperty.call(object, key);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHVwcHkvdXRpbHMvbGliL2hhc1Byb3BlcnR5LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBZTtBQUNmO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AdXBweS91dGlscy9saWIvaGFzUHJvcGVydHkuanM/NDUwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoYXMob2JqZWN0LCBrZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@uppy/utils/lib/hasProperty.js\n");

/***/ })

}]);