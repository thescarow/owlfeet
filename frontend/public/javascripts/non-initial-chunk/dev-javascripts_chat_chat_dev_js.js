"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkfrontend"] = self["webpackChunkfrontend"] || []).push([["dev-javascripts_chat_chat_dev_js"],{

/***/ "./dev-javascripts/chat/chat.dev.js":
/*!******************************************!*\
  !*** ./dev-javascripts/chat/chat.dev.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"adjustMessageContainerBottomPadding\": () => (/* binding */ adjustMessageContainerBottomPadding),\n/* harmony export */   \"openActiveChatInputBox\": () => (/* binding */ openActiveChatInputBox),\n/* harmony export */   \"openActivechatInputAttachmentBox\": () => (/* binding */ openActivechatInputAttachmentBox)\n/* harmony export */ });\nconst allChatSection = document.getElementById(\"allChatSection\");\nconst activeChatSection = document.getElementById(\"activeChatSection\");\nconst activeChatMessageContainer = document.getElementById(\"activeChatMessageContainer\");\nlet activeChatInputTextContent = document.getElementById(\"activeChatInputTextContent\");\nlet allChatChatBoxContainer = document.getElementById(\"allChatChatBoxContainer\");\nlet isUserTyping = false;\nlet lastActiveChatId = activeChatSection.dataset.chatId.toString();\n\n(async function () {\n  if (!IS_INIT_CHAT_MODULE) {\n    async function checkChatState() {\n      // console.log(location)\n      // console.log(history)\n      if (location.hash) {\n        let chatId = location.hash.replace(\"#\", \"\");\n        let {\n          fetchActiveChat\n        } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_js_fetchActiveChat_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./js/fetchActiveChat.dev */ \"./dev-javascripts/chat/js/fetchActiveChat.dev.js\"));\n        fetchActiveChat(chatId);\n      } else {\n        // history.replaceState({}, \"\", \"\")\n        document.title = \"Chats\";\n        allChatSection.classList.remove(\"all-chat-section--hide\");\n        activeChatSection.classList.add(\"active-chat-section--hide\");\n      }\n    }\n\n    document.addEventListener(\"DOMContentLoaded\", checkChatState);\n    window.addEventListener(\"popstate\", checkChatState); //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    // active chat message container\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    // active chat input container\n\n    const activeChatInputContainer = document.getElementById(\"activeChatInputContainer\");\n    const activeChatInputTextContent = document.getElementById(\"activeChatInputTextContent\");\n    const activeChatInputAttachmentBox = document.getElementById(\"activeChatInputAttachmentBox\");\n    activeChatInputTextContent.addEventListener(\"input\", () => {\n      if (activeChatInputTextContent.value === \"\") {\n        activeChatInputAttachmentBox.classList.remove(\"active-chat-input-attachment-box--hide\");\n      } else {\n        if (!activeChatInputAttachmentBox.classList.contains(\"active-chat-input-attachment-box--hide\")) {\n          activeChatInputAttachmentBox.classList.add(\"active-chat-input-attachment-box--hide\");\n        }\n      }\n\n      activeChatInputTextContent.style.height = \"auto\";\n      activeChatInputTextContent.style.height = activeChatInputTextContent.scrollHeight + \"px\";\n      adjustMessageContainerBottomPadding();\n    }, false); ///////////////////////////////////////////////////\n\n    const {\n      default: insertTextAtCursor\n    } = await __webpack_require__.e(/*! import() */ \"node_modules_insert-text-at-cursor_dist_index_esm_js\").then(__webpack_require__.bind(__webpack_require__, /*! insert-text-at-cursor */ \"./node_modules/insert-text-at-cursor/dist/index.esm.js\"));\n    const {\n      Picker\n    } = await __webpack_require__.e(/*! import() */ \"vendors-node_modules_emoji-mart_dist_module_js\").then(__webpack_require__.bind(__webpack_require__, /*! emoji-mart */ \"./node_modules/emoji-mart/dist/module.js\"));\n\n    function getEmojiAndAddToInput(emoji) {\n      insertTextAtCursor(activeChatInputTextContent, emoji.native);\n    }\n\n    const activeChatInputEmojiBtn = document.getElementById(\"activeChatInputEmojiBtn\");\n    const activeChatInputEmojiContainer = document.getElementById(\"activeChatInputEmojiContainer\");\n    let emojiPickerOptions = {\n      parent: activeChatInputEmojiContainer,\n      data: async () => {\n        const data = await __webpack_require__.e(/*! import() */ \"vendors-node_modules_emoji-mart_data_sets_14_native_json\").then(__webpack_require__.t.bind(__webpack_require__, /*! @emoji-mart/data */ \"./node_modules/@emoji-mart/data/sets/14/native.json\", 19));\n        return data;\n      },\n      onEmojiSelect: getEmojiAndAddToInput,\n      // onClickOutside: () => {\n      //   console.log(\"hello\")\n      // },\n      autoFocus: false,\n      emojiButtonColors: [\"rgba(155, 223, 88, 0.7)\", \"rgba(155, 40, 88, 0.7)\", \"rgba(40, 223, 88, 0.7)\", \"rgba(155, 223, 88, 0.7)\", \"rgba(40, 223, 223, 0.7)\", \"rgba(20, 150, 150, 0.7)\", \"rgba(150, 150, 20, 0.7)\", \"rgba(150, 20, 150, 0.7)\"],\n      emojiButtonSize: 40,\n      // emojiSize: 25,\n      emojiVersion: 14,\n      icons: \"auto\",\n      maxFrequentRows: 2,\n      navPosition: \"bottom\",\n      previewPosition: \"none\",\n      set: \"native\",\n      dynamicWidth: true\n    };\n    let emojiPicker = new Picker(emojiPickerOptions);\n    activeChatInputEmojiBtn.addEventListener(\"click\", () => {\n      activeChatInputEmojiContainer.classList.toggle(\"active-chat-input-box__emoji-container--hide\");\n    }); ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    // input message creation\n\n    let {\n      closeReplyMessageBox\n    } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_js_replyMessageBox_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./js/replyMessageBox.dev.js */ \"./dev-javascripts/chat/js/replyMessageBox.dev.js\")); // ///////////////////////////////////////////////////////////// /////////////////////////////////////////////////////\n\n    const {\n      checkTimeAndCreateNewMessage\n    } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_showActiveChatSection_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./js/message.dev */ \"./dev-javascripts/chat/js/message.dev.js\"));\n    const {\n      updateAllChatSection\n    } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_js_updateAllChatSection_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./js/updateAllChatSection.dev */ \"./dev-javascripts/chat/js/updateAllChatSection.dev.js\"));\n    const {\n      default: Uppy\n    } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_lodash_throttle_index_js-node_modules_namespace-emitter_index_js-node_mo-fa5147\"), __webpack_require__.e(\"vendors-node_modules_uppy_core_lib_index_js\")]).then(__webpack_require__.t.bind(__webpack_require__, /*! @uppy/core */ \"./node_modules/@uppy/core/lib/index.js\", 23));\n    const {\n      default: Dashboard\n    } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_lodash_throttle_index_js-node_modules_namespace-emitter_index_js-node_mo-fa5147\"), __webpack_require__.e(\"vendors-node_modules_uppy_core_lib_index_js\"), __webpack_require__.e(\"vendors-node_modules_uppy_dashboard_lib_index_js\")]).then(__webpack_require__.t.bind(__webpack_require__, /*! @uppy/dashboard */ \"./node_modules/@uppy/dashboard/lib/index.js\", 23));\n    const {\n      default: Webcam\n    } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_lodash_throttle_index_js-node_modules_namespace-emitter_index_js-node_mo-fa5147\"), __webpack_require__.e(\"vendors-node_modules_uppy_core_lib_index_js\"), __webpack_require__.e(\"vendors-node_modules_uppy_webcam_lib_index_js\")]).then(__webpack_require__.t.bind(__webpack_require__, /*! @uppy/webcam */ \"./node_modules/@uppy/webcam/lib/index.js\", 23));\n    const {\n      default: ImageEditor\n    } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_lodash_throttle_index_js-node_modules_namespace-emitter_index_js-node_mo-fa5147\"), __webpack_require__.e(\"vendors-node_modules_uppy_core_lib_index_js\"), __webpack_require__.e(\"vendors-node_modules_uppy_image-editor_lib_index_js\")]).then(__webpack_require__.t.bind(__webpack_require__, /*! @uppy/image-editor */ \"./node_modules/@uppy/image-editor/lib/index.js\", 23));\n    const {\n      default: Audio\n    } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_lodash_throttle_index_js-node_modules_namespace-emitter_index_js-node_mo-fa5147\"), __webpack_require__.e(\"vendors-node_modules_uppy_core_lib_index_js\"), __webpack_require__.e(\"vendors-node_modules_uppy_audio_lib_index_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! @uppy/audio */ \"./node_modules/@uppy/audio/lib/index.js\"));\n    await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_uppy_core_dist_style_css\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-d9b4de2\")]).then(__webpack_require__.bind(__webpack_require__, /*! @uppy/core/dist/style.css */ \"./node_modules/@uppy/core/dist/style.css\"));\n    await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_uppy_dashboard_dist_style_css\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-784fbd\")]).then(__webpack_require__.bind(__webpack_require__, /*! @uppy/dashboard/dist/style.css */ \"./node_modules/@uppy/dashboard/dist/style.css\"));\n    await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_uppy_webcam_dist_style_css\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_getUrl_js-no-6b1333\")]).then(__webpack_require__.bind(__webpack_require__, /*! @uppy/webcam/dist/style.css */ \"./node_modules/@uppy/webcam/dist/style.css\"));\n    await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_uppy_image-editor_dist_style_css\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_getUrl_js-no-f4d24e\")]).then(__webpack_require__.bind(__webpack_require__, /*! @uppy/image-editor/dist/style.css */ \"./node_modules/@uppy/image-editor/dist/style.css\"));\n    await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_uppy_audio_dist_style_css\"), __webpack_require__.e(\"data_image_svg_xml_charset_US-ASCII_3Csvg_20xmlns_3D_22http_3A_2F_2Fwww_w3_org_2F2000_2Fsvg_2-cd289e\")]).then(__webpack_require__.bind(__webpack_require__, /*! @uppy/audio/dist/style.css */ \"./node_modules/@uppy/audio/dist/style.css\"));\n    const {\n      default: AwsS3Multipart\n    } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_lodash_throttle_index_js-node_modules_namespace-emitter_index_js-node_mo-fa5147\"), __webpack_require__.e(\"vendors-node_modules_uppy_aws-s3-multipart_lib_index_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! @uppy/aws-s3-multipart */ \"./node_modules/@uppy/aws-s3-multipart/lib/index.js\"));\n    const uppy = new Uppy({\n      id: \"chatMedia\",\n      autoProceed: false,\n      allowMultipleUploadBatches: true,\n      debug: false,\n      onBeforeFileAdded: (currentFile, files) => {\n        console.log(currentFile);\n\n        if (!currentFile.type) {\n          uppy.log(`Skipping file because it has no type`);\n          uppy.info(`Skipping file because it has no type`, \"error\", 500);\n          return false;\n        } else {\n          currentFile.name = \"\";\n          return currentFile;\n        }\n      },\n      onBeforeUpload: files => {// const updatedFiles = {}\n        // Object.keys(files).forEach(fileID => {\n        //   updatedFiles[fileID] = {\n        //     ...files[fileID],\n        //     meta: {\n        //       ...files[fileID].meta,\n        //       fileType: files[fileID].type\n        //     }\n        //   }\n        // })\n        // console.log(updatedFiles)\n        // return updatedFiles\n      },\n      restrictions: {\n        maxFileSize: 1024 * 1024 * 100,\n        minFileSize: null,\n        maxTotalFileSize: 1024 * 1024 * 100 * 10,\n        maxNumberOfFiles: 10,\n        minNumberOfFiles: 1,\n        allowedFileTypes: [\"image/jpeg\", \"image/png\", \"image/gif\", \"image/svg+xml\", \"image/x-png\", \"audio/mpeg\", \"audio/wav\", \"audio/x-wav\", \"audio/ogg\", \"audio/webm\", // \"audio/*\",\n        \"video/mp4\", \"video/webm\", \"video/ogg\", \"video/quicktime\", \"video/x-matroska\"]\n      },\n      meta: {\n        mediaType: \"chat-media\"\n      },\n      infoTimeout: 5000\n    }).use(Dashboard, {\n      trigger: \"#activeChatInputAttachmentFileBtn\",\n      target: \"body\",\n      inline: false,\n      plugins: [\"Webcam\", \"ImageEditor\", \"Audio\"],\n      thumbnailWidth: 300,\n      // closeAfterFinish: false,\n      showRemoveButtonAfterComplete: false,\n      disablePageScrollWhenModalOpen: true,\n      closeModalOnClickOutside: true,\n      theme: \"light\",\n      locale: {\n        strings: {}\n      },\n      note: \"Images, Audios and videos only, up to 10 files, 1 file up to 100 MB\",\n      proudlyDisplayPoweredByUppy: false\n    }).use(Webcam, {\n      target: Dashboard,\n      title: \"Camera\",\n      mirror: true,\n      modes: [\"video-audio\", \"video-only\", \"picture\"],\n      preferredVideoMimeType: \"video/mp4\",\n      showRecordingLength: true\n    }).use(ImageEditor, {\n      target: Dashboard,\n      quality: 0.8\n    }).use(Audio, {\n      id: \"Audio\",\n      target: Dashboard,\n      showAudioSourceDropdown: false\n    }).use(AwsS3Multipart, {\n      limit: 4,\n      companionUrl: `${location.origin}/companion`\n    }); // uppy.on(\"complete\", result => {\n    //   console.log(\n    //     \"Upload complete! Weâ€™ve uploaded these files:\",\n    //     result.successful\n    //   )\n    // })\n\n    uppy.on(\"upload-success\", (file, response) => {\n      let userMessage = {};\n      userMessage.chat = activeChatSection.dataset.chatId;\n      userMessage.hasMediaContent = true;\n      userMessage.mediaContentType = file.type.split(\"/\")[0];\n      userMessage.mediaContentMimeType = file.type;\n      userMessage.mediaContentPath = file.s3Multipart.key;\n      userMessage.repliedTo = activeChatInputContainer.dataset.repliedTo;\n      fetch(\"/message\", {\n        method: \"POST\",\n        // or 'PUT'\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(userMessage)\n      }).then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return Promise.reject(response);\n      }).then(async data => {\n        if (data.isSuccess) {\n          checkTimeAndCreateNewMessage(data.message, true);\n          closeReplyMessageBox();\n          updateAllChatSection(data.message);\n        } else {\n          let {\n            createMainNotification\n          } = await Promise.all(/*! import() */[__webpack_require__.e(\"dev-javascripts_common_mainNotification_dev_js\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-d9b4de1\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n          createMainNotification(data.error, \"error\");\n        }\n      }).catch(async err => {\n        console.log(err);\n        let {\n          createMainNotification\n        } = await Promise.all(/*! import() */[__webpack_require__.e(\"dev-javascripts_common_mainNotification_dev_js\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-d9b4de1\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n        createMainNotification(\"Server Error In Sending Message, Please Try Again\", \"error\");\n      });\n    }); // active chat input youtube send btn\n\n    const activeChatInputAttachmentYoutubeContentSendBtn = document.getElementById(\"activeChatInputAttachmentYoutubeContentSendBtn\");\n    const activeChatInputAttachmentYoutubeContent = document.getElementById(\"activeChatInputAttachmentYoutubeContent\");\n    activeChatInputAttachmentYoutubeContentSendBtn.addEventListener(\"click\", () => {\n      let userMessage = {};\n\n      if (activeChatInputAttachmentYoutubeContent.value !== \"\") {\n        userMessage.chat = activeChatSection.dataset.chatId;\n        userMessage.hasMediaContent = true;\n        userMessage.mediaContentType = \"youtube\";\n        userMessage.mediaContentMimeType = \"video/mp4\";\n        userMessage.mediaContentPath = activeChatInputAttachmentYoutubeContent.value;\n        userMessage.repliedTo = activeChatInputContainer.dataset.repliedTo;\n        activeChatInputAttachmentYoutubeContent.value = \"\";\n        fetch(\"/message\", {\n          method: \"POST\",\n          // or 'PUT'\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(userMessage)\n        }).then(response => {\n          if (response.ok) {\n            return response.json();\n          }\n\n          return Promise.reject(response);\n        }).then(async data => {\n          if (data.isSuccess) {\n            checkTimeAndCreateNewMessage(data.message, true);\n            closeReplyMessageBox();\n            document.getElementById(\"activeChatInputAttachmentYoutubeBtnInputBox\").classList.add(\"input-attachment-btn-box__input-box--hide\");\n            updateAllChatSection(data.message);\n            activeChatInputAttachmentYoutubeBtnInputBox.classList.add(\"attachment-btn-box__input-box--hide\");\n          } else {\n            let {\n              createMainNotification\n            } = await Promise.all(/*! import() */[__webpack_require__.e(\"dev-javascripts_common_mainNotification_dev_js\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-d9b4de1\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n            createMainNotification(data.error, \"error\");\n          }\n        }).catch(async err => {\n          console.log(err);\n          let {\n            createMainNotification\n          } = await Promise.all(/*! import() */[__webpack_require__.e(\"dev-javascripts_common_mainNotification_dev_js\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-d9b4de1\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n          createMainNotification(\"Server Error In Sending Message, Please Try Again\", \"error\");\n        });\n      }\n    }); /////////////////////////////////////////////////////////////\n    // active chat input send btn\n\n    const activeChatInputSendBtn = document.getElementById(\"activeChatInputSendBtn\");\n    activeChatInputSendBtn.addEventListener(\"click\", async () => {\n      let userMessage = {};\n\n      if (activeChatInputTextContent.value.trim() !== \"\" && activeChatSection.dataset.chatId !== \"\") {\n        userMessage.chat = activeChatSection.dataset.chatId;\n        userMessage.hasMediaContent = false;\n        userMessage.textContent = activeChatInputTextContent.value.trim();\n        userMessage.repliedTo = activeChatInputContainer.dataset.repliedTo;\n        activeChatInputTextContent.value = \"\";\n\n        if (activeChatSection.dataset.chatId !== \"\") {\n          let {\n            sendChatMessageStopTypingSocket\n          } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_socket_event-emitter_chat-socket_index_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../socket/event-emitter/chat-socket */ \"./dev-javascripts/socket/event-emitter/chat-socket/index.js\"));\n          sendChatMessageStopTypingSocket(activeChatSection.dataset.chatId);\n          isUserTyping = false;\n        }\n\n        fetch(\"/message\", {\n          method: \"POST\",\n          // or 'PUT'\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(userMessage)\n        }).then(response => {\n          if (response.ok) {\n            return response.json();\n          }\n\n          return Promise.reject(response);\n        }).then(async data => {\n          if (data.isSuccess) {\n            console.log(\"created message:\", data.message);\n            activeChatInputAttachmentBox.classList.remove(\"active-chat-input-attachment-box--hide\");\n            activeChatInputTextContent.style.height = \"auto\";\n            activeChatInputTextContent.style.height = activeChatInputTextContent.scrollHeight + \"px\";\n\n            if (parseInt(activeChatInputTextContent.style.height.slice(0, -2)) <= 40) {\n              activeChatMessageContainer.style.paddingBottom = \"60px\";\n            } else {\n              activeChatMessageContainer.style.paddingBottom = activeChatInputTextContent.style.height;\n            }\n\n            checkTimeAndCreateNewMessage(data.message, true);\n            closeReplyMessageBox();\n            updateAllChatSection(data.message);\n            activeChatMessageContainer.scrollTop = activeChatMessageContainer.scrollHeight;\n          } else {\n            let {\n              createMainNotification\n            } = await Promise.all(/*! import() */[__webpack_require__.e(\"dev-javascripts_common_mainNotification_dev_js\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-d9b4de1\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n            createMainNotification(data.error, \"error\");\n          }\n        }).catch(async err => {\n          console.log(err);\n          let {\n            createMainNotification\n          } = await Promise.all(/*! import() */[__webpack_require__.e(\"dev-javascripts_common_mainNotification_dev_js\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-d9b4de1\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../common/mainNotification.dev */ \"./dev-javascripts/common/mainNotification.dev.js\"));\n          createMainNotification(\"Server Error In Sending Message, Please Try Again\", \"error\");\n        });\n      }\n    }); ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    // active-chat-input-attachment-box\n\n    const activeChatInputAttachmentBoxBtn = document.getElementById(\"activeChatInputAttachmentBoxBtn\");\n    activeChatInputAttachmentBoxBtn.addEventListener(\"click\", () => {\n      if (activeChatInputAttachmentBoxBtn.classList.contains(\"active-chat-input-attachment-box__btn--selected\")) {\n        openActiveChatInputBox();\n      } else {\n        openActivechatInputAttachmentBox();\n      }\n    });\n    const activeChatInputAttachmentYoutubeBtn = document.getElementById(\"activeChatInputAttachmentYoutubeBtn\");\n    const activeChatInputAttachmentYoutubeBtnInputBox = document.getElementById(\"activeChatInputAttachmentYoutubeBtnInputBox\");\n    activeChatInputAttachmentYoutubeBtn.addEventListener(\"click\", () => {\n      activeChatInputAttachmentYoutubeBtnInputBox.classList.toggle(\"input-attachment-btn-box__input-box--hide\");\n    });\n    initialiseEventForChatModule();\n    IS_INIT_CHAT_MODULE = true;\n  }\n})();\n\nfunction openActivechatInputAttachmentBox() {\n  document.getElementById(\"activeChatInputAttachmentBoxBtn\").classList.add(\"active-chat-input-attachment-box__btn--selected\");\n  const activeChatInputAttachmentBox = document.getElementById(\"activeChatInputAttachmentBox\");\n  activeChatInputAttachmentBox.classList.add(\"active-chat-input-attachment-box--selected\");\n  activeChatInputAttachmentBox.classList.remove(\"active-chat-input-attachment-box--hide\");\n  document.getElementById(\"activeChatInputAttachmentBtnContainer\").classList.remove(\"input-attachment-btn-container--hide\");\n  document.getElementById(\"activeChatInputBox\").classList.add(\"active-chat-input-box--hide\");\n  document.getElementById(\"activeChatInputSendBox\").classList.add(\"active-chat-input-send-box--hide\");\n  document.getElementById(\"activeChatInputAttachmentYoutubeBtnInputBox\").classList.add(\"input-attachment-btn-box__input-box--hide\");\n  adjustMessageContainerBottomPadding();\n}\nfunction openActiveChatInputBox() {\n  document.getElementById(\"activeChatInputAttachmentBoxBtn\").classList.remove(\"active-chat-input-attachment-box__btn--selected\");\n  document.getElementById(\"activeChatInputAttachmentBox\").classList.remove(\"active-chat-input-attachment-box--selected\");\n  document.getElementById(\"activeChatInputAttachmentBtnContainer\").classList.add(\"input-attachment-btn-container--hide\");\n  document.getElementById(\"activeChatInputBox\").classList.remove(\"active-chat-input-box--hide\");\n  document.getElementById(\"activeChatInputSendBox\").classList.remove(\"active-chat-input-send-box--hide\");\n  adjustMessageContainerBottomPadding();\n}\nfunction adjustMessageContainerBottomPadding() {\n  activeChatMessageContainer.style.paddingBottom = activeChatInputContainer.clientHeight + 5 + \"px\";\n  activeChatMessageContainer.scrollTop = activeChatMessageContainer.scrollHeight;\n}\n\nfunction initialiseEventForChatModule() {\n  // initialize event to active chat\n  // active chat to all chat btn\n  const ActiveChatToAllChatBtn = document.getElementById(\"ActiveChatToAllChatBtn\");\n  ActiveChatToAllChatBtn.addEventListener(\"click\", async () => {\n    location.hash = \"\";\n\n    if (activeChatSection.dataset.chatId !== \"\") {\n      let {\n        sendChatMessageStopTypingSocket\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_socket_event-emitter_chat-socket_index_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../socket/event-emitter/chat-socket */ \"./dev-javascripts/socket/event-emitter/chat-socket/index.js\"));\n      sendChatMessageStopTypingSocket(activeChatSection.dataset.chatId);\n      isUserTyping = false;\n    }\n  }); //active chat header pic and active chat header name\n\n  let activeChatHeaderPic = document.getElementById(\"activeChatHeaderPic\");\n  activeChatHeaderPic.addEventListener(\"click\", async () => {\n    let activeChatId = activeChatSection.dataset.chatId;\n\n    if (activeChatId != \"\") {\n      let {\n        createActiveChatInfoModal\n      } = await Promise.all(/*! import() */[__webpack_require__.e(\"dev-javascripts_chat_js_createActiveChatInfoModal_dev_js\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-d9b4de3\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./js/createActiveChatInfoModal.dev.js */ \"./dev-javascripts/chat/js/createActiveChatInfoModal.dev.js\"));\n      createActiveChatInfoModal(activeChatId);\n    }\n  });\n  let activeChatHeaderName = document.getElementById(\"activeChatHeaderName\");\n  activeChatHeaderName.addEventListener(\"click\", async () => {\n    let activeChatId = activeChatSection.dataset.chatId;\n\n    if (activeChatId != \"\") {\n      let {\n        createActiveChatInfoModal\n      } = await Promise.all(/*! import() */[__webpack_require__.e(\"dev-javascripts_chat_js_createActiveChatInfoModal_dev_js\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-d9b4de3\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./js/createActiveChatInfoModal.dev.js */ \"./dev-javascripts/chat/js/createActiveChatInfoModal.dev.js\"));\n      createActiveChatInfoModal(activeChatId);\n    }\n  });\n  let activeChatCallBtn = document.getElementById(\"activeChatCallBtn\");\n\n  if (activeChatCallBtn) {\n    activeChatCallBtn.addEventListener(\"click\", async () => {\n      let activeChatId = activeChatSection.dataset.chatId;\n\n      if (activeChatId.toString() !== \"\") {\n        openNewTab(`/call/?chat=${activeChatId}`);\n      }\n    });\n  }\n\n  let activeChatCallRoomBox = document.getElementById(\"activeChatCallRoomBox\");\n\n  if (activeChatCallRoomBox) {\n    activeChatCallRoomBox.addEventListener(\"click\", async () => {\n      let callRoomId = activeChatCallRoomBox.dataset.callRoomId;\n\n      if (callRoomId.toString() !== \"\") {\n        openNewTab(`/call/?room=${callRoomId}`);\n      }\n    });\n  } ////////////////////\n  // create new group chat btn\n  // group chat form Modal and assign event to btn\n\n\n  const createNewGroupChatBtn = document.getElementById(\"createNewGroupChatBtn\");\n  createNewGroupChatBtn.addEventListener(\"click\", async () => {\n    let {\n      createGroupChatFormModal\n    } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_lodash_throttle_index_js-node_modules_namespace-emitter_index_js-node_mo-fa5147\"), __webpack_require__.e(\"vendors-node_modules_uppy_core_lib_index_js\"), __webpack_require__.e(\"vendors-node_modules_uppy_dashboard_lib_index_js\"), __webpack_require__.e(\"vendors-node_modules_uppy_dashboard_dist_style_css\"), __webpack_require__.e(\"vendors-node_modules_uppy_image-editor_lib_index_js\"), __webpack_require__.e(\"vendors-node_modules_uppy_aws-s3-multipart_lib_index_js\"), __webpack_require__.e(\"vendors-node_modules_uppy_webcam_lib_index_js\"), __webpack_require__.e(\"vendors-node_modules_uppy_image-editor_dist_style_css\"), __webpack_require__.e(\"vendors-node_modules_uppy_core_dist_style_css\"), __webpack_require__.e(\"vendors-node_modules_uppy_webcam_dist_style_css\"), __webpack_require__.e(\"dev-javascripts_chat_js_createGroupChatFormModal_dev_js-data_image_png_base64_iVBORw0KGgoAAAA-4573f1\"), __webpack_require__.e(\"node_modules_css-loader_dist_runtime_api_js-node_modules_css-loader_dist_runtime_sourceMaps_j-d9b4de4\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./js/createGroupChatFormModal.dev */ \"./dev-javascripts/chat/js/createGroupChatFormModal.dev.js\"));\n    createGroupChatFormModal();\n  });\n  document.getElementById(\"activeChatInputReplyBoxCloseBtn\").addEventListener(\"click\", async () => {\n    let {\n      closeReplyMessageBox\n    } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_js_replyMessageBox_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./js/replyMessageBox.dev */ \"./dev-javascripts/chat/js/replyMessageBox.dev.js\"));\n    closeReplyMessageBox();\n  }); //send chat:message-typing event\n\n  activeChatInputTextContent.addEventListener(\"input\", async e => {\n    if (activeChatSection.dataset.chatId !== \"\") {\n      if (lastActiveChatId !== \"\" && lastActiveChatId !== activeChatSection.dataset.chatId) {\n        let {\n          sendChatMessageStopTypingSocket\n        } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_socket_event-emitter_chat-socket_index_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../socket/event-emitter/chat-socket */ \"./dev-javascripts/socket/event-emitter/chat-socket/index.js\"));\n        sendChatMessageStopTypingSocket(lastActiveChatId);\n        isUserTyping = false;\n        lastActiveChatId = activeChatSection.dataset.chatId.toString();\n      }\n\n      lastActiveChatId = activeChatSection.dataset.chatId.toString();\n      let chatId = activeChatSection.dataset.chatId.toString();\n      const inputValue = activeChatInputTextContent.value.trim();\n\n      if (inputValue && !isUserTyping) {\n        isUserTyping = true;\n        let {\n          sendChatMessageStartTypingSocket\n        } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_socket_event-emitter_chat-socket_index_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../socket/event-emitter/chat-socket */ \"./dev-javascripts/socket/event-emitter/chat-socket/index.js\"));\n        sendChatMessageStartTypingSocket(chatId);\n      } else if (!inputValue && isUserTyping) {\n        isUserTyping = false;\n        let {\n          sendChatMessageStopTypingSocket\n        } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_socket_event-emitter_chat-socket_index_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../socket/event-emitter/chat-socket */ \"./dev-javascripts/socket/event-emitter/chat-socket/index.js\"));\n        sendChatMessageStopTypingSocket(chatId);\n      }\n    }\n  });\n  allChatChatBoxContainer.addEventListener(\"click\", async e => {\n    let chatBox = e.target.closest(`.chat-box`);\n\n    if (chatBox && allChatChatBoxContainer.contains(chatBox)) {\n      let chatId = chatBox.dataset.chatId;\n\n      if (chatId) {\n        let {\n          fetchActiveChat\n        } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_js_fetchActiveChat_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./js/fetchActiveChat.dev */ \"./dev-javascripts/chat/js/fetchActiveChat.dev.js\"));\n        fetchActiveChat(chatId);\n      }\n    } else {\n      return;\n    }\n  });\n  let activeChatMessageContainer = document.getElementById(\"activeChatMessageContainer\");\n  activeChatMessageContainer.addEventListener(\"click\", async e => {\n    console.log(\"activeChatMessageContainer click\");\n    let userMessageBox = e.target.closest(`.active-chat-user-message-box`);\n    let userMessageBoxBtn = e.target.closest(`.active-chat-user-message-box__btn[data-message-box-btn =\"user\"]`);\n    let userMessageContentBox = e.target.closest(`.active-chat-user-message-box__content-box`);\n\n    if (userMessageBoxBtn && activeChatMessageContainer.contains(userMessageBoxBtn)) {\n      userMessageBox.classList.add(\"active-chat-user-message-box--selected\");\n      let {\n        createUserMessageOptionModal\n      } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_plyr_dist_plyr_min_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_message_dev_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_showActiveChatSection_dev_js\"), __webpack_require__.e(\"dev-javascripts_chat_js_userMessageOptionModal_dev_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./js/userMessageOptionModal.dev */ \"./dev-javascripts/chat/js/userMessageOptionModal.dev.js\"));\n      createUserMessageOptionModal(userMessageBox);\n    } else if (userMessageContentBox && activeChatMessageContainer.contains(userMessageContentBox)) {\n      if (userMessageBox.classList.contains(\"active-chat-user-message-box--replied-message\")) {\n        let repliedMessageId = userMessageBox.dataset.repliedMessageId;\n        let repliedUserMessageBox = document.querySelector(`.active-chat-user-message-box[data-message-id=\"${repliedMessageId}\"]`);\n\n        if (repliedUserMessageBox) {\n          repliedUserMessageBox.scrollIntoView({\n            behavior: \"smooth\",\n            block: \"center\",\n            inline: \"nearest\"\n          });\n          repliedUserMessageBox.classList.add(\"active-chat-user-message-box--highlight\");\n          setTimeout(function () {\n            repliedUserMessageBox.classList.remove(\"active-chat-user-message-box--highlight\");\n          }, 1000);\n        }\n      }\n    } else {\n      return;\n    }\n  });\n  activeChatMessageContainer.addEventListener(\"dblclick\", async e => {\n    let userMessageBox = e.target.closest(`.active-chat-user-message-box`);\n\n    if (userMessageBox && activeChatMessageContainer.contains(userMessageBox)) {\n      let messageId = userMessageBox.dataset.messageId;\n      let {\n        openReplyMessageBox\n      } = await __webpack_require__.e(/*! import() */ \"dev-javascripts_chat_js_replyMessageBox_dev_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./js/replyMessageBox.dev.js */ \"./dev-javascripts/chat/js/replyMessageBox.dev.js\"));\n      openReplyMessageBox(messageId);\n    } else {\n      return;\n    }\n  });\n}\n\nfunction openNewTab(url) {\n  const link = document.createElement(\"a\");\n  link.setAttribute(\"href\", url);\n  link.setAttribute(\"target\", \"_blank\");\n  link.setAttribute(\"rel\", \"noopener noreferrer\"); // simulate a click on the link to open the new tab\n\n  link.click();\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFsQixDQUFyQjs7SUFFQSxJQUFJQyxjQUFjLElBQUkzSywwQkFBMEIsQ0FBQ3VCLFFBQTNCLENBQW9Db0osY0FBcEMsQ0FBdEIsRUFBMkU7TUFDekUsSUFBSVcsU0FBUyxHQUFHWCxjQUFjLENBQUN0SyxPQUFmLENBQXVCaUwsU0FBdkM7TUFDQSxJQUFJO1FBQUVDO01BQUYsSUFBMEIsTUFBTSxrT0FBcEM7TUFFQUEsbUJBQW1CLENBQUNELFNBQUQsQ0FBbkI7SUFDRCxDQUxELE1BS087TUFDTDtJQUNEO0VBQ0YsQ0FYRDtBQVlEOztBQUNELFNBQVNyQixVQUFULENBQW9CdUIsR0FBcEIsRUFBeUI7RUFDdkIsTUFBTUMsSUFBSSxHQUFHNUwsUUFBUSxDQUFDNkwsYUFBVCxDQUF1QixHQUF2QixDQUFiO0VBQ0FELElBQUksQ0FBQ0UsWUFBTCxDQUFrQixNQUFsQixFQUEwQkgsR0FBMUI7RUFDQUMsSUFBSSxDQUFDRSxZQUFMLENBQWtCLFFBQWxCLEVBQTRCLFFBQTVCO0VBQ0FGLElBQUksQ0FBQ0UsWUFBTCxDQUFrQixLQUFsQixFQUF5QixxQkFBekIsRUFKdUIsQ0FNdkI7O0VBQ0FGLElBQUksQ0FBQ0csS0FBTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9kZXYtamF2YXNjcmlwdHMvY2hhdC9jaGF0LmRldi5qcz9lYWE1Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFsbENoYXRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGxDaGF0U2VjdGlvblwiKVxyXG5jb25zdCBhY3RpdmVDaGF0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdFNlY3Rpb25cIilcclxuY29uc3QgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcImFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyXCJcclxuKVxyXG5sZXQgYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcImFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50XCJcclxuKVxyXG5cclxubGV0IGFsbENoYXRDaGF0Qm94Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGxDaGF0Q2hhdEJveENvbnRhaW5lclwiKVxyXG5sZXQgaXNVc2VyVHlwaW5nID0gZmFsc2VcclxubGV0IGxhc3RBY3RpdmVDaGF0SWQgPSBhY3RpdmVDaGF0U2VjdGlvbi5kYXRhc2V0LmNoYXRJZC50b1N0cmluZygpXHJcbjsoYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gIGlmICghSVNfSU5JVF9DSEFUX01PRFVMRSkge1xyXG4gICAgYXN5bmMgZnVuY3Rpb24gY2hlY2tDaGF0U3RhdGUoKSB7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGxvY2F0aW9uKVxyXG4gICAgICAvLyBjb25zb2xlLmxvZyhoaXN0b3J5KVxyXG4gICAgICBpZiAobG9jYXRpb24uaGFzaCkge1xyXG4gICAgICAgIGxldCBjaGF0SWQgPSBsb2NhdGlvbi5oYXNoLnJlcGxhY2UoXCIjXCIsIFwiXCIpXHJcbiAgICAgICAgbGV0IHsgZmV0Y2hBY3RpdmVDaGF0IH0gPSBhd2FpdCBpbXBvcnQoXCIuL2pzL2ZldGNoQWN0aXZlQ2hhdC5kZXZcIilcclxuICAgICAgICBmZXRjaEFjdGl2ZUNoYXQoY2hhdElkKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBcIlwiLCBcIlwiKVxyXG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gXCJDaGF0c1wiXHJcbiAgICAgICAgYWxsQ2hhdFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZShcImFsbC1jaGF0LXNlY3Rpb24tLWhpZGVcIilcclxuICAgICAgICBhY3RpdmVDaGF0U2VjdGlvbi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLWNoYXQtc2VjdGlvbi0taGlkZVwiKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY2hlY2tDaGF0U3RhdGUpXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIGNoZWNrQ2hhdFN0YXRlKVxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBhY3RpdmUgY2hhdCBtZXNzYWdlIGNvbnRhaW5lclxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIGFjdGl2ZSBjaGF0IGlucHV0IGNvbnRhaW5lclxyXG4gICAgY29uc3QgYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgIFwiYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyXCJcclxuICAgIClcclxuICAgIGNvbnN0IGFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgIFwiYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnRcIlxyXG4gICAgKVxyXG4gICAgY29uc3QgYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgICBcImFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRCb3hcIlxyXG4gICAgKVxyXG5cclxuICAgIGFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwiaW5wdXRcIixcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIGlmIChhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudC52YWx1ZSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudEJveC5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICAgICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWF0dGFjaG1lbnQtYm94LS1oaWRlXCJcclxuICAgICAgICAgIClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudEJveC5jbGFzc0xpc3QuY29udGFpbnMoXHJcbiAgICAgICAgICAgICAgXCJhY3RpdmUtY2hhdC1pbnB1dC1hdHRhY2htZW50LWJveC0taGlkZVwiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50Qm94LmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgICAgXCJhY3RpdmUtY2hhdC1pbnB1dC1hdHRhY2htZW50LWJveC0taGlkZVwiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gXCJhdXRvXCJcclxuICAgICAgICBhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudC5zdHlsZS5oZWlnaHQgPVxyXG4gICAgICAgICAgYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiXHJcbiAgICAgICAgYWRqdXN0TWVzc2FnZUNvbnRhaW5lckJvdHRvbVBhZGRpbmcoKVxyXG4gICAgICB9LFxyXG4gICAgICBmYWxzZVxyXG4gICAgKVxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgIGNvbnN0IHsgZGVmYXVsdDogaW5zZXJ0VGV4dEF0Q3Vyc29yIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgIFwiaW5zZXJ0LXRleHQtYXQtY3Vyc29yXCJcclxuICAgIClcclxuICAgIGNvbnN0IHsgUGlja2VyIH0gPSBhd2FpdCBpbXBvcnQoXCJlbW9qaS1tYXJ0XCIpXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RW1vamlBbmRBZGRUb0lucHV0KGVtb2ppKSB7XHJcbiAgICAgIGluc2VydFRleHRBdEN1cnNvcihhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudCwgZW1vamkubmF0aXZlKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFjdGl2ZUNoYXRJbnB1dEVtb2ppQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgIFwiYWN0aXZlQ2hhdElucHV0RW1vamlCdG5cIlxyXG4gICAgKVxyXG4gICAgY29uc3QgYWN0aXZlQ2hhdElucHV0RW1vamlDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgICAgXCJhY3RpdmVDaGF0SW5wdXRFbW9qaUNvbnRhaW5lclwiXHJcbiAgICApXHJcblxyXG4gICAgbGV0IGVtb2ppUGlja2VyT3B0aW9ucyA9IHtcclxuICAgICAgcGFyZW50OiBhY3RpdmVDaGF0SW5wdXRFbW9qaUNvbnRhaW5lcixcclxuICAgICAgZGF0YTogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBpbXBvcnQoXCJAZW1vamktbWFydC9kYXRhXCIpXHJcbiAgICAgICAgcmV0dXJuIGRhdGFcclxuICAgICAgfSxcclxuICAgICAgb25FbW9qaVNlbGVjdDogZ2V0RW1vamlBbmRBZGRUb0lucHV0LFxyXG4gICAgICAvLyBvbkNsaWNrT3V0c2lkZTogKCkgPT4ge1xyXG4gICAgICAvLyAgIGNvbnNvbGUubG9nKFwiaGVsbG9cIilcclxuICAgICAgLy8gfSxcclxuICAgICAgYXV0b0ZvY3VzOiBmYWxzZSxcclxuICAgICAgZW1vamlCdXR0b25Db2xvcnM6IFtcclxuICAgICAgICBcInJnYmEoMTU1LCAyMjMsIDg4LCAwLjcpXCIsXHJcbiAgICAgICAgXCJyZ2JhKDE1NSwgNDAsIDg4LCAwLjcpXCIsXHJcbiAgICAgICAgXCJyZ2JhKDQwLCAyMjMsIDg4LCAwLjcpXCIsXHJcbiAgICAgICAgXCJyZ2JhKDE1NSwgMjIzLCA4OCwgMC43KVwiLFxyXG4gICAgICAgIFwicmdiYSg0MCwgMjIzLCAyMjMsIDAuNylcIixcclxuICAgICAgICBcInJnYmEoMjAsIDE1MCwgMTUwLCAwLjcpXCIsXHJcbiAgICAgICAgXCJyZ2JhKDE1MCwgMTUwLCAyMCwgMC43KVwiLFxyXG4gICAgICAgIFwicmdiYSgxNTAsIDIwLCAxNTAsIDAuNylcIlxyXG4gICAgICBdLFxyXG4gICAgICBlbW9qaUJ1dHRvblNpemU6IDQwLFxyXG4gICAgICAvLyBlbW9qaVNpemU6IDI1LFxyXG4gICAgICBlbW9qaVZlcnNpb246IDE0LFxyXG4gICAgICBpY29uczogXCJhdXRvXCIsXHJcbiAgICAgIG1heEZyZXF1ZW50Um93czogMixcclxuICAgICAgbmF2UG9zaXRpb246IFwiYm90dG9tXCIsXHJcbiAgICAgIHByZXZpZXdQb3NpdGlvbjogXCJub25lXCIsXHJcbiAgICAgIHNldDogXCJuYXRpdmVcIixcclxuICAgICAgZHluYW1pY1dpZHRoOiB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGVtb2ppUGlja2VyID0gbmV3IFBpY2tlcihlbW9qaVBpY2tlck9wdGlvbnMpXHJcblxyXG4gICAgYWN0aXZlQ2hhdElucHV0RW1vamlCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgYWN0aXZlQ2hhdElucHV0RW1vamlDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcclxuICAgICAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWJveF9fZW1vamktY29udGFpbmVyLS1oaWRlXCJcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgLy8gaW5wdXQgbWVzc2FnZSBjcmVhdGlvblxyXG4gICAgbGV0IHsgY2xvc2VSZXBseU1lc3NhZ2VCb3ggfSA9IGF3YWl0IGltcG9ydChcIi4vanMvcmVwbHlNZXNzYWdlQm94LmRldi5qc1wiKVxyXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgY29uc3QgeyBjaGVja1RpbWVBbmRDcmVhdGVOZXdNZXNzYWdlIH0gPSBhd2FpdCBpbXBvcnQoXCIuL2pzL21lc3NhZ2UuZGV2XCIpXHJcbiAgICBjb25zdCB7IHVwZGF0ZUFsbENoYXRTZWN0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgIFwiLi9qcy91cGRhdGVBbGxDaGF0U2VjdGlvbi5kZXZcIlxyXG4gICAgKVxyXG4gICAgY29uc3QgeyBkZWZhdWx0OiBVcHB5IH0gPSBhd2FpdCBpbXBvcnQoXCJAdXBweS9jb3JlXCIpXHJcbiAgICBjb25zdCB7IGRlZmF1bHQ6IERhc2hib2FyZCB9ID0gYXdhaXQgaW1wb3J0KFwiQHVwcHkvZGFzaGJvYXJkXCIpXHJcbiAgICBjb25zdCB7IGRlZmF1bHQ6IFdlYmNhbSB9ID0gYXdhaXQgaW1wb3J0KFwiQHVwcHkvd2ViY2FtXCIpXHJcbiAgICBjb25zdCB7IGRlZmF1bHQ6IEltYWdlRWRpdG9yIH0gPSBhd2FpdCBpbXBvcnQoXCJAdXBweS9pbWFnZS1lZGl0b3JcIilcclxuICAgIGNvbnN0IHsgZGVmYXVsdDogQXVkaW8gfSA9IGF3YWl0IGltcG9ydChcIkB1cHB5L2F1ZGlvXCIpXHJcblxyXG4gICAgYXdhaXQgaW1wb3J0KFwiQHVwcHkvY29yZS9kaXN0L3N0eWxlLmNzc1wiKVxyXG4gICAgYXdhaXQgaW1wb3J0KFwiQHVwcHkvZGFzaGJvYXJkL2Rpc3Qvc3R5bGUuY3NzXCIpXHJcbiAgICBhd2FpdCBpbXBvcnQoXCJAdXBweS93ZWJjYW0vZGlzdC9zdHlsZS5jc3NcIilcclxuICAgIGF3YWl0IGltcG9ydChcIkB1cHB5L2ltYWdlLWVkaXRvci9kaXN0L3N0eWxlLmNzc1wiKVxyXG4gICAgYXdhaXQgaW1wb3J0KFwiQHVwcHkvYXVkaW8vZGlzdC9zdHlsZS5jc3NcIilcclxuXHJcbiAgICBjb25zdCB7IGRlZmF1bHQ6IEF3c1MzTXVsdGlwYXJ0IH0gPSBhd2FpdCBpbXBvcnQoXCJAdXBweS9hd3MtczMtbXVsdGlwYXJ0XCIpXHJcblxyXG4gICAgY29uc3QgdXBweSA9IG5ldyBVcHB5KHtcclxuICAgICAgaWQ6IFwiY2hhdE1lZGlhXCIsXHJcbiAgICAgIGF1dG9Qcm9jZWVkOiBmYWxzZSxcclxuICAgICAgYWxsb3dNdWx0aXBsZVVwbG9hZEJhdGNoZXM6IHRydWUsXHJcbiAgICAgIGRlYnVnOiBmYWxzZSxcclxuICAgICAgb25CZWZvcmVGaWxlQWRkZWQ6IChjdXJyZW50RmlsZSwgZmlsZXMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50RmlsZSlcclxuICAgICAgICBpZiAoIWN1cnJlbnRGaWxlLnR5cGUpIHtcclxuICAgICAgICAgIHVwcHkubG9nKGBTa2lwcGluZyBmaWxlIGJlY2F1c2UgaXQgaGFzIG5vIHR5cGVgKVxyXG4gICAgICAgICAgdXBweS5pbmZvKGBTa2lwcGluZyBmaWxlIGJlY2F1c2UgaXQgaGFzIG5vIHR5cGVgLCBcImVycm9yXCIsIDUwMClcclxuICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjdXJyZW50RmlsZS5uYW1lID0gXCJcIlxyXG4gICAgICAgICAgcmV0dXJuIGN1cnJlbnRGaWxlXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBvbkJlZm9yZVVwbG9hZDogZmlsZXMgPT4ge1xyXG4gICAgICAgIC8vIGNvbnN0IHVwZGF0ZWRGaWxlcyA9IHt9XHJcbiAgICAgICAgLy8gT2JqZWN0LmtleXMoZmlsZXMpLmZvckVhY2goZmlsZUlEID0+IHtcclxuICAgICAgICAvLyAgIHVwZGF0ZWRGaWxlc1tmaWxlSURdID0ge1xyXG4gICAgICAgIC8vICAgICAuLi5maWxlc1tmaWxlSURdLFxyXG4gICAgICAgIC8vICAgICBtZXRhOiB7XHJcbiAgICAgICAgLy8gICAgICAgLi4uZmlsZXNbZmlsZUlEXS5tZXRhLFxyXG4gICAgICAgIC8vICAgICAgIGZpbGVUeXBlOiBmaWxlc1tmaWxlSURdLnR5cGVcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgfVxyXG4gICAgICAgIC8vIH0pXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codXBkYXRlZEZpbGVzKVxyXG4gICAgICAgIC8vIHJldHVybiB1cGRhdGVkRmlsZXNcclxuICAgICAgfSxcclxuICAgICAgcmVzdHJpY3Rpb25zOiB7XHJcbiAgICAgICAgbWF4RmlsZVNpemU6IDEwMjQgKiAxMDI0ICogMTAwLFxyXG4gICAgICAgIG1pbkZpbGVTaXplOiBudWxsLFxyXG4gICAgICAgIG1heFRvdGFsRmlsZVNpemU6IDEwMjQgKiAxMDI0ICogMTAwICogMTAsXHJcbiAgICAgICAgbWF4TnVtYmVyT2ZGaWxlczogMTAsXHJcbiAgICAgICAgbWluTnVtYmVyT2ZGaWxlczogMSxcclxuICAgICAgICBhbGxvd2VkRmlsZVR5cGVzOiBbXHJcbiAgICAgICAgICBcImltYWdlL2pwZWdcIixcclxuICAgICAgICAgIFwiaW1hZ2UvcG5nXCIsXHJcbiAgICAgICAgICBcImltYWdlL2dpZlwiLFxyXG4gICAgICAgICAgXCJpbWFnZS9zdmcreG1sXCIsXHJcbiAgICAgICAgICBcImltYWdlL3gtcG5nXCIsXHJcblxyXG4gICAgICAgICAgXCJhdWRpby9tcGVnXCIsXHJcbiAgICAgICAgICBcImF1ZGlvL3dhdlwiLFxyXG4gICAgICAgICAgXCJhdWRpby94LXdhdlwiLFxyXG4gICAgICAgICAgXCJhdWRpby9vZ2dcIixcclxuICAgICAgICAgIFwiYXVkaW8vd2VibVwiLFxyXG4gICAgICAgICAgLy8gXCJhdWRpby8qXCIsXHJcblxyXG4gICAgICAgICAgXCJ2aWRlby9tcDRcIixcclxuICAgICAgICAgIFwidmlkZW8vd2VibVwiLFxyXG4gICAgICAgICAgXCJ2aWRlby9vZ2dcIixcclxuICAgICAgICAgIFwidmlkZW8vcXVpY2t0aW1lXCIsXHJcbiAgICAgICAgICBcInZpZGVvL3gtbWF0cm9za2FcIlxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAgbWV0YTogeyBtZWRpYVR5cGU6IFwiY2hhdC1tZWRpYVwiIH0sXHJcbiAgICAgIGluZm9UaW1lb3V0OiA1MDAwXHJcbiAgICB9KVxyXG4gICAgICAudXNlKERhc2hib2FyZCwge1xyXG4gICAgICAgIHRyaWdnZXI6IFwiI2FjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRGaWxlQnRuXCIsXHJcbiAgICAgICAgdGFyZ2V0OiBcImJvZHlcIixcclxuICAgICAgICBpbmxpbmU6IGZhbHNlLFxyXG4gICAgICAgIHBsdWdpbnM6IFtcIldlYmNhbVwiLCBcIkltYWdlRWRpdG9yXCIsIFwiQXVkaW9cIl0sXHJcbiAgICAgICAgdGh1bWJuYWlsV2lkdGg6IDMwMCxcclxuICAgICAgICAvLyBjbG9zZUFmdGVyRmluaXNoOiBmYWxzZSxcclxuICAgICAgICBzaG93UmVtb3ZlQnV0dG9uQWZ0ZXJDb21wbGV0ZTogZmFsc2UsXHJcbiAgICAgICAgZGlzYWJsZVBhZ2VTY3JvbGxXaGVuTW9kYWxPcGVuOiB0cnVlLFxyXG4gICAgICAgIGNsb3NlTW9kYWxPbkNsaWNrT3V0c2lkZTogdHJ1ZSxcclxuXHJcbiAgICAgICAgdGhlbWU6IFwibGlnaHRcIixcclxuICAgICAgICBsb2NhbGU6IHtcclxuICAgICAgICAgIHN0cmluZ3M6IHt9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBub3RlOiBcIkltYWdlcywgQXVkaW9zIGFuZCB2aWRlb3Mgb25seSwgdXAgdG8gMTAgZmlsZXMsIDEgZmlsZSB1cCB0byAxMDAgTUJcIixcclxuICAgICAgICBwcm91ZGx5RGlzcGxheVBvd2VyZWRCeVVwcHk6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICAgIC51c2UoV2ViY2FtLCB7XHJcbiAgICAgICAgdGFyZ2V0OiBEYXNoYm9hcmQsXHJcbiAgICAgICAgdGl0bGU6IFwiQ2FtZXJhXCIsXHJcbiAgICAgICAgbWlycm9yOiB0cnVlLFxyXG4gICAgICAgIG1vZGVzOiBbXCJ2aWRlby1hdWRpb1wiLCBcInZpZGVvLW9ubHlcIiwgXCJwaWN0dXJlXCJdLFxyXG4gICAgICAgIHByZWZlcnJlZFZpZGVvTWltZVR5cGU6IFwidmlkZW8vbXA0XCIsXHJcbiAgICAgICAgc2hvd1JlY29yZGluZ0xlbmd0aDogdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgICAudXNlKEltYWdlRWRpdG9yLCB7XHJcbiAgICAgICAgdGFyZ2V0OiBEYXNoYm9hcmQsXHJcbiAgICAgICAgcXVhbGl0eTogMC44XHJcbiAgICAgIH0pXHJcbiAgICAgIC51c2UoQXVkaW8sIHtcclxuICAgICAgICBpZDogXCJBdWRpb1wiLFxyXG4gICAgICAgIHRhcmdldDogRGFzaGJvYXJkLFxyXG4gICAgICAgIHNob3dBdWRpb1NvdXJjZURyb3Bkb3duOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgICAudXNlKEF3c1MzTXVsdGlwYXJ0LCB7XHJcbiAgICAgICAgbGltaXQ6IDQsXHJcbiAgICAgICAgY29tcGFuaW9uVXJsOiBgJHtsb2NhdGlvbi5vcmlnaW59L2NvbXBhbmlvbmBcclxuICAgICAgfSlcclxuXHJcbiAgICAvLyB1cHB5Lm9uKFwiY29tcGxldGVcIiwgcmVzdWx0ID0+IHtcclxuICAgIC8vICAgY29uc29sZS5sb2coXHJcbiAgICAvLyAgICAgXCJVcGxvYWQgY29tcGxldGUhIFdl4oCZdmUgdXBsb2FkZWQgdGhlc2UgZmlsZXM6XCIsXHJcbiAgICAvLyAgICAgcmVzdWx0LnN1Y2Nlc3NmdWxcclxuICAgIC8vICAgKVxyXG4gICAgLy8gfSlcclxuICAgIHVwcHkub24oXCJ1cGxvYWQtc3VjY2Vzc1wiLCAoZmlsZSwgcmVzcG9uc2UpID0+IHtcclxuICAgICAgbGV0IHVzZXJNZXNzYWdlID0ge31cclxuICAgICAgdXNlck1lc3NhZ2UuY2hhdCA9IGFjdGl2ZUNoYXRTZWN0aW9uLmRhdGFzZXQuY2hhdElkXHJcbiAgICAgIHVzZXJNZXNzYWdlLmhhc01lZGlhQ29udGVudCA9IHRydWVcclxuICAgICAgdXNlck1lc3NhZ2UubWVkaWFDb250ZW50VHlwZSA9IGZpbGUudHlwZS5zcGxpdChcIi9cIilbMF1cclxuICAgICAgdXNlck1lc3NhZ2UubWVkaWFDb250ZW50TWltZVR5cGUgPSBmaWxlLnR5cGVcclxuICAgICAgdXNlck1lc3NhZ2UubWVkaWFDb250ZW50UGF0aCA9IGZpbGUuczNNdWx0aXBhcnQua2V5XHJcbiAgICAgIHVzZXJNZXNzYWdlLnJlcGxpZWRUbyA9IGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5kYXRhc2V0LnJlcGxpZWRUb1xyXG4gICAgICBmZXRjaChcIi9tZXNzYWdlXCIsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLCAvLyBvciAnUFVUJ1xyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VyTWVzc2FnZSlcclxuICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oYXN5bmMgZGF0YSA9PiB7XHJcbiAgICAgICAgICBpZiAoZGF0YS5pc1N1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgY2hlY2tUaW1lQW5kQ3JlYXRlTmV3TWVzc2FnZShkYXRhLm1lc3NhZ2UsIHRydWUpXHJcbiAgICAgICAgICAgIGNsb3NlUmVwbHlNZXNzYWdlQm94KClcclxuICAgICAgICAgICAgdXBkYXRlQWxsQ2hhdFNlY3Rpb24oZGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHsgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgICAgICAgIFwiLi4vY29tbW9uL21haW5Ob3RpZmljYXRpb24uZGV2XCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBjcmVhdGVNYWluTm90aWZpY2F0aW9uKGRhdGEuZXJyb3IsIFwiZXJyb3JcIilcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChhc3luYyBlcnIgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICAgICAgbGV0IHsgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgICAgICBcIi4uL2NvbW1vbi9tYWluTm90aWZpY2F0aW9uLmRldlwiXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBjcmVhdGVNYWluTm90aWZpY2F0aW9uKFxyXG4gICAgICAgICAgICBcIlNlcnZlciBFcnJvciBJbiBTZW5kaW5nIE1lc3NhZ2UsIFBsZWFzZSBUcnkgQWdhaW5cIixcclxuICAgICAgICAgICAgXCJlcnJvclwiXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgLy8gYWN0aXZlIGNoYXQgaW5wdXQgeW91dHViZSBzZW5kIGJ0blxyXG4gICAgY29uc3QgYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudFlvdXR1YmVDb250ZW50U2VuZEJ0biA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudFlvdXR1YmVDb250ZW50U2VuZEJ0blwiKVxyXG5cclxuICAgIGNvbnN0IGFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRZb3V0dWJlQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgICBcImFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRZb3V0dWJlQ29udGVudFwiXHJcbiAgICApXHJcbiAgICBhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUNvbnRlbnRTZW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwiY2xpY2tcIixcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIGxldCB1c2VyTWVzc2FnZSA9IHt9XHJcblxyXG4gICAgICAgIGlmIChhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUNvbnRlbnQudmFsdWUgIT09IFwiXCIpIHtcclxuICAgICAgICAgIHVzZXJNZXNzYWdlLmNoYXQgPSBhY3RpdmVDaGF0U2VjdGlvbi5kYXRhc2V0LmNoYXRJZFxyXG4gICAgICAgICAgdXNlck1lc3NhZ2UuaGFzTWVkaWFDb250ZW50ID0gdHJ1ZVxyXG4gICAgICAgICAgdXNlck1lc3NhZ2UubWVkaWFDb250ZW50VHlwZSA9IFwieW91dHViZVwiXHJcbiAgICAgICAgICB1c2VyTWVzc2FnZS5tZWRpYUNvbnRlbnRNaW1lVHlwZSA9IFwidmlkZW8vbXA0XCJcclxuICAgICAgICAgIHVzZXJNZXNzYWdlLm1lZGlhQ29udGVudFBhdGggPVxyXG4gICAgICAgICAgICBhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUNvbnRlbnQudmFsdWVcclxuICAgICAgICAgIHVzZXJNZXNzYWdlLnJlcGxpZWRUbyA9IGFjdGl2ZUNoYXRJbnB1dENvbnRhaW5lci5kYXRhc2V0LnJlcGxpZWRUb1xyXG5cclxuICAgICAgICAgIGFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRZb3V0dWJlQ29udGVudC52YWx1ZSA9IFwiXCJcclxuICAgICAgICAgIGZldGNoKFwiL21lc3NhZ2VcIiwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLCAvLyBvciAnUFVUJ1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXNlck1lc3NhZ2UpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oYXN5bmMgZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKGRhdGEuaXNTdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjaGVja1RpbWVBbmRDcmVhdGVOZXdNZXNzYWdlKGRhdGEubWVzc2FnZSwgdHJ1ZSlcclxuICAgICAgICAgICAgICAgIGNsb3NlUmVwbHlNZXNzYWdlQm94KClcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRZb3V0dWJlQnRuSW5wdXRCb3hcIilcclxuICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJpbnB1dC1hdHRhY2htZW50LWJ0bi1ib3hfX2lucHV0LWJveC0taGlkZVwiKVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlQWxsQ2hhdFNlY3Rpb24oZGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudFlvdXR1YmVCdG5JbnB1dEJveC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgICBcImF0dGFjaG1lbnQtYnRuLWJveF9faW5wdXQtYm94LS1oaWRlXCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHsgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgICAgICAgICAgICBcIi4uL2NvbW1vbi9tYWluTm90aWZpY2F0aW9uLmRldlwiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVNYWluTm90aWZpY2F0aW9uKGRhdGEuZXJyb3IsIFwiZXJyb3JcIilcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChhc3luYyBlcnIgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgICAgICAgICBsZXQgeyBjcmVhdGVNYWluTm90aWZpY2F0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICAgICAgICAgICAgICBcIi4uL2NvbW1vbi9tYWluTm90aWZpY2F0aW9uLmRldlwiXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIGNyZWF0ZU1haW5Ob3RpZmljYXRpb24oXHJcbiAgICAgICAgICAgICAgICBcIlNlcnZlciBFcnJvciBJbiBTZW5kaW5nIE1lc3NhZ2UsIFBsZWFzZSBUcnkgQWdhaW5cIixcclxuICAgICAgICAgICAgICAgIFwiZXJyb3JcIlxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBhY3RpdmUgY2hhdCBpbnB1dCBzZW5kIGJ0blxyXG5cclxuICAgIGNvbnN0IGFjdGl2ZUNoYXRJbnB1dFNlbmRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgICAgXCJhY3RpdmVDaGF0SW5wdXRTZW5kQnRuXCJcclxuICAgIClcclxuICAgIGFjdGl2ZUNoYXRJbnB1dFNlbmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgbGV0IHVzZXJNZXNzYWdlID0ge31cclxuICAgICAgaWYgKFxyXG4gICAgICAgIGFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50LnZhbHVlLnRyaW0oKSAhPT0gXCJcIiAmJlxyXG4gICAgICAgIGFjdGl2ZUNoYXRTZWN0aW9uLmRhdGFzZXQuY2hhdElkICE9PSBcIlwiXHJcbiAgICAgICkge1xyXG4gICAgICAgIHVzZXJNZXNzYWdlLmNoYXQgPSBhY3RpdmVDaGF0U2VjdGlvbi5kYXRhc2V0LmNoYXRJZFxyXG4gICAgICAgIHVzZXJNZXNzYWdlLmhhc01lZGlhQ29udGVudCA9IGZhbHNlXHJcbiAgICAgICAgdXNlck1lc3NhZ2UudGV4dENvbnRlbnQgPSBhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudC52YWx1ZS50cmltKClcclxuICAgICAgICB1c2VyTWVzc2FnZS5yZXBsaWVkVG8gPSBhY3RpdmVDaGF0SW5wdXRDb250YWluZXIuZGF0YXNldC5yZXBsaWVkVG9cclxuICAgICAgICBhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudC52YWx1ZSA9IFwiXCJcclxuICAgICAgICBpZiAoYWN0aXZlQ2hhdFNlY3Rpb24uZGF0YXNldC5jaGF0SWQgIT09IFwiXCIpIHtcclxuICAgICAgICAgIGxldCB7IHNlbmRDaGF0TWVzc2FnZVN0b3BUeXBpbmdTb2NrZXQgfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICAgICAgXCIuLi9zb2NrZXQvZXZlbnQtZW1pdHRlci9jaGF0LXNvY2tldFwiXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBzZW5kQ2hhdE1lc3NhZ2VTdG9wVHlwaW5nU29ja2V0KGFjdGl2ZUNoYXRTZWN0aW9uLmRhdGFzZXQuY2hhdElkKVxyXG4gICAgICAgICAgaXNVc2VyVHlwaW5nID0gZmFsc2VcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZldGNoKFwiL21lc3NhZ2VcIiwge1xyXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIiwgLy8gb3IgJ1BVVCdcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VyTWVzc2FnZSlcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC50aGVuKGFzeW5jIGRhdGEgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5pc1N1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNyZWF0ZWQgbWVzc2FnZTpcIiwgZGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgIGFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRCb3guY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgICAgICAgICAgIFwiYWN0aXZlLWNoYXQtaW5wdXQtYXR0YWNobWVudC1ib3gtLWhpZGVcIlxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICBhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudC5zdHlsZS5oZWlnaHQgPSBcImF1dG9cIlxyXG4gICAgICAgICAgICAgIGFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50LnN0eWxlLmhlaWdodCA9XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudC5zY3JvbGxIZWlnaHQgKyBcInB4XCJcclxuICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBwYXJzZUludChcclxuICAgICAgICAgICAgICAgICAgYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnQuc3R5bGUuaGVpZ2h0LnNsaWNlKDAsIC0yKVxyXG4gICAgICAgICAgICAgICAgKSA8PSA0MFxyXG4gICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9IFwiNjBweFwiXHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLnN0eWxlLnBhZGRpbmdCb3R0b20gPVxyXG4gICAgICAgICAgICAgICAgICBhY3RpdmVDaGF0SW5wdXRUZXh0Q29udGVudC5zdHlsZS5oZWlnaHRcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY2hlY2tUaW1lQW5kQ3JlYXRlTmV3TWVzc2FnZShkYXRhLm1lc3NhZ2UsIHRydWUpXHJcbiAgICAgICAgICAgICAgY2xvc2VSZXBseU1lc3NhZ2VCb3goKVxyXG4gICAgICAgICAgICAgIHVwZGF0ZUFsbENoYXRTZWN0aW9uKGRhdGEubWVzc2FnZSlcclxuICAgICAgICAgICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5zY3JvbGxUb3AgPVxyXG4gICAgICAgICAgICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuc2Nyb2xsSGVpZ2h0XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbGV0IHsgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgICAgICAgICAgXCIuLi9jb21tb24vbWFpbk5vdGlmaWNhdGlvbi5kZXZcIlxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICBjcmVhdGVNYWluTm90aWZpY2F0aW9uKGRhdGEuZXJyb3IsIFwiZXJyb3JcIilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChhc3luYyBlcnIgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgICAgICAgIGxldCB7IGNyZWF0ZU1haW5Ob3RpZmljYXRpb24gfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICAgICAgICBcIi4uL2NvbW1vbi9tYWluTm90aWZpY2F0aW9uLmRldlwiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgY3JlYXRlTWFpbk5vdGlmaWNhdGlvbihcclxuICAgICAgICAgICAgICBcIlNlcnZlciBFcnJvciBJbiBTZW5kaW5nIE1lc3NhZ2UsIFBsZWFzZSBUcnkgQWdhaW5cIixcclxuICAgICAgICAgICAgICBcImVycm9yXCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgIC8vIGFjdGl2ZS1jaGF0LWlucHV0LWF0dGFjaG1lbnQtYm94XHJcblxyXG4gICAgY29uc3QgYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudEJveEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgICBcImFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRCb3hCdG5cIlxyXG4gICAgKVxyXG5cclxuICAgIGFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRCb3hCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRCb3hCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFxyXG4gICAgICAgICAgXCJhY3RpdmUtY2hhdC1pbnB1dC1hdHRhY2htZW50LWJveF9fYnRuLS1zZWxlY3RlZFwiXHJcbiAgICAgICAgKVxyXG4gICAgICApIHtcclxuICAgICAgICBvcGVuQWN0aXZlQ2hhdElucHV0Qm94KClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvcGVuQWN0aXZlY2hhdElucHV0QXR0YWNobWVudEJveCgpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudFlvdXR1YmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgICAgXCJhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUJ0blwiXHJcbiAgICApXHJcbiAgICBjb25zdCBhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUJ0bklucHV0Qm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgIFwiYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudFlvdXR1YmVCdG5JbnB1dEJveFwiXHJcbiAgICApXHJcbiAgICBhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUJ0bklucHV0Qm94LmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgXCJpbnB1dC1hdHRhY2htZW50LWJ0bi1ib3hfX2lucHV0LWJveC0taGlkZVwiXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgaW5pdGlhbGlzZUV2ZW50Rm9yQ2hhdE1vZHVsZSgpXHJcblxyXG4gICAgSVNfSU5JVF9DSEFUX01PRFVMRSA9IHRydWVcclxuICB9XHJcbn0pKClcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuQWN0aXZlY2hhdElucHV0QXR0YWNobWVudEJveCgpIHtcclxuICBkb2N1bWVudFxyXG4gICAgLmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudEJveEJ0blwiKVxyXG4gICAgLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtY2hhdC1pbnB1dC1hdHRhY2htZW50LWJveF9fYnRuLS1zZWxlY3RlZFwiKVxyXG5cclxuICBjb25zdCBhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50Qm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICBcImFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRCb3hcIlxyXG4gIClcclxuICBhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50Qm94LmNsYXNzTGlzdC5hZGQoXHJcbiAgICBcImFjdGl2ZS1jaGF0LWlucHV0LWF0dGFjaG1lbnQtYm94LS1zZWxlY3RlZFwiXHJcbiAgKVxyXG4gIGFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRCb3guY2xhc3NMaXN0LnJlbW92ZShcclxuICAgIFwiYWN0aXZlLWNoYXQtaW5wdXQtYXR0YWNobWVudC1ib3gtLWhpZGVcIlxyXG4gIClcclxuICBkb2N1bWVudFxyXG4gICAgLmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudEJ0bkNvbnRhaW5lclwiKVxyXG4gICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJpbnB1dC1hdHRhY2htZW50LWJ0bi1jb250YWluZXItLWhpZGVcIilcclxuICBkb2N1bWVudFxyXG4gICAgLmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdElucHV0Qm94XCIpXHJcbiAgICAuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1jaGF0LWlucHV0LWJveC0taGlkZVwiKVxyXG5cclxuICBkb2N1bWVudFxyXG4gICAgLmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdElucHV0U2VuZEJveFwiKVxyXG4gICAgLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtY2hhdC1pbnB1dC1zZW5kLWJveC0taGlkZVwiKVxyXG4gIGRvY3VtZW50XHJcbiAgICAuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUJ0bklucHV0Qm94XCIpXHJcbiAgICAuY2xhc3NMaXN0LmFkZChcImlucHV0LWF0dGFjaG1lbnQtYnRuLWJveF9faW5wdXQtYm94LS1oaWRlXCIpXHJcbiAgYWRqdXN0TWVzc2FnZUNvbnRhaW5lckJvdHRvbVBhZGRpbmcoKVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuQWN0aXZlQ2hhdElucHV0Qm94KCkge1xyXG4gIGRvY3VtZW50XHJcbiAgICAuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50Qm94QnRuXCIpXHJcbiAgICAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1jaGF0LWlucHV0LWF0dGFjaG1lbnQtYm94X19idG4tLXNlbGVjdGVkXCIpXHJcbiAgZG9jdW1lbnRcclxuICAgIC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRCb3hcIilcclxuICAgIC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLWNoYXQtaW5wdXQtYXR0YWNobWVudC1ib3gtLXNlbGVjdGVkXCIpXHJcblxyXG4gIGRvY3VtZW50XHJcbiAgICAuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50QnRuQ29udGFpbmVyXCIpXHJcbiAgICAuY2xhc3NMaXN0LmFkZChcImlucHV0LWF0dGFjaG1lbnQtYnRuLWNvbnRhaW5lci0taGlkZVwiKVxyXG5cclxuICBkb2N1bWVudFxyXG4gICAgLmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdElucHV0Qm94XCIpXHJcbiAgICAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1jaGF0LWlucHV0LWJveC0taGlkZVwiKVxyXG5cclxuICBkb2N1bWVudFxyXG4gICAgLmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdElucHV0U2VuZEJveFwiKVxyXG4gICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtY2hhdC1pbnB1dC1zZW5kLWJveC0taGlkZVwiKVxyXG4gIGFkanVzdE1lc3NhZ2VDb250YWluZXJCb3R0b21QYWRkaW5nKClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkanVzdE1lc3NhZ2VDb250YWluZXJCb3R0b21QYWRkaW5nKCkge1xyXG4gIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLnN0eWxlLnBhZGRpbmdCb3R0b20gPVxyXG4gICAgYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyLmNsaWVudEhlaWdodCArIDUgKyBcInB4XCJcclxuICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5zY3JvbGxUb3AgPSBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5zY3JvbGxIZWlnaHRcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGlzZUV2ZW50Rm9yQ2hhdE1vZHVsZSgpIHtcclxuICAvLyBpbml0aWFsaXplIGV2ZW50IHRvIGFjdGl2ZSBjaGF0XHJcblxyXG4gIC8vIGFjdGl2ZSBjaGF0IHRvIGFsbCBjaGF0IGJ0blxyXG4gIGNvbnN0IEFjdGl2ZUNoYXRUb0FsbENoYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgIFwiQWN0aXZlQ2hhdFRvQWxsQ2hhdEJ0blwiXHJcbiAgKVxyXG4gIEFjdGl2ZUNoYXRUb0FsbENoYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICAgIGxvY2F0aW9uLmhhc2ggPSBcIlwiXHJcbiAgICBpZiAoYWN0aXZlQ2hhdFNlY3Rpb24uZGF0YXNldC5jaGF0SWQgIT09IFwiXCIpIHtcclxuICAgICAgbGV0IHsgc2VuZENoYXRNZXNzYWdlU3RvcFR5cGluZ1NvY2tldCB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgIFwiLi4vc29ja2V0L2V2ZW50LWVtaXR0ZXIvY2hhdC1zb2NrZXRcIlxyXG4gICAgICApXHJcbiAgICAgIHNlbmRDaGF0TWVzc2FnZVN0b3BUeXBpbmdTb2NrZXQoYWN0aXZlQ2hhdFNlY3Rpb24uZGF0YXNldC5jaGF0SWQpXHJcbiAgICAgIGlzVXNlclR5cGluZyA9IGZhbHNlXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgLy9hY3RpdmUgY2hhdCBoZWFkZXIgcGljIGFuZCBhY3RpdmUgY2hhdCBoZWFkZXIgbmFtZVxyXG4gIGxldCBhY3RpdmVDaGF0SGVhZGVyUGljID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0SGVhZGVyUGljXCIpXHJcblxyXG4gIGFjdGl2ZUNoYXRIZWFkZXJQaWMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICAgIGxldCBhY3RpdmVDaGF0SWQgPSBhY3RpdmVDaGF0U2VjdGlvbi5kYXRhc2V0LmNoYXRJZFxyXG4gICAgaWYgKGFjdGl2ZUNoYXRJZCAhPSBcIlwiKSB7XHJcbiAgICAgIGxldCB7IGNyZWF0ZUFjdGl2ZUNoYXRJbmZvTW9kYWwgfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICBcIi4vanMvY3JlYXRlQWN0aXZlQ2hhdEluZm9Nb2RhbC5kZXYuanNcIlxyXG4gICAgICApXHJcbiAgICAgIGNyZWF0ZUFjdGl2ZUNoYXRJbmZvTW9kYWwoYWN0aXZlQ2hhdElkKVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIGxldCBhY3RpdmVDaGF0SGVhZGVyTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWN0aXZlQ2hhdEhlYWRlck5hbWVcIilcclxuICBhY3RpdmVDaGF0SGVhZGVyTmFtZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgbGV0IGFjdGl2ZUNoYXRJZCA9IGFjdGl2ZUNoYXRTZWN0aW9uLmRhdGFzZXQuY2hhdElkXHJcbiAgICBpZiAoYWN0aXZlQ2hhdElkICE9IFwiXCIpIHtcclxuICAgICAgbGV0IHsgY3JlYXRlQWN0aXZlQ2hhdEluZm9Nb2RhbCB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgIFwiLi9qcy9jcmVhdGVBY3RpdmVDaGF0SW5mb01vZGFsLmRldi5qc1wiXHJcbiAgICAgIClcclxuICAgICAgY3JlYXRlQWN0aXZlQ2hhdEluZm9Nb2RhbChhY3RpdmVDaGF0SWQpXHJcbiAgICB9XHJcbiAgfSlcclxuICBsZXQgYWN0aXZlQ2hhdENhbGxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRDYWxsQnRuXCIpXHJcbiAgaWYgKGFjdGl2ZUNoYXRDYWxsQnRuKSB7XHJcbiAgICBhY3RpdmVDaGF0Q2FsbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBsZXQgYWN0aXZlQ2hhdElkID0gYWN0aXZlQ2hhdFNlY3Rpb24uZGF0YXNldC5jaGF0SWRcclxuICAgICAgaWYgKGFjdGl2ZUNoYXRJZC50b1N0cmluZygpICE9PSBcIlwiKSB7XHJcbiAgICAgICAgb3Blbk5ld1RhYihgL2NhbGwvP2NoYXQ9JHthY3RpdmVDaGF0SWR9YClcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGxldCBhY3RpdmVDaGF0Q2FsbFJvb21Cb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGl2ZUNoYXRDYWxsUm9vbUJveFwiKVxyXG4gIGlmIChhY3RpdmVDaGF0Q2FsbFJvb21Cb3gpIHtcclxuICAgIGFjdGl2ZUNoYXRDYWxsUm9vbUJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBsZXQgY2FsbFJvb21JZCA9IGFjdGl2ZUNoYXRDYWxsUm9vbUJveC5kYXRhc2V0LmNhbGxSb29tSWRcclxuICAgICAgaWYgKGNhbGxSb29tSWQudG9TdHJpbmcoKSAhPT0gXCJcIikge1xyXG4gICAgICAgIG9wZW5OZXdUYWIoYC9jYWxsLz9yb29tPSR7Y2FsbFJvb21JZH1gKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyBjcmVhdGUgbmV3IGdyb3VwIGNoYXQgYnRuXHJcbiAgLy8gZ3JvdXAgY2hhdCBmb3JtIE1vZGFsIGFuZCBhc3NpZ24gZXZlbnQgdG8gYnRuXHJcbiAgY29uc3QgY3JlYXRlTmV3R3JvdXBDaGF0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjcmVhdGVOZXdHcm91cENoYXRCdG5cIilcclxuICBjcmVhdGVOZXdHcm91cENoYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICAgIGxldCB7IGNyZWF0ZUdyb3VwQ2hhdEZvcm1Nb2RhbCB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICBcIi4vanMvY3JlYXRlR3JvdXBDaGF0Rm9ybU1vZGFsLmRldlwiXHJcbiAgICApXHJcbiAgICBjcmVhdGVHcm91cENoYXRGb3JtTW9kYWwoKVxyXG4gIH0pXHJcblxyXG4gIGRvY3VtZW50XHJcbiAgICAuZ2V0RWxlbWVudEJ5SWQoXCJhY3RpdmVDaGF0SW5wdXRSZXBseUJveENsb3NlQnRuXCIpXHJcbiAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgbGV0IHsgY2xvc2VSZXBseU1lc3NhZ2VCb3ggfSA9IGF3YWl0IGltcG9ydChcIi4vanMvcmVwbHlNZXNzYWdlQm94LmRldlwiKVxyXG4gICAgICBjbG9zZVJlcGx5TWVzc2FnZUJveCgpXHJcbiAgICB9KVxyXG5cclxuICAvL3NlbmQgY2hhdDptZXNzYWdlLXR5cGluZyBldmVudFxyXG4gIGFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBhc3luYyBlID0+IHtcclxuICAgIGlmIChhY3RpdmVDaGF0U2VjdGlvbi5kYXRhc2V0LmNoYXRJZCAhPT0gXCJcIikge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgbGFzdEFjdGl2ZUNoYXRJZCAhPT0gXCJcIiAmJlxyXG4gICAgICAgIGxhc3RBY3RpdmVDaGF0SWQgIT09IGFjdGl2ZUNoYXRTZWN0aW9uLmRhdGFzZXQuY2hhdElkXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxldCB7IHNlbmRDaGF0TWVzc2FnZVN0b3BUeXBpbmdTb2NrZXQgfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICAgIFwiLi4vc29ja2V0L2V2ZW50LWVtaXR0ZXIvY2hhdC1zb2NrZXRcIlxyXG4gICAgICAgIClcclxuICAgICAgICBzZW5kQ2hhdE1lc3NhZ2VTdG9wVHlwaW5nU29ja2V0KGxhc3RBY3RpdmVDaGF0SWQpXHJcbiAgICAgICAgaXNVc2VyVHlwaW5nID0gZmFsc2VcclxuICAgICAgICBsYXN0QWN0aXZlQ2hhdElkID0gYWN0aXZlQ2hhdFNlY3Rpb24uZGF0YXNldC5jaGF0SWQudG9TdHJpbmcoKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBsYXN0QWN0aXZlQ2hhdElkID0gYWN0aXZlQ2hhdFNlY3Rpb24uZGF0YXNldC5jaGF0SWQudG9TdHJpbmcoKVxyXG4gICAgICBsZXQgY2hhdElkID0gYWN0aXZlQ2hhdFNlY3Rpb24uZGF0YXNldC5jaGF0SWQudG9TdHJpbmcoKVxyXG5cclxuICAgICAgY29uc3QgaW5wdXRWYWx1ZSA9IGFjdGl2ZUNoYXRJbnB1dFRleHRDb250ZW50LnZhbHVlLnRyaW0oKVxyXG5cclxuICAgICAgaWYgKGlucHV0VmFsdWUgJiYgIWlzVXNlclR5cGluZykge1xyXG4gICAgICAgIGlzVXNlclR5cGluZyA9IHRydWVcclxuICAgICAgICBsZXQgeyBzZW5kQ2hhdE1lc3NhZ2VTdGFydFR5cGluZ1NvY2tldCB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgICAgXCIuLi9zb2NrZXQvZXZlbnQtZW1pdHRlci9jaGF0LXNvY2tldFwiXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbmRDaGF0TWVzc2FnZVN0YXJ0VHlwaW5nU29ja2V0KGNoYXRJZClcclxuICAgICAgfSBlbHNlIGlmICghaW5wdXRWYWx1ZSAmJiBpc1VzZXJUeXBpbmcpIHtcclxuICAgICAgICBpc1VzZXJUeXBpbmcgPSBmYWxzZVxyXG4gICAgICAgIGxldCB7IHNlbmRDaGF0TWVzc2FnZVN0b3BUeXBpbmdTb2NrZXQgfSA9IGF3YWl0IGltcG9ydChcclxuICAgICAgICAgIFwiLi4vc29ja2V0L2V2ZW50LWVtaXR0ZXIvY2hhdC1zb2NrZXRcIlxyXG4gICAgICAgIClcclxuICAgICAgICBzZW5kQ2hhdE1lc3NhZ2VTdG9wVHlwaW5nU29ja2V0KGNoYXRJZClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIGFsbENoYXRDaGF0Qm94Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyBlID0+IHtcclxuICAgIGxldCBjaGF0Qm94ID0gZS50YXJnZXQuY2xvc2VzdChgLmNoYXQtYm94YClcclxuXHJcbiAgICBpZiAoY2hhdEJveCAmJiBhbGxDaGF0Q2hhdEJveENvbnRhaW5lci5jb250YWlucyhjaGF0Qm94KSkge1xyXG4gICAgICBsZXQgY2hhdElkID0gY2hhdEJveC5kYXRhc2V0LmNoYXRJZFxyXG4gICAgICBpZiAoY2hhdElkKSB7XHJcbiAgICAgICAgbGV0IHsgZmV0Y2hBY3RpdmVDaGF0IH0gPSBhd2FpdCBpbXBvcnQoXCIuL2pzL2ZldGNoQWN0aXZlQ2hhdC5kZXZcIilcclxuICAgICAgICBmZXRjaEFjdGl2ZUNoYXQoY2hhdElkKVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICB9KVxyXG5cclxuICBsZXQgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgIFwiYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXJcIlxyXG4gIClcclxuICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgZSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcImFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyIGNsaWNrXCIpXHJcbiAgICBsZXQgdXNlck1lc3NhZ2VCb3ggPSBlLnRhcmdldC5jbG9zZXN0KGAuYWN0aXZlLWNoYXQtdXNlci1tZXNzYWdlLWJveGApXHJcbiAgICBsZXQgdXNlck1lc3NhZ2VCb3hCdG4gPSBlLnRhcmdldC5jbG9zZXN0KFxyXG4gICAgICBgLmFjdGl2ZS1jaGF0LXVzZXItbWVzc2FnZS1ib3hfX2J0bltkYXRhLW1lc3NhZ2UtYm94LWJ0biA9XCJ1c2VyXCJdYFxyXG4gICAgKVxyXG4gICAgbGV0IHVzZXJNZXNzYWdlQ29udGVudEJveCA9IGUudGFyZ2V0LmNsb3Nlc3QoXHJcbiAgICAgIGAuYWN0aXZlLWNoYXQtdXNlci1tZXNzYWdlLWJveF9fY29udGVudC1ib3hgXHJcbiAgICApXHJcblxyXG4gICAgaWYgKFxyXG4gICAgICB1c2VyTWVzc2FnZUJveEJ0biAmJlxyXG4gICAgICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5jb250YWlucyh1c2VyTWVzc2FnZUJveEJ0bilcclxuICAgICkge1xyXG4gICAgICB1c2VyTWVzc2FnZUJveC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLWNoYXQtdXNlci1tZXNzYWdlLWJveC0tc2VsZWN0ZWRcIilcclxuICAgICAgbGV0IHsgY3JlYXRlVXNlck1lc3NhZ2VPcHRpb25Nb2RhbCB9ID0gYXdhaXQgaW1wb3J0KFxyXG4gICAgICAgIFwiLi9qcy91c2VyTWVzc2FnZU9wdGlvbk1vZGFsLmRldlwiXHJcbiAgICAgIClcclxuXHJcbiAgICAgIGNyZWF0ZVVzZXJNZXNzYWdlT3B0aW9uTW9kYWwodXNlck1lc3NhZ2VCb3gpXHJcbiAgICB9IGVsc2UgaWYgKFxyXG4gICAgICB1c2VyTWVzc2FnZUNvbnRlbnRCb3ggJiZcclxuICAgICAgYWN0aXZlQ2hhdE1lc3NhZ2VDb250YWluZXIuY29udGFpbnModXNlck1lc3NhZ2VDb250ZW50Qm94KVxyXG4gICAgKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICB1c2VyTWVzc2FnZUJveC5jbGFzc0xpc3QuY29udGFpbnMoXHJcbiAgICAgICAgICBcImFjdGl2ZS1jaGF0LXVzZXItbWVzc2FnZS1ib3gtLXJlcGxpZWQtbWVzc2FnZVwiXHJcbiAgICAgICAgKVxyXG4gICAgICApIHtcclxuICAgICAgICBsZXQgcmVwbGllZE1lc3NhZ2VJZCA9IHVzZXJNZXNzYWdlQm94LmRhdGFzZXQucmVwbGllZE1lc3NhZ2VJZFxyXG4gICAgICAgIGxldCByZXBsaWVkVXNlck1lc3NhZ2VCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgYC5hY3RpdmUtY2hhdC11c2VyLW1lc3NhZ2UtYm94W2RhdGEtbWVzc2FnZS1pZD1cIiR7cmVwbGllZE1lc3NhZ2VJZH1cIl1gXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIChyZXBsaWVkVXNlck1lc3NhZ2VCb3gpIHtcclxuICAgICAgICAgIHJlcGxpZWRVc2VyTWVzc2FnZUJveC5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICAgICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiLFxyXG4gICAgICAgICAgICBibG9jazogXCJjZW50ZXJcIixcclxuICAgICAgICAgICAgaW5saW5lOiBcIm5lYXJlc3RcIlxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIHJlcGxpZWRVc2VyTWVzc2FnZUJveC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICBcImFjdGl2ZS1jaGF0LXVzZXItbWVzc2FnZS1ib3gtLWhpZ2hsaWdodFwiXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVwbGllZFVzZXJNZXNzYWdlQm94LmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgICAgICAgXCJhY3RpdmUtY2hhdC11c2VyLW1lc3NhZ2UtYm94LS1oaWdobGlnaHRcIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9LCAxMDAwKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgfSlcclxuICBhY3RpdmVDaGF0TWVzc2FnZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgYXN5bmMgZSA9PiB7XHJcbiAgICBsZXQgdXNlck1lc3NhZ2VCb3ggPSBlLnRhcmdldC5jbG9zZXN0KGAuYWN0aXZlLWNoYXQtdXNlci1tZXNzYWdlLWJveGApXHJcblxyXG4gICAgaWYgKHVzZXJNZXNzYWdlQm94ICYmIGFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyLmNvbnRhaW5zKHVzZXJNZXNzYWdlQm94KSkge1xyXG4gICAgICBsZXQgbWVzc2FnZUlkID0gdXNlck1lc3NhZ2VCb3guZGF0YXNldC5tZXNzYWdlSWRcclxuICAgICAgbGV0IHsgb3BlblJlcGx5TWVzc2FnZUJveCB9ID0gYXdhaXQgaW1wb3J0KFwiLi9qcy9yZXBseU1lc3NhZ2VCb3guZGV2LmpzXCIpXHJcblxyXG4gICAgICBvcGVuUmVwbHlNZXNzYWdlQm94KG1lc3NhZ2VJZClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuZnVuY3Rpb24gb3Blbk5ld1RhYih1cmwpIHtcclxuICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIilcclxuICBsaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgdXJsKVxyXG4gIGxpbmsuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpXHJcbiAgbGluay5zZXRBdHRyaWJ1dGUoXCJyZWxcIiwgXCJub29wZW5lciBub3JlZmVycmVyXCIpXHJcblxyXG4gIC8vIHNpbXVsYXRlIGEgY2xpY2sgb24gdGhlIGxpbmsgdG8gb3BlbiB0aGUgbmV3IHRhYlxyXG4gIGxpbmsuY2xpY2soKVxyXG59XHJcbiJdLCJuYW1lcyI6WyJhbGxDaGF0U2VjdGlvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhY3RpdmVDaGF0U2VjdGlvbiIsImFjdGl2ZUNoYXRNZXNzYWdlQ29udGFpbmVyIiwiYWN0aXZlQ2hhdElucHV0VGV4dENvbnRlbnQiLCJhbGxDaGF0Q2hhdEJveENvbnRhaW5lciIsImlzVXNlclR5cGluZyIsImxhc3RBY3RpdmVDaGF0SWQiLCJkYXRhc2V0IiwiY2hhdElkIiwidG9TdHJpbmciLCJJU19JTklUX0NIQVRfTU9EVUxFIiwiY2hlY2tDaGF0U3RhdGUiLCJsb2NhdGlvbiIsImhhc2giLCJyZXBsYWNlIiwiZmV0Y2hBY3RpdmVDaGF0IiwidGl0bGUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93IiwiYWN0aXZlQ2hhdElucHV0Q29udGFpbmVyIiwiYWN0aXZlQ2hhdElucHV0QXR0YWNobWVudEJveCIsInZhbHVlIiwiY29udGFpbnMiLCJzdHlsZSIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsImFkanVzdE1lc3NhZ2VDb250YWluZXJCb3R0b21QYWRkaW5nIiwiZGVmYXVsdCIsImluc2VydFRleHRBdEN1cnNvciIsIlBpY2tlciIsImdldEVtb2ppQW5kQWRkVG9JbnB1dCIsImVtb2ppIiwibmF0aXZlIiwiYWN0aXZlQ2hhdElucHV0RW1vamlCdG4iLCJhY3RpdmVDaGF0SW5wdXRFbW9qaUNvbnRhaW5lciIsImVtb2ppUGlja2VyT3B0aW9ucyIsInBhcmVudCIsImRhdGEiLCJvbkVtb2ppU2VsZWN0IiwiYXV0b0ZvY3VzIiwiZW1vamlCdXR0b25Db2xvcnMiLCJlbW9qaUJ1dHRvblNpemUiLCJlbW9qaVZlcnNpb24iLCJpY29ucyIsIm1heEZyZXF1ZW50Um93cyIsIm5hdlBvc2l0aW9uIiwicHJldmlld1Bvc2l0aW9uIiwic2V0IiwiZHluYW1pY1dpZHRoIiwiZW1vamlQaWNrZXIiLCJ0b2dnbGUiLCJjbG9zZVJlcGx5TWVzc2FnZUJveCIsImNoZWNrVGltZUFuZENyZWF0ZU5ld01lc3NhZ2UiLCJ1cGRhdGVBbGxDaGF0U2VjdGlvbiIsIlVwcHkiLCJEYXNoYm9hcmQiLCJXZWJjYW0iLCJJbWFnZUVkaXRvciIsIkF1ZGlvIiwiQXdzUzNNdWx0aXBhcnQiLCJ1cHB5IiwiaWQiLCJhdXRvUHJvY2VlZCIsImFsbG93TXVsdGlwbGVVcGxvYWRCYXRjaGVzIiwiZGVidWciLCJvbkJlZm9yZUZpbGVBZGRlZCIsImN1cnJlbnRGaWxlIiwiZmlsZXMiLCJjb25zb2xlIiwibG9nIiwidHlwZSIsImluZm8iLCJuYW1lIiwib25CZWZvcmVVcGxvYWQiLCJyZXN0cmljdGlvbnMiLCJtYXhGaWxlU2l6ZSIsIm1pbkZpbGVTaXplIiwibWF4VG90YWxGaWxlU2l6ZSIsIm1heE51bWJlck9mRmlsZXMiLCJtaW5OdW1iZXJPZkZpbGVzIiwiYWxsb3dlZEZpbGVUeXBlcyIsIm1ldGEiLCJtZWRpYVR5cGUiLCJpbmZvVGltZW91dCIsInVzZSIsInRyaWdnZXIiLCJ0YXJnZXQiLCJpbmxpbmUiLCJwbHVnaW5zIiwidGh1bWJuYWlsV2lkdGgiLCJzaG93UmVtb3ZlQnV0dG9uQWZ0ZXJDb21wbGV0ZSIsImRpc2FibGVQYWdlU2Nyb2xsV2hlbk1vZGFsT3BlbiIsImNsb3NlTW9kYWxPbkNsaWNrT3V0c2lkZSIsInRoZW1lIiwibG9jYWxlIiwic3RyaW5ncyIsIm5vdGUiLCJwcm91ZGx5RGlzcGxheVBvd2VyZWRCeVVwcHkiLCJtaXJyb3IiLCJtb2RlcyIsInByZWZlcnJlZFZpZGVvTWltZVR5cGUiLCJzaG93UmVjb3JkaW5nTGVuZ3RoIiwicXVhbGl0eSIsInNob3dBdWRpb1NvdXJjZURyb3Bkb3duIiwibGltaXQiLCJjb21wYW5pb25VcmwiLCJvcmlnaW4iLCJvbiIsImZpbGUiLCJyZXNwb25zZSIsInVzZXJNZXNzYWdlIiwiY2hhdCIsImhhc01lZGlhQ29udGVudCIsIm1lZGlhQ29udGVudFR5cGUiLCJzcGxpdCIsIm1lZGlhQ29udGVudE1pbWVUeXBlIiwibWVkaWFDb250ZW50UGF0aCIsInMzTXVsdGlwYXJ0Iiwia2V5IiwicmVwbGllZFRvIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGVuIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImlzU3VjY2VzcyIsIm1lc3NhZ2UiLCJjcmVhdGVNYWluTm90aWZpY2F0aW9uIiwiZXJyb3IiLCJjYXRjaCIsImVyciIsImFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRZb3V0dWJlQ29udGVudFNlbmRCdG4iLCJhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUNvbnRlbnQiLCJhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUJ0bklucHV0Qm94IiwiYWN0aXZlQ2hhdElucHV0U2VuZEJ0biIsInRyaW0iLCJ0ZXh0Q29udGVudCIsInNlbmRDaGF0TWVzc2FnZVN0b3BUeXBpbmdTb2NrZXQiLCJwYXJzZUludCIsInNsaWNlIiwicGFkZGluZ0JvdHRvbSIsInNjcm9sbFRvcCIsImFjdGl2ZUNoYXRJbnB1dEF0dGFjaG1lbnRCb3hCdG4iLCJvcGVuQWN0aXZlQ2hhdElucHV0Qm94Iiwib3BlbkFjdGl2ZWNoYXRJbnB1dEF0dGFjaG1lbnRCb3giLCJhY3RpdmVDaGF0SW5wdXRBdHRhY2htZW50WW91dHViZUJ0biIsImluaXRpYWxpc2VFdmVudEZvckNoYXRNb2R1bGUiLCJjbGllbnRIZWlnaHQiLCJBY3RpdmVDaGF0VG9BbGxDaGF0QnRuIiwiYWN0aXZlQ2hhdEhlYWRlclBpYyIsImFjdGl2ZUNoYXRJZCIsImNyZWF0ZUFjdGl2ZUNoYXRJbmZvTW9kYWwiLCJhY3RpdmVDaGF0SGVhZGVyTmFtZSIsImFjdGl2ZUNoYXRDYWxsQnRuIiwib3Blbk5ld1RhYiIsImFjdGl2ZUNoYXRDYWxsUm9vbUJveCIsImNhbGxSb29tSWQiLCJjcmVhdGVOZXdHcm91cENoYXRCdG4iLCJjcmVhdGVHcm91cENoYXRGb3JtTW9kYWwiLCJlIiwiaW5wdXRWYWx1ZSIsInNlbmRDaGF0TWVzc2FnZVN0YXJ0VHlwaW5nU29ja2V0IiwiY2hhdEJveCIsImNsb3Nlc3QiLCJ1c2VyTWVzc2FnZUJveCIsInVzZXJNZXNzYWdlQm94QnRuIiwidXNlck1lc3NhZ2VDb250ZW50Qm94IiwiY3JlYXRlVXNlck1lc3NhZ2VPcHRpb25Nb2RhbCIsInJlcGxpZWRNZXNzYWdlSWQiLCJyZXBsaWVkVXNlck1lc3NhZ2VCb3giLCJxdWVyeVNlbGVjdG9yIiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImJsb2NrIiwic2V0VGltZW91dCIsIm1lc3NhZ2VJZCIsIm9wZW5SZXBseU1lc3NhZ2VCb3giLCJ1cmwiLCJsaW5rIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNsaWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./dev-javascripts/chat/chat.dev.js\n");

/***/ })

}]);