let svg_authPasswordHideIcon = `<svg width="100" height="70" viewBox="0 0 100 70"  xmlns="http://www.w3.org/2000/svg">
<path d="M42.568 46.1215L90.7709 5.99636C91.5616 5.33762 92.0058 4.44418 92.0058 3.51258C92.0058 2.58099 91.5616 1.68755 90.7709 1.02881C89.9803 0.370075 88.9079 0 87.7897 0C86.6716 0 85.5992 0.370075 84.8085 1.02881L74.0595 10.0194C61.2298 4.68398 46.3866 3.79749 32.7747 7.55369C19.1628 11.3099 7.88948 19.4032 1.4192 30.0645C0.486282 31.5925 0 33.2826 0 34.997C0 36.7114 0.486282 38.4015 1.4192 39.9296C5.42095 46.4692 11.2715 52.1 18.4666 56.3365L9.22908 63.9977C8.83553 64.3229 8.52316 64.7098 8.30999 65.1361C8.09682 65.5624 7.98706 66.0196 7.98706 66.4814C7.98706 66.9433 8.09682 67.4005 8.30999 67.8268C8.52316 68.2531 8.83553 68.64 9.22908 68.9652C9.61942 69.2931 10.0838 69.5534 10.5955 69.731C11.1072 69.9086 11.656 70 12.2103 70C12.7646 70 13.3134 69.9086 13.8251 69.731C14.3367 69.5534 14.8011 69.2931 15.1915 68.9652L28.04 58.2255L42.568 46.1215ZM34.1703 43.3579C32.211 40.8721 31.1473 37.9707 31.1051 34.997C31.1162 30.8248 33.1105 26.826 36.6516 23.8758C40.1926 20.9256 44.9922 19.264 50 19.2548C53.5566 19.2587 57.0381 20.1082 60.0353 21.7036L53.821 26.846C52.602 26.4537 51.3067 26.2521 50 26.2513C47.216 26.2513 44.546 27.1728 42.5774 28.8129C40.6088 30.453 39.5029 32.6775 39.5029 34.997C39.5038 36.0857 39.7457 37.1649 40.2167 38.1804L34.1703 43.3579ZM98.5808 30.0645C96.7575 27.0412 94.5472 24.1911 91.9886 21.5637C91.8169 21.4469 91.6344 21.3416 91.4427 21.2488L90.7289 20.864C90.4893 20.7737 90.2344 20.7147 89.9731 20.6891C89.709 20.6526 89.4395 20.6526 89.1753 20.6891H88.4196H87.6218L86.866 21.0039C86.6749 21.0843 86.4923 21.1779 86.3201 21.2838L41.0984 58.4704C41.0984 58.4704 41.0984 58.7153 40.8045 58.8202C40.6035 59.0104 40.434 59.2222 40.3006 59.4499C40.1977 59.6662 40.1135 59.8883 40.0487 60.1146C40.0487 60.1146 40.0487 60.3945 40.0487 60.5344C40.0446 60.5926 40.0446 60.651 40.0487 60.7093C40.0056 60.9646 40.0056 61.2236 40.0487 61.4789C40.0284 61.6768 40.0284 61.8758 40.0487 62.0736C40.1433 62.2784 40.2556 62.4771 40.3846 62.6683L40.8465 63.2281C40.8465 63.2281 40.8465 63.2281 40.8465 63.403C40.8465 63.5779 41.1404 63.5779 41.2664 63.6828L41.9802 64.0676C42.252 64.1583 42.5331 64.2286 42.8199 64.2775C42.8199 64.2775 43.1139 64.2775 43.3238 64.2775H43.7857C45.8456 64.5239 47.9201 64.6757 50 64.7323C60.0538 64.7265 69.9105 62.4075 78.4828 58.0309C87.0552 53.6543 94.0102 47.3903 98.5808 39.9296C99.5137 38.4015 100 36.7114 100 34.997C100 33.2826 99.5137 31.5925 98.5808 30.0645Z" />
</svg>
`
let svg_authPasswordShowIcon = `<svg width="100" height="65" viewBox="0 0 100 65"  xmlns="http://www.w3.org/2000/svg">
<path d="M99.6828 31.0126C95.2153 21.5728 88.1561 13.6308 79.3471 8.1337C70.538 2.63662 60.3508 -0.183618 50 0.00927217C39.6492 -0.183618 29.462 2.63662 20.6529 8.1337C11.8439 13.6308 4.78473 21.5728 0.317205 31.0126C0.108136 31.48 0 31.9871 0 32.5C0 33.0129 0.108136 33.52 0.317205 33.9874C4.78473 43.4272 11.8439 51.3692 20.6529 56.8663C29.462 62.3634 39.6492 65.1836 50 64.9907C60.3508 65.1836 70.538 62.3634 79.3471 56.8663C88.1561 51.3692 95.2153 43.4272 99.6828 33.9874C99.8919 33.52 100 33.0129 100 32.5C100 31.9871 99.8919 31.48 99.6828 31.0126ZM50 50.5504C46.4681 50.5504 43.0156 49.4918 40.079 47.5084C37.1423 45.525 34.8535 42.7059 33.5019 39.4076C32.1503 36.1093 31.7967 32.48 32.4857 28.9785C33.1748 25.4771 34.8755 22.2608 37.3729 19.7364C39.8703 17.212 43.0522 15.4929 46.5162 14.7964C49.9802 14.0999 53.5707 14.4574 56.8337 15.8236C60.0967 17.1898 62.8857 19.5034 64.8479 22.4717C66.8101 25.4401 67.8574 28.93 67.8574 32.5C67.8517 37.2855 65.9685 41.8734 62.6208 45.2572C59.2731 48.6411 54.7343 50.5447 50 50.5504Z" />
<path d="M50 43.3302C55.9174 43.3302 60.7144 38.4814 60.7144 32.5C60.7144 26.5186 55.9174 21.6697 50 21.6697C44.0826 21.6697 39.2856 26.5186 39.2856 32.5C39.2856 38.4814 44.0826 43.3302 50 43.3302Z" />
</svg>
`

let svg_authPrevIcon = `<svg width="100" height="100" viewBox="0 0 100 100"  xmlns="http://www.w3.org/2000/svg">
<path d="M50 100C59.8891 100 69.556 97.0676 77.7785 91.5735C86.001 86.0794 92.4096 78.2705 96.194 69.1343C99.9783 59.998 100.969 49.9446 99.0392 40.2456C97.11 30.5465 92.3479 21.6375 85.3553 14.6449C78.3627 7.65229 69.4535 2.8902 59.7545 0.961007C50.0555 -0.968789 40.0021 0.0219082 30.8658 3.8062C21.7295 7.59059 13.9206 13.9992 8.4265 22.2217C2.9325 30.4441 0 40.111 0 50.0001C0.011 63.2575 5.2824 75.9687 14.6568 85.3432C24.0313 94.7176 36.7426 99.989 50 100ZM30.6625 46.8001L55.6625 25.9669C56.0827 25.6161 56.5679 25.3516 57.0904 25.1884C57.6128 25.0252 58.1623 24.9664 58.7075 25.0156C59.2527 25.0647 59.7828 25.2207 60.2676 25.4748C60.7525 25.7288 61.1826 26.0758 61.5333 26.4959C61.8841 26.9162 62.1486 27.4014 62.3118 27.9238C62.475 28.4463 62.5338 28.9958 62.4846 29.541C62.4355 30.0861 62.2795 30.6163 62.0254 31.1011C61.7714 31.586 61.4244 32.016 61.0042 32.3668L39.8458 50.0001L61.0042 67.6334C61.4244 67.9842 61.7714 68.4143 62.0254 68.8991C62.2795 69.384 62.4355 69.9141 62.4846 70.4593C62.5338 71.0044 62.475 71.5539 62.3118 72.0764C62.1486 72.5988 61.8841 73.084 61.5333 73.5043C61.1826 73.9245 60.7525 74.2715 60.2676 74.5256C59.7828 74.7796 59.2527 74.9356 58.7075 74.9847C58.1623 75.0339 57.6128 74.9752 57.0904 74.8119C56.5679 74.6487 56.0827 74.3842 55.6625 74.0334L30.6625 53.2001C30.1936 52.8091 29.8163 52.3197 29.5574 51.7668C29.2986 51.2138 29.1644 50.6107 29.1644 50.0001C29.1644 49.3895 29.2986 48.7864 29.5574 48.2334C29.8163 47.6805 30.1936 47.1912 30.6625 46.8001Z" />
</svg>
`
let svg_authNextIcon = `<svg width="100" height="100" viewBox="0 0 100 100"  xmlns="http://www.w3.org/2000/svg">
<path d="M50 0C40.1109 0 30.444 2.93245 22.2215 8.42652C13.999 13.9206 7.59043 21.7295 3.80604 30.8658C0.0216643 40.0021 -0.968502 50.0555 0.960758 59.7545C2.89002 69.4536 7.65206 78.3627 14.6447 85.3553C21.6373 92.3479 30.5465 97.11 40.2455 99.0392C49.9445 100.969 59.9979 99.9783 69.1342 96.194C78.2705 92.4096 86.0794 86.001 91.5735 77.7785C97.0675 69.556 100 59.8891 100 50C99.989 36.7426 94.7176 24.0313 85.3432 14.6568C75.9687 5.28242 63.2574 0.0110341 50 0ZM69.3375 53.2L44.3375 74.0333C43.9173 74.3841 43.4321 74.6486 42.9096 74.8118C42.3872 74.975 41.8377 75.0338 41.2925 74.9846C40.7473 74.9355 40.2172 74.7795 39.7324 74.5254C39.2475 74.2714 38.8174 73.9244 38.4667 73.5042C38.1159 73.0839 37.8514 72.5987 37.6882 72.0763C37.525 71.5538 37.4662 71.0043 37.5154 70.4591C37.5645 69.914 37.7205 69.3838 37.9746 68.899C38.2286 68.4141 38.5756 67.9841 38.9958 67.6333L60.1542 50L38.9958 32.3667C38.5756 32.0159 38.2286 31.5858 37.9746 31.101C37.7205 30.6161 37.5645 30.086 37.5154 29.5408C37.4662 28.9957 37.525 28.4462 37.6882 27.9237C37.8514 27.4013 38.1159 26.9161 38.4667 26.4958C38.8174 26.0756 39.2475 25.7286 39.7324 25.4745C40.2172 25.2205 40.7473 25.0645 41.2925 25.0154C41.8377 24.9662 42.3872 25.0249 42.9096 25.1882C43.4321 25.3514 43.9173 25.6159 44.3375 25.9667L69.3375 46.8C69.8064 47.191 70.1837 47.6804 70.4426 48.2333C70.7014 48.7863 70.8356 49.3894 70.8356 50C70.8356 50.6106 70.7014 51.2137 70.4426 51.7667C70.1837 52.3196 69.8064 52.8089 69.3375 53.2Z" />
</svg>
`
let svg_authRefreshIcon = `<svg width="100" height="100" viewBox="0 0 100 100"  xmlns="http://www.w3.org/2000/svg">
<path d="M95.8916 58.006C94.495 57.5705 92.983 57.705 91.6851 58.3804C90.3873 59.0557 89.4088 60.2171 88.9631 61.6114C86.3444 69.6233 81.2394 76.5902 74.3907 81.4983C67.5419 86.4064 59.3068 88.9996 50.8835 88.9008C40.4649 89.0193 30.4245 84.9985 22.964 77.7201C15.5035 70.4417 11.2318 60.4997 11.0857 50.0744C11.2318 39.649 15.5035 29.7071 22.964 22.4286C30.4245 15.1502 40.4649 11.1294 50.8835 11.248C60.293 11.2252 69.4129 14.5028 76.6579 20.5108L64.6299 18.514C63.909 18.3953 63.1718 18.4204 62.4606 18.5878C61.7495 18.7552 61.0784 19.0617 60.4861 19.4895C59.8937 19.9173 59.3917 20.4581 59.0089 21.0808C58.6261 21.7035 58.3701 22.3957 58.2556 23.1177C58.1369 23.8391 58.162 24.5768 58.3293 25.2884C58.4966 26.0001 58.8028 26.6716 59.2304 27.2644C59.6579 27.8571 60.1983 28.3595 60.8206 28.7426C61.4428 29.1256 62.1346 29.3818 62.8561 29.4964L86.3579 33.379H87.3002C87.9429 33.3782 88.5806 33.2656 89.1848 33.0462C89.3878 32.9691 89.5755 32.8564 89.7391 32.7134C90.1365 32.5655 90.51 32.36 90.8476 32.1033L91.3465 31.4932C91.3465 31.2158 91.8454 30.994 92.0671 30.6612C92.2888 30.3284 92.0671 30.1065 92.3442 29.8846C92.4974 29.5616 92.627 29.2279 92.7322 28.8862L96.8894 6.69972C97.0277 5.97132 97.0212 5.2228 96.8705 4.49689C96.7197 3.77098 96.4275 3.0819 96.0106 2.46899C95.5937 1.85608 95.0602 1.33134 94.4406 0.924736C93.8211 0.518132 93.1275 0.237624 92.3996 0.0992292C91.6717 -0.0391657 90.9237 -0.0327377 90.1983 0.118146C89.4729 0.26903 88.7843 0.561415 88.1718 0.978608C86.9348 1.82117 86.0829 3.12094 85.8036 4.592L84.307 12.6346C75.0282 4.58779 63.162 0.157085 50.8835 0.154695C37.5249 0.0363707 24.6649 5.22595 15.1254 14.5847C5.58596 23.9434 0.146281 36.7069 0 50.0744C0.146281 63.4418 5.58596 76.2053 15.1254 85.564C24.6649 94.9228 37.5249 100.112 50.8835 99.994C61.7095 100.16 72.3029 96.8442 81.104 90.5335C89.9051 84.2228 96.4488 75.2511 99.7717 64.9393C99.9819 64.2292 100.048 63.4841 99.9657 62.748C99.8836 62.012 99.655 61.2998 99.2933 60.6536C98.9317 60.0074 98.4444 59.4402 97.8601 58.9855C97.2759 58.5307 96.6066 58.1977 95.8916 58.006Z" />
</svg>
`
let svg_authDefaultProfileIcon = `<svg width="85" height="100" viewBox="0 0 85 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M31.07 67.7491C38.7182 67.169 46.4016 67.169 54.0499 67.7491C58.2147 67.9776 62.3599 68.468 66.459 69.2171C75.3293 70.9075 81.1202 73.6655 83.602 78.1139C85.466 81.5857 85.466 85.7186 83.602 89.1904C81.1202 93.6388 75.5591 96.5747 66.3671 98.0872C62.2712 98.8645 58.1251 99.3699 53.9579 99.5996C50.0973 100 46.2367 100 42.3301 100H35.2983C33.8276 99.8221 32.4028 99.7331 31.024 99.7331C26.8567 99.5313 22.7097 99.0408 18.6149 98.2651C9.74462 96.6637 3.95368 93.8167 1.47185 89.3683C0.513778 87.6451 0.00868106 85.7202 0.000553657 83.7633C-0.0188291 81.7946 0.470993 79.8523 1.42589 78.1139C3.86176 73.6655 9.6527 70.774 18.6149 69.2171C22.7277 68.4573 26.8889 67.9668 31.07 67.7491ZM42.514 0C57.9214 0 70.4116 12.0891 70.4116 27.0018C70.4116 41.9144 57.9214 54.0036 42.514 54.0036C27.1065 54.0036 14.6164 41.9144 14.6164 27.0018C14.6164 12.0891 27.1065 0 42.514 0Z" />
</svg>
`

let svg_authUsernameValidIcon = `
<svg width="100" height="100" viewBox="0 0 100 100"  xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M36.3086 59.3359L75.1562 20.5078C75.4674 20.1977 75.8888 20.0236 76.3281 20.0236C76.7674 20.0236 77.1888 20.1977 77.5 20.5078L84.1797 27.168C84.3362 27.3224 84.4604 27.5064 84.5452 27.7093C84.6301 27.9121 84.6737 28.1298 84.6737 28.3496C84.6737 28.5695 84.6301 28.7872 84.5452 28.99C84.4604 29.1929 84.3362 29.3768 84.1797 29.5313L37.5 76.2109C37.1888 76.521 36.7675 76.6952 36.3281 76.6952C35.8888 76.6952 35.4674 76.521 35.1563 76.2109V76.1719L13.8282 54.8438C13.6643 54.683 13.5357 54.4899 13.4502 54.2769C13.3648 54.0638 13.3245 53.8354 13.3318 53.6059C13.3392 53.3765 13.394 53.1511 13.4929 52.9439C13.5918 52.7368 13.7325 52.5524 13.9063 52.4024L20.4492 45.8399C20.7604 45.5298 21.1818 45.3556 21.6211 45.3556C22.0604 45.3556 22.4818 45.5298 22.793 45.8399L36.3086 59.3359ZM100 50C100 36.1914 94.3945 23.6914 85.3516 14.6485C80.7145 9.99838 75.2043 6.31045 69.1375 3.79659C63.0707 1.28273 56.567 -0.00750396 50 3.28292e-05C36.1914 3.28292e-05 23.6914 5.6055 14.6485 14.6485C9.99838 19.2855 6.31045 24.7957 3.79659 30.8625C1.28273 36.9293 -0.00750396 43.433 3.28292e-05 50C3.28292e-05 63.8086 5.6055 76.3086 14.6485 85.3516C23.6914 94.3945 36.1914 100 50 100C63.8086 100 76.3086 94.3945 85.3516 85.3516C94.3945 76.3086 100 63.8086 100 50Z" />
</svg>

`

let stateOptions = `
<option value="" selected disabled hidden>-- select state --
</option>
<option value="AN">Andaman and Nicobar Islands</option>
<option value="AP">Andhra Pradesh</option>
<option value="AR">Arunachal Pradesh</option>
<option value="AS">Assam</option>
<option value="BR">Bihar</option>
<option value="CH">Chandigarh</option>
<option value="CT">Chhattisgarh</option>
<option value="DH">Dadra and Nagar Haveli and Daman and Diu</option>
<option value="DL">Delhi</option>
<option value="GA">Goa</option>
<option value="GJ">Gujarat</option>
<option value="HR">Haryana</option>
<option value="HP">Himachal Pradesh</option>
<option value="JK">Jammu and Kashmir</option>
<option value="JH">Jharkhand</option>
<option value="KA">Karnataka</option>
<option value="KL">Kerala</option>
<option value="LA">Ladakh</option>
<option value="LD">Lakshadweep</option>
<option value="MP">Madhya Pradesh</option>
<option value="MH">Maharashtra</option>
<option value="MN">Manipur</option>
<option value="ML">Meghalaya</option>
<option value="MZ">Mizoram</option>
<option value="NL">Nagaland</option>
<option value="OR">Odisha</option>
<option value="PY">Puducherry</option>
<option value="PB">Punjab</option>
<option value="RJ">Rajasthan</option>
<option value="SK">Sikkim</option>
<option value="TN">Tamil Nadu</option>
<option value="TG">Telangana</option>
<option value="TR">Tripura</option>
<option value="UP">Uttar Pradesh</option>
<option value="UT">Uttarakhand</option>
<option value="WB">West Bengal</option>
`
import { createMainNotification } from "../../common/mainNotification.dev.js"

import "../css/profileEditProfileOption.dev.css"
// import Uppy from "@uppy/core"
// import Dashboard from "@uppy/dashboard"
// import Webcam from "@uppy/webcam"
// import ImageEditor from "@uppy/image-editor"
// import AwsS3Multipart from "@uppy/aws-s3-multipart"
// import "@uppy/core/dist/style.css"
// import "@uppy/dashboard/dist/style.css"
// import "@uppy/webcam/dist/style.css"
// import "@uppy/image-editor/dist/style.css"

/////for preventing default tab behavior
window.addEventListener("keydown", e => {
  if (e.key === "Tab") e.preventDefault()
})

export function setEditProfileContent(modalContentBox, profileUser) {
  modalContentBox.innerHTML = ""
  let editFormContainer = document.createElement("div")
  editFormContainer.classList.add("edit-form-container")
  editFormContainer.setAttribute("id", "editFormContainer")

  editFormContainer.innerHTML = `
    <header>Edit Profile</header>
    <div class="activity-progress activity-progress--edit" id="editProgress">
        <div class="activity-progress__info">
            <div class="activity-progress__info-step" id="editProgressInfoStep">STEP: 1 OF 3</div>
            <div class="activity-progress__info-step-info" id="editProgressInfoStepInfo">Your Name</div>
        </div>
        <div class="activity-progress__bar">
            <div class="activity-progress__bar-highlighter" id="editProgressBarhighlighter"></div>
        </div>
    </div>

    <!-- Form Begins -->
    <div class="edit-form" id="editForm">

        <div class="edit-form-page" id="editFormPage1">
            <div class="profile-field profile-field--edit">
                <div class="profile-field__pic" id="editProfile" data-profile-key="">
                    ${svg_authDefaultProfileIcon}

                </div>

                <div class="profile-field__title">Click to add profile picture</div>
            </div>
            <div class="edit-form-page__row">
                <div class="input-field input-field--edit">
                    <label class="input-field__label" for="editFirstName">First Name<span>*</span>
                    </label>

                    <input class="input-field__input" type="text" id="editFirstName" placeholder="First Name"
                        autocomplete="off" style="text-transform:capitalize;">

                </div>
                <div class="input-field input-field--edit ">
                    <label class="input-field__label" for="editLastName">Last Name</label>
                    <input class="input-field__input" type="text" id="editLastName" placeholder="Last Name"
                        autocomplete="off" style="text-transform:capitalize;">
                </div>
            </div>

            <div class="input-btn-field input-btn-field--edit input-btn-field--center-align">
                <div class="input-btn input-btn--next-page" id="editNext1Btn">
                    ${svg_authNextIcon}
                </div>
            </div>

        </div>
      
        <div class="edit-form-page" id="editFormPage2">
            <div class="input-field input-field--edit">
                <label class="input-field__label" for="editUsername">Username<span
                        class="required">*</span></label>
                <ul class="input-field__desc-list">
                    <li>Choose unique username</li>
                    <li>Use small alphabet(a-z) or .(dot) or _(underscore)</li>
                    <li class="not-use">Don't use special character(!@#$%^&*;'...) or space or capital letters(A-Z).</li>
                </ul>

                <div class="input-field__input-box input-field__input-box--username" id="editUsernameBox">
                    <input class="input-field__input input-field__input--username" type="text" name="username"
                        id="editUsername" autocomplete="off">

                    <div class="input-field__input-info input-field__input-info--username">

                    ${svg_authUsernameValidIcon}
                    </div>
                    <div class="input-field__btn input-field__btn--single-icon" id="editUsernameRefreshBtn">

                       ${svg_authRefreshIcon}
                    </div>

                </div>

            </div>

            <div class="input-btn-field input-btn-field--edit ">

                <div class="input-btn input-btn--prev-page" id="editPrev1Btn">
                   ${svg_authPrevIcon}
                </div>
                <div class="input-btn input-btn--next-page" id="editNext2Btn">
                   ${svg_authNextIcon}
                </div>
            </div>

        </div>
        <div class="edit-form-page" id="editFormPage3">
            <div class="input-field input-field--edit">
                <label class="input-field__label" for="editGenderMale">Gender</label>

                <div class="edit-gender-btns">

                    <div class="edit-gender-btn">
                        <input type="radio" name="editGender" value="male" checked="checked"
                            id="editGenderMale">
                        <label class="edit-gender-label" for="editGenderMale">Male
                        </label>
                    </div>
                    <div class="edit-gender-btn">
                        <input type="radio" name="editGender" value="female" id="editGenderFemale">
                        <label class="edit-gender-label" for="editGenderFemale">Female
                        </label>
                    </div>
                    <div class="edit-gender-btn">
                        <input type="radio" name="editGender" value="other" id="editGenderOther">
                        <label class="edit-gender-label" for="editGenderOther">Other
                        </label>
                    </div>

                </div>
            </div>

            <div class="input-field input-field--edit">
                <label class="input-field__label" for="editBirthday">BirthDay<span
                        class="required">*</span></label>
                <input class="input-field__input" type="date" id="editBirthday" name="birthday"
                    autocomplete="off">
            </div>
            <div class="input-field input-field--edit">
                <label class="input-field__label" for="sigupState">Address<span class="required">*</span>
                </label>
                <select class="input-field__input input-field__input--select" name="editState" id="editState">
                  ${stateOptions}
                </select>
                <select class="input-field__input input-field__input--select" name="editCity" id="editCity">
                    <option value="" selected disabled hidden>-- select city -- </option>
                </select>

            </div>

            <div class="input-field input-field--edit">
                <label class="input-field__label" for="editBio">Bio</label>
                <textarea class="input-field__input input-field__input--textarea" name="bio" id="editBio"
                    cols="30" rows="10" autocomplete="off"></textarea>
            </div>
            <div class="input-btn-field input-btn-field--edit ">
                <div class="input-btn input-btn--prev-page" id="editPrev2Btn">
                 ${svg_authPrevIcon}
                </div>
                <div class="input-btn input-btn--text input-btn--submit" id="editSubmitBtn">Submit
                </div>
            </div>
        </div>
    </div>
    `

  modalContentBox.insertAdjacentElement("beforeend", editFormContainer)
  attachScript(profileUser)
}

/////for preventing default tab behavior
window.addEventListener("keydown", e => {
  if (e.key === "Tab") e.preventDefault()
})

import Uppy from "@uppy/core"
import Dashboard from "@uppy/dashboard"
import Webcam from "@uppy/webcam"
import ImageEditor from "@uppy/image-editor"
import AwsS3Multipart from "@uppy/aws-s3-multipart"
import "@uppy/core/dist/style.css"
import "@uppy/dashboard/dist/style.css"
import "@uppy/webcam/dist/style.css"
import "@uppy/image-editor/dist/style.css"

//////////////////////////////////////////////////////////////

function attachScript(profileUser) {
  const uppy = new Uppy({
    id: "editProfile",
    autoProceed: false,
    allowMultipleUploadBatches: false,
    debug: false,
    onBeforeFileAdded: (currentFile, files) => {
      currentFile.name = editProfile.dataset.profileKey || ""
      return currentFile
    },
    restrictions: {
      maxFileSize: 1024 * 1024 * 10,
      maxNumberOfFiles: 1,
      allowedFileTypes: ["image/jpg", "image/jpeg", "image/png", "image/gif"]
    },
    meta: { mediaType: "user-profile-picture" },
    infoTimeout: 5000
  })
    .use(Dashboard, {
      trigger: "#editProfile",
      target: "body",
      inline: false,
      // plugins: ['Webcam'],
      thumbnailWidth: 300,
      proudlyDisplayPoweredByUppy: false,
      closeModalOnClickOutside: true,
      theme: "dark",
      locale: {
        strings: {
          dropPasteImportFiles: "Upload here or Drop file here 👇"
        }
      },
      note: "Upload your profile file-size: up to 10MB, file-type: [jpeg  jpg  gif  png]"
    })
    .use(Webcam, {
      target: Dashboard,
      mirror: true,
      modes: ["picture"],
      showRecordingLength: true
    })
    .use(ImageEditor, {
      target: Dashboard,
      quality: 0.8
    })
    .use(AwsS3Multipart, {
      limit: 4,
      companionUrl: `${location.origin}/companion`
    })

  uppy.on("complete", result => {
    const image = document.createElement("img")
    image.src = result.successful[0].preview
    editProfile.innerHTML = ""
    editProfile.appendChild(image)
    editProfile.dataset.profileKey = result.successful[0].s3Multipart.key
  })
  /////////////////////////////////////////////////////

  const editFormPage1 = document.getElementById("editFormPage1")
  const editFormPage2 = document.getElementById("editFormPage2")
  const editFormPage3 = document.getElementById("editFormPage3")

  const editForm = document.getElementById("editForm")

  const editProgressInfoStep = document.getElementById("editProgressInfoStep")
  const editProgressInfoStepInfo = document.getElementById(
    "editProgressInfoStepInfo"
  )
  const editProgressBarhighlighter = document.getElementById(
    "editProgressBarhighlighter"
  )

  const editNext1Btn = document.getElementById("editNext1Btn")
  const editNext2Btn = document.getElementById("editNext2Btn")
  const editPrev1Btn = document.getElementById("editPrev1Btn")
  const editPrev2Btn = document.getElementById("editPrev2Btn")
  const editSubmitBtn = document.getElementById("editSubmitBtn")
  //////////////////////////////////
  //////////////////////////////////
  const editProfile = document.getElementById("editProfile")
  const editFirstName = document.getElementById("editFirstName")
  const editLastName = document.getElementById("editLastName")
  // const editEmail = document.getElementById("editEmail")

  const editUsernameBox = document.getElementById("editUsernameBox")
  const editUsername = document.getElementById("editUsername")
  const editGenderMale = document.getElementById("editGenderMale")
  const editGenderFemale = document.getElementById("editGenderFemale")
  const editGenderOther = document.getElementById("editGenderOther")
  const editBirthday = document.getElementById("editBirthday")
  const editCity = document.getElementById("editCity")
  const editState = document.getElementById("editState")

  const editBio = document.getElementById("editBio")

  let selectCity = () => {
    if (editState.value !== "") {
      editCity.style.display = "block"
      fetch("/user-auth/generate-cities?stateCode=" + editState.value)
        .then(res => {
          if (res.ok) return res.json()
          throw new Error("error in generating cities")
        })
        .then(data => {
          if (data.isSuccess) {
            let options = `<option value="" selected disabled hidden>-- select city -- </option>`
            data.citiesName.forEach(city => {
              if (profileUser.location.city === city) {
                options += `<option value="${city}" selected>${city}</option>`
              } else {
                options += `<option value="${city}">${city}</option>`
              }
            })

            editCity.innerHTML = options
          } else {
            createMainNotification(data.error, "error")
          }
        })
        .catch(err => {
          createMainNotification(
            "Server Error In Generating Cities, Please Choose State Again",
            "error"
          )

          console.log(err)
        })
    }
  }
  // initialise form

  if (profileUser.hasOwnProperty("profile") && profileUser.profile !== "") {
    const image = document.createElement("img")
    image.src = profileUser.profile
    editProfile.innerHTML = ""
    editProfile.appendChild(image)
    editProfile.dataset.profileKey = profileUser.profileKey || ""
  }

  editFirstName.value = profileUser.firstName || ""

  editLastName.value = profileUser.lastName || ""

  // editEmail.value = profileUser.email || ""

  editUsername.value = profileUser.username || ""
  editUsernameBox.classList.add("valid")

  if (profileUser.hasOwnProperty("gender")) {
    if (profileUser.gender === "male") {
      editGenderMale.checked = true
    } else if (profileUser.gender === "female") {
      editGenderFemale.checked = true
    } else {
      editGenderOther.checked = true
    }
  }
  if (profileUser.hasOwnProperty("birthday")) {
    let day = new Date(profileUser.birthday).getDate()
    if (day < 10) {
      day = "0" + day
    }

    let birthday =
      new Date(profileUser.birthday).getFullYear() +
      "-" +
      (new Date(profileUser.birthday).getMonth() + 1) +
      "-" +
      day
    editBirthday.value = birthday
  }

  editBio.value = profileUser.bio || ""
  editState.value = profileUser.location.state
  selectCity()

  //////////////////////////
  editNext1Btn.addEventListener("click", () => {
    if (editFirstName.value !== "") {
      editFormPage1.style.left = "-150%"
      editFormPage2.style.left = "0%"
      editForm.scrollTop = 0
      editProgressBarhighlighter.style.width = "66%"
      editProgressInfoStepInfo.textContent = "Username"
      editProgressInfoStep.textContent = "STEP: 2 OF 3"
    } else {
      createMainNotification("Please Enter Firstname, It Should Not Be Empty")
      editFirstName.focus()
    }
  })
  editPrev1Btn.addEventListener("click", () => {
    editFormPage1.style.left = "0%"
    editFormPage2.style.left = "150%"
    editForm.scrollTop = 0
    editProgressBarhighlighter.style.width = "33%"
    editProgressInfoStepInfo.textContent = "Your Name"
    editProgressInfoStep.textContent = "STEP: 1 OF 3"
  })
  editNext2Btn.addEventListener("click", () => {
    if (editUsername.value != "") {
      editFormPage2.style.left = "-150%"
      editFormPage3.style.left = "0%"
      editForm.scrollTop = 0
      editProgressBarhighlighter.style.width = "100%"
      editProgressInfoStepInfo.textContent = "Bio"
      editProgressInfoStep.textContent = "STEP: 3 OF 3"
    } else {
      createMainNotification(
        "Please Enter A Unique Username, It Should Not Be Empty"
      )
      editUsername.focus()
    }
  })

  editPrev2Btn.addEventListener("click", () => {
    editFormPage2.style.left = "0%"
    editFormPage3.style.left = "150%"
    editForm.scrollTop = 0
    editProgressBarhighlighter.style.width = "66%"
    editProgressInfoStepInfo.textContent = "Username"
    editProgressInfoStep.textContent = "STEP: 2 OF 3"
  })

  //////////////////////////////////////////////////////////////////////////////

  // username input
  let specialRegex = new RegExp(`[^A-Za-z.0-9_\\s]`, "g") //special character, space is also excluded from special character
  let spaceRegex = new RegExp("\\s", "g") //space character

  let capitalRegex = new RegExp("[A-Z]", "g") // capital letters (A-Z)

  let smallRegex = new RegExp("[a-zA-Z]", "g") // alphabate character
  editUsername.addEventListener("keyup", e => {
    editUsername.value = editUsername.value.replace(specialRegex, "")
    editUsername.value = editUsername.value.replace(spaceRegex, "")
    editUsername.value = editUsername.value.replace(capitalRegex, match =>
      match.toLowerCase()
    )
  })

  editUsername.addEventListener("change", e => {
    if (editUsername.value.toString() === "") {
      editUsernameBox.classList.remove("valid")
    }
  })

  let usernameTimeout
  editUsername.addEventListener("input", () => {
    let username = editUsername.value.toString()
    if (username.search(specialRegex) !== -1) {
      createMainNotification(
        "Special characters (except .) are not allowed in username,Please remove them from your username",
        "error"
      )
    } else if (username.search(spaceRegex) !== -1) {
      createMainNotification(
        "Spaces are not allowed in username ,Please remove space from your username",
        "error"
      )
    } else if (username.search(capitalRegex) !== -1) {
      createMainNotification(
        "Capital letters(A-Z) are not allowed in username, Please use small letters(a-z) for your username",
        "error"
      )
    } else {
      if (username !== "") {
        clearTimeout(usernameTimeout)
        usernameTimeout = setTimeout(() => {
          if (username.search(smallRegex) === -1) {
            createMainNotification(
              "Please use atleast one alphabet (a-z or A-Z) in your username",
              "error"
            )
          } else {
            fetch("/user-auth/check-username?username=" + username)
              .then(res => {
                if (res.ok) {
                  return res.json()
                } else throw new Error("server error in checking username")
              })
              .then(data => {
                if (data.isSuccess) {
                  editUsernameBox.classList.add("valid")
                } else {
                  if (editUsernameBox.classList.contains("valid"))
                    editUsernameBox.classList.remove("valid")
                  createMainNotification(data.error, "error")
                }
              })
              .catch(err => {
                if (editUsernameBox.classList.contains("valid"))
                  editUsernameBox.classList.remove("valid")
                createMainNotification(
                  "Server Error, Please type Username Again",
                  "error"
                )
              })
          }
        }, 1000)
      } else {
        editUsernameBox.classList.remove("valid")
      }
    }
  })

  const editUsernameRefreshBtn = document.getElementById(
    "editUsernameRefreshBtn"
  )
  let degree = 0
  editUsernameRefreshBtn.addEventListener("click", () => {
    if (!editUsernameRefreshBtn.classList.contains("disabled")) {
      degree += 360
      editUsernameRefreshBtn.style.rotate = `${degree}deg`
      let firstName = editFirstName.value.toString()

      editUsernameRefreshBtn.classList.add("disabled")

      fetch("/user-auth/generate-username?name=" + firstName)
        .then(res => {
          if (res.ok) {
            return res.json()
          } else throw new Error("server error in generating username")
        })
        .then(data => {
          if (data.isSuccess) {
            editUsername.value = data.username
            editUsernameBox.classList.add("valid")
            editUsernameRefreshBtn.classList.remove("disabled")
          } else {
            editUsernameRefreshBtn.classList.remove("disabled")
            createMainNotification(data.error, "error")
          }
        })
        .catch(err => {
          editUsernameRefreshBtn.classList.remove("disabled")
          createMainNotification("Server Error, Please try Again", "error")
        })
    }
  })

  /////////////////////////////////////////////////////////////////

  editState.addEventListener("change", selectCity)
  ////////////////////////////////////////////////////////////
  // edit submit form
  editSubmitBtn.addEventListener("click", e => {
    if (editBirthday.value !== "") {
      if (editState.value !== "" && editCity.value !== "") {
        let editGender
        if (editGenderMale.checked) editGender = "male"
        else if (editGenderFemale.checked) editGender = "female"
        else editGender = "other"
        let editData = {
          editFirstName: editFirstName.value,
          editLastName: editLastName.value || "",
          // editEmail: editEmail.value || "",
          editUsername: editUsername.value,
          editGender: editGender || "male",
          editBirthday: editBirthday.value || new Date(),
          editCountry: "IN",
          editState: editState.value,
          editCity: editCity.value,
          editBio: editBio.value || "",
          editProfile: editProfile.dataset.profileKey || ""
        }
        fetch("/user-auth/edit-user-profile", {
          method: "PATCH",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(editData)
        })
          .then(res => {
            if (res.ok) return res.json()
            throw new Error("Server error in signing up")
          })
          .then(data => {
            if (data.isSuccess) {
              createMainNotification(
                "Your Profile Is Edited Successfully",
                "success"
              )

              setTimeout(() => {
                location.reload()
              }, 2000)
            } else {
              createMainNotification(data.error, "error")
            }
          })
          .catch(err => {
            console.log(err)
            createMainNotification(
              "Server error in editing your profile, Please try again",
              "error"
            )
          })
      } else {
        if (editState.value === "") {
          createMainNotification("Please select a state")
          editState.focus()
        } else if (editCity.value === "") {
          createMainNotification("Please select a city")
          editCity.focus()
        }
      }
    } else {
      createMainNotification("Please enter your birthDay")
      editBirthday.focus()
    }
  })
}

// <div class="input-field input-field--edit">
// <label class="input-field__label" for="editEmail">Email</label>
// <input class="input-field__input" type="email" id="editEmail" placeholder="abc@xyz.com"
//     autocomplete="off" pattern="[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-zA-Z]{2,4}$"
//     style="text-transform: lowercase;">
// </div>
