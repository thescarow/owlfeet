let svg_backgroundColorIcon = `
<svg width="102" height="92" viewBox="0 0 102 92" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M98.0383 58.0711H101M99.432 59.5599V56.5822" stroke="#F16723" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M38.8049 2.48881H41.9408M40.3728 3.8122V1" stroke="#4D9AD4" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2.39373 66.3422C3.16346 66.3422 3.78746 65.7497 3.78746 65.0188C3.78746 64.2879 3.16346 63.6954 2.39373 63.6954C1.62399 63.6954 1 64.2879 1 65.0188C1 65.7497 1.62399 66.3422 2.39373 66.3422Z" stroke="#F16723" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M96.6446 89.9978C96.9333 89.9978 97.1673 89.7756 97.1673 89.5015C97.1673 89.2274 96.9333 89.0052 96.6446 89.0052C96.356 89.0052 96.122 89.2274 96.122 89.5015C96.122 89.7756 96.356 89.9978 96.6446 89.9978Z" fill="#231F20"/>
<path d="M4.3101 59.7253C4.59875 59.7253 4.83275 59.5031 4.83275 59.229C4.83275 58.9549 4.59875 58.7327 4.3101 58.7327C4.02145 58.7327 3.78745 58.9549 3.78745 59.229C3.78745 59.5031 4.02145 59.7253 4.3101 59.7253Z" fill="#231F20"/>
<path d="M10.7561 8.1132C11.0447 8.1132 11.2787 7.89101 11.2787 7.61693C11.2787 7.34285 11.0447 7.12066 10.7561 7.12066C10.4674 7.12066 10.2334 7.34285 10.2334 7.61693C10.2334 7.89101 10.4674 8.1132 10.7561 8.1132Z" fill="#231F20"/>
<path d="M91.2439 26.3098C91.5326 26.3098 91.7666 26.0876 91.7666 25.8135C91.7666 25.5394 91.5326 25.3172 91.2439 25.3172C90.9553 25.3172 90.7213 25.5394 90.7213 25.8135C90.7213 26.0876 90.9553 26.3098 91.2439 26.3098Z" fill="#231F20"/>
<path d="M88.108 27.1369C88.4929 27.1369 88.8049 26.8407 88.8049 26.4752C88.8049 26.1098 88.4929 25.8135 88.108 25.8135C87.7231 25.8135 87.4111 26.1098 87.4111 26.4752C87.4111 26.8407 87.7231 27.1369 88.108 27.1369Z" fill="#231F20"/>
<path d="M70.8606 16.3844C71.8228 16.3844 72.6028 15.6438 72.6028 14.7301C72.6028 13.8165 71.8228 13.0759 70.8606 13.0759C69.8985 13.0759 69.1185 13.8165 69.1185 14.7301C69.1185 15.6438 69.8985 16.3844 70.8606 16.3844Z" stroke="#FBD108" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M9.36237 74.2825C9.36237 65.1843 17.0279 57.9056 26.6098 57.9056H79.0488C88.6307 57.9056 96.2962 65.1843 96.2962 74.2825C96.2962 83.3808 88.6307 90.6595 79.0488 90.6595H26.6098C17.0279 90.6595 9.36237 83.3808 9.36237 74.2825Z" fill="white"/>
<path d="M9.7108 77.0947V75.2751C9.7108 67.831 16.1568 61.7104 23.9965 61.7104H82.3589C90.1986 61.7104 96.6446 67.831 96.6446 75.2751C96.6446 83.8771 89.3275 90.6595 80.4425 90.6595H23.9965C16.1568 90.6595 9.7108 84.5388 9.7108 77.0947Z" fill="#5BB947"/>
<path d="M9.7108 73.6209C9.7108 67.0039 15.2857 61.7104 22.2544 61.7104H83.9268C90.8955 61.7104 96.4704 67.0039 96.4704 73.6209C96.4704 80.2378 90.8955 85.5313 83.9268 85.5313H22.4286C15.4599 85.5313 9.7108 80.2378 9.7108 73.6209Z" fill="#80C244"/>
<path d="M38.4565 57.9056H26.784C17.2021 57.9056 9.53659 65.1843 9.53659 74.2825C9.53659 83.3808 17.2021 90.6595 26.784 90.6595H38.4565V57.9056Z" fill="white"/>
<path d="M38.4564 61.7104H25.216C16.8537 61.7104 9.88502 68.1619 9.88502 76.2676C9.88502 84.208 16.6794 90.8249 25.216 90.8249H38.4564V61.7104Z" fill="#E7D0A8"/>
<path d="M38.4564 61.7104H22.6028C15.6341 61.7104 10.0592 67.0039 10.0592 73.6209C10.0592 80.2378 15.6341 85.5313 22.6028 85.5313H38.4564V61.7104Z" fill="#FFE4B8"/>
<path d="M38.4564 90.6595V60.5524M9.36237 74.2825C9.36237 65.1843 17.0279 57.9056 26.6098 57.9056H79.0488C88.6307 57.9056 96.2962 65.1843 96.2962 74.2825C96.2962 83.3808 88.6307 90.6595 79.0488 90.6595H26.6098C17.0279 90.6595 9.36237 83.3808 9.36237 74.2825Z" stroke="#231F20" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M25.5645 78.2527C27.8737 78.2527 29.7456 76.4752 29.7456 74.2826C29.7456 72.0899 27.8737 70.3124 25.5645 70.3124C23.2553 70.3124 21.3833 72.0899 21.3833 74.2826C21.3833 76.4752 23.2553 78.2527 25.5645 78.2527Z" fill="white"/>
<path d="M25.5645 78.2527C27.8737 78.2527 29.7456 76.4752 29.7456 74.2826C29.7456 72.0899 27.8737 70.3124 25.5645 70.3124C23.2553 70.3124 21.3833 72.0899 21.3833 74.2826C21.3833 76.4752 23.2553 78.2527 25.5645 78.2527Z" stroke="#231F20" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M90.7213 70.3124C90.7213 67.5002 88.2822 65.1843 85.3206 65.1843M82.7073 65.1843H81.4878M51 65.1843H44.0314" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M10.5819 79.9069C6.92335 71.6358 11.2787 62.0412 20.1638 58.5673L68.77 39.8745C77.6551 36.4006 87.7596 40.5362 91.2439 48.9728C94.9024 57.4094 90.547 67.0039 81.662 70.3124L33.0557 89.0052C24.1707 92.4791 14.0662 88.3435 10.5819 79.9069Z" fill="white"/>
<path d="M12.1498 82.5537L11.2787 80.5687C10.5708 78.9296 10.2121 77.1735 10.2235 75.402C10.235 73.6304 10.6162 71.8786 11.3453 70.2479C12.0744 68.6172 13.1368 67.14 14.471 65.9017C15.8053 64.6634 17.3849 63.6886 19.1185 63.0338L73.4739 42.1904C80.7909 39.3782 88.9791 42.6867 91.9408 49.6345C95.2509 57.5748 91.2439 66.6731 82.8815 69.9816L30.6167 89.9978C28.8905 90.67 27.0411 91.0106 25.1754 90.9997C23.3097 90.9889 21.4648 90.6269 19.7474 89.9346C18.0301 89.2423 16.4743 88.2335 15.1702 86.9666C13.8661 85.6997 12.8395 84.1998 12.1498 82.5537Z" fill="#EF5224"/>
<path d="M10.7561 79.2452C8.14286 73.1246 11.2787 66.1768 17.7247 63.6954L75.0418 41.6941C81.4878 39.2128 88.8049 42.1904 91.4181 48.3111C94.0314 54.4317 90.8955 61.3795 84.4495 63.8609L27.1324 85.8622C20.6864 88.3435 13.3693 85.3659 10.7561 79.2452Z" fill="#F16723"/>
<path d="M31.1394 54.4318L20.338 58.5674C11.453 61.8758 7.27178 71.4704 10.7561 79.907C14.4146 88.3436 24.3449 92.3137 33.23 89.0053L44.0314 84.8697L31.1394 54.4318Z" fill="white"/>
<path d="M32.7073 57.9056L20.5122 62.5375C12.4983 65.6805 8.83972 74.1171 11.9756 81.5612C15.1115 89.0052 23.9965 92.6445 31.8362 89.5015L44.0314 84.8696L32.7073 57.9056Z" fill="#E7D0A8"/>
<path d="M32.7073 57.9056L17.899 63.53C11.453 66.0114 8.31707 72.9592 10.9303 79.0798C13.5436 85.2005 20.8606 88.1781 27.3066 85.6968L42.115 80.0724L32.7073 57.9056Z" fill="#FFE4B8"/>
<path d="M44.0314 84.8696L32.1847 56.9131M10.5819 79.9069C6.92335 71.6358 11.2787 62.0412 20.1638 58.5673L68.77 39.8745C77.6551 36.4006 87.7596 40.5362 91.2439 48.9728C94.9024 57.4094 90.547 67.0039 81.662 70.3124L33.0557 89.0052C24.1707 92.4791 14.0662 88.3435 10.5819 79.9069Z" stroke="#231F20" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M27.1636 77.966C29.3047 77.1447 30.3392 74.8307 29.4742 72.7977C28.6092 70.7647 26.1724 69.7824 24.0313 70.6037C21.8902 71.425 20.8557 73.7389 21.7206 75.772C22.5856 77.805 25.0225 78.7873 27.1636 77.966Z" fill="white"/>
<path d="M27.1636 77.966C29.3047 77.1447 30.3392 74.8307 29.4742 72.7977C28.6092 70.7647 26.1724 69.7824 24.0313 70.6037C21.8902 71.425 20.8557 73.7389 21.7206 75.772C22.5856 77.805 25.0225 78.7873 27.1636 77.966Z" stroke="#231F20" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M84.6237 47.3185C83.5784 44.6718 80.4425 43.5138 77.6551 44.5063M75.0418 45.4989L73.9965 45.9952M45.7735 56.7477L39.1533 59.3944" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M14.4146 85.3659C7.62021 78.9144 7.62021 68.4927 14.4146 62.2066L51.3484 26.9715C58.1429 20.5199 69.1185 20.5199 75.7387 26.9715C82.5331 33.423 82.5331 43.8446 75.7387 50.1307L38.8049 85.3659C32.0105 91.8174 21.2091 91.8174 14.4146 85.3659Z" fill="white"/>
<path d="M16.6794 87.0202L15.4599 85.8622C9.88502 80.5687 9.88502 71.9666 15.4599 66.5077L56.5749 27.4677C62.1498 22.1742 71.2091 22.1742 76.9582 27.4677C83.23 33.423 83.23 43.183 76.9582 49.1382L37.0627 87.0202C31.4878 92.3137 22.4286 92.3137 16.6794 87.0202Z" fill="#F9AE19"/>
<path d="M14.2404 84.5388C9.36237 79.9069 9.36237 72.2975 14.2404 67.6656L57.9686 26.1443C62.8467 21.5125 70.8606 21.5125 75.7387 26.1443C80.6167 30.7762 80.6167 38.3857 75.7387 43.0175L32.0105 84.5388C27.1324 89.3361 19.1185 89.3361 14.2404 84.5388Z" fill="#FBD108"/>
<path d="M22.777 54.1009L14.5889 61.8758C7.79443 68.3273 7.79443 78.749 14.5889 85.0351C21.3833 91.4866 32.3589 91.4866 38.9791 85.0351L47.1672 77.2602L22.777 54.1009Z" fill="white"/>
<path d="M25.5645 56.9131L16.1568 65.846C10.2335 71.4704 10.2335 80.7341 16.1568 86.3585C22.0801 91.9829 31.8362 91.9829 37.7596 86.3585L47.1673 77.4256L25.5645 56.9131Z" fill="#E7D0A8"/>
<path d="M25.5645 56.9131L14.4146 67.5002C9.53658 72.1321 9.53658 79.7415 14.4146 84.3734C19.2927 89.0052 27.3066 89.0052 32.1847 84.3734L43.3345 73.7863L25.5645 56.9131Z" fill="#FFE4B8"/>
<path d="M47.1673 77.4256L24.8676 56.086M14.4146 85.3659C7.62021 78.9144 7.62021 68.4927 14.4146 62.2066L51.3484 26.9715C58.1429 20.5199 69.1185 20.5199 75.7387 26.9715C82.5331 33.423 82.5331 43.8446 75.7387 50.1307L38.8049 85.3659C32.0105 91.8174 21.2091 91.8174 14.4146 85.3659Z" stroke="#231F20" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M28.8246 77.2086C30.4574 75.6581 30.4573 73.1444 28.8245 71.5939C27.1916 70.0435 24.5442 70.0436 22.9114 71.594C21.2785 73.1445 21.2786 75.6583 22.9115 77.2087C24.5444 78.7591 27.1917 78.7591 28.8246 77.2086Z" fill="white"/>
<path d="M28.8246 77.2086C30.4574 75.6581 30.4573 73.1444 28.8245 71.5939C27.1916 70.0435 24.5442 70.0436 22.9114 71.594C21.2785 73.1445 21.2786 75.6583 22.9115 77.2087C24.5444 78.7591 27.1917 78.7591 28.8246 77.2086Z" stroke="#231F20" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M69.1185 27.7986C67.0279 25.8135 63.7178 25.8135 61.6272 27.7986M59.5366 29.7837L58.6655 30.6108M37.2369 50.9579L32.1847 55.7551" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M19.9895 89.1706C11.1045 85.6967 6.92334 76.1021 10.5819 67.6656L30.6167 21.6779C34.2753 13.2413 44.3798 9.27117 53.2648 12.7451C62.1498 16.2189 66.331 25.8135 62.6725 34.2501L42.6376 80.4031C38.9791 88.6743 28.8746 92.6445 19.9895 89.1706Z" fill="white"/>
<path d="M22.777 89.8324L21.3833 89.3361C14.0662 86.3585 10.4077 78.4181 13.5436 71.3049L35.669 20.52C38.8049 13.5722 47.1672 10.0983 54.6585 13.0759C62.8467 16.2189 66.6794 25.1518 63.3693 32.9267L41.5923 82.3883C38.6307 89.3361 30.0941 92.81 22.777 89.8324Z" fill="#ED3C7A"/>
<path d="M19.4669 88.509C13.0209 86.0276 10.0592 78.9144 12.6725 72.7938L36.3659 18.7003C38.9791 12.5796 46.4704 9.76744 52.9164 12.2488C59.3624 14.7301 62.3241 21.8433 59.7108 27.964L36.0174 82.0575C33.4042 88.1781 25.9129 91.1557 19.4669 88.509Z" fill="#EF5E87"/>
<path d="M15.1115 57.4094L10.5819 67.6656C6.92334 76.1022 11.1045 85.6967 19.9895 89.1706C28.8746 92.6445 38.9791 88.6744 42.6376 80.2378L47.1672 69.9815L15.1115 57.4094Z" fill="white"/>
<path d="M18.9443 58.7327L13.892 70.3124C10.5819 77.7564 14.4146 86.193 22.0801 89.3361C29.9199 92.4791 38.8049 88.8398 42.115 81.5612L47.1673 69.9815L18.9443 58.7327Z" fill="#E7D0A8"/>
<path d="M18.9443 58.7327L12.8467 72.6283C10.2334 78.749 13.1951 85.6968 19.6411 88.3435C26.0871 90.8249 33.4042 88.0127 36.1916 81.892L42.2892 67.9965L18.9443 58.7327Z" fill="#FFE4B8"/>
<path d="M47.1672 69.9815L17.899 58.4019M19.9895 89.1706C11.1045 85.6967 6.92334 76.1021 10.5819 67.6656L30.6167 21.6779C34.2753 13.2413 44.3798 9.27117 53.2648 12.7451C62.1498 16.2189 66.331 25.8135 62.6725 34.2501L42.6376 80.4031C38.9791 88.6743 28.8746 92.6445 19.9895 89.1706Z" stroke="#231F20" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M30.0363 76.4227C30.9205 74.3971 29.908 72.0745 27.7747 71.2349C25.6415 70.3953 23.1954 71.3568 22.3112 73.3824C21.4271 75.4079 22.4396 77.7306 24.5728 78.5701C26.7061 79.4097 29.1522 78.4482 30.0363 76.4227Z" fill="white"/>
<path d="M30.0363 76.4227C30.9205 74.3971 29.908 72.0745 27.7747 71.2349C25.6415 70.3953 23.1954 71.3568 22.3112 73.3824C21.4271 75.4079 22.4396 77.7306 24.5728 78.5701C26.7061 79.4097 29.1522 78.4482 30.0363 76.4227Z" stroke="#231F20" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M47.3415 16.219C44.554 15.2264 41.5923 16.3844 40.3728 19.0311M39.3275 21.3471L38.8049 22.505M27.3066 49.1382L24.5192 55.4243" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M26.6098 90.6595C17.0279 90.6595 9.36237 83.3808 9.36237 74.2825V24.4901C9.36237 15.3918 17.0279 8.11321 26.6098 8.11321C36.1916 8.11321 43.8571 15.3918 43.8571 24.4901V74.2825C43.8571 83.3808 36.1916 90.6595 26.6098 90.6595Z" fill="white"/>
<path d="M28.7003 90.1632C20.1638 90.1632 13.3693 83.7117 13.3693 75.7713V22.1742C13.3693 14.2339 20.1638 7.78234 28.5261 7.78234C37.0627 7.78234 43.8571 14.2339 43.8571 22.3396V75.9368C43.8571 83.7117 37.0627 90.1632 28.7003 90.1632Z" fill="#3768A4"/>
<path d="M25.9129 90.1632C18.9442 90.1632 13.3693 84.8696 13.3693 78.2527V19.6928C13.3693 13.0759 18.9442 7.78234 25.9129 7.78234C32.8815 7.78234 38.4564 13.0759 38.4564 19.6928V78.2527C38.6307 84.8696 32.8815 90.1632 25.9129 90.1632Z" fill="#4D9AD4"/>
<path d="M9.36237 63.0338V74.1172C9.36237 83.2155 17.0279 90.4941 26.6098 90.4941C36.1916 90.4941 43.8571 83.2155 43.8571 74.1172V63.0338H9.36237Z" fill="white"/>
<path d="M13.3693 63.0338V75.606C13.3693 83.5463 20.1638 90.1632 28.7003 90.1632C37.0627 90.1632 44.0314 83.7117 44.0314 75.606V63.0338H13.3693Z" fill="#E7D0A8"/>
<path d="M13.3693 63.0338V78.0873C13.3693 84.7043 18.9442 89.9978 25.9129 89.9978C32.8815 89.9978 38.4564 84.7043 38.4564 78.0873V63.0338H13.3693Z" fill="#FFE4B8"/>
<path d="M43.8571 37.0623V74.2825C43.8571 83.3808 36.1916 90.6595 26.6098 90.6595C17.0279 90.6595 9.36237 83.3808 9.36237 74.2825V42.5213M43.8571 31.7687V34.4155M9.36237 39.5436V24.4901C9.36237 15.3918 17.0279 8.11321 26.6098 8.11321C36.1916 8.11321 43.8571 15.3918 43.8571 24.4901V29.122M43.8571 63.0338H12.1498" stroke="#231F20" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M26.6098 79.2453C28.919 79.2453 30.7909 77.4678 30.7909 75.2751C30.7909 73.0824 28.919 71.3049 26.6098 71.3049C24.3006 71.3049 22.4286 73.0824 22.4286 75.2751C22.4286 77.4678 24.3006 79.2453 26.6098 79.2453Z" fill="white"/>
<path d="M26.6098 79.2453C28.919 79.2453 30.7909 77.4678 30.7909 75.2751C30.7909 73.0824 28.919 71.3049 26.6098 71.3049C24.3006 71.3049 22.4286 73.0824 22.4286 75.2751C22.4286 77.4678 24.3006 79.2453 26.6098 79.2453Z" stroke="#231F20" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
<path d="M22.4286 13.2413C19.4669 13.2413 17.0279 15.5572 17.0279 18.3694M17.2021 21.0162V22.1742M17.2021 50.9579V57.7402" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
</svg>

`
let svg_backgroundImageIcon = `
<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M57.5 20C53.5 20 50 23.5 50 27.5C50 31.5 53.5 35 57.5 35C61.5 35 65 31.5 65 27.5C65 23.5 61.5 20 57.5 20ZM85 0H15C6.5 0 0 6.5 0 15V85C0 93.5 6.5 100 15 100H85C93.5 100 100 93.5 100 85V15C100 6.5 93.5 0 85 0ZM90 59.5L80.5 50C74.5 44.5 65 44.5 59.5 50L55 54.5L40.5 40C34.5 34.5 25 34.5 19.5 40L10 49.5V15C10 12 12 10 15 10H85C88 10 90 12 90 15V59.5Z" fill="url(#paint0_linear_153_68)"/>
<defs>
<linearGradient id="paint0_linear_153_68" x1="93" y1="9.9957e-07" x2="9" y2="117" gradientUnits="userSpaceOnUse">
<stop stop-color="#43FFDD"/>
<stop offset="0.401735" stop-color="#FFB951"/>
<stop offset="0.9999" stop-color="#31FC46" stop-opacity="0.34375"/>
</linearGradient>
</defs>
</svg>

`

let svg_backgroundRemoveIcon = `
<svg width="80" height="100" viewBox="0 0 80 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M56.1263 34.7083L53.8875 80.7145C53.8614 81.2481 53.6358 81.751 53.2574 82.1194C52.879 82.4877 52.3768 82.6933 51.8544 82.6937H51.7525C51.4849 82.6804 51.2224 82.6132 50.9802 82.4959C50.738 82.3787 50.5208 82.2138 50.3411 82.0106C50.1613 81.8074 50.0225 81.5699 49.9326 81.3118C49.8427 81.0536 49.8035 80.7799 49.8172 80.5062L52.0459 34.7083H42.0311V80.6104C42.0311 81.1629 41.8165 81.6928 41.4344 82.0835C41.0524 82.4742 40.5342 82.6937 39.9939 82.6937C39.4536 82.6937 38.9355 82.4742 38.5534 82.0835C38.1714 81.6928 37.9567 81.1629 37.9567 80.6104V34.7083H27.9399L30.1686 80.5062C30.1823 80.7799 30.1431 81.0536 30.0532 81.3118C29.9633 81.5699 29.8245 81.8074 29.6447 82.0106C29.465 82.2138 29.2478 82.3787 29.0056 82.4959C28.7634 82.6132 28.5009 82.6804 28.2333 82.6937H28.1314C27.609 82.6933 27.1067 82.4877 26.7284 82.1194C26.35 81.751 26.1244 81.2481 26.0983 80.7145L23.8615 34.7083H7.10977C6.93254 34.7083 6.75734 34.6875 6.58011 34.6812L11.7953 91.7708C11.9907 94.023 13.0055 96.1181 14.6389 97.642C16.2723 99.1658 18.4053 100.007 20.6163 100H59.3634C63.9674 100 67.7566 96.4583 68.1844 91.7708L73.3996 34.6812C73.2284 34.6896 73.0614 34.7083 72.8903 34.7083H56.1263Z" fill="#FFCFCF"/>
<path d="M72.8903 14.2708H57.5707V9.64583C57.5707 4.3125 53.3537 0 48.1385 0H31.8411C26.6463 0 22.409 4.3125 22.409 9.64583V14.2708H7.10975C3.178 14.2708 0 17.5208 0 21.5417V23.2708C0 27.2708 3.178 30.5416 7.10975 30.5416H72.8903C74.7742 30.5362 76.5795 29.7684 77.9117 28.406C79.2438 27.0436 79.9946 25.1975 80 23.2708V21.5417C80 17.5208 76.8016 14.2708 72.8903 14.2708ZM53.4963 14.2708H26.4833V9.64583C26.4833 6.625 28.8872 4.16666 31.8411 4.16666H48.1385C51.0924 4.16666 53.4963 6.625 53.4963 9.64583V14.2708Z" fill="#CAE0EE"/>
</svg>

`
import { createMainNotification } from "../../common/mainNotification.dev"
import "../css/changeChatAppearanceModal.dev.css"

import Uppy from "@uppy/core"
import Dashboard from "@uppy/dashboard"
import Webcam from "@uppy/webcam"
import ImageEditor from "@uppy/image-editor"
import RemoteSources from "@uppy/remote-sources"
import { COMPANION_URL, COMPANION_ALLOWED_HOSTS } from "@uppy/transloadit"
import Transloadit from "@uppy/transloadit"

import "@uppy/core/dist/style.min.css"
import "@uppy/dashboard/dist/style.min.css"
import "@uppy/webcam/dist/style.min.css"
import "@uppy/image-editor/dist/style.min.css"

export async function setChatAppearanceContent(chat) {
  let activeChatInnerModal = document.getElementById("activeChatInnerModal")
  let activeChatInnerModalContent = document.getElementById(
    "activeChatInnerModalContent"
  )
  if (activeChatInnerModalContent) {
    activeChatInnerModalContent.innerHTML = ""
    let chatStyle = document.createElement("div")
    chatStyle.classList.add("chat-style")
    chatStyle.setAttribute("id", "chatStyle")

    chatStyle.innerHTML = `
    <div class="chat-style-title">
    Change Chat Appearance
    </div>
    
    <div class="chat-style-selection">
       <div class="chat-style-selection__title" id="chatStyleSelectionTitle">
       Background color
       </div>

       <div class="chat-style-selection__box" id="chatStyleSelectionBox">
           <div class="chat-style-selection__btn " data-btn-type="background-remove">
   ${svg_backgroundRemoveIcon}
            </div>
           <div class="chat-style-selection__btn chat-style-selection__btn--active"
            data-btn-type="background-color"> ${svg_backgroundColorIcon}
           </div>
            <div class="chat-style-selection__btn" data-btn-type="background-image"> ${svg_backgroundImageIcon}
            </div>
        </div>

    </div>

    <div class="chat-style-feature chat-style-feature--background-color" id="chatStylefeature">
         <div class="chat-style-remove-background">
              <div class="chat-style-remove-background__btn" id="chatStyleBackgroundRemoveBtn">${svg_backgroundRemoveIcon} Remove Background</div>
         </div>
    <div class="chat-style-background-color" id="chatStyleBackgroundColorBox">
        <div class="chat-style-background-color__btn" style="background-color: #E2F6CA;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #FAF1E6;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #A4907C;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #A0C49D;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #A2A378;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #E3F2C1;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #FAF1E6;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #E7AB9A;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #C7E8CA;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #F6F7C1;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #FFF6BD;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #E5D9B6;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #B3FFAE;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #9BA17B;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #FFE9A0;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #FAD5AD;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #99F3BD;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #A4B494;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #D9F8C4;"></div>
        <div class="chat-style-background-color__btn" style="background-color: #D7D1C9;"></div>
        <div class="chat-style-background-color__custom-btn">
            <input type="color" id="backgroundCustomColorBtn" value="#aaaaaa" />
            <label for="backgroundCustomColorBtn" id="backgroundCustomColorLabel">Custom</label>
        </div>

     </div>
     <div class="chat-style-background-image">
        <div class="chat-style-background-image__btn" id="chatStyleBackgroundImageBtn">
        ${svg_backgroundImageIcon}
                <span>----Select Image----</span>
        </div>
     </div>

    </div>

    <div class="chat-style-btn-field" id="chatStyleBtnField">
       <div class="chat-style-btn" id="chatStyleSaveBackgroundChangeBtn">Save</div>
    </div>

    <div class="chat-style-preview-box" id="chatStylePreviewBox" data-chat-background-image-key=''>

    </div>
  `
    activeChatInnerModalContent.insertAdjacentElement("beforeend", chatStyle)

    attachScript(chat)

    if (activeChatInnerModal.classList.contains("hide"))
      activeChatInnerModal.classList.remove("hide")
  }
}

function attachScript(chat) {
  let activeChatInnerModal = document.getElementById("activeChatInnerModal")
  let backgroundValue = "",
    backgroundType = ""
  /////////////////////////////////////////////////////////////
  let chatStyle = document.getElementById("chatStyle")
  let chatStyleSelectionTitle = document.getElementById(
    "chatStyleSelectionTitle"
  )
  let chatStyleSelectionBox = document.getElementById("chatStyleSelectionBox")
  let chatStylefeature = document.getElementById("chatStylefeature")
  let chatStyleBackgroundRemoveBtn = document.getElementById(
    "chatStyleBackgroundRemoveBtn"
  )
  let chatStyleBackgroundColorBox = document.getElementById(
    "chatStyleBackgroundColorBox"
  )
  let backgroundCustomColorBtn = document.getElementById(
    "backgroundCustomColorBtn"
  )
  let backgroundCustomColorLabel = document.getElementById(
    "backgroundCustomColorLabel"
  )
  // let chatStyleBackgroundImageBtn = document.getElementById(
  //   "chatStyleBackgroundImageBtn"
  // )

  let chatStyleBtnField = document.getElementById("chatStyleBtnField")

  let chatStyleSaveBackgroundChangeBtn = document.getElementById(
    "chatStyleSaveBackgroundChangeBtn"
  )
  let chatStylePreviewBox = document.getElementById("chatStylePreviewBox")

  if (chat.hasOwnProperty("chatCustomBackground")) {
    if (chat.chatCustomBackground.hasBackgroundColor) {
      chatStylePreviewBox.style.backgroundColor =
        chat.chatCustomBackground.backgroundColor
    } else if (chat.chatCustomBackground.hasBackgroundImage) {
      chatStylePreviewBox.dataset.chatBackgroundImageKey =
        chat.chatCustomBackground.backgroundImageKey
      chatStylePreviewBox.style.backgroundImage = `url(${chat.chatCustomBackground.backgroundImage})`
    } else {
      chatStylePreviewBox.style.backgroundImage =
        'url("../../assets/images/activeChatBackground.jpg")'
    }
  } else {
    chatStylePreviewBox.style.backgroundImage =
      'url("../../assets/images/activeChatBackground.jpg")'
  }

  function removeActiveClassFromSelectionBtns() {
    let chatStyleSelectionBtns = [
      ...document.getElementsByClassName("chat-style-selection__btn")
    ]
    chatStyleSelectionBtns.forEach(btn => {
      if (btn.classList.contains("chat-style-selection__btn--active"))
        btn.classList.remove("chat-style-selection__btn--active")
    })
  }

  if (chatStyleSelectionBox)
    chatStyleSelectionBox.addEventListener("click", async e => {
      let chatStyleSelectionBtn = e.target.closest(`.chat-style-selection__btn`)

      if (
        chatStyleSelectionBtn &&
        chatStyleSelectionBox.contains(chatStyleSelectionBtn)
      ) {
        removeActiveClassFromSelectionBtns()
        if (
          !chatStyleSelectionBtn.classList.contains(
            "chat-style-selection__btn--active"
          )
        )
          chatStyleSelectionBtn.classList.add(
            "chat-style-selection__btn--active"
          )
        if (chatStyleSelectionBtn.dataset.btnType === "background-remove") {
          chatStyleSelectionTitle.textContent = "Remove background"
          chatStylefeature.className = `chat-style-feature chat-style-feature--background-remove`
        }
        if (chatStyleSelectionBtn.dataset.btnType === "background-color") {
          chatStyleSelectionTitle.textContent = "Background color"

          chatStylefeature.className = `chat-style-feature chat-style-feature--background-color`
        }
        if (chatStyleSelectionBtn.dataset.btnType === "background-image") {
          chatStyleSelectionTitle.textContent = "Background image"
          chatStylefeature.className = `chat-style-feature chat-style-feature--background-image`
        }
      } else {
        return
      }
    })

  function setChatStylePreviewColor(color) {
    chatStylePreviewBox.style.backgroundImage = "none"
    chatStylePreviewBox.style.backgroundColor = color
    backgroundType = "color"
    backgroundValue = color
  }
  function removeChatStylePreviewColor() {
    chatStylePreviewBox.style.backgroundImage =
      'url("../../assets/images/activeChatBackground.jpg")'
    backgroundType = ""
    backgroundValue = ""
  }

  if (chatStyleBackgroundColorBox) {
    chatStyleBackgroundColorBox.addEventListener("click", async e => {
      let chatStyleBackgroundColorBtn = e.target.closest(
        `.chat-style-background-color__btn`
      )

      if (
        chatStyleBackgroundColorBtn &&
        chatStyleBackgroundColorBox.contains(chatStyleBackgroundColorBtn)
      ) {
        let color = chatStyleBackgroundColorBtn.style.backgroundColor
        setChatStylePreviewColor(color)
      } else {
        return
      }
    })
  }

  if (backgroundCustomColorBtn)
    backgroundCustomColorBtn.addEventListener("input", () => {
      let color = backgroundCustomColorBtn.value
      backgroundCustomColorBtn.style.backgroundColor = color
      backgroundCustomColorLabel.style.color = color
      setChatStylePreviewColor(color)
    })
  if (chatStyleBackgroundRemoveBtn)
    chatStyleBackgroundRemoveBtn.addEventListener("click", () => {
      removeChatStylePreviewColor()
    })

  const uppy = new Uppy({
    id: "CHAT_BACKGROUND_PIC",
    autoProceed: false,
    allowMultipleUploadBatches: false,

    onBeforeFileAdded: (currentFile, files) => {
      if (!currentFile.type) {
        uppy.log(`Skipping file because it has no type`)
        uppy.info(`Skipping file because it has no type`, "error", 500)
        return false
      } else {
        const modifiedFile = {
          ...currentFile,
          name: `${Date.now()}`
        }
        return modifiedFile
      }
    },
    // onBeforeUpload: files => {
    //   // We’ll be careful to return a new object, not mutating the original `files`
    //   const updatedFiles = {}
    //   Object.keys(files).forEach(fileID => {
    //     updatedFiles[fileID] = {
    //       ...files[fileID],
    //       name: `${myCustomPrefix}__${files[fileID].name}`
    //     }
    //   })
    //   return updatedFiles
    // },
    restrictions: {
      maxFileSize: 1024 * 1024 * 5 * 1,
      minFileSize: null,
      maxTotalFileSize: 1024 * 1024 * 5 * 1,
      maxNumberOfFiles: 1,
      minNumberOfFiles: 1,
      allowedFileTypes: [".jpg", ".jpeg", ".png", ".gif", ".svg"]
    },

    infoTimeout: 5000,
    locale: {
      strings: {
        companionError: "first connect to provider"
      }
    }
  })
    .use(Dashboard, {
      trigger: "#chatStyleBackgroundImageBtn",
      target: "body",
      inline: false,

      waitForThumbnailsBeforeUpload: false,
      showSelectedFiles: true,
      showRemoveButtonAfterComplete: false,
      singleFileFullScreen: true,
      closeModalOnClickOutside: true,
      closeAfterFinish: false,
      animateOpenClose: true,

      autoOpenFileEditor: false,
      disablePageScrollWhenModalOpen: true,
      proudlyDisplayPoweredByUppy: false,
      theme: "dark",
      locale: {
        strings: {
          dropPasteImportFiles: ""
        }
      }
      // note: "file-size: up to 10MB, file-type: [jpeg  jpg  gif  png]"
    })
    .use(Webcam, {
      target: Dashboard,
      countdown: false,
      modes: ["picture"],
      mirror: true,
      videoConstraints: {},
      showVideoSourceDropdown: false,
      showRecordingLength: false,
      preferredImageMimeType: "image/jpeg",
      preferredVideoMimeType: null
    })
    .use(ImageEditor, { target: Dashboard })
    .use(RemoteSources, {
      target: Dashboard,
      sources: [
        "Unsplash",
        "Instagram",
        "Facebook",
        "GoogleDrive",
        "OneDrive",
        "Dropbox",
        "Box",
        "Url",
        "Zoom"
      ],
      companionUrl: COMPANION_URL,
      companionAllowedHosts: COMPANION_ALLOWED_HOSTS
    })
    // .use(Unsplash, {
    //   target: Dashboard,
    //   companionUrl: COMPANION_URL,
    //   companionAllowedHosts: COMPANION_ALLOWED_HOSTS
    // })
    // .use(Instagram, {
    //   target: Dashboard,
    //   companionUrl: COMPANION_URL,
    //   companionAllowedHosts: COMPANION_ALLOWED_HOSTS
    // })
    .use(Transloadit, {
      waitForEncoding: true,
      waitForMetadata: true,
      // alwaysRunAssembly: false,
      // limit: 20
      assemblyOptions: {
        params: {
          auth: {
            key: "6811ee5b698f4aa0b05a0a65755841c0"
          },
          template_id: "0bedb1fefa9b4a8ba36f61fc541b618d"
        },
        fields: {
          mediaFolder: "chat-background-image"
        }
        // signature: "generated-signature"
        // notify_url: "https://example.com/transloadit_pingback"
      }
    })
  uppy.on("transloadit:complete", assembly => {
    let file = assembly.uploads[0]
    let mediaFolder = assembly.fields.mediaFolder
    let fileKey =
      mediaFolder + "/" + file.type + "/" + file.id + "-" + file.basename
    let fileTempUrl = file.tus_upload_url

    backgroundType = "image"
    backgroundValue = fileKey

    chatStylePreviewBox.style.backgroundImage = `url(
    ${fileTempUrl}
  )`
    chatStylePreviewBox.dataset.chatBackgroundImageKey = fileKey
  })

  chatStyleSaveBackgroundChangeBtn.addEventListener("click", () => {
    if (backgroundType === "") {
      fetch("/chat/remove-background", {
        method: "POST", // or 'PUT'
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ chatId: chat._id })
      })
        .then(response => {
          if (response.ok) {
            return response.json()
          }
          return Promise.reject(response)
        })
        .then(async data => {
          if (data.isSuccess) {
            let { removeActiveChatBackground } = await import(
              "./showActiveChatSection.dev.js"
            )
            removeActiveChatBackground()

            if (!activeChatInnerModal.classList.contains("hide"))
              activeChatInnerModal.classList.add("hide")
            // createMainNotification(
            //   "Chat background removed successfully",
            //   "success"
            // )
          } else {
            createMainNotification(data.error, "error")
          }
        })
        .catch(async err => {
          createMainNotification("Server error, Please try again", "error")
        })
    } else {
      fetch(`/chat/change-background/${chat._id.toString()}`, {
        method: "PATCH", // or 'PUT'
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          backgroundType: backgroundType,
          backgroundValue: backgroundValue
        })
      })
        .then(response => {
          if (response.ok) {
            return response.json()
          }
          return Promise.reject(response)
        })
        .then(async data => {
          if (data.isSuccess) {
            let { changeActiveChatBackground } = await import(
              "./showActiveChatSection.dev.js"
            )

            if (data.isBackgroundChanged) {
              changeActiveChatBackground(
                data.backgroundType,
                data.backgroundValue
              )
              if (!activeChatInnerModal.classList.contains("hide"))
                activeChatInnerModal.classList.add("hide")
              // createMainNotification(
              //   "Chat background changed successfully.",
              //   "success"
              // )
            } else {
              createMainNotification("Chat background is not changed.")
            }
          } else {
            createMainNotification(data.error, "error")
          }
        })
        .catch(async err => {
          createMainNotification("Server error, Please try again", "error")
        })
    }
  })
}
