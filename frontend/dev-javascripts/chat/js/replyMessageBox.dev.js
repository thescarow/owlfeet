let svg_mediaImageIcon = `<svg width="100" height="100" viewBox="0 0 100 100"  xmlns="http://www.w3.org/2000/svg">
<path d="M57.5 20C53.5 20 50 23.5 50 27.5C50 31.5 53.5 35 57.5 35C61.5 35 65 31.5 65 27.5C65 23.5 61.5 20 57.5 20ZM85 0H15C6.5 0 0 6.5 0 15V85C0 93.5 6.5 100 15 100H85C93.5 100 100 93.5 100 85V15C100 6.5 93.5 0 85 0ZM90 59.5L80.5 50C74.5 44.5 65 44.5 59.5 50L55 54.5L40.5 40C34.5 34.5 25 34.5 19.5 40L10 49.5V15C10 12 12 10 15 10H85C88 10 90 12 90 15V59.5Z" />
</svg>
`
let svg_mediaVideoIcon = `<svg width="100" height="65" viewBox="0 0 100 65"  xmlns="http://www.w3.org/2000/svg">
<path d="M94.9525 9.98214C93.4341 9.34699 91.7483 9.14039 90.1046 9.38803C88.4608 9.63566 86.9317 10.3266 85.7071 11.375L74.9625 20.6607V13.9286C74.9625 10.2345 73.383 6.6917 70.5713 4.07958C67.7597 1.46747 63.9463 0 59.97 0H14.9925C11.0162 0 7.20284 1.46747 4.3912 4.07958C1.57956 6.6917 0 10.2345 0 13.9286V51.0714C0 54.7655 1.57956 58.3083 4.3912 60.9204C7.20284 63.5325 11.0162 65 14.9925 65H59.97C63.9463 65 67.7597 63.5325 70.5713 60.9204C73.383 58.3083 74.9625 54.7655 74.9625 51.0714V44.3393L85.7571 53.625C87.3463 54.9614 89.4107 55.7055 91.5542 55.7143C92.7438 55.7117 93.9192 55.4743 95.0025 55.0179C96.4765 54.4639 97.7392 53.5143 98.6294 52.2903C99.5196 51.0663 99.9968 49.6236 100 48.1464V16.8536C99.9928 15.371 99.5082 13.9244 98.6087 12.6999C97.7092 11.4753 96.4359 10.5288 94.9525 9.98214Z" />
</svg>`
let svg_mediaAudioIcon = `<svg width="70" height="100" viewBox="0 0 70 100"  xmlns="http://www.w3.org/2000/svg">
<path d="M35 65C40.3043 65 45.3914 62.8929 49.1421 59.1421C52.8929 55.3914 55 50.3043 55 45V20C55 14.6957 52.8929 9.60859 49.1421 5.85786C45.3914 2.10714 40.3043 0 35 0C29.6957 0 24.6086 2.10714 20.8579 5.85786C17.1071 9.60859 15 14.6957 15 20V45C15 50.3043 17.1071 55.3914 20.8579 59.1421C24.6086 62.8929 29.6957 65 35 65Z" />
<path d="M70 45C70 43.6739 69.4732 42.4021 68.5355 41.4645C67.5979 40.5268 66.3261 40 65 40C63.6739 40 62.4021 40.5268 61.4645 41.4645C60.5268 42.4021 60 43.6739 60 45C60 51.6304 57.3661 57.9893 52.6777 62.6777C47.9893 67.3661 41.6304 70 35 70C28.3696 70 22.0107 67.3661 17.3223 62.6777C12.6339 57.9893 10 51.6304 10 45C10 43.6739 9.47321 42.4021 8.53553 41.4645C7.59785 40.5268 6.32608 40 5 40C3.67392 40 2.40215 40.5268 1.46447 41.4645C0.526785 42.4021 0 43.6739 0 45C0.00985554 53.4092 3.04704 61.5338 8.5559 67.8874C14.0648 74.2409 21.677 78.3987 30 79.6V90H19.45C18.2698 90 17.1379 90.4688 16.3034 91.3034C15.4688 92.1379 15 93.2698 15 94.45V95.55C15 96.7302 15.4688 97.8621 16.3034 98.6966C17.1379 99.5312 18.2698 100 19.45 100H50.55C51.7302 100 52.8621 99.5312 53.6966 98.6966C54.5312 97.8621 55 96.7302 55 95.55V94.45C55 93.2698 54.5312 92.1379 53.6966 91.3034C52.8621 90.4688 51.7302 90 50.55 90H40V79.6C48.323 78.3987 55.9352 74.2409 61.4441 67.8874C66.953 61.5338 69.9901 53.4092 70 45Z" />
</svg>
`
let svg_mediaYoutubeIcon = `<svg width="100" height="68" viewBox="0 0 100 68"  xmlns="http://www.w3.org/2000/svg">
<path d="M99.977 23.9653C100.202 17.6732 98.7797 11.4282 95.8432 5.81006C93.8509 3.50481 91.0858 1.94914 88.03 1.4141C75.3903 0.304237 62.6984 -0.150661 50.0085 0.0513592C37.3649 -0.15983 24.7186 0.280389 12.1233 1.37015C9.63317 1.80849 7.32871 2.9388 5.49115 4.62315C1.40282 8.27179 0.948564 14.514 0.494306 19.7892C-0.164769 29.2737 -0.164769 38.7904 0.494306 48.2749C0.625724 51.244 1.08254 54.1911 1.85708 57.0668C2.4048 59.2871 3.51296 61.3412 5.08232 63.0453C6.93237 64.8189 9.2905 66.0135 11.8508 66.4742C21.6442 67.644 31.5121 68.1288 41.3776 67.9248C57.2766 68.1446 71.2224 67.9248 87.712 66.694C90.3351 66.2616 92.7597 65.0655 94.6621 63.2651C95.9339 62.0339 96.8838 60.5269 97.4331 58.8692C99.0577 54.0451 99.8556 48.9964 99.7953 43.923C99.977 41.4612 99.977 26.6029 99.977 23.9653ZM39.7423 46.5605V19.3496L66.6344 33.021C59.0937 37.0653 49.1454 41.6371 39.7423 46.5605Z" />
</svg>
`
const svg_mediaStickerIcon = `
<svg width="100" height="100" viewBox="0 0 100 100"  xmlns="http://www.w3.org/2000/svg">
<path d="M66.6667 77.7778C66.6667 74.8309 67.8373 72.0048 69.921 69.921C72.0048 67.8373 74.8309 66.6667 77.7778 66.6667H100V16.6667C100 12.2464 98.2441 8.00716 95.1184 4.88155C91.9928 1.75595 87.7536 0 83.3333 0H16.6667C12.2464 0 8.00716 1.75595 4.88155 4.88155C1.75595 8.00716 0 12.2464 0 16.6667V83.3333C0 87.7536 1.75595 91.9928 4.88155 95.1184C8.00716 98.2441 12.2464 100 16.6667 100H66.6667V77.7778ZM66.6667 33.3333C67.7654 33.3333 68.8396 33.6592 69.7532 34.2696C70.6668 34.8801 71.3788 35.7477 71.7993 36.7629C72.2198 37.778 72.3298 38.8951 72.1155 39.9727C71.9011 41.0504 71.372 42.0403 70.595 42.8173C69.8181 43.5942 68.8282 44.1233 67.7505 44.3377C66.6728 44.5521 65.5558 44.442 64.5406 44.0216C63.5255 43.6011 62.6578 42.889 62.0474 41.9754C61.4369 41.0618 61.1111 39.9877 61.1111 38.8889C61.1111 37.4155 61.6964 36.0024 62.7383 34.9605C63.7802 33.9186 65.1932 33.3333 66.6667 33.3333ZM33.3333 33.3333C34.4321 33.3333 35.5062 33.6592 36.4198 34.2696C37.3334 34.8801 38.0455 35.7477 38.466 36.7629C38.8865 37.778 38.9965 38.8951 38.7821 39.9727C38.5678 41.0504 38.0387 42.0403 37.2617 42.8173C36.4847 43.5942 35.4948 44.1233 34.4172 44.3377C33.3395 44.5521 32.2225 44.442 31.2073 44.0216C30.1922 43.6011 29.3245 42.889 28.7141 41.9754C28.1036 41.0618 27.7778 39.9877 27.7778 38.8889C27.7778 37.4155 28.3631 36.0024 29.405 34.9605C30.4468 33.9186 31.8599 33.3333 33.3333 33.3333ZM28.8889 52.2222C29.3266 51.6386 29.875 51.1468 30.5028 50.7751C31.1306 50.4034 31.8254 50.159 32.5477 50.0558C33.2699 49.9527 34.0054 49.9927 34.7121 50.1738C35.4189 50.3549 36.083 50.6734 36.6667 51.1111C40.5132 53.996 45.1918 55.5556 50 55.5556C54.8082 55.5556 59.4867 53.996 63.3333 51.1111C63.917 50.6734 64.5811 50.3549 65.2879 50.1738C65.9946 49.9927 66.7301 49.9527 67.4523 50.0558C68.1746 50.159 68.8694 50.4034 69.4972 50.7751C70.125 51.1468 70.6734 51.6386 71.1111 52.2222C71.5488 52.8059 71.8673 53.47 72.0484 54.1768C72.2295 54.8835 72.2696 55.619 72.1664 56.3412C72.0632 57.0635 71.8188 57.7583 71.4471 58.3861C71.0754 59.0138 70.5837 59.5623 70 60C64.2301 64.3274 57.2123 66.6667 50 66.6667C42.7877 66.6667 35.7699 64.3274 30 60C29.4163 59.5623 28.9246 59.0138 28.5529 58.3861C28.1812 57.7583 27.9368 57.0635 27.8336 56.3412C27.7304 55.619 27.7705 54.8835 27.9516 54.1768C28.1327 53.47 28.4511 52.8059 28.8889 52.2222Z" />
<path d="M77.7778 96.7445L96.7445 77.7778H77.7778V96.7445Z" />
</svg>

`
const svg_mediaVideoClipIcon = `
<svg width="100" height="100" viewBox="0 0 100 100"  xmlns="http://www.w3.org/2000/svg">
<path d="M83.2384 0H16.7616C12.3162 0 8.05279 2.19493 4.90937 6.10194C1.76595 10.0089 0 15.308 0 20.8333V79.1667C0 84.692 1.76595 89.991 4.90937 93.8981C8.05279 97.8051 12.3162 100 16.7616 100H83.2384C87.6838 100 91.9472 97.8051 95.0906 93.8981C98.234 89.991 100 84.692 100 79.1667V20.8333C100 15.308 98.234 10.0089 95.0906 6.10194C91.9472 2.19493 87.6838 0 83.2384 0ZM67.9517 55.5L40.4459 73.8333C39.7145 74.3239 38.8968 74.5816 38.0657 74.5833C36.7321 74.5833 35.453 73.9249 34.51 72.7528C33.567 71.5806 33.0372 69.9909 33.0372 68.3333V31.6667C33.038 30.5862 33.2641 29.5244 33.6935 28.585C34.1229 27.6455 34.7409 26.8605 35.4872 26.3064C36.2335 25.7524 37.0826 25.4483 37.9517 25.4238C38.8208 25.3993 39.6801 25.6552 40.4459 26.1667L67.9517 44.5C68.75 45.0355 69.4169 45.8295 69.8816 46.7977C70.3464 47.766 70.5918 48.8725 70.5918 50C70.5918 51.1275 70.3464 52.234 69.8816 53.2023C69.4169 54.1705 68.75 54.9645 67.9517 55.5ZM39.7419 35.1458L62.0181 50L39.7419 64.8542V35.1458Z" />
</svg>

`
let svg_deletedMessageBlankIcon = `<svg width="100" height="100" viewBox="0 0 100 100"  xmlns="http://www.w3.org/2000/svg">
<path d="M50 0C22.4304 0 0 22.4304 0 50C0 77.5696 22.4304 100 50 100C77.5696 100 100 77.5696 100 50C100 22.4304 77.5696 0 50 0ZM12.5 50C12.5 41.9136 15.0986 34.4372 19.4679 28.3058L71.6942 80.5321C65.5628 84.9014 58.0864 87.5 50 87.5C29.3213 87.5 12.5 70.6787 12.5 50ZM80.5319 71.6942L28.3056 19.4679C34.437 15.0986 41.9134 12.5 49.9998 12.5C70.6785 12.5 87.4998 29.3213 87.4998 50C87.4998 58.0864 84.9012 65.5628 80.5319 71.6942Z" />
</svg>
`

let activeChatInputReplyBox = document.getElementById("activeChatInputReplyBox")

let activeChatInputReplyUser = document.getElementById(
  "activeChatInputReplyUser"
)
let activeChatInputReplyUserMessage = document.getElementById(
  "activeChatInputReplyUserMessage"
)

export async function openReplyMessageBox(messageId) {
  let userMessageBox = document.querySelector(
    `.active-chat-user-message-box[data-message-id="${messageId}"]`
  )
  if (userMessageBox) {
    let messageContent, messageUser
    //reply message user
    messageUser =
      userMessageBox.dataset.senderId.toString() === loginUser._id.toString()
        ? "You"
        : userMessageBox.dataset.senderName

    activeChatInputReplyUser.textContent = messageUser

    if (
      userMessageBox.classList.contains(
        "active-chat-user-message-box--deleted-message"
      )
    ) {
      activeChatInputReplyUserMessage.innerHTML = `${svg_deletedMessageBlankIcon} <span>This Message has been deleted.</span>`
      activeChatInputReplyBox.classList.add(
        "active-chat-input-reply-box--deleted-message"
      )
    } else {
      activeChatInputReplyBox.classList.remove(
        "active-chat-input-reply-box--deleted-message"
      )
      if (
        userMessageBox.classList.contains("active-chat-user-message-box--text")
      ) {
        let userMessageTextContent = userMessageBox.getElementsByClassName(
          "active-chat-user-message-box__content--text"
        )[0]
        if (userMessageTextContent)
          messageContent = userMessageTextContent.textContent

        activeChatInputReplyUserMessage.textContent = messageContent
      } else {
        messageContent = ""
        if (
          userMessageBox.classList.contains(
            "active-chat-user-message-box--video"
          )
        ) {
          messageContent = `${svg_mediaVideoIcon} <span>Video</span>`
        }
        if (
          userMessageBox.classList.contains(
            "active-chat-user-message-box--audio"
          )
        ) {
          messageContent = `${svg_mediaAudioIcon} <span>Audio</span>`
        }
        if (
          userMessageBox.classList.contains(
            "active-chat-user-message-box--image"
          )
        ) {
          messageContent = `${svg_mediaImageIcon} <span>Image</span>`
        }
        if (
          userMessageBox.classList.contains(
            "active-chat-user-message-box--youtube"
          )
        ) {
          messageContent = `${svg_mediaYoutubeIcon} <span>Youtube</span>`
        }
        if (
          userMessageBox.classList.contains(
            "active-chat-user-message-box--video-clip"
          )
        ) {
          messageContent = `${svg_mediaVideoClipIcon} <span>Video clip</span>`
        }
        if (
          userMessageBox.classList.contains(
            "active-chat-user-message-box--sticker"
          )
        ) {
          messageContent = `${svg_mediaStickerIcon} <span>Sticker</span>`
        }

        activeChatInputReplyUserMessage.innerHTML = messageContent
      }
    }

    document
      .getElementById("activeChatInputContainerEnableBox")
      .classList.add("active-chat-input-container__enable-box--reply")
    activeChatInputReplyBox.classList.remove(
      "active-chat-input-reply-box--hide"
    )
    document.getElementById("activeChatInputTextContent").focus()
    document.getElementById("activeChatInputContainer").dataset.repliedTo =
      messageId
  }
  let { adjustMessageContainerBottomPadding } = await import("../chat.dev")
  adjustMessageContainerBottomPadding()
}

export async function closeReplyMessageBox() {
  document
    .getElementById("activeChatInputContainerEnableBox")
    .classList.remove("active-chat-input-container__enable-box--reply")
  activeChatInputReplyBox.classList.add("active-chat-input-reply-box--hide")
  document.getElementById("activeChatInputContainer").dataset.repliedTo = ""
  let { adjustMessageContainerBottomPadding } = await import("../chat.dev")
  adjustMessageContainerBottomPadding()
}
