let svg_group = `<svg width="102" height="83" viewBox="0 0 102 83"  xmlns="http://www.w3.org/2000/svg">
<path d="M1 64V77.5C1 79.9853 3.03509 82 5.54545 82H69.1818C71.6923 82 73.7273 79.9853 73.7273 77.5V64C73.7273 54.059 65.5868 46 55.5455 46H19.1818C9.14027 46 1 54.059 1 64ZM82.745 78.9031C82.5841 80.4475 83.6873 82 85.2559 82H96.4545C98.9645 82 101 79.9853 101 77.5V64C101 54.059 92.8595 46 82.8182 46H78.4155C77.4332 46 76.8941 47.1687 77.4786 47.9503C80.8341 52.4368 82.8182 57.9889 82.8182 64V77.5C82.8182 77.9739 82.7932 78.4419 82.745 78.9031ZM55.5455 19C55.5455 28.9411 47.405 37 37.3636 37C27.3221 37 19.1818 28.9411 19.1818 19C19.1818 9.05887 27.3221 1 37.3636 1C47.405 1 55.5455 9.05887 55.5455 19ZM61.6859 36.7642C60.1368 36.514 59.6091 34.7018 60.4464 33.3878C63.1009 29.2226 64.6368 24.2889 64.6368 19C64.6368 13.7111 63.1009 8.77735 60.4464 4.6122C59.6091 3.29829 60.1368 1.48618 61.6859 1.23589C62.6464 1.08068 63.6323 1 64.6368 1C74.6786 1 82.8186 9.05887 82.8186 19C82.8186 28.9411 74.6786 37 64.6368 37C63.6323 37 62.6464 36.9195 61.6859 36.7642Z"  />
</svg>
`

let svg_chatPic = `<svg width="100" height="100" viewBox="0 0 100 100"  xmlns="http://www.w3.org/2000/svg">
<path d="M85.3378 14.671C80.6984 10.0204 75.1873 6.33078 69.1201 3.81331C63.0528 1.29584 56.5487 0 49.9799 0C43.4112 0 36.907 1.29584 30.8398 3.81331C24.7726 6.33078 19.2615 10.0204 14.6221 14.671C-4.68592 33.9806 -4.87188 65.2823 14.0622 84.8229L14.4263 85.1929L14.4576 85.2242L14.6142 85.3827L14.9803 85.7488C19.1353 89.8269 23.9711 93.1474 29.2694 95.5602L29.7764 95.7873C30.1366 95.9458 30.5007 96.1025 30.8647 96.2532L31.452 96.4901L32.0392 96.7211C32.4581 96.8829 32.8802 97.0382 33.3057 97.187H33.3174C33.7689 97.3475 34.2256 97.5002 34.6876 97.645L35.3981 97.8662C36.0597 98.0685 36.7266 98.2558 37.3986 98.4281L38.072 98.5964C38.4321 98.6865 38.7923 98.7687 39.1544 98.847C39.5165 98.9253 39.8806 99.0036 40.2447 99.0741C40.7014 99.1641 41.1582 99.247 41.6149 99.3227C41.8439 99.3618 42.0729 99.399 42.3039 99.4343C42.5349 99.4695 42.7639 99.5028 42.9949 99.5341L43.5508 99.6085C43.727 99.632 43.9031 99.6535 44.0813 99.6731H44.1302L44.6744 99.7338L45.2224 99.7886L45.7822 99.8375C46.1561 99.8688 46.53 99.8943 46.9058 99.9178L47.5987 99.955H47.6653C47.8904 99.9648 48.1175 99.9746 48.3445 99.9804H48.3778H48.5324C48.6675 99.9804 48.8006 99.9804 48.9357 99.9902H49.0316C49.3448 99.9902 49.6599 100 49.975 100H49.9946C50.8102 100 51.6232 99.9798 52.4336 99.9393C52.8133 99.9217 53.1911 99.8982 53.5689 99.8728H53.6765C53.8723 99.8571 54.068 99.8434 54.2638 99.8258L54.8686 99.771C55.2718 99.7318 55.6744 99.6881 56.0763 99.6398C56.4776 99.5909 56.8769 99.5361 57.2762 99.4793C57.6755 99.4225 58.0748 99.3579 58.4702 99.2835C58.666 99.2502 58.8617 99.215 59.0575 99.1778C59.2532 99.1406 59.449 99.1034 59.6447 99.0662L60.2319 98.9468L60.8661 98.8098L61.3535 98.6982C61.4005 98.6884 61.4494 98.6786 61.4964 98.6649H61.518C61.6765 98.6297 61.8351 98.5905 61.9916 98.5514C62.1874 98.5044 62.3831 98.4555 62.5789 98.4046L63.1661 98.2499C63.5576 98.1442 63.9419 98.0346 64.319 97.9211C64.5148 97.8643 64.7105 97.8055 64.8925 97.7449C65.0746 97.6842 65.2742 97.6255 65.4641 97.5628C65.654 97.5002 65.8439 97.4395 66.0337 97.3671C66.4109 97.2365 66.7873 97.106 67.1632 96.9755L67.7249 96.7661C67.9207 96.6956 68.0968 96.6232 68.2828 96.5507C68.6547 96.4039 69.0227 96.2532 69.3927 96.0985C69.6687 95.983 69.9427 95.8636 70.2167 95.7423C70.4908 95.6209 70.7609 95.4976 71.033 95.3703L71.5243 95.1393C71.6789 95.0669 71.8316 94.9925 71.9843 94.9162C72.2779 94.7713 72.5709 94.6238 72.8632 94.4737C77.2798 92.1844 81.3322 89.252 84.8876 85.7723L84.9796 85.6979C85.1127 85.5883 85.2262 85.4748 85.3261 85.3749C85.4964 85.2046 85.6666 85.0323 85.833 84.8601L85.8565 84.8385L85.9211 84.77C95.0515 75.348 100.108 62.7115 99.9982 49.5913C99.8884 36.4712 94.6208 23.9211 85.3339 14.6534L85.3378 14.671ZM33.0571 21.2465C36.9758 17.3271 42.1321 14.8878 47.6476 14.3443C53.163 13.8008 58.6963 15.1867 63.3045 18.2659C67.9128 21.345 71.3109 25.9269 72.9198 31.2308C74.5288 36.5347 74.249 42.2325 72.1282 47.3532C70.0074 52.474 66.1768 56.7009 61.2891 59.3137C56.4014 61.9265 50.759 62.7636 45.3233 61.6823C39.8876 60.601 34.995 57.6683 31.4791 53.3837C27.9632 49.0992 26.0416 43.7281 26.0417 38.1855C26.0327 35.0383 26.6481 31.9207 27.8523 29.013C29.0566 26.1054 30.8256 23.4656 33.0571 21.2465ZM18.0319 84.586C18.1689 84.4255 18.3079 84.265 18.4469 84.1064L18.4801 84.0751C18.4801 84.0751 18.4801 84.0751 18.4899 84.0653C18.5389 84.0085 18.5898 83.9498 18.6407 83.895L18.948 83.5544C19.0517 83.4408 19.1555 83.3273 19.2612 83.2157L19.3121 83.1609L19.3277 83.1433C19.4315 83.0297 19.5352 82.9201 19.6409 82.8105C19.7994 82.6441 19.96 82.4777 20.1224 82.3152C20.2223 82.2134 20.3182 82.1195 20.4258 82.0137C20.5335 81.908 20.6079 81.8297 20.6999 81.7436L20.8134 81.632C20.9132 81.5361 21.0091 81.4363 21.1129 81.3482L21.154 81.309L21.1677 81.2953L21.2284 81.2385C21.338 81.1328 21.4476 81.031 21.5592 80.9312C21.6277 80.8666 21.6962 80.802 21.7667 80.7354L21.8097 80.6982C21.9135 80.6004 22.0211 80.5025 22.1268 80.4124L22.3676 80.201C22.4772 80.1031 22.5888 80.0053 22.7003 79.9152L22.9822 79.6744C23.0781 79.5922 23.178 79.51 23.2758 79.4297C23.3737 79.3495 23.4951 79.2496 23.6066 79.1615C23.6888 79.093 23.7711 79.0265 23.8552 78.9658L23.8905 78.9384L23.9394 78.8992C24.0333 78.8229 24.1351 78.7485 24.2252 78.6741L24.2467 78.6584C24.3224 78.5971 24.3987 78.5384 24.4757 78.4823L24.5149 78.4509L24.74 78.2806H24.7517L24.7752 78.263C24.9161 78.1554 25.0571 78.0496 25.2 77.9479C25.2372 77.9185 25.2763 77.8891 25.3155 77.8637C25.4623 77.754 25.6091 77.6483 25.7578 77.5446L26.0123 77.3664L26.0456 77.3449L26.3705 77.1198L26.4077 77.0924L26.4547 77.0611L26.5486 77.0004C26.7111 76.8888 26.8736 76.7811 27.038 76.6735C27.2024 76.5658 27.3531 76.4679 27.5136 76.3681C27.6213 76.2996 27.729 76.2311 27.8386 76.1723L27.8973 76.1351L28.3788 75.8395C28.5746 75.7182 28.786 75.5968 28.9915 75.4793L29.062 75.4382H29.0737C29.1892 75.3697 29.3066 75.3051 29.4241 75.2425L29.5004 75.2014L29.5689 75.1622C29.659 75.1113 29.749 75.0604 29.841 75.0115C29.978 74.9351 30.1151 74.8607 30.254 74.7883L30.4498 74.6885L30.4772 74.6748L30.575 74.6239L30.6377 74.5906C30.7865 74.5103 30.9391 74.4359 31.0879 74.3576L31.6184 74.0953L31.8904 73.9622H31.9081L31.957 73.9387L32.0275 73.9054C32.1841 73.8291 32.3426 73.7567 32.5012 73.6842L32.6069 73.6353C32.8026 73.5433 33.0101 73.4532 33.2137 73.3652L33.3448 73.3064L33.8302 73.0989H33.8459L34.4038 72.8718C34.4414 72.8542 34.48 72.8385 34.5193 72.8249H34.531L34.7737 72.7309L35.0282 72.633L35.2513 72.5469C35.4471 72.4764 35.6311 72.4059 35.8209 72.3394C35.864 72.3211 35.9071 72.3054 35.9501 72.2924C36.1165 72.2317 36.2848 72.173 36.4532 72.1182C36.5511 72.0829 36.6489 72.0497 36.7488 72.0183C36.9014 71.9655 37.0561 71.9146 37.2107 71.8676L37.4064 71.805L37.4554 71.7893L37.4887 71.7795C37.6844 71.7227 37.8606 71.664 38.0485 71.6092L49.6756 87.4441L61.9956 71.6249L62.2363 71.6973C62.3968 71.7443 62.5554 71.7952 62.7139 71.8441L62.9253 71.9107L63.3168 72.0379L63.4343 72.0771L63.9001 72.2376H63.9177L64.2192 72.3433L64.4619 72.4333C64.6205 72.4901 64.7771 72.5488 64.9356 72.6095C65.149 72.6898 65.3604 72.772 65.5718 72.8562L65.6657 72.8934L65.7616 72.9325L65.9574 73.0108L66.0141 73.0343L66.0455 73.048L66.0964 73.0676C66.204 73.1087 66.3136 73.1557 66.4193 73.2027C66.5857 73.2712 66.7462 73.3436 66.9106 73.416L66.9596 73.4376L67.0438 73.4748L67.1906 73.5394L67.3354 73.6059C67.3609 73.6177 67.3883 73.6275 67.4137 73.6412L67.721 73.7821L67.7817 73.8115C67.8345 73.835 67.8874 73.8585 67.9402 73.8859H67.95C68.1184 73.9661 68.2906 74.0464 68.457 74.1306L68.6371 74.2206L68.6821 74.2421C68.8211 74.3107 68.9601 74.3792 69.0971 74.4516L69.1715 74.4908H69.1852C69.2107 74.5023 69.2356 74.5153 69.2596 74.5299L69.3339 74.5691L69.3966 74.6004L69.8487 74.8392L70.0112 74.9273C70.1887 75.0226 70.3648 75.1204 70.5397 75.2209C70.5686 75.2351 70.5967 75.2508 70.6239 75.2679C70.8196 75.3795 71.0154 75.493 71.2111 75.6066C71.2483 75.6262 71.2835 75.6496 71.3207 75.6712L71.7768 75.9452C71.8864 76.0118 71.996 76.0784 72.1056 76.141L72.1467 76.1665L72.409 76.3309L72.4364 76.3485H72.4541L72.5774 76.4268L72.6615 76.4816C72.826 76.5854 72.9924 76.693 73.1548 76.8027C73.2018 76.8327 73.2488 76.864 73.2958 76.8966C73.4262 76.9841 73.5567 77.0741 73.6872 77.1668L73.7068 77.1805C73.8086 77.2496 73.9104 77.3201 74.0122 77.3919C74.0983 77.4506 74.1864 77.5113 74.2725 77.5759C74.3586 77.6405 74.478 77.7208 74.5798 77.7952C74.6816 77.8695 74.8382 77.9909 74.9713 78.077L75.0222 78.1162L75.2551 78.2904C75.4313 78.4216 75.6075 78.5567 75.7817 78.6937C75.9226 78.8014 76.0616 78.911 76.2006 79.0226L76.4296 79.2066L76.8309 79.5374C76.8857 79.5805 76.9405 79.6255 76.9933 79.6725C77.1108 79.7704 77.2282 79.8682 77.3437 79.972L77.375 79.9994H77.3848L77.3985 80.0111L77.5336 80.1266C77.6099 80.1912 77.6843 80.2597 77.7606 80.3224L77.8233 80.3792C77.9583 80.4947 78.0934 80.616 78.2265 80.7374C78.5501 81.0284 78.8679 81.3266 79.1798 81.632C79.2842 81.7325 79.3879 81.8343 79.491 81.9374C79.6182 82.0607 79.7435 82.186 79.8688 82.3133C80.2237 82.6708 80.5715 83.0363 80.9121 83.4095C80.9336 83.433 80.9551 83.4545 80.9747 83.478C81.0824 83.5955 81.19 83.7129 81.2957 83.8323L81.3075 83.8441L81.419 83.9713C81.5874 84.1671 81.7518 84.3511 81.9162 84.5429C64.0646 101.124 35.9403 101.139 18.0319 84.586Z" />
<path d="M61.8918 71.527L62.0034 71.5603L49.6834 87.3795L38.0544 71.5466C38.1464 71.5172 38.2403 71.4898 38.3343 71.4643L38.6161 71.3841C38.8314 71.3234 39.0448 71.2647 39.2601 71.2079L39.5674 71.1276L39.6085 71.1178L39.9472 71.0317L40.2858 70.9495L40.3856 70.926L40.6851 70.8555L40.9827 70.789L41.1177 70.7577H41.1588L41.4348 70.6989L41.7128 70.6422C41.8106 70.62 41.9085 70.6004 42.0064 70.5834C42.1493 70.5541 42.2941 70.5267 42.437 70.5012L42.6778 70.4562L43.1436 70.372L43.4921 70.3152L43.8405 70.2604L44.095 70.2232L44.3514 70.188H44.3984H44.4395H44.4884L44.8427 70.143H44.8701H44.9171H44.966C45.1069 70.1254 45.2459 70.1077 45.3869 70.094C45.5278 70.0803 45.6765 70.0608 45.8214 70.0471L46.0798 69.9805C46.252 69.9629 46.4243 69.9492 46.5965 69.9335L47.1309 69.8944L47.5557 69.867H47.6124H47.7025L48.1977 69.8415H48.3152H48.3445L48.7771 69.8258H49.0179H49.3311H49.793H50.0103C50.2334 69.8258 50.4585 69.8258 50.6817 69.8258H50.8637C50.942 69.8258 51.0183 69.8258 51.0966 69.8258C51.2611 69.8258 51.4255 69.8258 51.5899 69.8415H51.6545C51.7994 69.8415 51.9462 69.8513 52.091 69.8591H52.1047L52.5295 69.8846L52.737 69.8963C52.8642 69.8963 52.9895 69.912 53.1167 69.9237H53.1539C53.2772 69.9237 53.4025 69.9413 53.5258 69.9531H53.5434C53.7255 69.9668 53.9055 69.9844 54.0856 70.002H54.16L54.3557 70.0216L54.6278 70.051H54.7042L55.1368 70.0999H55.1818L55.2601 70.1097L55.4402 70.1332L55.8708 70.1919L56.1664 70.235L56.2407 70.2467L56.5911 70.3015L57.1784 70.3994C57.3741 70.4327 57.5522 70.466 57.7382 70.5032C57.9809 70.5502 58.2256 70.5971 58.4683 70.648C58.711 70.6989 58.9518 70.7518 59.1945 70.8066L59.8307 70.9573L60.0421 71.0102L60.1223 71.0298L60.4649 71.1198C60.7428 71.1922 61.0208 71.2686 61.2968 71.3469C61.5042 71.4154 61.698 71.4683 61.8918 71.527Z" fill="transparent"/>
<path d="M85.9309 84.7876L85.1068 83.754C79.2232 76.3953 71.1764 71.0712 62.1032 68.5338C58.1716 67.4133 54.1023 66.8493 50.0142 66.8582H49.8713C46.0379 66.8699 42.222 67.3766 38.5183 68.3655C37.747 68.5691 36.9823 68.7929 36.2242 69.0369C27.8215 71.7605 20.4029 76.8907 14.8883 83.7912L14.0681 84.8209L14.4381 85.1831L14.4694 85.2144L15.0077 85.739C19.1581 89.8129 23.9861 93.1329 29.2753 95.5504L29.7823 95.7775C30.1425 95.9361 30.5065 96.0927 30.8706 96.2434L31.4578 96.4803L32.0451 96.7113C32.4659 96.8718 32.8868 97.0284 33.3115 97.1772H33.3233C33.7774 97.3357 34.2315 97.4884 34.6935 97.6352L35.404 97.8564C36.0656 98.0561 36.7324 98.2434 37.4045 98.4183L38.0778 98.5866C38.438 98.6728 38.7988 98.7563 39.1603 98.8372C39.5218 98.9181 39.8852 98.9938 40.2506 99.0643C40.7073 99.1543 41.164 99.2372 41.6208 99.3129C41.8498 99.352 42.0788 99.3892 42.3098 99.4245C42.5408 99.4597 42.7698 99.493 43.0008 99.5243L43.5567 99.5987C43.7328 99.6222 43.909 99.6437 44.0871 99.6633H44.1361L44.6802 99.724L45.2283 99.7788L45.7881 99.8277C46.162 99.8591 46.5359 99.8845 46.9117 99.908L47.6046 99.9452H47.6712C47.8963 99.955 48.1233 99.9648 48.3504 99.9706H48.3837H48.5383C48.6734 99.9706 48.8065 99.9706 48.9415 99.9804H49.0374C49.3506 99.9804 49.6658 99.9902 49.9809 99.9902H50.0005C50.8161 99.9902 51.6291 99.97 52.4394 99.9295C52.8192 99.9139 53.197 99.8904 53.5747 99.863H53.6824C53.8781 99.8473 54.0739 99.8336 54.2696 99.816L54.8745 99.7612C55.2777 99.724 55.6809 99.679 56.0822 99.63C56.4835 99.5811 56.8828 99.5263 57.2821 99.4695C57.6814 99.4127 58.0807 99.3481 58.4761 99.2737C58.6719 99.2405 58.8676 99.2052 59.0633 99.168C59.2591 99.1308 59.4548 99.0936 59.6506 99.0564L60.2378 98.937L60.872 98.8L61.3594 98.6884C61.4064 98.6786 61.4553 98.6688 61.5023 98.6551H61.5238C61.6824 98.6199 61.8409 98.5808 61.9975 98.5416C62.1933 98.4946 62.389 98.4457 62.5847 98.3948L63.172 98.2401C63.5635 98.1383 63.9478 98.0287 64.3249 97.9113C64.5206 97.8545 64.7164 97.7958 64.8984 97.7351C65.0805 97.6744 65.2801 97.6157 65.47 97.553C65.6599 97.4904 65.8497 97.4297 66.0396 97.3573C66.4174 97.232 66.7952 97.0989 67.169 96.9658L67.7308 96.7563C67.9265 96.6858 68.1027 96.6134 68.2887 96.541C68.6606 96.3941 69.0286 96.2434 69.3985 96.0888C69.6745 95.9733 69.9486 95.8538 70.2226 95.7325C70.4966 95.6111 70.7668 95.4878 71.0388 95.3605L71.5302 95.1295C71.6848 95.0571 71.8375 94.9827 71.9902 94.9064C72.2838 94.7615 72.5767 94.614 72.869 94.464C77.3252 92.1631 81.4098 89.2047 84.9855 85.6881L85.8389 84.8503L85.8624 84.8287L85.9289 84.7622L85.9309 84.7876ZM18.0319 84.5919C18.1689 84.4314 18.3079 84.2708 18.4469 84.1123L18.4801 84.0751C18.4801 84.0751 18.4801 84.0751 18.4899 84.0653C18.5389 84.0085 18.5898 83.9498 18.6407 83.895L18.948 83.5544C19.0517 83.4408 19.1555 83.3273 19.2612 83.2157L19.312 83.1609L19.3277 83.1433C19.4314 83.0297 19.5352 82.9201 19.6409 82.8105C19.7994 82.6441 19.96 82.4777 20.1224 82.3152C20.2222 82.2134 20.3182 82.1195 20.4258 82.0137C20.5335 81.908 20.6079 81.8297 20.6999 81.7436L20.8134 81.632C20.9132 81.5361 21.0091 81.4363 21.1129 81.3482L21.154 81.309L21.1677 81.2953L21.2284 81.2385C21.338 81.1328 21.4476 81.031 21.5592 80.9312C21.6277 80.8666 21.6962 80.802 21.7667 80.7354L21.8097 80.6983C21.9135 80.6004 22.0211 80.5025 22.1268 80.4124L22.3676 80.201C22.4772 80.1031 22.5888 80.0053 22.7003 79.9152L22.9822 79.6744C23.0781 79.5922 23.178 79.51 23.2758 79.4297C23.3737 79.3495 23.4951 79.2496 23.6066 79.1615C23.6888 79.093 23.771 79.0265 23.8552 78.9658L23.8905 78.9384L23.9394 78.8992C24.0333 78.8229 24.1351 78.7485 24.2252 78.6741L24.2467 78.6584C24.3224 78.5971 24.3987 78.5384 24.4757 78.4823L24.5149 78.4509L24.74 78.2806H24.7517L24.7752 78.263C24.9161 78.1554 25.0571 78.0496 25.2 77.9479C25.2372 77.9185 25.2763 77.8891 25.3155 77.8637C25.4623 77.754 25.6091 77.6483 25.7578 77.5446L26.0123 77.3665L26.0456 77.3449L26.3705 77.1198L26.4077 77.0924L26.4547 77.0611L26.5486 77.0004C26.7111 76.8888 26.8736 76.7811 27.038 76.6735C27.2024 76.5658 27.3531 76.4679 27.5136 76.3681C27.6213 76.2996 27.729 76.2311 27.8386 76.1723L27.8973 76.1351L28.3788 75.8395C28.5746 75.7182 28.786 75.5968 28.9915 75.4793L29.062 75.4382H29.0737C29.1892 75.3697 29.3066 75.3051 29.4241 75.2425L29.5004 75.2014L29.5689 75.1622C29.659 75.1113 29.749 75.0604 29.841 75.0115C29.978 74.9351 30.115 74.8607 30.254 74.7883L30.4498 74.6885L30.4772 74.6748L30.575 74.6239L30.6377 74.5906C30.7864 74.5103 30.9391 74.4359 31.0879 74.3576L31.6183 74.0953L31.8904 73.9622H31.908L31.957 73.9387L32.0275 73.9054C32.184 73.8291 32.3426 73.7567 32.5011 73.6842L32.6068 73.6353C32.8026 73.5433 33.0101 73.4532 33.2136 73.3652L33.3448 73.3064L33.8302 73.0989H33.8459L34.4038 72.8718C34.4414 72.8542 34.48 72.8385 34.5192 72.8249H34.531L34.7737 72.7309L35.0282 72.633L35.2513 72.5469C35.4471 72.4764 35.6311 72.4059 35.8209 72.3394C35.864 72.3211 35.9071 72.3054 35.9501 72.2924C36.1165 72.2317 36.2848 72.173 36.4532 72.1182C36.5511 72.0829 36.6489 72.0497 36.7487 72.0183C36.9014 71.9655 37.0561 71.9146 37.2107 71.8676L37.4064 71.805L37.4554 71.7893L37.4887 71.7795C37.6844 71.7227 37.8606 71.664 38.0485 71.6092C38.1405 71.5798 38.2344 71.5524 38.3284 71.527L38.6103 71.4467C38.8256 71.386 39.0389 71.3273 39.2543 71.2705L39.5616 71.1903L39.6027 71.1805L39.9413 71.0944L40.2799 71.0121L40.3798 70.9886L40.6793 70.9182L40.9768 70.8516L41.1118 70.8203H41.1529L41.4289 70.7616L41.7069 70.7048C41.8048 70.6826 41.9026 70.663 42.0005 70.6461C42.1434 70.6167 42.2882 70.5893 42.4311 70.5639L42.6719 70.5188L43.1436 70.372L43.4921 70.3152L43.8405 70.2604L44.0949 70.2232L44.3514 70.188H44.3984H44.4395H44.4884L44.8427 70.143H44.8701H44.9171H44.966C45.1069 70.1254 45.2459 70.1077 45.3868 70.094C45.5278 70.0803 45.6765 70.0608 45.8214 70.0471L46.0798 69.9805C46.252 69.9629 46.4243 69.9492 46.5965 69.9335L47.1309 69.8944L47.5557 69.867H47.6124H47.7025L48.1977 69.8415H48.3151H48.3445L48.7771 69.8258H49.0179H49.331H49.793H50.0103C50.2334 69.8258 50.4585 69.8258 50.6817 69.8258H50.8637C50.942 69.8258 51.0183 69.8258 51.0966 69.8258C51.2611 69.8258 51.4255 69.8258 51.5899 69.8415H51.6545C51.8013 69.8415 51.9462 69.8533 52.091 69.8591H52.1047L52.5295 69.8846L52.737 69.8963C52.8642 69.8963 52.9895 69.912 53.1167 69.9237H53.1539L53.5258 69.9531H53.5434C53.7255 69.9668 53.9055 69.9844 54.0856 70.002H54.16L54.3557 70.0216L54.6278 70.051H54.7042L55.1368 70.0999H55.1818L55.2601 70.1097L55.4402 70.1332L55.8708 70.1919L56.1664 70.235L56.2407 70.2467L56.5911 70.3015L57.1784 70.3994C57.3643 70.4327 57.5522 70.466 57.7382 70.5032C57.9809 70.5502 58.2256 70.5971 58.4683 70.648C58.711 70.6989 58.9518 70.7518 59.1945 70.8066L59.8307 70.9573L60.0421 71.0102L60.1223 71.0298L60.4649 71.1198C60.7428 71.1922 61.0208 71.2686 61.2968 71.3469C61.4925 71.4017 61.6882 71.4546 61.884 71.5133L61.9956 71.5466L62.2363 71.619C62.3968 71.666 62.5554 71.7169 62.7139 71.7658L62.9253 71.8324L63.3168 71.9596L63.4343 71.9988L63.9001 72.1593H63.9178L64.2192 72.265L64.4619 72.355C64.6205 72.4118 64.7771 72.4705 64.9356 72.5312C65.149 72.6115 65.3604 72.6937 65.5718 72.7779L65.6657 72.8151L65.7616 72.8542L65.9574 72.9325L66.0141 72.956L66.0455 72.9697L66.0964 72.9893C66.204 73.0304 66.3136 73.0774 66.4193 73.1244C66.5857 73.1929 66.7462 73.2653 66.9106 73.3377L66.9596 73.3593L67.0438 73.3965L67.1906 73.4611L67.3354 73.5276C67.3609 73.5394 67.3883 73.5492 67.4137 73.5629L67.721 73.7038L67.7817 73.7332C67.8345 73.7567 67.8874 73.7802 67.9402 73.8076H67.95C68.1184 73.8878 68.2906 73.9681 68.457 74.0523L68.6371 74.1423L68.6821 74.1638C68.8211 74.2324 68.9601 74.3009 69.0971 74.3733L69.1715 74.4125H69.1852C69.2107 74.424 69.2356 74.437 69.2596 74.4516L69.3339 74.4908L69.3966 74.5221C69.5473 74.5984 69.7 74.6807 69.8487 74.7609L70.0112 74.849C70.1887 74.9443 70.3648 75.0421 70.5397 75.1426C70.5686 75.1568 70.5967 75.1725 70.6239 75.1896C70.8196 75.2992 71.0154 75.4128 71.2111 75.5283C71.2483 75.5479 71.2835 75.5713 71.3207 75.5929C71.4734 75.6829 71.6261 75.773 71.7768 75.8669C71.8864 75.9335 71.996 76.0001 72.1056 76.0627L72.1467 76.0882L72.409 76.2526L72.4364 76.2702H72.4541L72.5774 76.3485L72.6615 76.4033C72.826 76.5071 72.9924 76.6147 73.1548 76.7244C73.2018 76.7544 73.2488 76.7857 73.2958 76.8183C73.4308 76.9064 73.562 76.9965 73.6872 77.0885L73.7068 77.1022C73.8086 77.1713 73.9104 77.2418 74.0122 77.3136C74.0983 77.3723 74.1864 77.433 74.2725 77.4976C74.3586 77.5622 74.478 77.6425 74.5798 77.7169C74.6816 77.7912 74.8382 77.9126 74.9713 77.9987L75.0222 78.0379L75.2551 78.2121C75.4313 78.3433 75.6075 78.4784 75.7817 78.6154C75.9226 78.723 76.0616 78.8327 76.2006 78.9443L76.4296 79.1283L76.8309 79.4591C76.8857 79.5022 76.9405 79.5472 76.9933 79.5942C77.1127 79.6921 77.2282 79.7899 77.3437 79.8937L77.375 79.9211H77.3848L77.3985 79.9328L77.5336 80.0483C77.6099 80.1129 77.6843 80.1814 77.7606 80.2441L77.8233 80.3009C77.9583 80.4164 78.0934 80.5377 78.2265 80.6591C78.5501 80.9501 78.8679 81.2483 79.1798 81.5537C79.2842 81.6542 79.3879 81.756 79.491 81.8591C79.6182 81.9824 79.7435 82.1077 79.8688 82.235C80.2237 82.5925 80.5715 82.958 80.9121 83.3312C80.9336 83.3547 80.9551 83.3762 80.9747 83.3997C81.0824 83.5172 81.19 83.6346 81.2957 83.754L81.3075 83.7658L81.4191 83.893C81.5874 84.0888 81.7518 84.2728 81.9162 84.4646C64.0646 101.124 35.9403 101.139 18.0319 84.586V84.5919Z" />
<path d="M61.4025 69.9453L49.7186 84.9462L38.5868 69.7847C42.2176 68.8166 45.959 68.3257 49.7167 68.3244C53.6686 68.3147 57.6023 68.8603 61.4025 69.9453Z" />
<path d="M61.8077 68.5338C57.9241 67.4265 53.9057 66.8632 49.8674 66.8601H49.7147C45.8288 66.8612 41.9596 67.3693 38.2051 68.3714L36.1283 68.9254L36.2124 69.0409L38.0544 71.5466L49.6814 87.3814L62.0014 71.5622L63.8923 69.1348L61.8077 68.5338ZM41.0805 70.7009C43.9205 70.0992 46.8156 69.7954 49.7186 69.7945H49.885C52.9073 69.8002 55.9198 70.1396 58.8676 70.8066L49.7519 82.509L41.1216 70.7635L41.0805 70.7009Z" />
</svg>
`

import { timeDifferenceFromNow } from "../../common/calculateTimeDifference.dev"

let allChatChatBoxContainer = document.getElementById("allChatChatBoxContainer")

export function updateAllChatSection(message) {
  let chatBox = allChatChatBoxContainer.querySelector(
    `.chat-box[data-chat-id = "${message.chat._id.toString()}"]`
  )

  if (!chatBox) {
    chatBox = createChatBox(message.chat)
  }

  updateChatBoxLatestMessage(chatBox, message)

  // this will shift the chat box to first position
  allChatChatBoxContainer.insertBefore(
    chatBox,
    allChatChatBoxContainer.firstChild
  )
}

export function createChatBox(chat) {
  console.log("createdChatBox:", chat)

  let chatBox = document.createElement("div")
  chatBox.classList.add("chat-box")
  chatBox.dataset.chatId = chat._id

  let chatBoxInnerHtml = `<div class="chat-box__column chat-box__column--img">
             <div class="chat-box__pic chat-box__pic--hide-img">
               <img src='' alt="chat img">
              ${svg_chatPic}
            </div>
  </div>
  <div class="chat-box__column chat-box__column--data">
      <div class="chat-box__row">
       ${
         chat.isGroupChat === true
           ? `<div class="chat-box__icon">${svg_group}</div>`
           : ""
       }
       <div class="chat-box__name"></div>
  </div>


  <div class="chat-box__latest-message-box">
          <div class="chat-box__sender"></div>
          <div class="chat-box__latest-message"></div>
  </div>
 
</div>
<div class="chat-box__unseen-message-count">9+</div>
<div class="chat-box__latest-message-time"></div>
`

  chatBox.insertAdjacentHTML("beforeend", chatBoxInnerHtml)
  allChatChatBoxContainer.insertBefore(
    chatBox,
    allChatChatBoxContainer.firstChild
  )

  chatBox.getElementsByClassName("chat-box__name")[0].textContent =
    chat.chatName

  let chatBoxPic = chatBox.getElementsByClassName("chat-box__pic")[0]
  if (chat.hasOwnProperty("chatPic") && chat.chatPic !== "") {
    chatBoxPic.querySelector("img").src = chat.chatPic
    chatBoxPic.classList.remove("chat-box__pic--hide-img")
    chatBoxPic.classList.add("chat-box__pic--hide-svg")
  } else {
    chatBoxPic.classList.remove("chat-box__pic--hide-svg")
    chatBoxPic.classList.add("chat-box__pic--hide-img")
  }

  chatBox.getElementsByClassName("chat-box__name")[0].textContent =
    chat.chatName

  if (chat.latestMessage) {
    updateChatBoxLatestMessage(chatBox, chat.latestMessage)
  } else {
    if (chat.chatCreatedTime) {
      chatBox.getElementsByClassName(
        "chat-box__latest-message-time"
      )[0].textContent = timeDifferenceFromNow(chat.chatCreatedTime)
    }
  }

  // attach event to this chat box
  chatBox.addEventListener("click", async () => {
    let { fetchActiveChat } = await import("./fetchActiveChat.dev")
    fetchActiveChat(chat._id)
  })

  return chatBox
}

export function updateChatBoxLatestMessage(chatBox, message) {
  let sender =
    message.sender._id.toString() === loginUser._id.toString()
      ? "You:"
      : message.sender.firstName + ":"
  chatBox.getElementsByClassName("chat-box__sender")[0].textContent = sender

  let latestMessage =
    message.hasMediaContent == true
      ? message.mediaContentType.charAt(0).toUpperCase() +
        message.mediaContentType.slice(1)
      : message.textContent
  chatBox.getElementsByClassName("chat-box__latest-message")[0].textContent =
    latestMessage

  let latestMessageTime = timeDifferenceFromNow(message.createdAt)
  chatBox.getElementsByClassName(
    "chat-box__latest-message-time"
  )[0].textContent = latestMessageTime
}

export function updateChatBox(chat) {
  let chatBox = allChatChatBoxContainer.querySelector(
    `.chat-box[data-chat-id = "${chat._id.toString()}"]`
  )

  chatBox.getElementsByClassName("chat-box__name")[0].textContent =
    chat.chatName

  let chatBoxPic = chatBox.getElementsByClassName("chat-box__pic")[0]

  if (chat.hasOwnProperty("chatPic") && chat.chatPic !== "") {
    chatBoxPic.querySelector("img").src = chat.chatPic
    chatBoxPic.classList.remove("chat-box__pic--hide-img")
    chatBoxPic.classList.add("chat-box__pic--hide-svg")
  } else {
    chatBoxPic.classList.add("chat-box__pic--hide-img")
    chatBoxPic.classList.remove("chat-box__pic--hide-svg")
  }
}
export function clearChatBoxLatestMessage(chatId) {
  console.log("called")
  let chatBox = allChatChatBoxContainer.querySelector(
    `.chat-box[data-chat-id = "${chatId.toString()}"]`
  )

  if (chatBox) {
    chatBox.getElementsByClassName("chat-box__sender")[0].textContent = ""

    chatBox.getElementsByClassName("chat-box__latest-message")[0].textContent =
      ""

    chatBox.getElementsByClassName(
      "chat-box__latest-message-time"
    )[0].textContent = ""
    console.log("inside chatBox")
  }
}
